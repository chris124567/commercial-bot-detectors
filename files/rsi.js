/* Retrieved from https://robertsspaceindustries.com/cache/en/rsi-external-js.js?v=4.9.0 */
/*! jQuery v1.9.0 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license */
(function(e, t) {
    "use strict";

    function n(e) {
        var t = e.length,
            n = st.type(e);
        return st.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || "function" !== n && (0 === t || "number" == typeof t && t > 0 && t - 1 in e)
    }

    function r(e) {
        var t = Tt[e] = {};
        return st.each(e.match(lt) || [], function(e, n) {
            t[n] = !0
        }), t
    }

    function i(e, n, r, i) {
        if (st.acceptData(e)) {
            var o, a, s = st.expando,
                u = "string" == typeof n,
                l = e.nodeType,
                c = l ? st.cache : e,
                f = l ? e[s] : e[s] && s;
            if (f && c[f] && (i || c[f].data) || !u || r !== t) return f || (l ? e[s] = f = K.pop() || st.guid++ : f = s), c[f] || (c[f] = {}, l || (c[f].toJSON = st.noop)), ("object" == typeof n || "function" == typeof n) && (i ? c[f] = st.extend(c[f], n) : c[f].data = st.extend(c[f].data, n)), o = c[f], i || (o.data || (o.data = {}), o = o.data), r !== t && (o[st.camelCase(n)] = r), u ? (a = o[n], null == a && (a = o[st.camelCase(n)])) : a = o, a
        }
    }

    function o(e, t, n) {
        if (st.acceptData(e)) {
            var r, i, o, a = e.nodeType,
                u = a ? st.cache : e,
                l = a ? e[st.expando] : st.expando;
            if (u[l]) {
                if (t && (r = n ? u[l] : u[l].data)) {
                    st.isArray(t) ? t = t.concat(st.map(t, st.camelCase)) : t in r ? t = [t] : (t = st.camelCase(t), t = t in r ? [t] : t.split(" "));
                    for (i = 0, o = t.length; o > i; i++) delete r[t[i]];
                    if (!(n ? s : st.isEmptyObject)(r)) return
                }(n || (delete u[l].data, s(u[l]))) && (a ? st.cleanData([e], !0) : st.support.deleteExpando || u != u.window ? delete u[l] : u[l] = null)
            }
        }
    }

    function a(e, n, r) {
        if (r === t && 1 === e.nodeType) {
            var i = "data-" + n.replace(Nt, "-$1").toLowerCase();
            if (r = e.getAttribute(i), "string" == typeof r) {
                try {
                    r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : wt.test(r) ? st.parseJSON(r) : r
                } catch (o) {}
                st.data(e, n, r)
            } else r = t
        }
        return r
    }

    function s(e) {
        var t;
        for (t in e)
            if (("data" !== t || !st.isEmptyObject(e[t])) && "toJSON" !== t) return !1;
        return !0
    }

    function u() {
        return !0
    }

    function l() {
        return !1
    }

    function c(e, t) {
        do e = e[t]; while (e && 1 !== e.nodeType);
        return e
    }

    function f(e, t, n) {
        if (t = t || 0, st.isFunction(t)) return st.grep(e, function(e, r) {
            var i = !!t.call(e, r, e);
            return i === n
        });
        if (t.nodeType) return st.grep(e, function(e) {
            return e === t === n
        });
        if ("string" == typeof t) {
            var r = st.grep(e, function(e) {
                return 1 === e.nodeType
            });
            if (Wt.test(t)) return st.filter(t, r, !n);
            t = st.filter(t, r)
        }
        return st.grep(e, function(e) {
            return st.inArray(e, t) >= 0 === n
        })
    }

    function p(e) {
        var t = zt.split("|"),
            n = e.createDocumentFragment();
        if (n.createElement)
            for (; t.length;) n.createElement(t.pop());
        return n
    }

    function d(e, t) {
        return e.getElementsByTagName(t)[0] || e.appendChild(e.ownerDocument.createElement(t))
    }

    function h(e) {
        var t = e.getAttributeNode("type");
        return e.type = (t && t.specified) + "/" + e.type, e
    }

    function g(e) {
        var t = nn.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e
    }

    function m(e, t) {
        for (var n, r = 0; null != (n = e[r]); r++) st._data(n, "globalEval", !t || st._data(t[r], "globalEval"))
    }

    function y(e, t) {
        if (1 === t.nodeType && st.hasData(e)) {
            var n, r, i, o = st._data(e),
                a = st._data(t, o),
                s = o.events;
            if (s) {
                delete a.handle, a.events = {};
                for (n in s)
                    for (r = 0, i = s[n].length; i > r; r++) st.event.add(t, n, s[n][r])
            }
            a.data && (a.data = st.extend({}, a.data))
        }
    }

    function v(e, t) {
        var n, r, i;
        if (1 === t.nodeType) {
            if (n = t.nodeName.toLowerCase(), !st.support.noCloneEvent && t[st.expando]) {
                r = st._data(t);
                for (i in r.events) st.removeEvent(t, i, r.handle);
                t.removeAttribute(st.expando)
            }
            "script" === n && t.text !== e.text ? (h(t).text = e.text, g(t)) : "object" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), st.support.html5Clone && e.innerHTML && !st.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === n && Zt.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === n ? t.defaultSelected = t.selected = e.defaultSelected : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
        }
    }

    function b(e, n) {
        var r, i, o = 0,
            a = e.getElementsByTagName !== t ? e.getElementsByTagName(n || "*") : e.querySelectorAll !== t ? e.querySelectorAll(n || "*") : t;
        if (!a)
            for (a = [], r = e.childNodes || e; null != (i = r[o]); o++) !n || st.nodeName(i, n) ? a.push(i) : st.merge(a, b(i, n));
        return n === t || n && st.nodeName(e, n) ? st.merge([e], a) : a
    }

    function x(e) {
        Zt.test(e.type) && (e.defaultChecked = e.checked)
    }

    function T(e, t) {
        if (t in e) return t;
        for (var n = t.charAt(0).toUpperCase() + t.slice(1), r = t, i = Nn.length; i--;)
            if (t = Nn[i] + n, t in e) return t;
        return r
    }

    function w(e, t) {
        return e = t || e, "none" === st.css(e, "display") || !st.contains(e.ownerDocument, e)
    }

    function N(e, t) {
        for (var n, r = [], i = 0, o = e.length; o > i; i++) n = e[i], n.style && (r[i] = st._data(n, "olddisplay"), t ? (r[i] || "none" !== n.style.display || (n.style.display = ""), "" === n.style.display && w(n) && (r[i] = st._data(n, "olddisplay", S(n.nodeName)))) : r[i] || w(n) || st._data(n, "olddisplay", st.css(n, "display")));
        for (i = 0; o > i; i++) n = e[i], n.style && (t && "none" !== n.style.display && "" !== n.style.display || (n.style.display = t ? r[i] || "" : "none"));
        return e
    }

    function C(e, t, n) {
        var r = mn.exec(t);
        return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
    }

    function k(e, t, n, r, i) {
        for (var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; 4 > o; o += 2) "margin" === n && (a += st.css(e, n + wn[o], !0, i)), r ? ("content" === n && (a -= st.css(e, "padding" + wn[o], !0, i)), "margin" !== n && (a -= st.css(e, "border" + wn[o] + "Width", !0, i))) : (a += st.css(e, "padding" + wn[o], !0, i), "padding" !== n && (a += st.css(e, "border" + wn[o] + "Width", !0, i)));
        return a
    }

    function E(e, t, n) {
        var r = !0,
            i = "width" === t ? e.offsetWidth : e.offsetHeight,
            o = ln(e),
            a = st.support.boxSizing && "border-box" === st.css(e, "boxSizing", !1, o);
        if (0 >= i || null == i) {
            if (i = un(e, t, o), (0 > i || null == i) && (i = e.style[t]), yn.test(i)) return i;
            r = a && (st.support.boxSizingReliable || i === e.style[t]), i = parseFloat(i) || 0
        }
        return i + k(e, t, n || (a ? "border" : "content"), r, o) + "px"
    }

    function S(e) {
        var t = V,
            n = bn[e];
        return n || (n = A(e, t), "none" !== n && n || (cn = (cn || st("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(t.documentElement), t = (cn[0].contentWindow || cn[0].contentDocument).document, t.write("<!doctype html><html><body>"), t.close(), n = A(e, t), cn.detach()), bn[e] = n), n
    }

    function A(e, t) {
        var n = st(t.createElement(e)).appendTo(t.body),
            r = st.css(n[0], "display");
        return n.remove(), r
    }

    function j(e, t, n, r) {
        var i;
        if (st.isArray(t)) st.each(t, function(t, i) {
            n || kn.test(e) ? r(e, i) : j(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r)
        });
        else if (n || "object" !== st.type(t)) r(e, t);
        else
            for (i in t) j(e + "[" + i + "]", t[i], n, r)
    }

    function D(e) {
        return function(t, n) {
            "string" != typeof t && (n = t, t = "*");
            var r, i = 0,
                o = t.toLowerCase().match(lt) || [];
            if (st.isFunction(n))
                for (; r = o[i++];) "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
        }
    }

    function L(e, n, r, i) {
        function o(u) {
            var l;
            return a[u] = !0, st.each(e[u] || [], function(e, u) {
                var c = u(n, r, i);
                return "string" != typeof c || s || a[c] ? s ? !(l = c) : t : (n.dataTypes.unshift(c), o(c), !1)
            }), l
        }
        var a = {},
            s = e === $n;
        return o(n.dataTypes[0]) || !a["*"] && o("*")
    }

    function H(e, n) {
        var r, i, o = st.ajaxSettings.flatOptions || {};
        for (r in n) n[r] !== t && ((o[r] ? e : i || (i = {}))[r] = n[r]);
        return i && st.extend(!0, e, i), e
    }

    function M(e, n, r) {
        var i, o, a, s, u = e.contents,
            l = e.dataTypes,
            c = e.responseFields;
        for (o in c) o in r && (n[c[o]] = r[o]);
        for (;
            "*" === l[0];) l.shift(), i === t && (i = e.mimeType || n.getResponseHeader("Content-Type"));
        if (i)
            for (o in u)
                if (u[o] && u[o].test(i)) {
                    l.unshift(o);
                    break
                } if (l[0] in r) a = l[0];
        else {
            for (o in r) {
                if (!l[0] || e.converters[o + " " + l[0]]) {
                    a = o;
                    break
                }
                s || (s = o)
            }
            a = a || s
        }
        return a ? (a !== l[0] && l.unshift(a), r[a]) : t
    }

    function q(e, t) {
        var n, r, i, o, a = {},
            s = 0,
            u = e.dataTypes.slice(),
            l = u[0];
        if (e.dataFilter && (t = e.dataFilter(t, e.dataType)), u[1])
            for (n in e.converters) a[n.toLowerCase()] = e.converters[n];
        for (; i = u[++s];)
            if ("*" !== i) {
                if ("*" !== l && l !== i) {
                    if (n = a[l + " " + i] || a["* " + i], !n)
                        for (r in a)
                            if (o = r.split(" "), o[1] === i && (n = a[l + " " + o[0]] || a["* " + o[0]])) {
                                n === !0 ? n = a[r] : a[r] !== !0 && (i = o[0], u.splice(s--, 0, i));
                                break
                            } if (n !== !0)
                        if (n && e["throws"]) t = n(t);
                        else try {
                            t = n(t)
                        } catch (c) {
                            return {
                                state: "parsererror",
                                error: n ? c : "No conversion from " + l + " to " + i
                            }
                        }
                }
                l = i
            } return {
            state: "success",
            data: t
        }
    }

    function _() {
        try {
            return new e.XMLHttpRequest
        } catch (t) {}
    }

    function F() {
        try {
            return new e.ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {}
    }

    function O() {
        return setTimeout(function() {
            Qn = t
        }), Qn = st.now()
    }

    function B(e, t) {
        st.each(t, function(t, n) {
            for (var r = (rr[t] || []).concat(rr["*"]), i = 0, o = r.length; o > i; i++)
                if (r[i].call(e, t, n)) return
        })
    }

    function P(e, t, n) {
        var r, i, o = 0,
            a = nr.length,
            s = st.Deferred().always(function() {
                delete u.elem
            }),
            u = function() {
                if (i) return !1;
                for (var t = Qn || O(), n = Math.max(0, l.startTime + l.duration - t), r = n / l.duration || 0, o = 1 - r, a = 0, u = l.tweens.length; u > a; a++) l.tweens[a].run(o);
                return s.notifyWith(e, [l, o, n]), 1 > o && u ? n : (s.resolveWith(e, [l]), !1)
            },
            l = s.promise({
                elem: e,
                props: st.extend({}, t),
                opts: st.extend(!0, {
                    specialEasing: {}
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: Qn || O(),
                duration: n.duration,
                tweens: [],
                createTween: function(t, n) {
                    var r = st.Tween(e, l.opts, t, n, l.opts.specialEasing[t] || l.opts.easing);
                    return l.tweens.push(r), r
                },
                stop: function(t) {
                    var n = 0,
                        r = t ? l.tweens.length : 0;
                    if (i) return this;
                    for (i = !0; r > n; n++) l.tweens[n].run(1);
                    return t ? s.resolveWith(e, [l, t]) : s.rejectWith(e, [l, t]), this
                }
            }),
            c = l.props;
        for (R(c, l.opts.specialEasing); a > o; o++)
            if (r = nr[o].call(l, e, c, l.opts)) return r;
        return B(l, c), st.isFunction(l.opts.start) && l.opts.start.call(e, l), st.fx.timer(st.extend(u, {
            elem: e,
            anim: l,
            queue: l.opts.queue
        })), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
    }

    function R(e, t) {
        var n, r, i, o, a;
        for (n in e)
            if (r = st.camelCase(n), i = t[r], o = e[n], st.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), a = st.cssHooks[r], a && "expand" in a) {
                o = a.expand(o), delete e[r];
                for (n in o) n in e || (e[n] = o[n], t[n] = i)
            } else t[r] = i
    }

    function W(e, t, n) {
        var r, i, o, a, s, u, l, c, f, p = this,
            d = e.style,
            h = {},
            g = [],
            m = e.nodeType && w(e);
        n.queue || (c = st._queueHooks(e, "fx"), null == c.unqueued && (c.unqueued = 0, f = c.empty.fire, c.empty.fire = function() {
            c.unqueued || f()
        }), c.unqueued++, p.always(function() {
            p.always(function() {
                c.unqueued--, st.queue(e, "fx").length || c.empty.fire()
            })
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [d.overflow, d.overflowX, d.overflowY], "inline" === st.css(e, "display") && "none" === st.css(e, "float") && (st.support.inlineBlockNeedsLayout && "inline" !== S(e.nodeName) ? d.zoom = 1 : d.display = "inline-block")), n.overflow && (d.overflow = "hidden", st.support.shrinkWrapBlocks || p.done(function() {
            d.overflow = n.overflow[0], d.overflowX = n.overflow[1], d.overflowY = n.overflow[2]
        }));
        for (r in t)
            if (o = t[r], Zn.exec(o)) {
                if (delete t[r], u = u || "toggle" === o, o === (m ? "hide" : "show")) continue;
                g.push(r)
            } if (a = g.length) {
            s = st._data(e, "fxshow") || st._data(e, "fxshow", {}), "hidden" in s && (m = s.hidden), u && (s.hidden = !m), m ? st(e).show() : p.done(function() {
                st(e).hide()
            }), p.done(function() {
                var t;
                st._removeData(e, "fxshow");
                for (t in h) st.style(e, t, h[t])
            });
            for (r = 0; a > r; r++) i = g[r], l = p.createTween(i, m ? s[i] : 0), h[i] = s[i] || st.style(e, i), i in s || (s[i] = l.start, m && (l.end = l.start, l.start = "width" === i || "height" === i ? 1 : 0))
        }
    }

    function $(e, t, n, r, i) {
        return new $.prototype.init(e, t, n, r, i)
    }

    function I(e, t) {
        var n, r = {
                height: e
            },
            i = 0;
        for (t = t ? 1 : 0; 4 > i; i += 2 - t) n = wn[i], r["margin" + n] = r["padding" + n] = e;
        return t && (r.opacity = r.width = e), r
    }

    function z(e) {
        return st.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1
    }
    var X, U, V = e.document,
        Y = e.location,
        J = e.jQuery,
        G = e.$,
        Q = {},
        K = [],
        Z = "1.9.0",
        et = K.concat,
        tt = K.push,
        nt = K.slice,
        rt = K.indexOf,
        it = Q.toString,
        ot = Q.hasOwnProperty,
        at = Z.trim,
        st = function(e, t) {
            return new st.fn.init(e, t, X)
        },
        ut = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        lt = /\S+/g,
        ct = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        ft = /^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        pt = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        dt = /^[\],:{}\s]*$/,
        ht = /(?:^|:|,)(?:\s*\[)+/g,
        gt = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
        mt = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
        yt = /^-ms-/,
        vt = /-([\da-z])/gi,
        bt = function(e, t) {
            return t.toUpperCase()
        },
        xt = function() {
            V.addEventListener ? (V.removeEventListener("DOMContentLoaded", xt, !1), st.ready()) : "complete" === V.readyState && (V.detachEvent("onreadystatechange", xt), st.ready())
        };
    st.fn = st.prototype = {
        jquery: Z,
        constructor: st,
        init: function(e, n, r) {
            var i, o;
            if (!e) return this;
            if ("string" == typeof e) {
                if (i = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : ft.exec(e), !i || !i[1] && n) return !n || n.jquery ? (n || r).find(e) : this.constructor(n).find(e);
                if (i[1]) {
                    if (n = n instanceof st ? n[0] : n, st.merge(this, st.parseHTML(i[1], n && n.nodeType ? n.ownerDocument || n : V, !0)), pt.test(i[1]) && st.isPlainObject(n))
                        for (i in n) st.isFunction(this[i]) ? this[i](n[i]) : this.attr(i, n[i]);
                    return this
                }
                if (o = V.getElementById(i[2]), o && o.parentNode) {
                    if (o.id !== i[2]) return r.find(e);
                    this.length = 1, this[0] = o
                }
                return this.context = V, this.selector = e, this
            }
            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : st.isFunction(e) ? r.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), st.makeArray(e, this))
        },
        selector: "",
        length: 0,
        size: function() {
            return this.length
        },
        toArray: function() {
            return nt.call(this)
        },
        get: function(e) {
            return null == e ? this.toArray() : 0 > e ? this[this.length + e] : this[e]
        },
        pushStack: function(e) {
            var t = st.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t
        },
        each: function(e, t) {
            return st.each(this, e, t)
        },
        ready: function(e) {
            return st.ready.promise().done(e), this
        },
        slice: function() {
            return this.pushStack(nt.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(e) {
            var t = this.length,
                n = +e + (0 > e ? t : 0);
            return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
        },
        map: function(e) {
            return this.pushStack(st.map(this, function(t, n) {
                return e.call(t, n, t)
            }))
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: tt,
        sort: [].sort,
        splice: [].splice
    }, st.fn.init.prototype = st.fn, st.extend = st.fn.extend = function() {
        var e, n, r, i, o, a, s = arguments[0] || {},
            u = 1,
            l = arguments.length,
            c = !1;
        for ("boolean" == typeof s && (c = s, s = arguments[1] || {}, u = 2), "object" == typeof s || st.isFunction(s) || (s = {}), l === u && (s = this, --u); l > u; u++)
            if (null != (e = arguments[u]))
                for (n in e) r = s[n], i = e[n], s !== i && (c && i && (st.isPlainObject(i) || (o = st.isArray(i))) ? (o ? (o = !1, a = r && st.isArray(r) ? r : []) : a = r && st.isPlainObject(r) ? r : {}, s[n] = st.extend(c, a, i)) : i !== t && (s[n] = i));
        return s
    }, st.extend({
        noConflict: function(t) {
            return e.$ === st && (e.$ = G), t && e.jQuery === st && (e.jQuery = J), st
        },
        isReady: !1,
        readyWait: 1,
        holdReady: function(e) {
            e ? st.readyWait++ : st.ready(!0)
        },
        ready: function(e) {
            if (e === !0 ? !--st.readyWait : !st.isReady) {
                if (!V.body) return setTimeout(st.ready);
                st.isReady = !0, e !== !0 && --st.readyWait > 0 || (U.resolveWith(V, [st]), st.fn.trigger && st(V).trigger("ready").off("ready"))
            }
        },
        isFunction: function(e) {
            return "function" === st.type(e)
        },
        isArray: Array.isArray || function(e) {
            return "array" === st.type(e)
        },
        isWindow: function(e) {
            return null != e && e == e.window
        },
        isNumeric: function(e) {
            return !isNaN(parseFloat(e)) && isFinite(e)
        },
        type: function(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? Q[it.call(e)] || "object" : typeof e
        },
        isPlainObject: function(e) {
            if (!e || "object" !== st.type(e) || e.nodeType || st.isWindow(e)) return !1;
            try {
                if (e.constructor && !ot.call(e, "constructor") && !ot.call(e.constructor.prototype, "isPrototypeOf")) return !1
            } catch (n) {
                return !1
            }
            var r;
            for (r in e);
            return r === t || ot.call(e, r)
        },
        isEmptyObject: function(e) {
            var t;
            for (t in e) return !1;
            return !0
        },
        error: function(e) {
            throw Error(e)
        },
        parseHTML: function(e, t, n) {
            if (!e || "string" != typeof e) return null;
            "boolean" == typeof t && (n = t, t = !1), t = t || V;
            var r = pt.exec(e),
                i = !n && [];
            return r ? [t.createElement(r[1])] : (r = st.buildFragment([e], t, i), i && st(i).remove(), st.merge([], r.childNodes))
        },
        parseJSON: function(n) {
            return e.JSON && e.JSON.parse ? e.JSON.parse(n) : null === n ? n : "string" == typeof n && (n = st.trim(n), n && dt.test(n.replace(gt, "@").replace(mt, "]").replace(ht, ""))) ? Function("return " + n)() : (st.error("Invalid JSON: " + n), t)
        },
        parseXML: function(n) {
            var r, i;
            if (!n || "string" != typeof n) return null;
            try {
                e.DOMParser ? (i = new DOMParser, r = i.parseFromString(n, "text/xml")) : (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(n))
            } catch (o) {
                r = t
            }
            return r && r.documentElement && !r.getElementsByTagName("parsererror").length || st.error("Invalid XML: " + n), r
        },
        noop: function() {},
        globalEval: function(t) {
            t && st.trim(t) && (e.execScript || function(t) {
                e.eval.call(e, t)
            })(t)
        },
        camelCase: function(e) {
            return e.replace(yt, "ms-").replace(vt, bt)
        },
        nodeName: function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        },
        each: function(e, t, r) {
            var i, o = 0,
                a = e.length,
                s = n(e);
            if (r) {
                if (s)
                    for (; a > o && (i = t.apply(e[o], r), i !== !1); o++);
                else
                    for (o in e)
                        if (i = t.apply(e[o], r), i === !1) break
            } else if (s)
                for (; a > o && (i = t.call(e[o], o, e[o]), i !== !1); o++);
            else
                for (o in e)
                    if (i = t.call(e[o], o, e[o]), i === !1) break;
            return e
        },
        trim: at && !at.call("\ufeff\u00a0") ? function(e) {
            return null == e ? "" : at.call(e)
        } : function(e) {
            return null == e ? "" : (e + "").replace(ct, "")
        },
        makeArray: function(e, t) {
            var r = t || [];
            return null != e && (n(Object(e)) ? st.merge(r, "string" == typeof e ? [e] : e) : tt.call(r, e)), r
        },
        inArray: function(e, t, n) {
            var r;
            if (t) {
                if (rt) return rt.call(t, e, n);
                for (r = t.length, n = n ? 0 > n ? Math.max(0, r + n) : n : 0; r > n; n++)
                    if (n in t && t[n] === e) return n
            }
            return -1
        },
        merge: function(e, n) {
            var r = n.length,
                i = e.length,
                o = 0;
            if ("number" == typeof r)
                for (; r > o; o++) e[i++] = n[o];
            else
                for (; n[o] !== t;) e[i++] = n[o++];
            return e.length = i, e
        },
        grep: function(e, t, n) {
            var r, i = [],
                o = 0,
                a = e.length;
            for (n = !!n; a > o; o++) r = !!t(e[o], o), n !== r && i.push(e[o]);
            return i
        },
        map: function(e, t, r) {
            var i, o = 0,
                a = e.length,
                s = n(e),
                u = [];
            if (s)
                for (; a > o; o++) i = t(e[o], o, r), null != i && (u[u.length] = i);
            else
                for (o in e) i = t(e[o], o, r), null != i && (u[u.length] = i);
            return et.apply([], u)
        },
        guid: 1,
        proxy: function(e, n) {
            var r, i, o;
            return "string" == typeof n && (r = e[n], n = e, e = r), st.isFunction(e) ? (i = nt.call(arguments, 2), o = function() {
                return e.apply(n || this, i.concat(nt.call(arguments)))
            }, o.guid = e.guid = e.guid || st.guid++, o) : t
        },
        access: function(e, n, r, i, o, a, s) {
            var u = 0,
                l = e.length,
                c = null == r;
            if ("object" === st.type(r)) {
                o = !0;
                for (u in r) st.access(e, n, u, r[u], !0, a, s)
            } else if (i !== t && (o = !0, st.isFunction(i) || (s = !0), c && (s ? (n.call(e, i), n = null) : (c = n, n = function(e, t, n) {
                    return c.call(st(e), n)
                })), n))
                for (; l > u; u++) n(e[u], r, s ? i : i.call(e[u], u, n(e[u], r)));
            return o ? e : c ? n.call(e) : l ? n(e[0], r) : a
        },
        now: function() {
            return (new Date).getTime()
        }
    }), st.ready.promise = function(t) {
        if (!U)
            if (U = st.Deferred(), "complete" === V.readyState) setTimeout(st.ready);
            else if (V.addEventListener) V.addEventListener("DOMContentLoaded", xt, !1), e.addEventListener("load", st.ready, !1);
        else {
            V.attachEvent("onreadystatechange", xt), e.attachEvent("onload", st.ready);
            var n = !1;
            try {
                n = null == e.frameElement && V.documentElement
            } catch (r) {}
            n && n.doScroll && function i() {
                if (!st.isReady) {
                    try {
                        n.doScroll("left")
                    } catch (e) {
                        return setTimeout(i, 50)
                    }
                    st.ready()
                }
            }()
        }
        return U.promise(t)
    }, st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
        Q["[object " + t + "]"] = t.toLowerCase()
    }), X = st(V);
    var Tt = {};
    st.Callbacks = function(e) {
        e = "string" == typeof e ? Tt[e] || r(e) : st.extend({}, e);
        var n, i, o, a, s, u, l = [],
            c = !e.once && [],
            f = function(t) {
                for (n = e.memory && t, i = !0, u = a || 0, a = 0, s = l.length, o = !0; l && s > u; u++)
                    if (l[u].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
                        n = !1;
                        break
                    } o = !1, l && (c ? c.length && f(c.shift()) : n ? l = [] : p.disable())
            },
            p = {
                add: function() {
                    if (l) {
                        var t = l.length;
                        (function r(t) {
                            st.each(t, function(t, n) {
                                var i = st.type(n);
                                "function" === i ? e.unique && p.has(n) || l.push(n) : n && n.length && "string" !== i && r(n)
                            })
                        })(arguments), o ? s = l.length : n && (a = t, f(n))
                    }
                    return this
                },
                remove: function() {
                    return l && st.each(arguments, function(e, t) {
                        for (var n;
                            (n = st.inArray(t, l, n)) > -1;) l.splice(n, 1), o && (s >= n && s--, u >= n && u--)
                    }), this
                },
                has: function(e) {
                    return st.inArray(e, l) > -1
                },
                empty: function() {
                    return l = [], this
                },
                disable: function() {
                    return l = c = n = t, this
                },
                disabled: function() {
                    return !l
                },
                lock: function() {
                    return c = t, n || p.disable(), this
                },
                locked: function() {
                    return !c
                },
                fireWith: function(e, t) {
                    return t = t || [], t = [e, t.slice ? t.slice() : t], !l || i && !c || (o ? c.push(t) : f(t)), this
                },
                fire: function() {
                    return p.fireWith(this, arguments), this
                },
                fired: function() {
                    return !!i
                }
            };
        return p
    }, st.extend({
        Deferred: function(e) {
            var t = [
                    ["resolve", "done", st.Callbacks("once memory"), "resolved"],
                    ["reject", "fail", st.Callbacks("once memory"), "rejected"],
                    ["notify", "progress", st.Callbacks("memory")]
                ],
                n = "pending",
                r = {
                    state: function() {
                        return n
                    },
                    always: function() {
                        return i.done(arguments).fail(arguments), this
                    },
                    then: function() {
                        var e = arguments;
                        return st.Deferred(function(n) {
                            st.each(t, function(t, o) {
                                var a = o[0],
                                    s = st.isFunction(e[t]) && e[t];
                                i[o[1]](function() {
                                    var e = s && s.apply(this, arguments);
                                    e && st.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + "With"](this === r ? n.promise() : this, s ? [e] : arguments)
                                })
                            }), e = null
                        }).promise()
                    },
                    promise: function(e) {
                        return null != e ? st.extend(e, r) : r
                    }
                },
                i = {};
            return r.pipe = r.then, st.each(t, function(e, o) {
                var a = o[2],
                    s = o[3];
                r[o[1]] = a.add, s && a.add(function() {
                    n = s
                }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function() {
                    return i[o[0] + "With"](this === i ? r : this, arguments), this
                }, i[o[0] + "With"] = a.fireWith
            }), r.promise(i), e && e.call(i, i), i
        },
        when: function(e) {
            var t, n, r, i = 0,
                o = nt.call(arguments),
                a = o.length,
                s = 1 !== a || e && st.isFunction(e.promise) ? a : 0,
                u = 1 === s ? e : st.Deferred(),
                l = function(e, n, r) {
                    return function(i) {
                        n[e] = this, r[e] = arguments.length > 1 ? nt.call(arguments) : i, r === t ? u.notifyWith(n, r) : --s || u.resolveWith(n, r)
                    }
                };
            if (a > 1)
                for (t = Array(a), n = Array(a), r = Array(a); a > i; i++) o[i] && st.isFunction(o[i].promise) ? o[i].promise().done(l(i, r, o)).fail(u.reject).progress(l(i, n, t)) : --s;
            return s || u.resolveWith(r, o), u.promise()
        }
    }), st.support = function() {
        var n, r, i, o, a, s, u, l, c, f, p = V.createElement("div");
        if (p.setAttribute("className", "t"), p.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", r = p.getElementsByTagName("*"), i = p.getElementsByTagName("a")[0], !r || !i || !r.length) return {};
        o = V.createElement("select"), a = o.appendChild(V.createElement("option")), s = p.getElementsByTagName("input")[0], i.style.cssText = "top:1px;float:left;opacity:.5", n = {
            getSetAttribute: "t" !== p.className,
            leadingWhitespace: 3 === p.firstChild.nodeType,
            tbody: !p.getElementsByTagName("tbody").length,
            htmlSerialize: !!p.getElementsByTagName("link").length,
            style: /top/.test(i.getAttribute("style")),
            hrefNormalized: "/a" === i.getAttribute("href"),
            opacity: /^0.5/.test(i.style.opacity),
            cssFloat: !!i.style.cssFloat,
            checkOn: !!s.value,
            optSelected: a.selected,
            enctype: !!V.createElement("form").enctype,
            html5Clone: "<:nav></:nav>" !== V.createElement("nav").cloneNode(!0).outerHTML,
            boxModel: "CSS1Compat" === V.compatMode,
            deleteExpando: !0,
            noCloneEvent: !0,
            inlineBlockNeedsLayout: !1,
            shrinkWrapBlocks: !1,
            reliableMarginRight: !0,
            boxSizingReliable: !0,
            pixelPosition: !1
        }, s.checked = !0, n.noCloneChecked = s.cloneNode(!0).checked, o.disabled = !0, n.optDisabled = !a.disabled;
        try {
            delete p.test
        } catch (d) {
            n.deleteExpando = !1
        }
        s = V.createElement("input"), s.setAttribute("value", ""), n.input = "" === s.getAttribute("value"), s.value = "t", s.setAttribute("type", "radio"), n.radioValue = "t" === s.value, s.setAttribute("checked", "t"), s.setAttribute("name", "t"), u = V.createDocumentFragment(), u.appendChild(s), n.appendChecked = s.checked, n.checkClone = u.cloneNode(!0).cloneNode(!0).lastChild.checked, p.attachEvent && (p.attachEvent("onclick", function() {
            n.noCloneEvent = !1
        }), p.cloneNode(!0).click());
        for (f in {
                submit: !0,
                change: !0,
                focusin: !0
            }) p.setAttribute(l = "on" + f, "t"), n[f + "Bubbles"] = l in e || p.attributes[l].expando === !1;
        return p.style.backgroundClip = "content-box", p.cloneNode(!0).style.backgroundClip = "", n.clearCloneStyle = "content-box" === p.style.backgroundClip, st(function() {
            var r, i, o, a = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
                s = V.getElementsByTagName("body")[0];
            s && (r = V.createElement("div"), r.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", s.appendChild(r).appendChild(p), p.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", o = p.getElementsByTagName("td"), o[0].style.cssText = "padding:0;margin:0;border:0;display:none", c = 0 === o[0].offsetHeight, o[0].style.display = "", o[1].style.display = "none", n.reliableHiddenOffsets = c && 0 === o[0].offsetHeight, p.innerHTML = "", p.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", n.boxSizing = 4 === p.offsetWidth, n.doesNotIncludeMarginInBodyOffset = 1 !== s.offsetTop, e.getComputedStyle && (n.pixelPosition = "1%" !== (e.getComputedStyle(p, null) || {}).top, n.boxSizingReliable = "4px" === (e.getComputedStyle(p, null) || {
                width: "4px"
            }).width, i = p.appendChild(V.createElement("div")), i.style.cssText = p.style.cssText = a, i.style.marginRight = i.style.width = "0", p.style.width = "1px", n.reliableMarginRight = !parseFloat((e.getComputedStyle(i, null) || {}).marginRight)), p.style.zoom !== t && (p.innerHTML = "", p.style.cssText = a + "width:1px;padding:1px;display:inline;zoom:1", n.inlineBlockNeedsLayout = 3 === p.offsetWidth, p.style.display = "block", p.innerHTML = "<div></div>", p.firstChild.style.width = "5px", n.shrinkWrapBlocks = 3 !== p.offsetWidth, s.style.zoom = 1), s.removeChild(r), r = p = o = i = null)
        }), r = o = u = a = i = s = null, n
    }();
    var wt = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
        Nt = /([A-Z])/g;
    st.extend({
        cache: {},
        expando: "jQuery" + (Z + Math.random()).replace(/\D/g, ""),
        noData: {
            embed: !0,
            object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
            applet: !0
        },
        hasData: function(e) {
            return e = e.nodeType ? st.cache[e[st.expando]] : e[st.expando], !!e && !s(e)
        },
        data: function(e, t, n) {
            return i(e, t, n, !1)
        },
        removeData: function(e, t) {
            return o(e, t, !1)
        },
        _data: function(e, t, n) {
            return i(e, t, n, !0)
        },
        _removeData: function(e, t) {
            return o(e, t, !0)
        },
        acceptData: function(e) {
            var t = e.nodeName && st.noData[e.nodeName.toLowerCase()];
            return !t || t !== !0 && e.getAttribute("classid") === t
        }
    }), st.fn.extend({
        data: function(e, n) {
            var r, i, o = this[0],
                s = 0,
                u = null;
            if (e === t) {
                if (this.length && (u = st.data(o), 1 === o.nodeType && !st._data(o, "parsedAttrs"))) {
                    for (r = o.attributes; r.length > s; s++) i = r[s].name, i.indexOf("data-") || (i = st.camelCase(i.substring(5)), a(o, i, u[i]));
                    st._data(o, "parsedAttrs", !0)
                }
                return u
            }
            return "object" == typeof e ? this.each(function() {
                st.data(this, e)
            }) : st.access(this, function(n) {
                return n === t ? o ? a(o, e, st.data(o, e)) : null : (this.each(function() {
                    st.data(this, e, n)
                }), t)
            }, null, n, arguments.length > 1, null, !0)
        },
        removeData: function(e) {
            return this.each(function() {
                st.removeData(this, e)
            })
        }
    }), st.extend({
        queue: function(e, n, r) {
            var i;
            return e ? (n = (n || "fx") + "queue", i = st._data(e, n), r && (!i || st.isArray(r) ? i = st._data(e, n, st.makeArray(r)) : i.push(r)), i || []) : t
        },
        dequeue: function(e, t) {
            t = t || "fx";
            var n = st.queue(e, t),
                r = n.length,
                i = n.shift(),
                o = st._queueHooks(e, t),
                a = function() {
                    st.dequeue(e, t)
                };
            "inprogress" === i && (i = n.shift(), r--), o.cur = i, i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire()
        },
        _queueHooks: function(e, t) {
            var n = t + "queueHooks";
            return st._data(e, n) || st._data(e, n, {
                empty: st.Callbacks("once memory").add(function() {
                    st._removeData(e, t + "queue"), st._removeData(e, n)
                })
            })
        }
    }), st.fn.extend({
        queue: function(e, n) {
            var r = 2;
            return "string" != typeof e && (n = e, e = "fx", r--), r > arguments.length ? st.queue(this[0], e) : n === t ? this : this.each(function() {
                var t = st.queue(this, e, n);
                st._queueHooks(this, e), "fx" === e && "inprogress" !== t[0] && st.dequeue(this, e)
            })
        },
        dequeue: function(e) {
            return this.each(function() {
                st.dequeue(this, e)
            })
        },
        delay: function(e, t) {
            return e = st.fx ? st.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
                var r = setTimeout(t, e);
                n.stop = function() {
                    clearTimeout(r)
                }
            })
        },
        clearQueue: function(e) {
            return this.queue(e || "fx", [])
        },
        promise: function(e, n) {
            var r, i = 1,
                o = st.Deferred(),
                a = this,
                s = this.length,
                u = function() {
                    --i || o.resolveWith(a, [a])
                };
            for ("string" != typeof e && (n = e, e = t), e = e || "fx"; s--;) r = st._data(a[s], e + "queueHooks"), r && r.empty && (i++, r.empty.add(u));
            return u(), o.promise(n)
        }
    });
    var Ct, kt, Et = /[\t\r\n]/g,
        St = /\r/g,
        At = /^(?:input|select|textarea|button|object)$/i,
        jt = /^(?:a|area)$/i,
        Dt = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,
        Lt = /^(?:checked|selected)$/i,
        Ht = st.support.getSetAttribute,
        Mt = st.support.input;
    st.fn.extend({
        attr: function(e, t) {
            return st.access(this, st.attr, e, t, arguments.length > 1)
        },
        removeAttr: function(e) {
            return this.each(function() {
                st.removeAttr(this, e)
            })
        },
        prop: function(e, t) {
            return st.access(this, st.prop, e, t, arguments.length > 1)
        },
        removeProp: function(e) {
            return e = st.propFix[e] || e, this.each(function() {
                try {
                    this[e] = t, delete this[e]
                } catch (n) {}
            })
        },
        addClass: function(e) {
            var t, n, r, i, o, a = 0,
                s = this.length,
                u = "string" == typeof e && e;
            if (st.isFunction(e)) return this.each(function(t) {
                st(this).addClass(e.call(this, t, this.className))
            });
            if (u)
                for (t = (e || "").match(lt) || []; s > a; a++)
                    if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(Et, " ") : " ")) {
                        for (o = 0; i = t[o++];) 0 > r.indexOf(" " + i + " ") && (r += i + " ");
                        n.className = st.trim(r)
                    } return this
        },
        removeClass: function(e) {
            var t, n, r, i, o, a = 0,
                s = this.length,
                u = 0 === arguments.length || "string" == typeof e && e;
            if (st.isFunction(e)) return this.each(function(t) {
                st(this).removeClass(e.call(this, t, this.className))
            });
            if (u)
                for (t = (e || "").match(lt) || []; s > a; a++)
                    if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(Et, " ") : "")) {
                        for (o = 0; i = t[o++];)
                            for (; r.indexOf(" " + i + " ") >= 0;) r = r.replace(" " + i + " ", " ");
                        n.className = e ? st.trim(r) : ""
                    } return this
        },
        toggleClass: function(e, t) {
            var n = typeof e,
                r = "boolean" == typeof t;
            return st.isFunction(e) ? this.each(function(n) {
                st(this).toggleClass(e.call(this, n, this.className, t), t)
            }) : this.each(function() {
                if ("string" === n)
                    for (var i, o = 0, a = st(this), s = t, u = e.match(lt) || []; i = u[o++];) s = r ? s : !a.hasClass(i), a[s ? "addClass" : "removeClass"](i);
                else("undefined" === n || "boolean" === n) && (this.className && st._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : st._data(this, "__className__") || "")
            })
        },
        hasClass: function(e) {
            for (var t = " " + e + " ", n = 0, r = this.length; r > n; n++)
                if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(Et, " ").indexOf(t) >= 0) return !0;
            return !1
        },
        val: function(e) {
            var n, r, i, o = this[0]; {
                if (arguments.length) return i = st.isFunction(e), this.each(function(r) {
                    var o, a = st(this);
                    1 === this.nodeType && (o = i ? e.call(this, r, a.val()) : e, null == o ? o = "" : "number" == typeof o ? o += "" : st.isArray(o) && (o = st.map(o, function(e) {
                        return null == e ? "" : e + ""
                    })), n = st.valHooks[this.type] || st.valHooks[this.nodeName.toLowerCase()], n && "set" in n && n.set(this, o, "value") !== t || (this.value = o))
                });
                if (o) return n = st.valHooks[o.type] || st.valHooks[o.nodeName.toLowerCase()], n && "get" in n && (r = n.get(o, "value")) !== t ? r : (r = o.value, "string" == typeof r ? r.replace(St, "") : null == r ? "" : r)
            }
        }
    }), st.extend({
        valHooks: {
            option: {
                get: function(e) {
                    var t = e.attributes.value;
                    return !t || t.specified ? e.value : e.text
                }
            },
            select: {
                get: function(e) {
                    for (var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || 0 > i, a = o ? null : [], s = o ? i + 1 : r.length, u = 0 > i ? s : o ? i : 0; s > u; u++)
                        if (n = r[u], !(!n.selected && u !== i || (st.support.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && st.nodeName(n.parentNode, "optgroup"))) {
                            if (t = st(n).val(), o) return t;
                            a.push(t)
                        } return a
                },
                set: function(e, t) {
                    var n = st.makeArray(t);
                    return st(e).find("option").each(function() {
                        this.selected = st.inArray(st(this).val(), n) >= 0
                    }), n.length || (e.selectedIndex = -1), n
                }
            }
        },
        attr: function(e, n, r) {
            var i, o, a, s = e.nodeType;
            if (e && 3 !== s && 8 !== s && 2 !== s) return e.getAttribute === t ? st.prop(e, n, r) : (a = 1 !== s || !st.isXMLDoc(e), a && (n = n.toLowerCase(), o = st.attrHooks[n] || (Dt.test(n) ? kt : Ct)), r === t ? o && a && "get" in o && null !== (i = o.get(e, n)) ? i : (e.getAttribute !== t && (i = e.getAttribute(n)), null == i ? t : i) : null !== r ? o && a && "set" in o && (i = o.set(e, r, n)) !== t ? i : (e.setAttribute(n, r + ""), r) : (st.removeAttr(e, n), t))
        },
        removeAttr: function(e, t) {
            var n, r, i = 0,
                o = t && t.match(lt);
            if (o && 1 === e.nodeType)
                for (; n = o[i++];) r = st.propFix[n] || n, Dt.test(n) ? !Ht && Lt.test(n) ? e[st.camelCase("default-" + n)] = e[r] = !1 : e[r] = !1 : st.attr(e, n, ""), e.removeAttribute(Ht ? n : r)
        },
        attrHooks: {
            type: {
                set: function(e, t) {
                    if (!st.support.radioValue && "radio" === t && st.nodeName(e, "input")) {
                        var n = e.value;
                        return e.setAttribute("type", t), n && (e.value = n), t
                    }
                }
            }
        },
        propFix: {
            tabindex: "tabIndex",
            readonly: "readOnly",
            "for": "htmlFor",
            "class": "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        },
        prop: function(e, n, r) {
            var i, o, a, s = e.nodeType;
            if (e && 3 !== s && 8 !== s && 2 !== s) return a = 1 !== s || !st.isXMLDoc(e), a && (n = st.propFix[n] || n, o = st.propHooks[n]), r !== t ? o && "set" in o && (i = o.set(e, r, n)) !== t ? i : e[n] = r : o && "get" in o && null !== (i = o.get(e, n)) ? i : e[n]
        },
        propHooks: {
            tabIndex: {
                get: function(e) {
                    var n = e.getAttributeNode("tabindex");
                    return n && n.specified ? parseInt(n.value, 10) : At.test(e.nodeName) || jt.test(e.nodeName) && e.href ? 0 : t
                }
            }
        }
    }), kt = {
        get: function(e, n) {
            var r = st.prop(e, n),
                i = "boolean" == typeof r && e.getAttribute(n),
                o = "boolean" == typeof r ? Mt && Ht ? null != i : Lt.test(n) ? e[st.camelCase("default-" + n)] : !!i : e.getAttributeNode(n);
            return o && o.value !== !1 ? n.toLowerCase() : t
        },
        set: function(e, t, n) {
            return t === !1 ? st.removeAttr(e, n) : Mt && Ht || !Lt.test(n) ? e.setAttribute(!Ht && st.propFix[n] || n, n) : e[st.camelCase("default-" + n)] = e[n] = !0, n
        }
    }, Mt && Ht || (st.attrHooks.value = {
        get: function(e, n) {
            var r = e.getAttributeNode(n);
            return st.nodeName(e, "input") ? e.defaultValue : r && r.specified ? r.value : t
        },
        set: function(e, n, r) {
            return st.nodeName(e, "input") ? (e.defaultValue = n, t) : Ct && Ct.set(e, n, r)
        }
    }), Ht || (Ct = st.valHooks.button = {
        get: function(e, n) {
            var r = e.getAttributeNode(n);
            return r && ("id" === n || "name" === n || "coords" === n ? "" !== r.value : r.specified) ? r.value : t
        },
        set: function(e, n, r) {
            var i = e.getAttributeNode(r);
            return i || e.setAttributeNode(i = e.ownerDocument.createAttribute(r)), i.value = n += "", "value" === r || n === e.getAttribute(r) ? n : t
        }
    }, st.attrHooks.contenteditable = {
        get: Ct.get,
        set: function(e, t, n) {
            Ct.set(e, "" === t ? !1 : t, n)
        }
    }, st.each(["width", "height"], function(e, n) {
        st.attrHooks[n] = st.extend(st.attrHooks[n], {
            set: function(e, r) {
                return "" === r ? (e.setAttribute(n, "auto"), r) : t
            }
        })
    })), st.support.hrefNormalized || (st.each(["href", "src", "width", "height"], function(e, n) {
        st.attrHooks[n] = st.extend(st.attrHooks[n], {
            get: function(e) {
                var r = e.getAttribute(n, 2);
                return null == r ? t : r
            }
        })
    }), st.each(["href", "src"], function(e, t) {
        st.propHooks[t] = {
            get: function(e) {
                return e.getAttribute(t, 4)
            }
        }
    })), st.support.style || (st.attrHooks.style = {
        get: function(e) {
            return e.style.cssText || t
        },
        set: function(e, t) {
            return e.style.cssText = t + ""
        }
    }), st.support.optSelected || (st.propHooks.selected = st.extend(st.propHooks.selected, {
        get: function(e) {
            var t = e.parentNode;
            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
        }
    })), st.support.enctype || (st.propFix.enctype = "encoding"), st.support.checkOn || st.each(["radio", "checkbox"], function() {
        st.valHooks[this] = {
            get: function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            }
        }
    }), st.each(["radio", "checkbox"], function() {
        st.valHooks[this] = st.extend(st.valHooks[this], {
            set: function(e, n) {
                return st.isArray(n) ? e.checked = st.inArray(st(e).val(), n) >= 0 : t
            }
        })
    });
    var qt = /^(?:input|select|textarea)$/i,
        _t = /^key/,
        Ft = /^(?:mouse|contextmenu)|click/,
        Ot = /^(?:focusinfocus|focusoutblur)$/,
        Bt = /^([^.]*)(?:\.(.+)|)$/;
    st.event = {
            global: {},
            add: function(e, n, r, i, o) {
                var a, s, u, l, c, f, p, d, h, g, m, y = 3 !== e.nodeType && 8 !== e.nodeType && st._data(e);
                if (y) {
                    for (r.handler && (a = r, r = a.handler, o = a.selector), r.guid || (r.guid = st.guid++), (l = y.events) || (l = y.events = {}), (s = y.handle) || (s = y.handle = function(e) {
                            return st === t || e && st.event.triggered === e.type ? t : st.event.dispatch.apply(s.elem, arguments)
                        }, s.elem = e), n = (n || "").match(lt) || [""], c = n.length; c--;) u = Bt.exec(n[c]) || [], h = m = u[1], g = (u[2] || "").split(".").sort(), p = st.event.special[h] || {}, h = (o ? p.delegateType : p.bindType) || h, p = st.event.special[h] || {}, f = st.extend({
                        type: h,
                        origType: m,
                        data: i,
                        handler: r,
                        guid: r.guid,
                        selector: o,
                        needsContext: o && st.expr.match.needsContext.test(o),
                        namespace: g.join(".")
                    }, a), (d = l[h]) || (d = l[h] = [], d.delegateCount = 0, p.setup && p.setup.call(e, i, g, s) !== !1 || (e.addEventListener ? e.addEventListener(h, s, !1) : e.attachEvent && e.attachEvent("on" + h, s))), p.add && (p.add.call(e, f), f.handler.guid || (f.handler.guid = r.guid)), o ? d.splice(d.delegateCount++, 0, f) : d.push(f), st.event.global[h] = !0;
                    e = null
                }
            },
            remove: function(e, t, n, r, i) {
                var o, a, s, u, l, c, f, p, d, h, g, m = st.hasData(e) && st._data(e);
                if (m && (u = m.events)) {
                    for (t = (t || "").match(lt) || [""], l = t.length; l--;)
                        if (s = Bt.exec(t[l]) || [], d = g = s[1], h = (s[2] || "").split(".").sort(), d) {
                            for (f = st.event.special[d] || {}, d = (r ? f.delegateType : f.bindType) || d, p = u[d] || [], s = s[2] && RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = p.length; o--;) c = p[o], !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ("**" !== r || !c.selector) || (p.splice(o, 1), c.selector && p.delegateCount--, f.remove && f.remove.call(e, c));
                            a && !p.length && (f.teardown && f.teardown.call(e, h, m.handle) !== !1 || st.removeEvent(e, d, m.handle), delete u[d])
                        } else
                            for (d in u) st.event.remove(e, d + t[l], n, r, !0);
                    st.isEmptyObject(u) && (delete m.handle, st._removeData(e, "events"))
                }
            },
            trigger: function(n, r, i, o) {
                var a, s, u, l, c, f, p, d = [i || V],
                    h = n.type || n,
                    g = n.namespace ? n.namespace.split(".") : [];
                if (s = u = i = i || V, 3 !== i.nodeType && 8 !== i.nodeType && !Ot.test(h + st.event.triggered) && (h.indexOf(".") >= 0 && (g = h.split("."), h = g.shift(), g.sort()), c = 0 > h.indexOf(":") && "on" + h, n = n[st.expando] ? n : new st.Event(h, "object" == typeof n && n), n.isTrigger = !0, n.namespace = g.join("."), n.namespace_re = n.namespace ? RegExp("(^|\\.)" + g.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, n.result = t, n.target || (n.target = i), r = null == r ? [n] : st.makeArray(r, [n]), p = st.event.special[h] || {}, o || !p.trigger || p.trigger.apply(i, r) !== !1)) {
                    if (!o && !p.noBubble && !st.isWindow(i)) {
                        for (l = p.delegateType || h, Ot.test(l + h) || (s = s.parentNode); s; s = s.parentNode) d.push(s), u = s;
                        u === (i.ownerDocument || V) && d.push(u.defaultView || u.parentWindow || e)
                    }
                    for (a = 0;
                        (s = d[a++]) && !n.isPropagationStopped();) n.type = a > 1 ? l : p.bindType || h, f = (st._data(s, "events") || {})[n.type] && st._data(s, "handle"), f && f.apply(s, r), f = c && s[c], f && st.acceptData(s) && f.apply && f.apply(s, r) === !1 && n.preventDefault();
                    if (n.type = h, !(o || n.isDefaultPrevented() || p._default && p._default.apply(i.ownerDocument, r) !== !1 || "click" === h && st.nodeName(i, "a") || !st.acceptData(i) || !c || !i[h] || st.isWindow(i))) {
                        u = i[c], u && (i[c] = null), st.event.triggered = h;
                        try {
                            i[h]()
                        } catch (m) {}
                        st.event.triggered = t, u && (i[c] = u)
                    }
                    return n.result
                }
            },
            dispatch: function(e) {
                e = st.event.fix(e);
                var n, r, i, o, a, s = [],
                    u = nt.call(arguments),
                    l = (st._data(this, "events") || {})[e.type] || [],
                    c = st.event.special[e.type] || {};
                if (u[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) {
                    for (s = st.event.handlers.call(this, e, l), n = 0;
                        (o = s[n++]) && !e.isPropagationStopped();)
                        for (e.currentTarget = o.elem, r = 0;
                            (a = o.handlers[r++]) && !e.isImmediatePropagationStopped();)(!e.namespace_re || e.namespace_re.test(a.namespace)) && (e.handleObj = a, e.data = a.data, i = ((st.event.special[a.origType] || {}).handle || a.handler).apply(o.elem, u), i !== t && (e.result = i) === !1 && (e.preventDefault(), e.stopPropagation()));
                    return c.postDispatch && c.postDispatch.call(this, e), e.result
                }
            },
            handlers: function(e, n) {
                var r, i, o, a, s = [],
                    u = n.delegateCount,
                    l = e.target;
                if (u && l.nodeType && (!e.button || "click" !== e.type))
                    for (; l != this; l = l.parentNode || this)
                        if (l.disabled !== !0 || "click" !== e.type) {
                            for (i = [], r = 0; u > r; r++) a = n[r], o = a.selector + " ", i[o] === t && (i[o] = a.needsContext ? st(o, this).index(l) >= 0 : st.find(o, this, null, [l]).length), i[o] && i.push(a);
                            i.length && s.push({
                                elem: l,
                                handlers: i
                            })
                        } return n.length > u && s.push({
                    elem: this,
                    handlers: n.slice(u)
                }), s
            },
            fix: function(e) {
                if (e[st.expando]) return e;
                var t, n, r = e,
                    i = st.event.fixHooks[e.type] || {},
                    o = i.props ? this.props.concat(i.props) : this.props;
                for (e = new st.Event(r), t = o.length; t--;) n = o[t], e[n] = r[n];
                return e.target || (e.target = r.srcElement || V), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, i.filter ? i.filter(e, r) : e
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(e, n) {
                    var r, i, o, a = n.button,
                        s = n.fromElement;
                    return null == e.pageX && null != n.clientX && (r = e.target.ownerDocument || V, i = r.documentElement, o = r.body, e.pageX = n.clientX + (i && i.scrollLeft || o && o.scrollLeft || 0) - (i && i.clientLeft || o && o.clientLeft || 0), e.pageY = n.clientY + (i && i.scrollTop || o && o.scrollTop || 0) - (i && i.clientTop || o && o.clientTop || 0)), !e.relatedTarget && s && (e.relatedTarget = s === e.target ? n.toElement : s), e.which || a === t || (e.which = 1 & a ? 1 : 2 & a ? 3 : 4 & a ? 2 : 0), e
                }
            },
            special: {
                load: {
                    noBubble: !0
                },
                click: {
                    trigger: function() {
                        return st.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : t
                    }
                },
                focus: {
                    trigger: function() {
                        if (this !== V.activeElement && this.focus) try {
                            return this.focus(), !1
                        } catch (e) {}
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        return this === V.activeElement && this.blur ? (this.blur(), !1) : t
                    },
                    delegateType: "focusout"
                },
                beforeunload: {
                    postDispatch: function(e) {
                        e.result !== t && (e.originalEvent.returnValue = e.result)
                    }
                }
            },
            simulate: function(e, t, n, r) {
                var i = st.extend(new st.Event, n, {
                    type: e,
                    isSimulated: !0,
                    originalEvent: {}
                });
                r ? st.event.trigger(i, null, t) : st.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
            }
        }, st.removeEvent = V.removeEventListener ? function(e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n, !1)
        } : function(e, n, r) {
            var i = "on" + n;
            e.detachEvent && (e[i] === t && (e[i] = null), e.detachEvent(i, r))
        }, st.Event = function(e, n) {
            return this instanceof st.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? u : l) : this.type = e, n && st.extend(this, n), this.timeStamp = e && e.timeStamp || st.now(), this[st.expando] = !0, t) : new st.Event(e, n)
        }, st.Event.prototype = {
            isDefaultPrevented: l,
            isPropagationStopped: l,
            isImmediatePropagationStopped: l,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = u, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = u, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)
            },
            stopImmediatePropagation: function() {
                this.isImmediatePropagationStopped = u, this.stopPropagation()
            }
        }, st.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        }, function(e, t) {
            st.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var n, r = this,
                        i = e.relatedTarget,
                        o = e.handleObj;
                    return (!i || i !== r && !st.contains(r, i)) && (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
                }
            }
        }), st.support.submitBubbles || (st.event.special.submit = {
            setup: function() {
                return st.nodeName(this, "form") ? !1 : (st.event.add(this, "click._submit keypress._submit", function(e) {
                    var n = e.target,
                        r = st.nodeName(n, "input") || st.nodeName(n, "button") ? n.form : t;
                    r && !st._data(r, "submitBubbles") && (st.event.add(r, "submit._submit", function(e) {
                        e._submit_bubble = !0
                    }), st._data(r, "submitBubbles", !0))
                }), t)
            },
            postDispatch: function(e) {
                e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && st.event.simulate("submit", this.parentNode, e, !0))
            },
            teardown: function() {
                return st.nodeName(this, "form") ? !1 : (st.event.remove(this, "._submit"), t)
            }
        }), st.support.changeBubbles || (st.event.special.change = {
            setup: function() {
                return qt.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (st.event.add(this, "propertychange._change", function(e) {
                    "checked" === e.originalEvent.propertyName && (this._just_changed = !0)
                }), st.event.add(this, "click._change", function(e) {
                    this._just_changed && !e.isTrigger && (this._just_changed = !1), st.event.simulate("change", this, e, !0)
                })), !1) : (st.event.add(this, "beforeactivate._change", function(e) {
                    var t = e.target;
                    qt.test(t.nodeName) && !st._data(t, "changeBubbles") && (st.event.add(t, "change._change", function(e) {
                        !this.parentNode || e.isSimulated || e.isTrigger || st.event.simulate("change", this.parentNode, e, !0)
                    }), st._data(t, "changeBubbles", !0))
                }), t)
            },
            handle: function(e) {
                var n = e.target;
                return this !== n || e.isSimulated || e.isTrigger || "radio" !== n.type && "checkbox" !== n.type ? e.handleObj.handler.apply(this, arguments) : t
            },
            teardown: function() {
                return st.event.remove(this, "._change"), !qt.test(this.nodeName)
            }
        }), st.support.focusinBubbles || st.each({
            focus: "focusin",
            blur: "focusout"
        }, function(e, t) {
            var n = 0,
                r = function(e) {
                    st.event.simulate(t, e.target, st.event.fix(e), !0)
                };
            st.event.special[t] = {
                setup: function() {
                    0 === n++ && V.addEventListener(e, r, !0)
                },
                teardown: function() {
                    0 === --n && V.removeEventListener(e, r, !0)
                }
            }
        }), st.fn.extend({
            on: function(e, n, r, i, o) {
                var a, s;
                if ("object" == typeof e) {
                    "string" != typeof n && (r = r || n, n = t);
                    for (s in e) this.on(s, n, r, e[s], o);
                    return this
                }
                if (null == r && null == i ? (i = n, r = n = t) : null == i && ("string" == typeof n ? (i = r, r = t) : (i = r, r = n, n = t)), i === !1) i = l;
                else if (!i) return this;
                return 1 === o && (a = i, i = function(e) {
                    return st().off(e), a.apply(this, arguments)
                }, i.guid = a.guid || (a.guid = st.guid++)), this.each(function() {
                    st.event.add(this, e, i, r, n)
                })
            },
            one: function(e, t, n, r) {
                return this.on(e, t, n, r, 1)
            },
            off: function(e, n, r) {
                var i, o;
                if (e && e.preventDefault && e.handleObj) return i = e.handleObj, st(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this;
                if ("object" == typeof e) {
                    for (o in e) this.off(o, n, e[o]);
                    return this
                }
                return (n === !1 || "function" == typeof n) && (r = n, n = t), r === !1 && (r = l), this.each(function() {
                    st.event.remove(this, e, r, n)
                })
            },
            bind: function(e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function(e, t) {
                return this.off(e, null, t)
            },
            delegate: function(e, t, n, r) {
                return this.on(t, e, n, r)
            },
            undelegate: function(e, t, n) {
                return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
            },
            trigger: function(e, t) {
                return this.each(function() {
                    st.event.trigger(e, t, this)
                })
            },
            triggerHandler: function(e, n) {
                var r = this[0];
                return r ? st.event.trigger(e, n, r, !0) : t
            },
            hover: function(e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            }
        }), st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
            st.fn[t] = function(e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }, _t.test(t) && (st.event.fixHooks[t] = st.event.keyHooks), Ft.test(t) && (st.event.fixHooks[t] = st.event.mouseHooks)
        }),
        function(e, t) {
            function n(e) {
                return ht.test(e + "")
            }

            function r() {
                var e, t = [];
                return e = function(n, r) {
                    return t.push(n += " ") > C.cacheLength && delete e[t.shift()], e[n] = r
                }
            }

            function i(e) {
                return e[P] = !0, e
            }

            function o(e) {
                var t = L.createElement("div");
                try {
                    return e(t)
                } catch (n) {
                    return !1
                } finally {
                    t = null
                }
            }

            function a(e, t, n, r) {
                var i, o, a, s, u, l, c, d, h, g;
                if ((t ? t.ownerDocument || t : R) !== L && D(t), t = t || L, n = n || [], !e || "string" != typeof e) return n;
                if (1 !== (s = t.nodeType) && 9 !== s) return [];
                if (!M && !r) {
                    if (i = gt.exec(e))
                        if (a = i[1]) {
                            if (9 === s) {
                                if (o = t.getElementById(a), !o || !o.parentNode) return n;
                                if (o.id === a) return n.push(o), n
                            } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(a)) && O(t, o) && o.id === a) return n.push(o), n
                        } else {
                            if (i[2]) return Q.apply(n, K.call(t.getElementsByTagName(e), 0)), n;
                            if ((a = i[3]) && W.getByClassName && t.getElementsByClassName) return Q.apply(n, K.call(t.getElementsByClassName(a), 0)), n
                        } if (W.qsa && !q.test(e)) {
                        if (c = !0, d = P, h = t, g = 9 === s && e, 1 === s && "object" !== t.nodeName.toLowerCase()) {
                            for (l = f(e), (c = t.getAttribute("id")) ? d = c.replace(vt, "\\$&") : t.setAttribute("id", d), d = "[id='" + d + "'] ", u = l.length; u--;) l[u] = d + p(l[u]);
                            h = dt.test(e) && t.parentNode || t, g = l.join(",")
                        }
                        if (g) try {
                            return Q.apply(n, K.call(h.querySelectorAll(g), 0)), n
                        } catch (m) {} finally {
                            c || t.removeAttribute("id")
                        }
                    }
                }
                return x(e.replace(at, "$1"), t, n, r)
            }

            function s(e, t) {
                for (var n = e && t && e.nextSibling; n; n = n.nextSibling)
                    if (n === t) return -1;
                return e ? 1 : -1
            }

            function u(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return "input" === n && t.type === e
                }
            }

            function l(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && t.type === e
                }
            }

            function c(e) {
                return i(function(t) {
                    return t = +t, i(function(n, r) {
                        for (var i, o = e([], n.length, t), a = o.length; a--;) n[i = o[a]] && (n[i] = !(r[i] = n[i]))
                    })
                })
            }

            function f(e, t) {
                var n, r, i, o, s, u, l, c = X[e + " "];
                if (c) return t ? 0 : c.slice(0);
                for (s = e, u = [], l = C.preFilter; s;) {
                    (!n || (r = ut.exec(s))) && (r && (s = s.slice(r[0].length) || s), u.push(i = [])), n = !1, (r = lt.exec(s)) && (n = r.shift(), i.push({
                        value: n,
                        type: r[0].replace(at, " ")
                    }), s = s.slice(n.length));
                    for (o in C.filter) !(r = pt[o].exec(s)) || l[o] && !(r = l[o](r)) || (n = r.shift(), i.push({
                        value: n,
                        type: o,
                        matches: r
                    }), s = s.slice(n.length));
                    if (!n) break
                }
                return t ? s.length : s ? a.error(e) : X(e, u).slice(0)
            }

            function p(e) {
                for (var t = 0, n = e.length, r = ""; n > t; t++) r += e[t].value;
                return r
            }

            function d(e, t, n) {
                var r = t.dir,
                    i = n && "parentNode" === t.dir,
                    o = I++;
                return t.first ? function(t, n, o) {
                    for (; t = t[r];)
                        if (1 === t.nodeType || i) return e(t, n, o)
                } : function(t, n, a) {
                    var s, u, l, c = $ + " " + o;
                    if (a) {
                        for (; t = t[r];)
                            if ((1 === t.nodeType || i) && e(t, n, a)) return !0
                    } else
                        for (; t = t[r];)
                            if (1 === t.nodeType || i)
                                if (l = t[P] || (t[P] = {}), (u = l[r]) && u[0] === c) {
                                    if ((s = u[1]) === !0 || s === N) return s === !0
                                } else if (u = l[r] = [c], u[1] = e(t, n, a) || N, u[1] === !0) return !0
                }
            }

            function h(e) {
                return e.length > 1 ? function(t, n, r) {
                    for (var i = e.length; i--;)
                        if (!e[i](t, n, r)) return !1;
                    return !0
                } : e[0]
            }

            function g(e, t, n, r, i) {
                for (var o, a = [], s = 0, u = e.length, l = null != t; u > s; s++)(o = e[s]) && (!n || n(o, r, i)) && (a.push(o), l && t.push(s));
                return a
            }

            function m(e, t, n, r, o, a) {
                return r && !r[P] && (r = m(r)), o && !o[P] && (o = m(o, a)), i(function(i, a, s, u) {
                    var l, c, f, p = [],
                        d = [],
                        h = a.length,
                        m = i || b(t || "*", s.nodeType ? [s] : s, []),
                        y = !e || !i && t ? m : g(m, p, e, s, u),
                        v = n ? o || (i ? e : h || r) ? [] : a : y;
                    if (n && n(y, v, s, u), r)
                        for (l = g(v, d), r(l, [], s, u), c = l.length; c--;)(f = l[c]) && (v[d[c]] = !(y[d[c]] = f));
                    if (i) {
                        if (o || e) {
                            if (o) {
                                for (l = [], c = v.length; c--;)(f = v[c]) && l.push(y[c] = f);
                                o(null, v = [], l, u)
                            }
                            for (c = v.length; c--;)(f = v[c]) && (l = o ? Z.call(i, f) : p[c]) > -1 && (i[l] = !(a[l] = f))
                        }
                    } else v = g(v === a ? v.splice(h, v.length) : v), o ? o(null, a, v, u) : Q.apply(a, v)
                })
            }

            function y(e) {
                for (var t, n, r, i = e.length, o = C.relative[e[0].type], a = o || C.relative[" "], s = o ? 1 : 0, u = d(function(e) {
                        return e === t
                    }, a, !0), l = d(function(e) {
                        return Z.call(t, e) > -1
                    }, a, !0), c = [function(e, n, r) {
                        return !o && (r || n !== j) || ((t = n).nodeType ? u(e, n, r) : l(e, n, r))
                    }]; i > s; s++)
                    if (n = C.relative[e[s].type]) c = [d(h(c), n)];
                    else {
                        if (n = C.filter[e[s].type].apply(null, e[s].matches), n[P]) {
                            for (r = ++s; i > r && !C.relative[e[r].type]; r++);
                            return m(s > 1 && h(c), s > 1 && p(e.slice(0, s - 1)).replace(at, "$1"), n, r > s && y(e.slice(s, r)), i > r && y(e = e.slice(r)), i > r && p(e))
                        }
                        c.push(n)
                    } return h(c)
            }

            function v(e, t) {
                var n = 0,
                    r = t.length > 0,
                    o = e.length > 0,
                    s = function(i, s, u, l, c) {
                        var f, p, d, h = [],
                            m = 0,
                            y = "0",
                            v = i && [],
                            b = null != c,
                            x = j,
                            T = i || o && C.find.TAG("*", c && s.parentNode || s),
                            w = $ += null == x ? 1 : Math.E;
                        for (b && (j = s !== L && s, N = n); null != (f = T[y]); y++) {
                            if (o && f) {
                                for (p = 0; d = e[p]; p++)
                                    if (d(f, s, u)) {
                                        l.push(f);
                                        break
                                    } b && ($ = w, N = ++n)
                            }
                            r && ((f = !d && f) && m--, i && v.push(f))
                        }
                        if (m += y, r && y !== m) {
                            for (p = 0; d = t[p]; p++) d(v, h, s, u);
                            if (i) {
                                if (m > 0)
                                    for (; y--;) v[y] || h[y] || (h[y] = G.call(l));
                                h = g(h)
                            }
                            Q.apply(l, h), b && !i && h.length > 0 && m + t.length > 1 && a.uniqueSort(l)
                        }
                        return b && ($ = w, j = x), v
                    };
                return r ? i(s) : s
            }

            function b(e, t, n) {
                for (var r = 0, i = t.length; i > r; r++) a(e, t[r], n);
                return n
            }

            function x(e, t, n, r) {
                var i, o, a, s, u, l = f(e);
                if (!r && 1 === l.length) {
                    if (o = l[0] = l[0].slice(0), o.length > 2 && "ID" === (a = o[0]).type && 9 === t.nodeType && !M && C.relative[o[1].type]) {
                        if (t = C.find.ID(a.matches[0].replace(xt, Tt), t)[0], !t) return n;
                        e = e.slice(o.shift().value.length)
                    }
                    for (i = pt.needsContext.test(e) ? -1 : o.length - 1; i >= 0 && (a = o[i], !C.relative[s = a.type]); i--)
                        if ((u = C.find[s]) && (r = u(a.matches[0].replace(xt, Tt), dt.test(o[0].type) && t.parentNode || t))) {
                            if (o.splice(i, 1), e = r.length && p(o), !e) return Q.apply(n, K.call(r, 0)), n;
                            break
                        }
                }
                return S(e, l)(r, t, M, n, dt.test(e)), n
            }

            function T() {}
            var w, N, C, k, E, S, A, j, D, L, H, M, q, _, F, O, B, P = "sizzle" + -new Date,
                R = e.document,
                W = {},
                $ = 0,
                I = 0,
                z = r(),
                X = r(),
                U = r(),
                V = typeof t,
                Y = 1 << 31,
                J = [],
                G = J.pop,
                Q = J.push,
                K = J.slice,
                Z = J.indexOf || function(e) {
                    for (var t = 0, n = this.length; n > t; t++)
                        if (this[t] === e) return t;
                    return -1
                },
                et = "[\\x20\\t\\r\\n\\f]",
                tt = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                nt = tt.replace("w", "w#"),
                rt = "([*^$|!~]?=)",
                it = "\\[" + et + "*(" + tt + ")" + et + "*(?:" + rt + et + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + nt + ")|)|)" + et + "*\\]",
                ot = ":(" + tt + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + it.replace(3, 8) + ")*)|.*)\\)|)",
                at = RegExp("^" + et + "+|((?:^|[^\\\\])(?:\\\\.)*)" + et + "+$", "g"),
                ut = RegExp("^" + et + "*," + et + "*"),
                lt = RegExp("^" + et + "*([\\x20\\t\\r\\n\\f>+~])" + et + "*"),
                ct = RegExp(ot),
                ft = RegExp("^" + nt + "$"),
                pt = {
                    ID: RegExp("^#(" + tt + ")"),
                    CLASS: RegExp("^\\.(" + tt + ")"),
                    NAME: RegExp("^\\[name=['\"]?(" + tt + ")['\"]?\\]"),
                    TAG: RegExp("^(" + tt.replace("w", "w*") + ")"),
                    ATTR: RegExp("^" + it),
                    PSEUDO: RegExp("^" + ot),
                    CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + et + "*(even|odd|(([+-]|)(\\d*)n|)" + et + "*(?:([+-]|)" + et + "*(\\d+)|))" + et + "*\\)|)", "i"),
                    needsContext: RegExp("^" + et + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + et + "*((?:-\\d)?\\d*)" + et + "*\\)|)(?=[^-]|$)", "i")
                },
                dt = /[\x20\t\r\n\f]*[+~]/,
                ht = /\{\s*\[native code\]\s*\}/,
                gt = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                mt = /^(?:input|select|textarea|button)$/i,
                yt = /^h\d$/i,
                vt = /'|\\/g,
                bt = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
                xt = /\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,
                Tt = function(e, t) {
                    var n = "0x" + t - 65536;
                    return n !== n ? t : 0 > n ? String.fromCharCode(n + 65536) : String.fromCharCode(55296 | n >> 10, 56320 | 1023 & n)
                };
            try {
                K.call(H.childNodes, 0)[0].nodeType
            } catch (wt) {
                K = function(e) {
                    for (var t, n = []; t = this[e]; e++) n.push(t);
                    return n
                }
            }
            E = a.isXML = function(e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return t ? "HTML" !== t.nodeName : !1
            }, D = a.setDocument = function(e) {
                var r = e ? e.ownerDocument || e : R;
                return r !== L && 9 === r.nodeType && r.documentElement ? (L = r, H = r.documentElement, M = E(r), W.tagNameNoComments = o(function(e) {
                    return e.appendChild(r.createComment("")), !e.getElementsByTagName("*").length
                }), W.attributes = o(function(e) {
                    e.innerHTML = "<select></select>";
                    var t = typeof e.lastChild.getAttribute("multiple");
                    return "boolean" !== t && "string" !== t
                }), W.getByClassName = o(function(e) {
                    return e.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", e.getElementsByClassName && e.getElementsByClassName("e").length ? (e.lastChild.className = "e", 2 === e.getElementsByClassName("e").length) : !1
                }), W.getByName = o(function(e) {
                    e.id = P + 0, e.innerHTML = "<a name='" + P + "'></a><div name='" + P + "'></div>", H.insertBefore(e, H.firstChild);
                    var t = r.getElementsByName && r.getElementsByName(P).length === 2 + r.getElementsByName(P + 0).length;
                    return W.getIdNotName = !r.getElementById(P), H.removeChild(e), t
                }), C.attrHandle = o(function(e) {
                    return e.innerHTML = "<a href='#'></a>", e.firstChild && typeof e.firstChild.getAttribute !== V && "#" === e.firstChild.getAttribute("href")
                }) ? {} : {
                    href: function(e) {
                        return e.getAttribute("href", 2)
                    },
                    type: function(e) {
                        return e.getAttribute("type")
                    }
                }, W.getIdNotName ? (C.find.ID = function(e, t) {
                    if (typeof t.getElementById !== V && !M) {
                        var n = t.getElementById(e);
                        return n && n.parentNode ? [n] : []
                    }
                }, C.filter.ID = function(e) {
                    var t = e.replace(xt, Tt);
                    return function(e) {
                        return e.getAttribute("id") === t
                    }
                }) : (C.find.ID = function(e, n) {
                    if (typeof n.getElementById !== V && !M) {
                        var r = n.getElementById(e);
                        return r ? r.id === e || typeof r.getAttributeNode !== V && r.getAttributeNode("id").value === e ? [r] : t : []
                    }
                }, C.filter.ID = function(e) {
                    var t = e.replace(xt, Tt);
                    return function(e) {
                        var n = typeof e.getAttributeNode !== V && e.getAttributeNode("id");
                        return n && n.value === t
                    }
                }), C.find.TAG = W.tagNameNoComments ? function(e, n) {
                    return typeof n.getElementsByTagName !== V ? n.getElementsByTagName(e) : t
                } : function(e, t) {
                    var n, r = [],
                        i = 0,
                        o = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (; n = o[i]; i++) 1 === n.nodeType && r.push(n);
                        return r
                    }
                    return o
                }, C.find.NAME = W.getByName && function(e, n) {
                    return typeof n.getElementsByName !== V ? n.getElementsByName(name) : t
                }, C.find.CLASS = W.getByClassName && function(e, n) {
                    return typeof n.getElementsByClassName === V || M ? t : n.getElementsByClassName(e)
                }, _ = [], q = [":focus"], (W.qsa = n(r.querySelectorAll)) && (o(function(e) {
                    e.innerHTML = "<select><option selected=''></option></select>", e.querySelectorAll("[selected]").length || q.push("\\[" + et + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), e.querySelectorAll(":checked").length || q.push(":checked")
                }), o(function(e) {
                    e.innerHTML = "<input type='hidden' i=''/>", e.querySelectorAll("[i^='']").length && q.push("[*^$]=" + et + "*(?:\"\"|'')"), e.querySelectorAll(":enabled").length || q.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), q.push(",.*:")
                })), (W.matchesSelector = n(F = H.matchesSelector || H.mozMatchesSelector || H.webkitMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && o(function(e) {
                    W.disconnectedMatch = F.call(e, "div"), F.call(e, "[s!='']:x"), _.push("!=", ot)
                }), q = RegExp(q.join("|")), _ = RegExp(_.join("|")), O = n(H.contains) || H.compareDocumentPosition ? function(e, t) {
                    var n = 9 === e.nodeType ? e.documentElement : e,
                        r = t && t.parentNode;
                    return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
                } : function(e, t) {
                    if (t)
                        for (; t = t.parentNode;)
                            if (t === e) return !0;
                    return !1
                }, B = H.compareDocumentPosition ? function(e, t) {
                    var n;
                    return e === t ? (A = !0, 0) : (n = t.compareDocumentPosition && e.compareDocumentPosition && e.compareDocumentPosition(t)) ? 1 & n || e.parentNode && 11 === e.parentNode.nodeType ? e === r || O(R, e) ? -1 : t === r || O(R, t) ? 1 : 0 : 4 & n ? -1 : 1 : e.compareDocumentPosition ? -1 : 1
                } : function(e, t) {
                    var n, i = 0,
                        o = e.parentNode,
                        a = t.parentNode,
                        u = [e],
                        l = [t];
                    if (e === t) return A = !0, 0;
                    if (e.sourceIndex && t.sourceIndex) return (~t.sourceIndex || Y) - (O(R, e) && ~e.sourceIndex || Y);
                    if (!o || !a) return e === r ? -1 : t === r ? 1 : o ? -1 : a ? 1 : 0;
                    if (o === a) return s(e, t);
                    for (n = e; n = n.parentNode;) u.unshift(n);
                    for (n = t; n = n.parentNode;) l.unshift(n);
                    for (; u[i] === l[i];) i++;
                    return i ? s(u[i], l[i]) : u[i] === R ? -1 : l[i] === R ? 1 : 0
                }, A = !1, [0, 0].sort(B), W.detectDuplicates = A, L) : L
            }, a.matches = function(e, t) {
                return a(e, null, null, t)
            }, a.matchesSelector = function(e, t) {
                if ((e.ownerDocument || e) !== L && D(e), t = t.replace(bt, "='$1']"), !(!W.matchesSelector || M || _ && _.test(t) || q.test(t))) try {
                    var n = F.call(e, t);
                    if (n || W.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n
                } catch (r) {}
                return a(t, L, null, [e]).length > 0
            }, a.contains = function(e, t) {
                return (e.ownerDocument || e) !== L && D(e), O(e, t)
            }, a.attr = function(e, t) {
                var n;
                return (e.ownerDocument || e) !== L && D(e), M || (t = t.toLowerCase()), (n = C.attrHandle[t]) ? n(e) : M || W.attributes ? e.getAttribute(t) : ((n = e.getAttributeNode(t)) || e.getAttribute(t)) && e[t] === !0 ? t : n && n.specified ? n.value : null
            }, a.error = function(e) {
                throw Error("Syntax error, unrecognized expression: " + e)
            }, a.uniqueSort = function(e) {
                var t, n = [],
                    r = 1,
                    i = 0;
                if (A = !W.detectDuplicates, e.sort(B), A) {
                    for (; t = e[r]; r++) t === e[r - 1] && (i = n.push(r));
                    for (; i--;) e.splice(n[i], 1)
                }
                return e
            }, k = a.getText = function(e) {
                var t, n = "",
                    r = 0,
                    i = e.nodeType;
                if (i) {
                    if (1 === i || 9 === i || 11 === i) {
                        if ("string" == typeof e.textContent) return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling) n += k(e)
                    } else if (3 === i || 4 === i) return e.nodeValue
                } else
                    for (; t = e[r]; r++) n += k(t);
                return n
            }, C = a.selectors = {
                cacheLength: 50,
                createPseudo: i,
                match: pt,
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(e) {
                        return e[1] = e[1].replace(xt, Tt), e[3] = (e[4] || e[5] || "").replace(xt, Tt), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                    },
                    CHILD: function(e) {
                        return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || a.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && a.error(e[0]), e
                    },
                    PSEUDO: function(e) {
                        var t, n = !e[5] && e[2];
                        return pt.CHILD.test(e[0]) ? null : (e[4] ? e[2] = e[4] : n && ct.test(n) && (t = f(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(e) {
                        return "*" === e ? function() {
                            return !0
                        } : (e = e.replace(xt, Tt).toLowerCase(), function(t) {
                            return t.nodeName && t.nodeName.toLowerCase() === e
                        })
                    },
                    CLASS: function(e) {
                        var t = z[e + " "];
                        return t || (t = RegExp("(^|" + et + ")" + e + "(" + et + "|$)")) && z(e, function(e) {
                            return t.test(e.className || typeof e.getAttribute !== V && e.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(e, t, n) {
                        return function(r) {
                            var i = a.attr(r, e);
                            return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.substr(i.length - n.length) === n : "~=" === t ? (" " + i + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.substr(0, n.length + 1) === n + "-" : !1) : !0
                        }
                    },
                    CHILD: function(e, t, n, r, i) {
                        var o = "nth" !== e.slice(0, 3),
                            a = "last" !== e.slice(-4),
                            s = "of-type" === t;
                        return 1 === r && 0 === i ? function(e) {
                            return !!e.parentNode
                        } : function(t, n, u) {
                            var l, c, f, p, d, h, g = o !== a ? "nextSibling" : "previousSibling",
                                m = t.parentNode,
                                y = s && t.nodeName.toLowerCase(),
                                v = !u && !s;
                            if (m) {
                                if (o) {
                                    for (; g;) {
                                        for (f = t; f = f[g];)
                                            if (s ? f.nodeName.toLowerCase() === y : 1 === f.nodeType) return !1;
                                        h = g = "only" === e && !h && "nextSibling"
                                    }
                                    return !0
                                }
                                if (h = [a ? m.firstChild : m.lastChild], a && v) {
                                    for (c = m[P] || (m[P] = {}), l = c[e] || [], d = l[0] === $ && l[1], p = l[0] === $ && l[2], f = d && m.childNodes[d]; f = ++d && f && f[g] || (p = d = 0) || h.pop();)
                                        if (1 === f.nodeType && ++p && f === t) {
                                            c[e] = [$, d, p];
                                            break
                                        }
                                } else if (v && (l = (t[P] || (t[P] = {}))[e]) && l[0] === $) p = l[1];
                                else
                                    for (;
                                        (f = ++d && f && f[g] || (p = d = 0) || h.pop()) && ((s ? f.nodeName.toLowerCase() !== y : 1 !== f.nodeType) || !++p || (v && ((f[P] || (f[P] = {}))[e] = [$, p]), f !== t)););
                                return p -= i, p === r || 0 === p % r && p / r >= 0
                            }
                        }
                    },
                    PSEUDO: function(e, t) {
                        var n, r = C.pseudos[e] || C.setFilters[e.toLowerCase()] || a.error("unsupported pseudo: " + e);
                        return r[P] ? r(t) : r.length > 1 ? (n = [e, e, "", t], C.setFilters.hasOwnProperty(e.toLowerCase()) ? i(function(e, n) {
                            for (var i, o = r(e, t), a = o.length; a--;) i = Z.call(e, o[a]), e[i] = !(n[i] = o[a])
                        }) : function(e) {
                            return r(e, 0, n)
                        }) : r
                    }
                },
                pseudos: {
                    not: i(function(e) {
                        var t = [],
                            n = [],
                            r = S(e.replace(at, "$1"));
                        return r[P] ? i(function(e, t, n, i) {
                            for (var o, a = r(e, null, i, []), s = e.length; s--;)(o = a[s]) && (e[s] = !(t[s] = o))
                        }) : function(e, i, o) {
                            return t[0] = e, r(t, null, o, n), !n.pop()
                        }
                    }),
                    has: i(function(e) {
                        return function(t) {
                            return a(e, t).length > 0
                        }
                    }),
                    contains: i(function(e) {
                        return function(t) {
                            return (t.textContent || t.innerText || k(t)).indexOf(e) > -1
                        }
                    }),
                    lang: i(function(e) {
                        return ft.test(e || "") || a.error("unsupported lang: " + e), e = e.replace(xt, Tt).toLowerCase(),
                            function(t) {
                                var n;
                                do
                                    if (n = M ? t.getAttribute("xml:lang") || t.getAttribute("lang") : t.lang) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-"); while ((t = t.parentNode) && 1 === t.nodeType);
                                return !1
                            }
                    }),
                    target: function(t) {
                        var n = e.location && e.location.hash;
                        return n && n.slice(1) === t.id
                    },
                    root: function(e) {
                        return e === H
                    },
                    focus: function(e) {
                        return e === L.activeElement && (!L.hasFocus || L.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: function(e) {
                        return e.disabled === !1
                    },
                    disabled: function(e) {
                        return e.disabled === !0
                    },
                    checked: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && !!e.checked || "option" === t && !!e.selected
                    },
                    selected: function(e) {
                        return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                    },
                    empty: function(e) {
                        for (e = e.firstChild; e; e = e.nextSibling)
                            if (e.nodeName > "@" || 3 === e.nodeType || 4 === e.nodeType) return !1;
                        return !0
                    },
                    parent: function(e) {
                        return !C.pseudos.empty(e)
                    },
                    header: function(e) {
                        return yt.test(e.nodeName)
                    },
                    input: function(e) {
                        return mt.test(e.nodeName)
                    },
                    button: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && "button" === e.type || "button" === t
                    },
                    text: function(e) {
                        var t;
                        return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || t.toLowerCase() === e.type)
                    },
                    first: c(function() {
                        return [0]
                    }),
                    last: c(function(e, t) {
                        return [t - 1]
                    }),
                    eq: c(function(e, t, n) {
                        return [0 > n ? n + t : n]
                    }),
                    even: c(function(e, t) {
                        for (var n = 0; t > n; n += 2) e.push(n);
                        return e
                    }),
                    odd: c(function(e, t) {
                        for (var n = 1; t > n; n += 2) e.push(n);
                        return e
                    }),
                    lt: c(function(e, t, n) {
                        for (var r = 0 > n ? n + t : n; --r >= 0;) e.push(r);
                        return e
                    }),
                    gt: c(function(e, t, n) {
                        for (var r = 0 > n ? n + t : n; t > ++r;) e.push(r);
                        return e
                    })
                }
            };
            for (w in {
                    radio: !0,
                    checkbox: !0,
                    file: !0,
                    password: !0,
                    image: !0
                }) C.pseudos[w] = u(w);
            for (w in {
                    submit: !0,
                    reset: !0
                }) C.pseudos[w] = l(w);
            S = a.compile = function(e, t) {
                var n, r = [],
                    i = [],
                    o = U[e + " "];
                if (!o) {
                    for (t || (t = f(e)), n = t.length; n--;) o = y(t[n]), o[P] ? r.push(o) : i.push(o);
                    o = U(e, v(i, r))
                }
                return o
            }, C.pseudos.nth = C.pseudos.eq, C.filters = T.prototype = C.pseudos, C.setFilters = new T, D(), a.attr = st.attr, st.find = a, st.expr = a.selectors, st.expr[":"] = st.expr.pseudos, st.unique = a.uniqueSort, st.text = a.getText, st.isXMLDoc = a.isXML, st.contains = a.contains
        }(e);
    var Pt = /Until$/,
        Rt = /^(?:parents|prev(?:Until|All))/,
        Wt = /^.[^:#\[\.,]*$/,
        $t = st.expr.match.needsContext,
        It = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    st.fn.extend({
        find: function(e) {
            var t, n, r;
            if ("string" != typeof e) return r = this, this.pushStack(st(e).filter(function() {
                for (t = 0; r.length > t; t++)
                    if (st.contains(r[t], this)) return !0
            }));
            for (n = [], t = 0; this.length > t; t++) st.find(e, this[t], n);
            return n = this.pushStack(st.unique(n)), n.selector = (this.selector ? this.selector + " " : "") + e, n
        },
        has: function(e) {
            var t, n = st(e, this),
                r = n.length;
            return this.filter(function() {
                for (t = 0; r > t; t++)
                    if (st.contains(this, n[t])) return !0
            })
        },
        not: function(e) {
            return this.pushStack(f(this, e, !1))
        },
        filter: function(e) {
            return this.pushStack(f(this, e, !0))
        },
        is: function(e) {
            return !!e && ("string" == typeof e ? $t.test(e) ? st(e, this.context).index(this[0]) >= 0 : st.filter(e, this).length > 0 : this.filter(e).length > 0)
        },
        closest: function(e, t) {
            for (var n, r = 0, i = this.length, o = [], a = $t.test(e) || "string" != typeof e ? st(e, t || this.context) : 0; i > r; r++)
                for (n = this[r]; n && n.ownerDocument && n !== t && 11 !== n.nodeType;) {
                    if (a ? a.index(n) > -1 : st.find.matchesSelector(n, e)) {
                        o.push(n);
                        break
                    }
                    n = n.parentNode
                }
            return this.pushStack(o.length > 1 ? st.unique(o) : o)
        },
        index: function(e) {
            return e ? "string" == typeof e ? st.inArray(this[0], st(e)) : st.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(e, t) {
            var n = "string" == typeof e ? st(e, t) : st.makeArray(e && e.nodeType ? [e] : e),
                r = st.merge(this.get(), n);
            return this.pushStack(st.unique(r))
        },
        addBack: function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    }), st.fn.andSelf = st.fn.addBack, st.each({
        parent: function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function(e) {
            return st.dir(e, "parentNode")
        },
        parentsUntil: function(e, t, n) {
            return st.dir(e, "parentNode", n)
        },
        next: function(e) {
            return c(e, "nextSibling")
        },
        prev: function(e) {
            return c(e, "previousSibling")
        },
        nextAll: function(e) {
            return st.dir(e, "nextSibling")
        },
        prevAll: function(e) {
            return st.dir(e, "previousSibling")
        },
        nextUntil: function(e, t, n) {
            return st.dir(e, "nextSibling", n)
        },
        prevUntil: function(e, t, n) {
            return st.dir(e, "previousSibling", n)
        },
        siblings: function(e) {
            return st.sibling((e.parentNode || {}).firstChild, e)
        },
        children: function(e) {
            return st.sibling(e.firstChild)
        },
        contents: function(e) {
            return st.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : st.merge([], e.childNodes)
        }
    }, function(e, t) {
        st.fn[e] = function(n, r) {
            var i = st.map(this, t, n);
            return Pt.test(e) || (r = n), r && "string" == typeof r && (i = st.filter(r, i)), i = this.length > 1 && !It[e] ? st.unique(i) : i, this.length > 1 && Rt.test(e) && (i = i.reverse()), this.pushStack(i)
        }
    }), st.extend({
        filter: function(e, t, n) {
            return n && (e = ":not(" + e + ")"), 1 === t.length ? st.find.matchesSelector(t[0], e) ? [t[0]] : [] : st.find.matches(e, t)
        },
        dir: function(e, n, r) {
            for (var i = [], o = e[n]; o && 9 !== o.nodeType && (r === t || 1 !== o.nodeType || !st(o).is(r));) 1 === o.nodeType && i.push(o), o = o[n];
            return i
        },
        sibling: function(e, t) {
            for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
            return n
        }
    });
    var zt = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        Xt = / jQuery\d+="(?:null|\d+)"/g,
        Ut = RegExp("<(?:" + zt + ")[\\s/>]", "i"),
        Vt = /^\s+/,
        Yt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        Jt = /<([\w:]+)/,
        Gt = /<tbody/i,
        Qt = /<|&#?\w+;/,
        Kt = /<(?:script|style|link)/i,
        Zt = /^(?:checkbox|radio)$/i,
        en = /checked\s*(?:[^=]|=\s*.checked.)/i,
        tn = /^$|\/(?:java|ecma)script/i,
        nn = /^true\/(.*)/,
        rn = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        on = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            legend: [1, "<fieldset>", "</fieldset>"],
            area: [1, "<map>", "</map>"],
            param: [1, "<object>", "</object>"],
            thead: [1, "<table>", "</table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: st.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
        },
        an = p(V),
        sn = an.appendChild(V.createElement("div"));
    on.optgroup = on.option, on.tbody = on.tfoot = on.colgroup = on.caption = on.thead, on.th = on.td, st.fn.extend({
        text: function(e) {
            return st.access(this, function(e) {
                return e === t ? st.text(this) : this.empty().append((this[0] && this[0].ownerDocument || V).createTextNode(e))
            }, null, e, arguments.length)
        },
        wrapAll: function(e) {
            if (st.isFunction(e)) return this.each(function(t) {
                st(this).wrapAll(e.call(this, t))
            });
            if (this[0]) {
                var t = st(e, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    for (var e = this; e.firstChild && 1 === e.firstChild.nodeType;) e = e.firstChild;
                    return e
                }).append(this)
            }
            return this
        },
        wrapInner: function(e) {
            return st.isFunction(e) ? this.each(function(t) {
                st(this).wrapInner(e.call(this, t))
            }) : this.each(function() {
                var t = st(this),
                    n = t.contents();
                n.length ? n.wrapAll(e) : t.append(e)
            })
        },
        wrap: function(e) {
            var t = st.isFunction(e);
            return this.each(function(n) {
                st(this).wrapAll(t ? e.call(this, n) : e)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                st.nodeName(this, "body") || st(this).replaceWith(this.childNodes)
            }).end()
        },
        append: function() {
            return this.domManip(arguments, !0, function(e) {
                (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.appendChild(e)
            })
        },
        prepend: function() {
            return this.domManip(arguments, !0, function(e) {
                (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.insertBefore(e, this.firstChild)
            })
        },
        before: function() {
            return this.domManip(arguments, !1, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            })
        },
        after: function() {
            return this.domManip(arguments, !1, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            })
        },
        remove: function(e, t) {
            for (var n, r = 0; null != (n = this[r]); r++)(!e || st.filter(e, [n]).length > 0) && (t || 1 !== n.nodeType || st.cleanData(b(n)), n.parentNode && (t && st.contains(n.ownerDocument, n) && m(b(n, "script")), n.parentNode.removeChild(n)));
            return this
        },
        empty: function() {
            for (var e, t = 0; null != (e = this[t]); t++) {
                for (1 === e.nodeType && st.cleanData(b(e, !1)); e.firstChild;) e.removeChild(e.firstChild);
                e.options && st.nodeName(e, "select") && (e.options.length = 0)
            }
            return this
        },
        clone: function(e, t) {
            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
                return st.clone(this, e, t)
            })
        },
        html: function(e) {
            return st.access(this, function(e) {
                var n = this[0] || {},
                    r = 0,
                    i = this.length;
                if (e === t) return 1 === n.nodeType ? n.innerHTML.replace(Xt, "") : t;
                if (!("string" != typeof e || Kt.test(e) || !st.support.htmlSerialize && Ut.test(e) || !st.support.leadingWhitespace && Vt.test(e) || on[(Jt.exec(e) || ["", ""])[1].toLowerCase()])) {
                    e = e.replace(Yt, "<$1></$2>");
                    try {
                        for (; i > r; r++) n = this[r] || {}, 1 === n.nodeType && (st.cleanData(b(n, !1)), n.innerHTML = e);
                        n = 0
                    } catch (o) {}
                }
                n && this.empty().append(e)
            }, null, e, arguments.length)
        },
        replaceWith: function(e) {
            var t = st.isFunction(e);
            return t || "string" == typeof e || (e = st(e).not(this).detach()), this.domManip([e], !0, function(e) {
                var t = this.nextSibling,
                    n = this.parentNode;
                (n && 1 === this.nodeType || 11 === this.nodeType) && (st(this).remove(), t ? t.parentNode.insertBefore(e, t) : n.appendChild(e))
            })
        },
        detach: function(e) {
            return this.remove(e, !0)
        },
        domManip: function(e, n, r) {
            e = et.apply([], e);
            var i, o, a, s, u, l, c = 0,
                f = this.length,
                p = this,
                m = f - 1,
                y = e[0],
                v = st.isFunction(y);
            if (v || !(1 >= f || "string" != typeof y || st.support.checkClone) && en.test(y)) return this.each(function(i) {
                var o = p.eq(i);
                v && (e[0] = y.call(this, i, n ? o.html() : t)), o.domManip(e, n, r)
            });
            if (f && (i = st.buildFragment(e, this[0].ownerDocument, !1, this), o = i.firstChild, 1 === i.childNodes.length && (i = o), o)) {
                for (n = n && st.nodeName(o, "tr"), a = st.map(b(i, "script"), h), s = a.length; f > c; c++) u = i, c !== m && (u = st.clone(u, !0, !0), s && st.merge(a, b(u, "script"))), r.call(n && st.nodeName(this[c], "table") ? d(this[c], "tbody") : this[c], u, c);
                if (s)
                    for (l = a[a.length - 1].ownerDocument, st.map(a, g), c = 0; s > c; c++) u = a[c], tn.test(u.type || "") && !st._data(u, "globalEval") && st.contains(l, u) && (u.src ? st.ajax({
                        url: u.src,
                        type: "GET",
                        dataType: "script",
                        async: !1,
                        global: !1,
                        "throws": !0
                    }) : st.globalEval((u.text || u.textContent || u.innerHTML || "").replace(rn, "")));
                i = o = null
            }
            return this
        }
    }), st.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(e, t) {
        st.fn[e] = function(e) {
            for (var n, r = 0, i = [], o = st(e), a = o.length - 1; a >= r; r++) n = r === a ? this : this.clone(!0), st(o[r])[t](n), tt.apply(i, n.get());
            return this.pushStack(i)
        }
    }), st.extend({
        clone: function(e, t, n) {
            var r, i, o, a, s, u = st.contains(e.ownerDocument, e);
            if (st.support.html5Clone || st.isXMLDoc(e) || !Ut.test("<" + e.nodeName + ">") ? s = e.cloneNode(!0) : (sn.innerHTML = e.outerHTML, sn.removeChild(s = sn.firstChild)), !(st.support.noCloneEvent && st.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || st.isXMLDoc(e)))
                for (r = b(s), i = b(e), a = 0; null != (o = i[a]); ++a) r[a] && v(o, r[a]);
            if (t)
                if (n)
                    for (i = i || b(e), r = r || b(s), a = 0; null != (o = i[a]); a++) y(o, r[a]);
                else y(e, s);
            return r = b(s, "script"), r.length > 0 && m(r, !u && b(e, "script")), r = i = o = null, s
        },
        buildFragment: function(e, t, n, r) {
            for (var i, o, a, s, u, l, c, f = e.length, d = p(t), h = [], g = 0; f > g; g++)
                if (o = e[g], o || 0 === o)
                    if ("object" === st.type(o)) st.merge(h, o.nodeType ? [o] : o);
                    else if (Qt.test(o)) {
                for (s = s || d.appendChild(t.createElement("div")), a = (Jt.exec(o) || ["", ""])[1].toLowerCase(), u = on[a] || on._default, s.innerHTML = u[1] + o.replace(Yt, "<$1></$2>") + u[2], c = u[0]; c--;) s = s.lastChild;
                if (!st.support.leadingWhitespace && Vt.test(o) && h.push(t.createTextNode(Vt.exec(o)[0])), !st.support.tbody)
                    for (o = "table" !== a || Gt.test(o) ? "<table>" !== u[1] || Gt.test(o) ? 0 : s : s.firstChild, c = o && o.childNodes.length; c--;) st.nodeName(l = o.childNodes[c], "tbody") && !l.childNodes.length && o.removeChild(l);
                for (st.merge(h, s.childNodes), s.textContent = ""; s.firstChild;) s.removeChild(s.firstChild);
                s = d.lastChild
            } else h.push(t.createTextNode(o));
            for (s && d.removeChild(s), st.support.appendChecked || st.grep(b(h, "input"), x), g = 0; o = h[g++];)
                if ((!r || -1 === st.inArray(o, r)) && (i = st.contains(o.ownerDocument, o), s = b(d.appendChild(o), "script"), i && m(s), n))
                    for (c = 0; o = s[c++];) tn.test(o.type || "") && n.push(o);
            return s = null, d
        },
        cleanData: function(e, n) {
            for (var r, i, o, a, s = 0, u = st.expando, l = st.cache, c = st.support.deleteExpando, f = st.event.special; null != (o = e[s]); s++)
                if ((n || st.acceptData(o)) && (i = o[u], r = i && l[i])) {
                    if (r.events)
                        for (a in r.events) f[a] ? st.event.remove(o, a) : st.removeEvent(o, a, r.handle);
                    l[i] && (delete l[i], c ? delete o[u] : o.removeAttribute !== t ? o.removeAttribute(u) : o[u] = null, K.push(i))
                }
        }
    });
    var un, ln, cn, fn = /alpha\([^)]*\)/i,
        pn = /opacity\s*=\s*([^)]*)/,
        dn = /^(top|right|bottom|left)$/,
        hn = /^(none|table(?!-c[ea]).+)/,
        gn = /^margin/,
        mn = RegExp("^(" + ut + ")(.*)$", "i"),
        yn = RegExp("^(" + ut + ")(?!px)[a-z%]+$", "i"),
        vn = RegExp("^([+-])=(" + ut + ")", "i"),
        bn = {
            BODY: "block"
        },
        xn = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        Tn = {
            letterSpacing: 0,
            fontWeight: 400
        },
        wn = ["Top", "Right", "Bottom", "Left"],
        Nn = ["Webkit", "O", "Moz", "ms"];
    st.fn.extend({
        css: function(e, n) {
            return st.access(this, function(e, n, r) {
                var i, o, a = {},
                    s = 0;
                if (st.isArray(n)) {
                    for (i = ln(e), o = n.length; o > s; s++) a[n[s]] = st.css(e, n[s], !1, i);
                    return a
                }
                return r !== t ? st.style(e, n, r) : st.css(e, n)
            }, e, n, arguments.length > 1)
        },
        show: function() {
            return N(this, !0)
        },
        hide: function() {
            return N(this)
        },
        toggle: function(e) {
            var t = "boolean" == typeof e;
            return this.each(function() {
                (t ? e : w(this)) ? st(this).show(): st(this).hide()
            })
        }
    }), st.extend({
        cssHooks: {
            opacity: {
                get: function(e, t) {
                    if (t) {
                        var n = un(e, "opacity");
                        return "" === n ? "1" : n
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": st.support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(e, n, r, i) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var o, a, s, u = st.camelCase(n),
                    l = e.style;
                if (n = st.cssProps[u] || (st.cssProps[u] = T(l, u)), s = st.cssHooks[n] || st.cssHooks[u], r === t) return s && "get" in s && (o = s.get(e, !1, i)) !== t ? o : l[n];
                if (a = typeof r, "string" === a && (o = vn.exec(r)) && (r = (o[1] + 1) * o[2] + parseFloat(st.css(e, n)), a = "number"), !(null == r || "number" === a && isNaN(r) || ("number" !== a || st.cssNumber[u] || (r += "px"), st.support.clearCloneStyle || "" !== r || 0 !== n.indexOf("background") || (l[n] = "inherit"), s && "set" in s && (r = s.set(e, r, i)) === t))) try {
                    l[n] = r
                } catch (c) {}
            }
        },
        css: function(e, n, r, i) {
            var o, a, s, u = st.camelCase(n);
            return n = st.cssProps[u] || (st.cssProps[u] = T(e.style, u)), s = st.cssHooks[n] || st.cssHooks[u], s && "get" in s && (o = s.get(e, !0, r)), o === t && (o = un(e, n, i)), "normal" === o && n in Tn && (o = Tn[n]), r ? (a = parseFloat(o), r === !0 || st.isNumeric(a) ? a || 0 : o) : o
        },
        swap: function(e, t, n, r) {
            var i, o, a = {};
            for (o in t) a[o] = e.style[o], e.style[o] = t[o];
            i = n.apply(e, r || []);
            for (o in t) e.style[o] = a[o];
            return i
        }
    }), e.getComputedStyle ? (ln = function(t) {
        return e.getComputedStyle(t, null)
    }, un = function(e, n, r) {
        var i, o, a, s = r || ln(e),
            u = s ? s.getPropertyValue(n) || s[n] : t,
            l = e.style;
        return s && ("" !== u || st.contains(e.ownerDocument, e) || (u = st.style(e, n)), yn.test(u) && gn.test(n) && (i = l.width, o = l.minWidth, a = l.maxWidth, l.minWidth = l.maxWidth = l.width = u, u = s.width, l.width = i, l.minWidth = o, l.maxWidth = a)), u
    }) : V.documentElement.currentStyle && (ln = function(e) {
        return e.currentStyle
    }, un = function(e, n, r) {
        var i, o, a, s = r || ln(e),
            u = s ? s[n] : t,
            l = e.style;
        return null == u && l && l[n] && (u = l[n]), yn.test(u) && !dn.test(n) && (i = l.left, o = e.runtimeStyle, a = o && o.left, a && (o.left = e.currentStyle.left), l.left = "fontSize" === n ? "1em" : u, u = l.pixelLeft + "px", l.left = i, a && (o.left = a)), "" === u ? "auto" : u
    }), st.each(["height", "width"], function(e, n) {
        st.cssHooks[n] = {
            get: function(e, r, i) {
                return r ? 0 === e.offsetWidth && hn.test(st.css(e, "display")) ? st.swap(e, xn, function() {
                    return E(e, n, i)
                }) : E(e, n, i) : t
            },
            set: function(e, t, r) {
                var i = r && ln(e);
                return C(e, t, r ? k(e, n, r, st.support.boxSizing && "border-box" === st.css(e, "boxSizing", !1, i), i) : 0)
            }
        }
    }), st.support.opacity || (st.cssHooks.opacity = {
        get: function(e, t) {
            return pn.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : ""
        },
        set: function(e, t) {
            var n = e.style,
                r = e.currentStyle,
                i = st.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "",
                o = r && r.filter || n.filter || "";
            n.zoom = 1, (t >= 1 || "" === t) && "" === st.trim(o.replace(fn, "")) && n.removeAttribute && (n.removeAttribute("filter"), "" === t || r && !r.filter) || (n.filter = fn.test(o) ? o.replace(fn, i) : o + " " + i)
        }
    }), st(function() {
        st.support.reliableMarginRight || (st.cssHooks.marginRight = {
            get: function(e, n) {
                return n ? st.swap(e, {
                    display: "inline-block"
                }, un, [e, "marginRight"]) : t
            }
        }), !st.support.pixelPosition && st.fn.position && st.each(["top", "left"], function(e, n) {
            st.cssHooks[n] = {
                get: function(e, r) {
                    return r ? (r = un(e, n), yn.test(r) ? st(e).position()[n] + "px" : r) : t
                }
            }
        })
    }), st.expr && st.expr.filters && (st.expr.filters.hidden = function(e) {
        return 0 === e.offsetWidth && 0 === e.offsetHeight || !st.support.reliableHiddenOffsets && "none" === (e.style && e.style.display || st.css(e, "display"))
    }, st.expr.filters.visible = function(e) {
        return !st.expr.filters.hidden(e)
    }), st.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(e, t) {
        st.cssHooks[e + t] = {
            expand: function(n) {
                for (var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; 4 > r; r++) i[e + wn[r] + t] = o[r] || o[r - 2] || o[0];
                return i
            }
        }, gn.test(e) || (st.cssHooks[e + t].set = C)
    });
    var Cn = /%20/g,
        kn = /\[\]$/,
        En = /\r?\n/g,
        Sn = /^(?:submit|button|image|reset)$/i,
        An = /^(?:input|select|textarea|keygen)/i;
    st.fn.extend({
        serialize: function() {
            return st.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var e = st.prop(this, "elements");
                return e ? st.makeArray(e) : this
            }).filter(function() {
                var e = this.type;
                return this.name && !st(this).is(":disabled") && An.test(this.nodeName) && !Sn.test(e) && (this.checked || !Zt.test(e))
            }).map(function(e, t) {
                var n = st(this).val();
                return null == n ? null : st.isArray(n) ? st.map(n, function(e) {
                    return {
                        name: t.name,
                        value: e.replace(En, "\r\n")
                    }
                }) : {
                    name: t.name,
                    value: n.replace(En, "\r\n")
                }
            }).get()
        }
    }), st.param = function(e, n) {
        var r, i = [],
            o = function(e, t) {
                t = st.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
        if (n === t && (n = st.ajaxSettings && st.ajaxSettings.traditional), st.isArray(e) || e.jquery && !st.isPlainObject(e)) st.each(e, function() {
            o(this.name, this.value)
        });
        else
            for (r in e) j(r, e[r], n, o);
        return i.join("&").replace(Cn, "+")
    };
    var jn, Dn, Ln = st.now(),
        Hn = /\?/,
        Mn = /#.*$/,
        qn = /([?&])_=[^&]*/,
        _n = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
        Fn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        On = /^(?:GET|HEAD)$/,
        Bn = /^\/\//,
        Pn = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
        Rn = st.fn.load,
        Wn = {},
        $n = {},
        In = "*/".concat("*");
    try {
        Dn = Y.href
    } catch (zn) {
        Dn = V.createElement("a"), Dn.href = "", Dn = Dn.href
    }
    jn = Pn.exec(Dn.toLowerCase()) || [], st.fn.load = function(e, n, r) {
        if ("string" != typeof e && Rn) return Rn.apply(this, arguments);
        var i, o, a, s = this,
            u = e.indexOf(" ");
        return u >= 0 && (i = e.slice(u, e.length), e = e.slice(0, u)), st.isFunction(n) ? (r = n, n = t) : n && "object" == typeof n && (o = "POST"), s.length > 0 && st.ajax({
            url: e,
            type: o,
            dataType: "html",
            data: n
        }).done(function(e) {
            a = arguments, s.html(i ? st("<div>").append(st.parseHTML(e)).find(i) : e)
        }).complete(r && function(e, t) {
            s.each(r, a || [e.responseText, t, e])
        }), this
    }, st.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
        st.fn[t] = function(e) {
            return this.on(t, e)
        }
    }), st.each(["get", "post"], function(e, n) {
        st[n] = function(e, r, i, o) {
            return st.isFunction(r) && (o = o || i, i = r, r = t), st.ajax({
                url: e,
                type: n,
                dataType: o,
                data: r,
                success: i
            })
        }
    }), st.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: Dn,
            type: "GET",
            isLocal: Fn.test(jn[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": In,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText"
            },
            converters: {
                "* text": e.String,
                "text html": !0,
                "text json": st.parseJSON,
                "text xml": st.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(e, t) {
            return t ? H(H(e, st.ajaxSettings), t) : H(st.ajaxSettings, e)
        },
        ajaxPrefilter: D(Wn),
        ajaxTransport: D($n),
        ajax: function(e, n) {
            function r(e, n, r, s) {
                var l, f, v, b, T, N = n;
                2 !== x && (x = 2, u && clearTimeout(u), i = t, a = s || "", w.readyState = e > 0 ? 4 : 0, r && (b = M(p, w, r)), e >= 200 && 300 > e || 304 === e ? (p.ifModified && (T = w.getResponseHeader("Last-Modified"), T && (st.lastModified[o] = T), T = w.getResponseHeader("etag"), T && (st.etag[o] = T)), 304 === e ? (l = !0, N = "notmodified") : (l = q(p, b), N = l.state, f = l.data, v = l.error, l = !v)) : (v = N, (e || !N) && (N = "error", 0 > e && (e = 0))), w.status = e, w.statusText = (n || N) + "", l ? g.resolveWith(d, [f, N, w]) : g.rejectWith(d, [w, N, v]), w.statusCode(y), y = t, c && h.trigger(l ? "ajaxSuccess" : "ajaxError", [w, p, l ? f : v]), m.fireWith(d, [w, N]), c && (h.trigger("ajaxComplete", [w, p]), --st.active || st.event.trigger("ajaxStop")))
            }
            "object" == typeof e && (n = e, e = t), n = n || {};
            var i, o, a, s, u, l, c, f, p = st.ajaxSetup({}, n),
                d = p.context || p,
                h = p.context && (d.nodeType || d.jquery) ? st(d) : st.event,
                g = st.Deferred(),
                m = st.Callbacks("once memory"),
                y = p.statusCode || {},
                v = {},
                b = {},
                x = 0,
                T = "canceled",
                w = {
                    readyState: 0,
                    getResponseHeader: function(e) {
                        var t;
                        if (2 === x) {
                            if (!s)
                                for (s = {}; t = _n.exec(a);) s[t[1].toLowerCase()] = t[2];
                            t = s[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    },
                    getAllResponseHeaders: function() {
                        return 2 === x ? a : null
                    },
                    setRequestHeader: function(e, t) {
                        var n = e.toLowerCase();
                        return x || (e = b[n] = b[n] || e, v[e] = t), this
                    },
                    overrideMimeType: function(e) {
                        return x || (p.mimeType = e), this
                    },
                    statusCode: function(e) {
                        var t;
                        if (e)
                            if (2 > x)
                                for (t in e) y[t] = [y[t], e[t]];
                            else w.always(e[w.status]);
                        return this
                    },
                    abort: function(e) {
                        var t = e || T;
                        return i && i.abort(t), r(0, t), this
                    }
                };
            if (g.promise(w).complete = m.add, w.success = w.done, w.error = w.fail, p.url = ((e || p.url || Dn) + "").replace(Mn, "").replace(Bn, jn[1] + "//"), p.type = n.method || n.type || p.method || p.type, p.dataTypes = st.trim(p.dataType || "*").toLowerCase().match(lt) || [""], null == p.crossDomain && (l = Pn.exec(p.url.toLowerCase()), p.crossDomain = !(!l || l[1] === jn[1] && l[2] === jn[2] && (l[3] || ("http:" === l[1] ? 80 : 443)) == (jn[3] || ("http:" === jn[1] ? 80 : 443)))), p.data && p.processData && "string" != typeof p.data && (p.data = st.param(p.data, p.traditional)), L(Wn, p, n, w), 2 === x) return w;
            c = p.global, c && 0 === st.active++ && st.event.trigger("ajaxStart"), p.type = p.type.toUpperCase(), p.hasContent = !On.test(p.type), o = p.url, p.hasContent || (p.data && (o = p.url += (Hn.test(o) ? "&" : "?") + p.data, delete p.data), p.cache === !1 && (p.url = qn.test(o) ? o.replace(qn, "$1_=" + Ln++) : o + (Hn.test(o) ? "&" : "?") + "_=" + Ln++)), p.ifModified && (st.lastModified[o] && w.setRequestHeader("If-Modified-Since", st.lastModified[o]), st.etag[o] && w.setRequestHeader("If-None-Match", st.etag[o])), (p.data && p.hasContent && p.contentType !== !1 || n.contentType) && w.setRequestHeader("Content-Type", p.contentType), w.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + In + "; q=0.01" : "") : p.accepts["*"]);
            for (f in p.headers) w.setRequestHeader(f, p.headers[f]);
            if (p.beforeSend && (p.beforeSend.call(d, w, p) === !1 || 2 === x)) return w.abort();
            T = "abort";
            for (f in {
                    success: 1,
                    error: 1,
                    complete: 1
                }) w[f](p[f]);
            if (i = L($n, p, n, w)) {
                w.readyState = 1, c && h.trigger("ajaxSend", [w, p]), p.async && p.timeout > 0 && (u = setTimeout(function() {
                    w.abort("timeout")
                }, p.timeout));
                try {
                    x = 1, i.send(v, r)
                } catch (N) {
                    if (!(2 > x)) throw N;
                    r(-1, N)
                }
            } else r(-1, "No Transport");
            return w
        },
        getScript: function(e, n) {
            return st.get(e, t, n, "script")
        },
        getJSON: function(e, t, n) {
            return st.get(e, t, n, "json")
        }
    }), st.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(e) {
                return st.globalEval(e), e
            }
        }
    }), st.ajaxPrefilter("script", function(e) {
        e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
    }), st.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var n, r = V.head || st("head")[0] || V.documentElement;
            return {
                send: function(t, i) {
                    n = V.createElement("script"), n.async = !0, e.scriptCharset && (n.charset = e.scriptCharset), n.src = e.url, n.onload = n.onreadystatechange = function(e, t) {
                        (t || !n.readyState || /loaded|complete/.test(n.readyState)) && (n.onload = n.onreadystatechange = null, n.parentNode && n.parentNode.removeChild(n), n = null, t || i(200, "success"))
                    }, r.insertBefore(n, r.firstChild)
                },
                abort: function() {
                    n && n.onload(t, !0)
                }
            }
        }
    });
    var Xn = [],
        Un = /(=)\?(?=&|$)|\?\?/;
    st.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var e = Xn.pop() || st.expando + "_" + Ln++;
            return this[e] = !0, e
        }
    }), st.ajaxPrefilter("json jsonp", function(n, r, i) {
        var o, a, s, u = n.jsonp !== !1 && (Un.test(n.url) ? "url" : "string" == typeof n.data && !(n.contentType || "").indexOf("application/x-www-form-urlencoded") && Un.test(n.data) && "data");
        return u || "jsonp" === n.dataTypes[0] ? (o = n.jsonpCallback = st.isFunction(n.jsonpCallback) ? n.jsonpCallback() : n.jsonpCallback, u ? n[u] = n[u].replace(Un, "$1" + o) : n.jsonp !== !1 && (n.url += (Hn.test(n.url) ? "&" : "?") + n.jsonp + "=" + o), n.converters["script json"] = function() {
            return s || st.error(o + " was not called"), s[0]
        }, n.dataTypes[0] = "json", a = e[o], e[o] = function() {
            s = arguments
        }, i.always(function() {
            e[o] = a, n[o] && (n.jsonpCallback = r.jsonpCallback, Xn.push(o)), s && st.isFunction(a) && a(s[0]), s = a = t
        }), "script") : t
    });
    var Vn, Yn, Jn = 0,
        Gn = e.ActiveXObject && function() {
            var e;
            for (e in Vn) Vn[e](t, !0)
        };
    st.ajaxSettings.xhr = e.ActiveXObject ? function() {
        return !this.isLocal && _() || F()
    } : _, Yn = st.ajaxSettings.xhr(), st.support.cors = !!Yn && "withCredentials" in Yn, Yn = st.support.ajax = !!Yn, Yn && st.ajaxTransport(function(n) {
        if (!n.crossDomain || st.support.cors) {
            var r;
            return {
                send: function(i, o) {
                    var a, s, u = n.xhr();
                    if (n.username ? u.open(n.type, n.url, n.async, n.username, n.password) : u.open(n.type, n.url, n.async), n.xhrFields)
                        for (s in n.xhrFields) u[s] = n.xhrFields[s];
                    n.mimeType && u.overrideMimeType && u.overrideMimeType(n.mimeType), n.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (s in i) u.setRequestHeader(s, i[s])
                    } catch (l) {}
                    u.send(n.hasContent && n.data || null), r = function(e, i) {
                        var s, l, c, f, p;
                        try {
                            if (r && (i || 4 === u.readyState))
                                if (r = t, a && (u.onreadystatechange = st.noop, Gn && delete Vn[a]), i) 4 !== u.readyState && u.abort();
                                else {
                                    f = {}, s = u.status, p = u.responseXML, c = u.getAllResponseHeaders(), p && p.documentElement && (f.xml = p), "string" == typeof u.responseText && (f.text = u.responseText);
                                    try {
                                        l = u.statusText
                                    } catch (d) {
                                        l = ""
                                    }
                                    s || !n.isLocal || n.crossDomain ? 1223 === s && (s = 204) : s = f.text ? 200 : 404
                                }
                        } catch (h) {
                            i || o(-1, h)
                        }
                        f && o(s, l, f, c)
                    }, n.async ? 4 === u.readyState ? setTimeout(r) : (a = ++Jn, Gn && (Vn || (Vn = {}, st(e).unload(Gn)), Vn[a] = r), u.onreadystatechange = r) : r()
                },
                abort: function() {
                    r && r(t, !0)
                }
            }
        }
    });
    var Qn, Kn, Zn = /^(?:toggle|show|hide)$/,
        er = RegExp("^(?:([+-])=|)(" + ut + ")([a-z%]*)$", "i"),
        tr = /queueHooks$/,
        nr = [W],
        rr = {
            "*": [function(e, t) {
                var n, r, i = this.createTween(e, t),
                    o = er.exec(t),
                    a = i.cur(),
                    s = +a || 0,
                    u = 1,
                    l = 20;
                if (o) {
                    if (n = +o[2], r = o[3] || (st.cssNumber[e] ? "" : "px"), "px" !== r && s) {
                        s = st.css(i.elem, e, !0) || n || 1;
                        do u = u || ".5", s /= u, st.style(i.elem, e, s + r); while (u !== (u = i.cur() / a) && 1 !== u && --l)
                    }
                    i.unit = r, i.start = s, i.end = o[1] ? s + (o[1] + 1) * n : n
                }
                return i
            }]
        };
    st.Animation = st.extend(P, {
        tweener: function(e, t) {
            st.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
            for (var n, r = 0, i = e.length; i > r; r++) n = e[r], rr[n] = rr[n] || [], rr[n].unshift(t)
        },
        prefilter: function(e, t) {
            t ? nr.unshift(e) : nr.push(e)
        }
    }), st.Tween = $, $.prototype = {
        constructor: $,
        init: function(e, t, n, r, i, o) {
            this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (st.cssNumber[n] ? "" : "px")
        },
        cur: function() {
            var e = $.propHooks[this.prop];
            return e && e.get ? e.get(this) : $.propHooks._default.get(this)
        },
        run: function(e) {
            var t, n = $.propHooks[this.prop];
            return this.pos = t = this.options.duration ? st.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : $.propHooks._default.set(this), this
        }
    }, $.prototype.init.prototype = $.prototype, $.propHooks = {
        _default: {
            get: function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = st.css(e.elem, e.prop, "auto"), t && "auto" !== t ? t : 0) : e.elem[e.prop]
            },
            set: function(e) {
                st.fx.step[e.prop] ? st.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[st.cssProps[e.prop]] || st.cssHooks[e.prop]) ? st.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
            }
        }
    }, $.propHooks.scrollTop = $.propHooks.scrollLeft = {
        set: function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    }, st.each(["toggle", "show", "hide"], function(e, t) {
        var n = st.fn[t];
        st.fn[t] = function(e, r, i) {
            return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(I(t, !0), e, r, i)
        }
    }), st.fn.extend({
        fadeTo: function(e, t, n, r) {
            return this.filter(w).css("opacity", 0).show().end().animate({
                opacity: t
            }, e, n, r)
        },
        animate: function(e, t, n, r) {
            var i = st.isEmptyObject(e),
                o = st.speed(t, n, r),
                a = function() {
                    var t = P(this, st.extend({}, e), o);
                    a.finish = function() {
                        t.stop(!0)
                    }, (i || st._data(this, "finish")) && t.stop(!0)
                };
            return a.finish = a, i || o.queue === !1 ? this.each(a) : this.queue(o.queue, a)
        },
        stop: function(e, n, r) {
            var i = function(e) {
                var t = e.stop;
                delete e.stop, t(r)
            };
            return "string" != typeof e && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || "fx", []), this.each(function() {
                var t = !0,
                    n = null != e && e + "queueHooks",
                    o = st.timers,
                    a = st._data(this);
                if (n) a[n] && a[n].stop && i(a[n]);
                else
                    for (n in a) a[n] && a[n].stop && tr.test(n) && i(a[n]);
                for (n = o.length; n--;) o[n].elem !== this || null != e && o[n].queue !== e || (o[n].anim.stop(r), t = !1, o.splice(n, 1));
                (t || !r) && st.dequeue(this, e)
            })
        },
        finish: function(e) {
            return e !== !1 && (e = e || "fx"), this.each(function() {
                var t, n = st._data(this),
                    r = n[e + "queue"],
                    i = n[e + "queueHooks"],
                    o = st.timers,
                    a = r ? r.length : 0;
                for (n.finish = !0, st.queue(this, e, []), i && i.cur && i.cur.finish && i.cur.finish.call(this), t = o.length; t--;) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1));
                for (t = 0; a > t; t++) r[t] && r[t].finish && r[t].finish.call(this);
                delete n.finish
            })
        }
    }), st.each({
        slideDown: I("show"),
        slideUp: I("hide"),
        slideToggle: I("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(e, t) {
        st.fn[e] = function(e, n, r) {
            return this.animate(t, e, n, r)
        }
    }), st.speed = function(e, t, n) {
        var r = e && "object" == typeof e ? st.extend({}, e) : {
            complete: n || !n && t || st.isFunction(e) && e,
            duration: e,
            easing: n && t || t && !st.isFunction(t) && t
        };
        return r.duration = st.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in st.fx.speeds ? st.fx.speeds[r.duration] : st.fx.speeds._default, (null == r.queue || r.queue === !0) && (r.queue = "fx"), r.old = r.complete, r.complete = function() {
            st.isFunction(r.old) && r.old.call(this), r.queue && st.dequeue(this, r.queue)
        }, r
    }, st.easing = {
        linear: function(e) {
            return e
        },
        swing: function(e) {
            return .5 - Math.cos(e * Math.PI) / 2
        }
    }, st.timers = [], st.fx = $.prototype.init, st.fx.tick = function() {
        var e, n = st.timers,
            r = 0;
        for (Qn = st.now(); n.length > r; r++) e = n[r], e() || n[r] !== e || n.splice(r--, 1);
        n.length || st.fx.stop(), Qn = t
    }, st.fx.timer = function(e) {
        e() && st.timers.push(e) && st.fx.start()
    }, st.fx.interval = 13, st.fx.start = function() {
        Kn || (Kn = setInterval(st.fx.tick, st.fx.interval))
    }, st.fx.stop = function() {
        clearInterval(Kn), Kn = null
    }, st.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, st.fx.step = {}, st.expr && st.expr.filters && (st.expr.filters.animated = function(e) {
        return st.grep(st.timers, function(t) {
            return e === t.elem
        }).length
    }), st.fn.offset = function(e) {
        if (arguments.length) return e === t ? this : this.each(function(t) {
            st.offset.setOffset(this, e, t)
        });
        var n, r, i = {
                top: 0,
                left: 0
            },
            o = this[0],
            a = o && o.ownerDocument;
        if (a) return n = a.documentElement, st.contains(n, o) ? (o.getBoundingClientRect !== t && (i = o.getBoundingClientRect()), r = z(a), {
            top: i.top + (r.pageYOffset || n.scrollTop) - (n.clientTop || 0),
            left: i.left + (r.pageXOffset || n.scrollLeft) - (n.clientLeft || 0)
        }) : i
    }, st.offset = {
        setOffset: function(e, t, n) {
            var r = st.css(e, "position");
            "static" === r && (e.style.position = "relative");
            var i, o, a = st(e),
                s = a.offset(),
                u = st.css(e, "top"),
                l = st.css(e, "left"),
                c = ("absolute" === r || "fixed" === r) && st.inArray("auto", [u, l]) > -1,
                f = {},
                p = {};
            c ? (p = a.position(), i = p.top, o = p.left) : (i = parseFloat(u) || 0, o = parseFloat(l) || 0), st.isFunction(t) && (t = t.call(e, n, s)), null != t.top && (f.top = t.top - s.top + i), null != t.left && (f.left = t.left - s.left + o), "using" in t ? t.using.call(e, f) : a.css(f)
        }
    }, st.fn.extend({
        position: function() {
            if (this[0]) {
                var e, t, n = {
                        top: 0,
                        left: 0
                    },
                    r = this[0];
                return "fixed" === st.css(r, "position") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), st.nodeName(e[0], "html") || (n = e.offset()), n.top += st.css(e[0], "borderTopWidth", !0), n.left += st.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - n.top - st.css(r, "marginTop", !0),
                    left: t.left - n.left - st.css(r, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var e = this.offsetParent || V.documentElement; e && !st.nodeName(e, "html") && "static" === st.css(e, "position");) e = e.offsetParent;
                return e || V.documentElement
            })
        }
    }), st.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(e, n) {
        var r = /Y/.test(n);
        st.fn[e] = function(i) {
            return st.access(this, function(e, i, o) {
                var a = z(e);
                return o === t ? a ? n in a ? a[n] : a.document.documentElement[i] : e[i] : (a ? a.scrollTo(r ? st(a).scrollLeft() : o, r ? o : st(a).scrollTop()) : e[i] = o, t)
            }, e, i, arguments.length, null)
        }
    }), st.each({
        Height: "height",
        Width: "width"
    }, function(e, n) {
        st.each({
            padding: "inner" + e,
            content: n,
            "": "outer" + e
        }, function(r, i) {
            st.fn[i] = function(i, o) {
                var a = arguments.length && (r || "boolean" != typeof i),
                    s = r || (i === !0 || o === !0 ? "margin" : "border");
                return st.access(this, function(n, r, i) {
                    var o;
                    return st.isWindow(n) ? n.document.documentElement["client" + e] : 9 === n.nodeType ? (o = n.documentElement, Math.max(n.body["scroll" + e], o["scroll" + e], n.body["offset" + e], o["offset" + e], o["client" + e])) : i === t ? st.css(n, r, s) : st.style(n, r, i, s)
                }, n, a ? i : t, a, null)
            }
        })
    }), e.jQuery = e.$ = st, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function() {
        return st
    })
})(window);



//  \\
//  Raphal 2.1.0 - JavaScript Vector Library                           \\
//  \\
//  Copyright  2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)     \\
//  Copyright  2008-2012 Sencha Labs (http://sencha.com)               \\
//  \\
//  Licensed under the MIT (http://raphaeljs.com/license.html) license. \\
//  \\
(function(n) {
    var e, t, r = "0.4.2",
        f = "hasOwnProperty",
        i = /[\.\/]/,
        o = "*",
        u = function() {},
        l = function(n, e) {
            return n - e
        },
        s = {
            n: {}
        },
        p = function(n, r) {
            n += "";
            var f, i = t,
                o = Array.prototype.slice.call(arguments, 2),
                u = p.listeners(n),
                s = 0,
                a = [],
                c = {},
                h = [],
                d = e;
            e = n, t = 0;
            for (var g = 0, v = u.length; v > g; g++) "zIndex" in u[g] && (a.push(u[g].zIndex), 0 > u[g].zIndex && (c[u[g].zIndex] = u[g]));
            for (a.sort(l); 0 > a[s];)
                if (f = c[a[s++]], h.push(f.apply(r, o)), t) return t = i, h;
            for (g = 0; v > g; g++)
                if (f = u[g], "zIndex" in f)
                    if (f.zIndex == a[s]) {
                        if (h.push(f.apply(r, o)), t) break;
                        do
                            if (s++, f = c[a[s]], f && h.push(f.apply(r, o)), t) break; while (f)
                    } else c[f.zIndex] = f;
            else if (h.push(f.apply(r, o)), t) break;
            return t = i, e = d, h.length ? h : null
        };
    p._events = s, p.listeners = function(n) {
        var e, t, r, f, u, l, p, a, c = n.split(i),
            h = s,
            d = [h],
            g = [];
        for (f = 0, u = c.length; u > f; f++) {
            for (a = [], l = 0, p = d.length; p > l; l++)
                for (h = d[l].n, t = [h[c[f]], h[o]], r = 2; r--;) e = t[r], e && (a.push(e), g = g.concat(e.f || []));
            d = a
        }
        return g
    }, p.on = function(n, e) {
        if (n += "", "function" != typeof e) return function() {};
        for (var t = n.split(i), r = s, f = 0, o = t.length; o > f; f++) r = r.n, r = r.hasOwnProperty(t[f]) && r[t[f]] || (r[t[f]] = {
            n: {}
        });
        for (r.f = r.f || [], f = 0, o = r.f.length; o > f; f++)
            if (r.f[f] == e) return u;
        return r.f.push(e),
            function(n) {
                +n == +n && (e.zIndex = +n)
            }
    }, p.f = function(n) {
        var e = [].slice.call(arguments, 1);
        return function() {
            p.apply(null, [n, null].concat(e).concat([].slice.call(arguments, 0)))
        }
    }, p.stop = function() {
        t = 1
    }, p.nt = function(n) {
        return n ? RegExp("(?:\\.|\\/|^)" + n + "(?:\\.|\\/|$)").test(e) : e
    }, p.nts = function() {
        return e.split(i)
    }, p.off = p.unbind = function(n, e) {
        if (!n) return p._events = s = {
            n: {}
        }, void 0;
        var t, r, u, l, a, c, h, d = n.split(i),
            g = [s];
        for (l = 0, a = d.length; a > l; l++)
            for (c = 0; g.length > c; c += u.length - 2) {
                if (u = [c, 1], t = g[c].n, d[l] != o) t[d[l]] && u.push(t[d[l]]);
                else
                    for (r in t) t[f](r) && u.push(t[r]);
                g.splice.apply(g, u)
            }
        for (l = 0, a = g.length; a > l; l++)
            for (t = g[l]; t.n;) {
                if (e) {
                    if (t.f) {
                        for (c = 0, h = t.f.length; h > c; c++)
                            if (t.f[c] == e) {
                                t.f.splice(c, 1);
                                break
                            }! t.f.length && delete t.f
                    }
                    for (r in t.n)
                        if (t.n[f](r) && t.n[r].f) {
                            var v = t.n[r].f;
                            for (c = 0, h = v.length; h > c; c++)
                                if (v[c] == e) {
                                    v.splice(c, 1);
                                    break
                                }! v.length && delete t.n[r].f
                        }
                } else {
                    delete t.f;
                    for (r in t.n) t.n[f](r) && t.n[r].f && delete t.n[r].f
                }
                t = t.n
            }
    }, p.once = function(n, e) {
        var t = function() {
            return p.unbind(n, t), e.apply(this, arguments)
        };
        return p.on(n, t)
    }, p.version = r, p.toString = function() {
        return "You are running Eve " + r
    }, "undefined" != typeof module && module.exports ? module.exports = p : "undefined" != typeof define ? define("eve", [], function() {
        return p
    }) : n.eve = p
})(this);
(function(t, e) {
    "function" == typeof define && define.amd ? define("raphael", ["eve"], e) : t.Raphael = e(t.eve)
})(this, function(t) {
    function e(n) {
        if (e.is(n, "function")) return y ? n() : t.on("raphael.DOMload", n);
        if (e.is(n, W)) return e._engine.create[T](e, n.splice(0, 3 + e.is(n[0], G))).add(n);
        var r = Array.prototype.slice.call(arguments, 0);
        if (e.is(r[r.length - 1], "function")) {
            var i = r.pop();
            return y ? i.call(e._engine.create[T](e, r)) : t.on("raphael.DOMload", function() {
                i.call(e._engine.create[T](e, r))
            })
        }
        return e._engine.create[T](e, arguments)
    }

    function n(t) {
        if (Object(t) !== t) return t;
        var e = new t.constructor;
        for (var r in t) t[B](r) && (e[r] = n(t[r]));
        return e
    }

    function r(t, e) {
        for (var n = 0, r = t.length; r > n; n++)
            if (t[n] === e) return t.push(t.splice(n, 1)[0])
    }

    function i(t, e, n) {
        function i() {
            var a = Array.prototype.slice.call(arguments, 0),
                s = a.join(""),
                o = i.cache = i.cache || {},
                u = i.count = i.count || [];
            return o[B](s) ? (r(u, s), n ? n(o[s]) : o[s]) : (u.length >= 1e3 && delete o[u.shift()], u.push(s), o[s] = t[T](e, a), n ? n(o[s]) : o[s])
        }
        return i
    }

    function a() {
        return this.hex
    }

    function s(t, e) {
        for (var n = [], r = 0, i = t.length; i - 2 * !e > r; r += 2) {
            var a = [{
                x: +t[r - 2],
                y: +t[r - 1]
            }, {
                x: +t[r],
                y: +t[r + 1]
            }, {
                x: +t[r + 2],
                y: +t[r + 3]
            }, {
                x: +t[r + 4],
                y: +t[r + 5]
            }];
            e ? r ? i - 4 == r ? a[3] = {
                x: +t[0],
                y: +t[1]
            } : i - 2 == r && (a[2] = {
                x: +t[0],
                y: +t[1]
            }, a[3] = {
                x: +t[2],
                y: +t[3]
            }) : a[0] = {
                x: +t[i - 2],
                y: +t[i - 1]
            } : i - 4 == r ? a[3] = a[2] : r || (a[0] = {
                x: +t[r],
                y: +t[r + 1]
            }), n.push(["C", (-a[0].x + 6 * a[1].x + a[2].x) / 6, (-a[0].y + 6 * a[1].y + a[2].y) / 6, (a[1].x + 6 * a[2].x - a[3].x) / 6, (a[1].y + 6 * a[2].y - a[3].y) / 6, a[2].x, a[2].y])
        }
        return n
    }

    function o(t, e, n, r, i) {
        var a = -3 * e + 9 * n - 9 * r + 3 * i,
            s = t * a + 6 * e - 12 * n + 6 * r;
        return t * s - 3 * e + 3 * n
    }

    function u(t, e, n, r, i, a, s, u, l) {
        null == l && (l = 1), l = l > 1 ? 1 : 0 > l ? 0 : l;
        for (var h = l / 2, c = 12, f = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], p = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], d = 0, g = 0; c > g; g++) {
            var x = h * f[g] + h,
                v = o(x, t, n, i, s),
                m = o(x, e, r, a, u),
                y = v * v + m * m;
            d += p[g] * D.sqrt(y)
        }
        return h * d
    }

    function l(t, e, n, r, i, a, s, o, l) {
        if (!(0 > l || l > u(t, e, n, r, i, a, s, o))) {
            var h, c = 1,
                f = c / 2,
                p = c - f,
                d = .01;
            for (h = u(t, e, n, r, i, a, s, o, p); V(h - l) > d;) f /= 2, p += (l > h ? 1 : -1) * f, h = u(t, e, n, r, i, a, s, o, p);
            return p
        }
    }

    function h(t, e, n, r, i, a, s, o) {
        if (!(z(t, n) < O(i, s) || O(t, n) > z(i, s) || z(e, r) < O(a, o) || O(e, r) > z(a, o))) {
            var u = (t * r - e * n) * (i - s) - (t - n) * (i * o - a * s),
                l = (t * r - e * n) * (a - o) - (e - r) * (i * o - a * s),
                h = (t - n) * (a - o) - (e - r) * (i - s);
            if (h) {
                var c = u / h,
                    f = l / h,
                    p = +c.toFixed(2),
                    d = +f.toFixed(2);
                if (!(+O(t, n).toFixed(2) > p || p > +z(t, n).toFixed(2) || +O(i, s).toFixed(2) > p || p > +z(i, s).toFixed(2) || +O(e, r).toFixed(2) > d || d > +z(e, r).toFixed(2) || +O(a, o).toFixed(2) > d || d > +z(a, o).toFixed(2))) return {
                    x: c,
                    y: f
                }
            }
        }
    }

    function c(t, n, r) {
        var i = e.bezierBBox(t),
            a = e.bezierBBox(n);
        if (!e.isBBoxIntersect(i, a)) return r ? 0 : [];
        for (var s = u.apply(0, t), o = u.apply(0, n), l = ~~(s / 5), c = ~~(o / 5), f = [], p = [], d = {}, g = r ? 0 : [], x = 0; l + 1 > x; x++) {
            var v = e.findDotsAtSegment.apply(e, t.concat(x / l));
            f.push({
                x: v.x,
                y: v.y,
                t: x / l
            })
        }
        for (x = 0; c + 1 > x; x++) v = e.findDotsAtSegment.apply(e, n.concat(x / c)), p.push({
            x: v.x,
            y: v.y,
            t: x / c
        });
        for (x = 0; l > x; x++)
            for (var m = 0; c > m; m++) {
                var y = f[x],
                    b = f[x + 1],
                    _ = p[m],
                    w = p[m + 1],
                    k = .001 > V(b.x - y.x) ? "y" : "x",
                    B = .001 > V(w.x - _.x) ? "y" : "x",
                    S = h(y.x, y.y, b.x, b.y, _.x, _.y, w.x, w.y);
                if (S) {
                    if (d[S.x.toFixed(4)] == S.y.toFixed(4)) continue;
                    d[S.x.toFixed(4)] = S.y.toFixed(4);
                    var C = y.t + V((S[k] - y[k]) / (b[k] - y[k])) * (b.t - y.t),
                        F = _.t + V((S[B] - _[B]) / (w[B] - _[B])) * (w.t - _.t);
                    C >= 0 && 1 >= C && F >= 0 && 1 >= F && (r ? g++ : g.push({
                        x: S.x,
                        y: S.y,
                        t1: C,
                        t2: F
                    }))
                }
            }
        return g
    }

    function f(t, n, r) {
        t = e._path2curve(t), n = e._path2curve(n);
        for (var i, a, s, o, u, l, h, f, p, d, g = r ? 0 : [], x = 0, v = t.length; v > x; x++) {
            var m = t[x];
            if ("M" == m[0]) i = u = m[1], a = l = m[2];
            else {
                "C" == m[0] ? (p = [i, a].concat(m.slice(1)), i = p[6], a = p[7]) : (p = [i, a, i, a, u, l, u, l], i = u, a = l);
                for (var y = 0, b = n.length; b > y; y++) {
                    var _ = n[y];
                    if ("M" == _[0]) s = h = _[1], o = f = _[2];
                    else {
                        "C" == _[0] ? (d = [s, o].concat(_.slice(1)), s = d[6], o = d[7]) : (d = [s, o, s, o, h, f, h, f], s = h, o = f);
                        var w = c(p, d, r);
                        if (r) g += w;
                        else {
                            for (var k = 0, B = w.length; B > k; k++) w[k].segment1 = x, w[k].segment2 = y, w[k].bez1 = p, w[k].bez2 = d;
                            g = g.concat(w)
                        }
                    }
                }
            }
        }
        return g
    }

    function p(t, e, n, r, i, a) {
        null != t ? (this.a = +t, this.b = +e, this.c = +n, this.d = +r, this.e = +i, this.f = +a) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0)
    }

    function d() {
        return this.x + E + this.y + E + this.width + "  " + this.height
    }

    function g(t, e, n, r, i, a) {
        function s(t) {
            return ((c * t + h) * t + l) * t
        }

        function o(t, e) {
            var n = u(t, e);
            return ((d * n + p) * n + f) * n
        }

        function u(t, e) {
            var n, r, i, a, o, u;
            for (i = t, u = 0; 8 > u; u++) {
                if (a = s(i) - t, e > V(a)) return i;
                if (o = (3 * c * i + 2 * h) * i + l, 1e-6 > V(o)) break;
                i -= a / o
            }
            if (n = 0, r = 1, i = t, n > i) return n;
            if (i > r) return r;
            for (; r > n;) {
                if (a = s(i), e > V(a - t)) return i;
                t > a ? n = i : r = i, i = (r - n) / 2 + n
            }
            return i
        }
        var l = 3 * e,
            h = 3 * (r - e) - l,
            c = 1 - l - h,
            f = 3 * n,
            p = 3 * (i - n) - f,
            d = 1 - f - p;
        return o(t, 1 / (200 * a))
    }

    function x(t, e) {
        var n = [],
            r = {};
        if (this.ms = e, this.times = 1, t) {
            for (var i in t) t[B](i) && (r[J(i)] = t[i], n.push(J(i)));
            n.sort(he)
        }
        this.anim = r, this.top = n[n.length - 1], this.percents = n
    }

    function v(n, r, i, a, s, o) {
        i = J(i);
        var u, l, h, c, f, d, x = n.ms,
            v = {},
            m = {},
            y = {};
        if (a)
            for (w = 0, k = on.length; k > w; w++) {
                var b = on[w];
                if (b.el.id == r.id && b.anim == n) {
                    b.percent != i ? (on.splice(w, 1), h = 1) : l = b, r.attr(b.totalOrigin);
                    break
                }
            } else a = +m;
        for (var w = 0, k = n.percents.length; k > w; w++) {
            if (n.percents[w] == i || n.percents[w] > a * n.top) {
                i = n.percents[w], f = n.percents[w - 1] || 0, x = x / n.top * (i - f), c = n.percents[w + 1], u = n.anim[i];
                break
            }
            a && r.attr(n.anim[n.percents[w]])
        }
        if (u) {
            if (l) l.initstatus = a, l.start = new Date - l.ms * a;
            else {
                for (var S in u)
                    if (u[B](S) && (ne[B](S) || r.paper.customAttributes[B](S))) switch (v[S] = r.attr(S), null == v[S] && (v[S] = ee[S]), m[S] = u[S], ne[S]) {
                        case G:
                            y[S] = (m[S] - v[S]) / x;
                            break;
                        case "colour":
                            v[S] = e.getRGB(v[S]);
                            var C = e.getRGB(m[S]);
                            y[S] = {
                                r: (C.r - v[S].r) / x,
                                g: (C.g - v[S].g) / x,
                                b: (C.b - v[S].b) / x
                            };
                            break;
                        case "path":
                            var F = Re(v[S], m[S]),
                                T = F[1];
                            for (v[S] = F[0], y[S] = [], w = 0, k = v[S].length; k > w; w++) {
                                y[S][w] = [0];
                                for (var A = 1, P = v[S][w].length; P > A; A++) y[S][w][A] = (T[w][A] - v[S][w][A]) / x
                            }
                            break;
                        case "transform":
                            var E = r._,
                                R = Oe(E[S], m[S]);
                            if (R)
                                for (v[S] = R.from, m[S] = R.to, y[S] = [], y[S].real = !0, w = 0, k = v[S].length; k > w; w++)
                                    for (y[S][w] = [v[S][w][0]], A = 1, P = v[S][w].length; P > A; A++) y[S][w][A] = (m[S][w][A] - v[S][w][A]) / x;
                            else {
                                var q = r.matrix || new p,
                                    j = {
                                        _: {
                                            transform: E.transform
                                        },
                                        getBBox: function() {
                                            return r.getBBox(1)
                                        }
                                    };
                                v[S] = [q.a, q.b, q.c, q.d, q.e, q.f], De(j, m[S]), m[S] = j._.transform, y[S] = [(j.matrix.a - q.a) / x, (j.matrix.b - q.b) / x, (j.matrix.c - q.c) / x, (j.matrix.d - q.d) / x, (j.matrix.e - q.e) / x, (j.matrix.f - q.f) / x]
                            }
                            break;
                        case "csv":
                            var D = M(u[S])[I](_),
                                z = M(v[S])[I](_);
                            if ("clip-rect" == S)
                                for (v[S] = z, y[S] = [], w = z.length; w--;) y[S][w] = (D[w] - v[S][w]) / x;
                            m[S] = D;
                            break;
                        default:
                            for (D = [][L](u[S]), z = [][L](v[S]), y[S] = [], w = r.paper.customAttributes[S].length; w--;) y[S][w] = ((D[w] || 0) - (z[w] || 0)) / x
                    }
                var O = u.easing,
                    V = e.easing_formulas[O];
                if (!V)
                    if (V = M(O).match(Z), V && 5 == V.length) {
                        var X = V;
                        V = function(t) {
                            return g(t, +X[1], +X[2], +X[3], +X[4], x)
                        }
                    } else V = fe;
                if (d = u.start || n.start || +new Date, b = {
                        anim: n,
                        percent: i,
                        timestamp: d,
                        start: d + (n.del || 0),
                        status: 0,
                        initstatus: a || 0,
                        stop: !1,
                        ms: x,
                        easing: V,
                        from: v,
                        diff: y,
                        to: m,
                        el: r,
                        callback: u.callback,
                        prev: f,
                        next: c,
                        repeat: o || n.times,
                        origin: r.attr(),
                        totalOrigin: s
                    }, on.push(b), a && !l && !h && (b.stop = !0, b.start = new Date - x * a, 1 == on.length)) return ln();
                h && (b.start = new Date - b.ms * a), 1 == on.length && un(ln)
            }
            t("raphael.anim.start." + r.id, r, n)
        }
    }

    function m(t) {
        for (var e = 0; on.length > e; e++) on[e].el.paper == t && on.splice(e--, 1)
    }
    e.version = "2.1.0", e.eve = t;
    var y, b, _ = /[, ]+/,
        w = {
            circle: 1,
            rect: 1,
            path: 1,
            ellipse: 1,
            text: 1,
            image: 1
        },
        k = /\{(\d+)\}/g,
        B = "hasOwnProperty",
        S = {
            doc: document,
            win: window
        },
        C = {
            was: Object.prototype[B].call(S.win, "Raphael"),
            is: S.win.Raphael
        },
        F = function() {
            this.ca = this.customAttributes = {}
        },
        T = "apply",
        L = "concat",
        A = "createTouch" in S.doc,
        P = "",
        E = " ",
        M = String,
        I = "split",
        R = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel" [I](E),
        q = {
            mousedown: "touchstart",
            mousemove: "touchmove",
            mouseup: "touchend"
        },
        j = M.prototype.toLowerCase,
        D = Math,
        z = D.max,
        O = D.min,
        V = D.abs,
        X = D.pow,
        Y = D.PI,
        G = "number",
        N = "string",
        W = "array",
        $ = Object.prototype.toString,
        H = (e._ISURL = /^url\(['"]?([^\)]+?)['"]?\)$/i, /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),
        U = {
            NaN: 1,
            Infinity: 1,
            "-Infinity": 1
        },
        Z = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,
        Q = D.round,
        J = parseFloat,
        K = parseInt,
        te = M.prototype.toUpperCase,
        ee = e._availableAttrs = {
            "arrow-end": "none",
            "arrow-start": "none",
            blur: 0,
            "clip-rect": "0 0 1e9 1e9",
            cursor: "default",
            cx: 0,
            cy: 0,
            fill: "#fff",
            "fill-opacity": 1,
            font: '10px "Arial"',
            "font-family": '"Arial"',
            "font-size": "10",
            "font-style": "normal",
            "font-weight": 400,
            gradient: 0,
            height: 0,
            href: "http://raphaeljs.com/",
            "letter-spacing": 0,
            opacity: 1,
            path: "M0,0",
            r: 0,
            rx: 0,
            ry: 0,
            src: "",
            stroke: "#000",
            "stroke-dasharray": "",
            "stroke-linecap": "butt",
            "stroke-linejoin": "butt",
            "stroke-miterlimit": 0,
            "stroke-opacity": 1,
            "stroke-width": 1,
            target: "_blank",
            "text-anchor": "middle",
            title: "Raphael",
            transform: "",
            width: 0,
            x: 0,
            y: 0
        },
        ne = e._availableAnimAttrs = {
            blur: G,
            "clip-rect": "csv",
            cx: G,
            cy: G,
            fill: "colour",
            "fill-opacity": G,
            "font-size": G,
            height: G,
            opacity: G,
            path: "path",
            r: G,
            rx: G,
            ry: G,
            stroke: "colour",
            "stroke-opacity": G,
            "stroke-width": G,
            transform: "transform",
            width: G,
            x: G,
            y: G
        },
        re = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
        ie = {
            hs: 1,
            rg: 1
        },
        ae = /,?([achlmqrstvxz]),?/gi,
        se = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
        oe = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
        ue = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,
        le = (e._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/, {}),
        he = function(t, e) {
            return J(t) - J(e)
        },
        ce = function() {},
        fe = function(t) {
            return t
        },
        pe = e._rectPath = function(t, e, n, r, i) {
            return i ? [
                ["M", t + i, e],
                ["l", n - 2 * i, 0],
                ["a", i, i, 0, 0, 1, i, i],
                ["l", 0, r - 2 * i],
                ["a", i, i, 0, 0, 1, -i, i],
                ["l", 2 * i - n, 0],
                ["a", i, i, 0, 0, 1, -i, -i],
                ["l", 0, 2 * i - r],
                ["a", i, i, 0, 0, 1, i, -i],
                ["z"]
            ] : [
                ["M", t, e],
                ["l", n, 0],
                ["l", 0, r],
                ["l", -n, 0],
                ["z"]
            ]
        },
        de = function(t, e, n, r) {
            return null == r && (r = n), [
                ["M", t, e],
                ["m", 0, -r],
                ["a", n, r, 0, 1, 1, 0, 2 * r],
                ["a", n, r, 0, 1, 1, 0, -2 * r],
                ["z"]
            ]
        },
        ge = e._getPath = {
            path: function(t) {
                return t.attr("path")
            },
            circle: function(t) {
                var e = t.attrs;
                return de(e.cx, e.cy, e.r)
            },
            ellipse: function(t) {
                var e = t.attrs;
                return de(e.cx, e.cy, e.rx, e.ry)
            },
            rect: function(t) {
                var e = t.attrs;
                return pe(e.x, e.y, e.width, e.height, e.r)
            },
            image: function(t) {
                var e = t.attrs;
                return pe(e.x, e.y, e.width, e.height)
            },
            text: function(t) {
                var e = t._getBBox();
                return pe(e.x, e.y, e.width, e.height)
            },
            set: function(t) {
                var e = t._getBBox();
                return pe(e.x, e.y, e.width, e.height)
            }
        },
        xe = e.mapPath = function(t, e) {
            if (!e) return t;
            var n, r, i, a, s, o, u;
            for (t = Re(t), i = 0, s = t.length; s > i; i++)
                for (u = t[i], a = 1, o = u.length; o > a; a += 2) n = e.x(u[a], u[a + 1]), r = e.y(u[a], u[a + 1]), u[a] = n, u[a + 1] = r;
            return t
        };
    if (e._g = S, e.type = S.win.SVGAngle || S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", "VML" == e.type) {
        var ve, me = S.doc.createElement("div");
        if (me.innerHTML = '<v:shape adj="1"/>', ve = me.firstChild, ve.style.behavior = "url(#default#VML)", !ve || "object" != typeof ve.adj) return e.type = P;
        me = null
    }
    e.svg = !(e.vml = "VML" == e.type), e._Paper = F, e.fn = b = F.prototype = e.prototype, e._id = 0, e._oid = 0, e.is = function(t, e) {
        return e = j.call(e), "finite" == e ? !U[B](+t) : "array" == e ? t instanceof Array : "null" == e && null === t || e == typeof t && null !== t || "object" == e && t === Object(t) || "array" == e && Array.isArray && Array.isArray(t) || $.call(t).slice(8, -1).toLowerCase() == e
    }, e.angle = function(t, n, r, i, a, s) {
        if (null == a) {
            var o = t - r,
                u = n - i;
            return o || u ? (180 + 180 * D.atan2(-u, -o) / Y + 360) % 360 : 0
        }
        return e.angle(t, n, a, s) - e.angle(r, i, a, s)
    }, e.rad = function(t) {
        return t % 360 * Y / 180
    }, e.deg = function(t) {
        return 180 * t / Y % 360
    }, e.snapTo = function(t, n, r) {
        if (r = e.is(r, "finite") ? r : 10, e.is(t, W)) {
            for (var i = t.length; i--;)
                if (r >= V(t[i] - n)) return t[i]
        } else {
            t = +t;
            var a = n % t;
            if (r > a) return n - a;
            if (a > t - r) return n - a + t
        }
        return n
    }, e.createUUID = function(t, e) {
        return function() {
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t, e).toUpperCase()
        }
    }(/[xy]/g, function(t) {
        var e = 0 | 16 * D.random(),
            n = "x" == t ? e : 8 | 3 & e;
        return n.toString(16)
    }), e.setWindow = function(n) {
        t("raphael.setWindow", e, S.win, n), S.win = n, S.doc = S.win.document, e._engine.initWin && e._engine.initWin(S.win)
    };
    var ye = function(t) {
            if (e.vml) {
                var n, r = /^\s+|\s+$/g;
                try {
                    var a = new ActiveXObject("htmlfile");
                    a.write("<body>"), a.close(), n = a.body
                } catch (s) {
                    n = createPopup().document.body
                }
                var o = n.createTextRange();
                ye = i(function(t) {
                    try {
                        n.style.color = M(t).replace(r, P);
                        var e = o.queryCommandValue("ForeColor");
                        return e = (255 & e) << 16 | 65280 & e | (16711680 & e) >>> 16, "#" + ("000000" + e.toString(16)).slice(-6)
                    } catch (i) {
                        return "none"
                    }
                })
            } else {
                var u = S.doc.createElement("i");
                u.title = "Raphal Colour Picker", u.style.display = "none", S.doc.body.appendChild(u), ye = i(function(t) {
                    return u.style.color = t, S.doc.defaultView.getComputedStyle(u, P).getPropertyValue("color")
                })
            }
            return ye(t)
        },
        be = function() {
            return "hsb(" + [this.h, this.s, this.b] + ")"
        },
        _e = function() {
            return "hsl(" + [this.h, this.s, this.l] + ")"
        },
        we = function() {
            return this.hex
        },
        ke = function(t, n, r) {
            if (null == n && e.is(t, "object") && "r" in t && "g" in t && "b" in t && (r = t.b, n = t.g, t = t.r), null == n && e.is(t, N)) {
                var i = e.getRGB(t);
                t = i.r, n = i.g, r = i.b
            }
            return (t > 1 || n > 1 || r > 1) && (t /= 255, n /= 255, r /= 255), [t, n, r]
        },
        Be = function(t, n, r, i) {
            t *= 255, n *= 255, r *= 255;
            var a = {
                r: t,
                g: n,
                b: r,
                hex: e.rgb(t, n, r),
                toString: we
            };
            return e.is(i, "finite") && (a.opacity = i), a
        };
    e.color = function(t) {
        var n;
        return e.is(t, "object") && "h" in t && "s" in t && "b" in t ? (n = e.hsb2rgb(t), t.r = n.r, t.g = n.g, t.b = n.b, t.hex = n.hex) : e.is(t, "object") && "h" in t && "s" in t && "l" in t ? (n = e.hsl2rgb(t), t.r = n.r, t.g = n.g, t.b = n.b, t.hex = n.hex) : (e.is(t, "string") && (t = e.getRGB(t)), e.is(t, "object") && "r" in t && "g" in t && "b" in t ? (n = e.rgb2hsl(t), t.h = n.h, t.s = n.s, t.l = n.l, n = e.rgb2hsb(t), t.v = n.b) : (t = {
            hex: "none"
        }, t.r = t.g = t.b = t.h = t.s = t.v = t.l = -1)), t.toString = we, t
    }, e.hsb2rgb = function(t, e, n, r) {
        this.is(t, "object") && "h" in t && "s" in t && "b" in t && (n = t.b, e = t.s, t = t.h, r = t.o), t *= 360;
        var i, a, s, o, u;
        return t = t % 360 / 60, u = n * e, o = u * (1 - V(t % 2 - 1)), i = a = s = n - u, t = ~~t, i += [u, o, 0, 0, o, u][t], a += [o, u, u, o, 0, 0][t], s += [0, 0, o, u, u, o][t], Be(i, a, s, r)
    }, e.hsl2rgb = function(t, e, n, r) {
        this.is(t, "object") && "h" in t && "s" in t && "l" in t && (n = t.l, e = t.s, t = t.h), (t > 1 || e > 1 || n > 1) && (t /= 360, e /= 100, n /= 100), t *= 360;
        var i, a, s, o, u;
        return t = t % 360 / 60, u = 2 * e * (.5 > n ? n : 1 - n), o = u * (1 - V(t % 2 - 1)), i = a = s = n - u / 2, t = ~~t, i += [u, o, 0, 0, o, u][t], a += [o, u, u, o, 0, 0][t], s += [0, 0, o, u, u, o][t], Be(i, a, s, r)
    }, e.rgb2hsb = function(t, e, n) {
        n = ke(t, e, n), t = n[0], e = n[1], n = n[2];
        var r, i, a, s;
        return a = z(t, e, n), s = a - O(t, e, n), r = 0 == s ? null : a == t ? (e - n) / s : a == e ? (n - t) / s + 2 : (t - e) / s + 4, r = 60 * ((r + 360) % 6) / 360, i = 0 == s ? 0 : s / a, {
            h: r,
            s: i,
            b: a,
            toString: be
        }
    }, e.rgb2hsl = function(t, e, n) {
        n = ke(t, e, n), t = n[0], e = n[1], n = n[2];
        var r, i, a, s, o, u;
        return s = z(t, e, n), o = O(t, e, n), u = s - o, r = 0 == u ? null : s == t ? (e - n) / u : s == e ? (n - t) / u + 2 : (t - e) / u + 4, r = 60 * ((r + 360) % 6) / 360, a = (s + o) / 2, i = 0 == u ? 0 : .5 > a ? u / (2 * a) : u / (2 - 2 * a), {
            h: r,
            s: i,
            l: a,
            toString: _e
        }
    }, e._path2string = function() {
        return this.join(",").replace(ae, "$1")
    }, e._preload = function(t, e) {
        var n = S.doc.createElement("img");
        n.style.cssText = "position:absolute;left:-9999em;top:-9999em", n.onload = function() {
            e.call(this), this.onload = null, S.doc.body.removeChild(this)
        }, n.onerror = function() {
            S.doc.body.removeChild(this)
        }, S.doc.body.appendChild(n), n.src = t
    }, e.getRGB = i(function(t) {
        if (!t || (t = M(t)).indexOf("-") + 1) return {
            r: -1,
            g: -1,
            b: -1,
            hex: "none",
            error: 1,
            toString: a
        };
        if ("none" == t) return {
            r: -1,
            g: -1,
            b: -1,
            hex: "none",
            toString: a
        };
        !(ie[B](t.toLowerCase().substring(0, 2)) || "#" == t.charAt()) && (t = ye(t));
        var n, r, i, s, o, u, l = t.match(H);
        return l ? (l[2] && (i = K(l[2].substring(5), 16), r = K(l[2].substring(3, 5), 16), n = K(l[2].substring(1, 3), 16)), l[3] && (i = K((o = l[3].charAt(3)) + o, 16), r = K((o = l[3].charAt(2)) + o, 16), n = K((o = l[3].charAt(1)) + o, 16)), l[4] && (u = l[4][I](re), n = J(u[0]), "%" == u[0].slice(-1) && (n *= 2.55), r = J(u[1]), "%" == u[1].slice(-1) && (r *= 2.55), i = J(u[2]), "%" == u[2].slice(-1) && (i *= 2.55), "rgba" == l[1].toLowerCase().slice(0, 4) && (s = J(u[3])), u[3] && "%" == u[3].slice(-1) && (s /= 100)), l[5] ? (u = l[5][I](re), n = J(u[0]), "%" == u[0].slice(-1) && (n *= 2.55), r = J(u[1]), "%" == u[1].slice(-1) && (r *= 2.55), i = J(u[2]), "%" == u[2].slice(-1) && (i *= 2.55), ("deg" == u[0].slice(-3) || "" == u[0].slice(-1)) && (n /= 360), "hsba" == l[1].toLowerCase().slice(0, 4) && (s = J(u[3])), u[3] && "%" == u[3].slice(-1) && (s /= 100), e.hsb2rgb(n, r, i, s)) : l[6] ? (u = l[6][I](re), n = J(u[0]), "%" == u[0].slice(-1) && (n *= 2.55), r = J(u[1]), "%" == u[1].slice(-1) && (r *= 2.55), i = J(u[2]), "%" == u[2].slice(-1) && (i *= 2.55), ("deg" == u[0].slice(-3) || "" == u[0].slice(-1)) && (n /= 360), "hsla" == l[1].toLowerCase().slice(0, 4) && (s = J(u[3])), u[3] && "%" == u[3].slice(-1) && (s /= 100), e.hsl2rgb(n, r, i, s)) : (l = {
            r: n,
            g: r,
            b: i,
            toString: a
        }, l.hex = "#" + (16777216 | i | r << 8 | n << 16).toString(16).slice(1), e.is(s, "finite") && (l.opacity = s), l)) : {
            r: -1,
            g: -1,
            b: -1,
            hex: "none",
            error: 1,
            toString: a
        }
    }, e), e.hsb = i(function(t, n, r) {
        return e.hsb2rgb(t, n, r).hex
    }), e.hsl = i(function(t, n, r) {
        return e.hsl2rgb(t, n, r).hex
    }), e.rgb = i(function(t, e, n) {
        return "#" + (16777216 | n | e << 8 | t << 16).toString(16).slice(1)
    }), e.getColor = function(t) {
        var e = this.getColor.start = this.getColor.start || {
                h: 0,
                s: 1,
                b: t || .75
            },
            n = this.hsb2rgb(e.h, e.s, e.b);
        return e.h += .075, e.h > 1 && (e.h = 0, e.s -= .2, 0 >= e.s && (this.getColor.start = {
            h: 0,
            s: 1,
            b: e.b
        })), n.hex
    }, e.getColor.reset = function() {
        delete this.start
    }, e.parsePathString = function(t) {
        if (!t) return null;
        var n = Se(t);
        if (n.arr) return Fe(n.arr);
        var r = {
                a: 7,
                c: 6,
                h: 1,
                l: 2,
                m: 2,
                r: 4,
                q: 4,
                s: 4,
                t: 2,
                v: 1,
                z: 0
            },
            i = [];
        return e.is(t, W) && e.is(t[0], W) && (i = Fe(t)), i.length || M(t).replace(se, function(t, e, n) {
            var a = [],
                s = e.toLowerCase();
            if (n.replace(ue, function(t, e) {
                    e && a.push(+e)
                }), "m" == s && a.length > 2 && (i.push([e][L](a.splice(0, 2))), s = "l", e = "m" == e ? "l" : "L"), "r" == s) i.push([e][L](a));
            else
                for (; a.length >= r[s] && (i.push([e][L](a.splice(0, r[s]))), r[s]););
        }), i.toString = e._path2string, n.arr = Fe(i), i
    }, e.parseTransformString = i(function(t) {
        if (!t) return null;
        var n = [];
        return e.is(t, W) && e.is(t[0], W) && (n = Fe(t)), n.length || M(t).replace(oe, function(t, e, r) {
            var i = [];
            j.call(e), r.replace(ue, function(t, e) {
                e && i.push(+e)
            }), n.push([e][L](i))
        }), n.toString = e._path2string, n
    });
    var Se = function(t) {
        var e = Se.ps = Se.ps || {};
        return e[t] ? e[t].sleep = 100 : e[t] = {
            sleep: 100
        }, setTimeout(function() {
            for (var n in e) e[B](n) && n != t && (e[n].sleep--, !e[n].sleep && delete e[n])
        }), e[t]
    };
    e.findDotsAtSegment = function(t, e, n, r, i, a, s, o, u) {
        var l = 1 - u,
            h = X(l, 3),
            c = X(l, 2),
            f = u * u,
            p = f * u,
            d = h * t + 3 * c * u * n + 3 * l * u * u * i + p * s,
            g = h * e + 3 * c * u * r + 3 * l * u * u * a + p * o,
            x = t + 2 * u * (n - t) + f * (i - 2 * n + t),
            v = e + 2 * u * (r - e) + f * (a - 2 * r + e),
            m = n + 2 * u * (i - n) + f * (s - 2 * i + n),
            y = r + 2 * u * (a - r) + f * (o - 2 * a + r),
            b = l * t + u * n,
            _ = l * e + u * r,
            w = l * i + u * s,
            k = l * a + u * o,
            B = 90 - 180 * D.atan2(x - m, v - y) / Y;
        return (x > m || y > v) && (B += 180), {
            x: d,
            y: g,
            m: {
                x: x,
                y: v
            },
            n: {
                x: m,
                y: y
            },
            start: {
                x: b,
                y: _
            },
            end: {
                x: w,
                y: k
            },
            alpha: B
        }
    }, e.bezierBBox = function(t, n, r, i, a, s, o, u) {
        e.is(t, "array") || (t = [t, n, r, i, a, s, o, u]);
        var l = Ie.apply(null, t);
        return {
            x: l.min.x,
            y: l.min.y,
            x2: l.max.x,
            y2: l.max.y,
            width: l.max.x - l.min.x,
            height: l.max.y - l.min.y
        }
    }, e.isPointInsideBBox = function(t, e, n) {
        return e >= t.x && t.x2 >= e && n >= t.y && t.y2 >= n
    }, e.isBBoxIntersect = function(t, n) {
        var r = e.isPointInsideBBox;
        return r(n, t.x, t.y) || r(n, t.x2, t.y) || r(n, t.x, t.y2) || r(n, t.x2, t.y2) || r(t, n.x, n.y) || r(t, n.x2, n.y) || r(t, n.x, n.y2) || r(t, n.x2, n.y2) || (t.x < n.x2 && t.x > n.x || n.x < t.x2 && n.x > t.x) && (t.y < n.y2 && t.y > n.y || n.y < t.y2 && n.y > t.y)
    }, e.pathIntersection = function(t, e) {
        return f(t, e)
    }, e.pathIntersectionNumber = function(t, e) {
        return f(t, e, 1)
    }, e.isPointInsidePath = function(t, n, r) {
        var i = e.pathBBox(t);
        return e.isPointInsideBBox(i, n, r) && 1 == f(t, [
            ["M", n, r],
            ["H", i.x2 + 10]
        ], 1) % 2
    }, e._removedFactory = function(e) {
        return function() {
            t("raphael.log", null, "Raphal: you are calling to method " + e + " of removed object", e)
        }
    };
    var Ce = e.pathBBox = function(t) {
            var e = Se(t);
            if (e.bbox) return n(e.bbox);
            if (!t) return {
                x: 0,
                y: 0,
                width: 0,
                height: 0,
                x2: 0,
                y2: 0
            };
            t = Re(t);
            for (var r, i = 0, a = 0, s = [], o = [], u = 0, l = t.length; l > u; u++)
                if (r = t[u], "M" == r[0]) i = r[1], a = r[2], s.push(i), o.push(a);
                else {
                    var h = Ie(i, a, r[1], r[2], r[3], r[4], r[5], r[6]);
                    s = s[L](h.min.x, h.max.x), o = o[L](h.min.y, h.max.y), i = r[5], a = r[6]
                } var c = O[T](0, s),
                f = O[T](0, o),
                p = z[T](0, s),
                d = z[T](0, o),
                g = p - c,
                x = d - f,
                v = {
                    x: c,
                    y: f,
                    x2: p,
                    y2: d,
                    width: g,
                    height: x,
                    cx: c + g / 2,
                    cy: f + x / 2
                };
            return e.bbox = n(v), v
        },
        Fe = function(t) {
            var r = n(t);
            return r.toString = e._path2string, r
        },
        Te = e._pathToRelative = function(t) {
            var n = Se(t);
            if (n.rel) return Fe(n.rel);
            e.is(t, W) && e.is(t && t[0], W) || (t = e.parsePathString(t));
            var r = [],
                i = 0,
                a = 0,
                s = 0,
                o = 0,
                u = 0;
            "M" == t[0][0] && (i = t[0][1], a = t[0][2], s = i, o = a, u++, r.push(["M", i, a]));
            for (var l = u, h = t.length; h > l; l++) {
                var c = r[l] = [],
                    f = t[l];
                if (f[0] != j.call(f[0])) switch (c[0] = j.call(f[0]), c[0]) {
                    case "a":
                        c[1] = f[1], c[2] = f[2], c[3] = f[3], c[4] = f[4], c[5] = f[5], c[6] = +(f[6] - i).toFixed(3), c[7] = +(f[7] - a).toFixed(3);
                        break;
                    case "v":
                        c[1] = +(f[1] - a).toFixed(3);
                        break;
                    case "m":
                        s = f[1], o = f[2];
                    default:
                        for (var p = 1, d = f.length; d > p; p++) c[p] = +(f[p] - (p % 2 ? i : a)).toFixed(3)
                } else {
                    c = r[l] = [], "m" == f[0] && (s = f[1] + i, o = f[2] + a);
                    for (var g = 0, x = f.length; x > g; g++) r[l][g] = f[g]
                }
                var v = r[l].length;
                switch (r[l][0]) {
                    case "z":
                        i = s, a = o;
                        break;
                    case "h":
                        i += +r[l][v - 1];
                        break;
                    case "v":
                        a += +r[l][v - 1];
                        break;
                    default:
                        i += +r[l][v - 2], a += +r[l][v - 1]
                }
            }
            return r.toString = e._path2string, n.rel = Fe(r), r
        },
        Le = e._pathToAbsolute = function(t) {
            var n = Se(t);
            if (n.abs) return Fe(n.abs);
            if (e.is(t, W) && e.is(t && t[0], W) || (t = e.parsePathString(t)), !t || !t.length) return [
                ["M", 0, 0]
            ];
            var r = [],
                i = 0,
                a = 0,
                o = 0,
                u = 0,
                l = 0;
            "M" == t[0][0] && (i = +t[0][1], a = +t[0][2], o = i, u = a, l++, r[0] = ["M", i, a]);
            for (var h, c, f = 3 == t.length && "M" == t[0][0] && "R" == t[1][0].toUpperCase() && "Z" == t[2][0].toUpperCase(), p = l, d = t.length; d > p; p++) {
                if (r.push(h = []), c = t[p], c[0] != te.call(c[0])) switch (h[0] = te.call(c[0]), h[0]) {
                        case "A":
                            h[1] = c[1], h[2] = c[2], h[3] = c[3], h[4] = c[4], h[5] = c[5], h[6] = +(c[6] + i), h[7] = +(c[7] + a);
                            break;
                        case "V":
                            h[1] = +c[1] + a;
                            break;
                        case "H":
                            h[1] = +c[1] + i;
                            break;
                        case "R":
                            for (var g = [i, a][L](c.slice(1)), x = 2, v = g.length; v > x; x++) g[x] = +g[x] + i, g[++x] = +g[x] + a;
                            r.pop(), r = r[L](s(g, f));
                            break;
                        case "M":
                            o = +c[1] + i, u = +c[2] + a;
                        default:
                            for (x = 1, v = c.length; v > x; x++) h[x] = +c[x] + (x % 2 ? i : a)
                    } else if ("R" == c[0]) g = [i, a][L](c.slice(1)), r.pop(), r = r[L](s(g, f)), h = ["R"][L](c.slice(-2));
                    else
                        for (var m = 0, y = c.length; y > m; m++) h[m] = c[m];
                switch (h[0]) {
                    case "Z":
                        i = o, a = u;
                        break;
                    case "H":
                        i = h[1];
                        break;
                    case "V":
                        a = h[1];
                        break;
                    case "M":
                        o = h[h.length - 2], u = h[h.length - 1];
                    default:
                        i = h[h.length - 2], a = h[h.length - 1]
                }
            }
            return r.toString = e._path2string, n.abs = Fe(r), r
        },
        Ae = function(t, e, n, r) {
            return [t, e, n, r, n, r]
        },
        Pe = function(t, e, n, r, i, a) {
            var s = 1 / 3,
                o = 2 / 3;
            return [s * t + o * n, s * e + o * r, s * i + o * n, s * a + o * r, i, a]
        },
        Ee = function(t, e, n, r, a, s, o, u, l, h) {
            var c, f = 120 * Y / 180,
                p = Y / 180 * (+a || 0),
                d = [],
                g = i(function(t, e, n) {
                    var r = t * D.cos(n) - e * D.sin(n),
                        i = t * D.sin(n) + e * D.cos(n);
                    return {
                        x: r,
                        y: i
                    }
                });
            if (h) B = h[0], S = h[1], w = h[2], k = h[3];
            else {
                c = g(t, e, -p), t = c.x, e = c.y, c = g(u, l, -p), u = c.x, l = c.y;
                var x = (D.cos(Y / 180 * a), D.sin(Y / 180 * a), (t - u) / 2),
                    v = (e - l) / 2,
                    m = x * x / (n * n) + v * v / (r * r);
                m > 1 && (m = D.sqrt(m), n = m * n, r = m * r);
                var y = n * n,
                    b = r * r,
                    _ = (s == o ? -1 : 1) * D.sqrt(V((y * b - y * v * v - b * x * x) / (y * v * v + b * x * x))),
                    w = _ * n * v / r + (t + u) / 2,
                    k = _ * -r * x / n + (e + l) / 2,
                    B = D.asin(((e - k) / r).toFixed(9)),
                    S = D.asin(((l - k) / r).toFixed(9));
                B = w > t ? Y - B : B, S = w > u ? Y - S : S, 0 > B && (B = 2 * Y + B), 0 > S && (S = 2 * Y + S), o && B > S && (B -= 2 * Y), !o && S > B && (S -= 2 * Y)
            }
            var C = S - B;
            if (V(C) > f) {
                var F = S,
                    T = u,
                    A = l;
                S = B + f * (o && S > B ? 1 : -1), u = w + n * D.cos(S), l = k + r * D.sin(S), d = Ee(u, l, n, r, a, 0, o, T, A, [S, F, w, k])
            }
            C = S - B;
            var P = D.cos(B),
                E = D.sin(B),
                M = D.cos(S),
                R = D.sin(S),
                q = D.tan(C / 4),
                j = 4 / 3 * n * q,
                z = 4 / 3 * r * q,
                O = [t, e],
                X = [t + j * E, e - z * P],
                G = [u + j * R, l - z * M],
                N = [u, l];
            if (X[0] = 2 * O[0] - X[0], X[1] = 2 * O[1] - X[1], h) return [X, G, N][L](d);
            d = [X, G, N][L](d).join()[I](",");
            for (var W = [], $ = 0, H = d.length; H > $; $++) W[$] = $ % 2 ? g(d[$ - 1], d[$], p).y : g(d[$], d[$ + 1], p).x;
            return W
        },
        Me = function(t, e, n, r, i, a, s, o, u) {
            var l = 1 - u;
            return {
                x: X(l, 3) * t + 3 * X(l, 2) * u * n + 3 * l * u * u * i + X(u, 3) * s,
                y: X(l, 3) * e + 3 * X(l, 2) * u * r + 3 * l * u * u * a + X(u, 3) * o
            }
        },
        Ie = i(function(t, e, n, r, i, a, s, o) {
            var u, l = i - 2 * n + t - (s - 2 * i + n),
                h = 2 * (n - t) - 2 * (i - n),
                c = t - n,
                f = (-h + D.sqrt(h * h - 4 * l * c)) / 2 / l,
                p = (-h - D.sqrt(h * h - 4 * l * c)) / 2 / l,
                d = [e, o],
                g = [t, s];
            return V(f) > "1e12" && (f = .5), V(p) > "1e12" && (p = .5), f > 0 && 1 > f && (u = Me(t, e, n, r, i, a, s, o, f), g.push(u.x), d.push(u.y)), p > 0 && 1 > p && (u = Me(t, e, n, r, i, a, s, o, p), g.push(u.x), d.push(u.y)), l = a - 2 * r + e - (o - 2 * a + r), h = 2 * (r - e) - 2 * (a - r), c = e - r, f = (-h + D.sqrt(h * h - 4 * l * c)) / 2 / l, p = (-h - D.sqrt(h * h - 4 * l * c)) / 2 / l, V(f) > "1e12" && (f = .5), V(p) > "1e12" && (p = .5), f > 0 && 1 > f && (u = Me(t, e, n, r, i, a, s, o, f), g.push(u.x), d.push(u.y)), p > 0 && 1 > p && (u = Me(t, e, n, r, i, a, s, o, p), g.push(u.x), d.push(u.y)), {
                min: {
                    x: O[T](0, g),
                    y: O[T](0, d)
                },
                max: {
                    x: z[T](0, g),
                    y: z[T](0, d)
                }
            }
        }),
        Re = e._path2curve = i(function(t, e) {
            var n = !e && Se(t);
            if (!e && n.curve) return Fe(n.curve);
            for (var r = Le(t), i = e && Le(e), a = {
                    x: 0,
                    y: 0,
                    bx: 0,
                    by: 0,
                    X: 0,
                    Y: 0,
                    qx: null,
                    qy: null
                }, s = {
                    x: 0,
                    y: 0,
                    bx: 0,
                    by: 0,
                    X: 0,
                    Y: 0,
                    qx: null,
                    qy: null
                }, o = (function(t, e) {
                    var n, r;
                    if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y];
                    switch (!(t[0] in {
                        T: 1,
                        Q: 1
                    }) && (e.qx = e.qy = null), t[0]) {
                        case "M":
                            e.X = t[1], e.Y = t[2];
                            break;
                        case "A":
                            t = ["C"][L](Ee[T](0, [e.x, e.y][L](t.slice(1))));
                            break;
                        case "S":
                            n = e.x + (e.x - (e.bx || e.x)), r = e.y + (e.y - (e.by || e.y)), t = ["C", n, r][L](t.slice(1));
                            break;
                        case "T":
                            e.qx = e.x + (e.x - (e.qx || e.x)), e.qy = e.y + (e.y - (e.qy || e.y)), t = ["C"][L](Pe(e.x, e.y, e.qx, e.qy, t[1], t[2]));
                            break;
                        case "Q":
                            e.qx = t[1], e.qy = t[2], t = ["C"][L](Pe(e.x, e.y, t[1], t[2], t[3], t[4]));
                            break;
                        case "L":
                            t = ["C"][L](Ae(e.x, e.y, t[1], t[2]));
                            break;
                        case "H":
                            t = ["C"][L](Ae(e.x, e.y, t[1], e.y));
                            break;
                        case "V":
                            t = ["C"][L](Ae(e.x, e.y, e.x, t[1]));
                            break;
                        case "Z":
                            t = ["C"][L](Ae(e.x, e.y, e.X, e.Y))
                    }
                    return t
                }), u = function(t, e) {
                    if (t[e].length > 7) {
                        t[e].shift();
                        for (var n = t[e]; n.length;) t.splice(e++, 0, ["C"][L](n.splice(0, 6)));
                        t.splice(e, 1), c = z(r.length, i && i.length || 0)
                    }
                }, l = function(t, e, n, a, s) {
                    t && e && "M" == t[s][0] && "M" != e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), n.bx = 0, n.by = 0, n.x = t[s][1], n.y = t[s][2], c = z(r.length, i && i.length || 0))
                }, h = 0, c = z(r.length, i && i.length || 0); c > h; h++) {
                r[h] = o(r[h], a), u(r, h), i && (i[h] = o(i[h], s)), i && u(i, h), l(r, i, a, s, h), l(i, r, s, a, h);
                var f = r[h],
                    p = i && i[h],
                    d = f.length,
                    g = i && p.length;
                a.x = f[d - 2], a.y = f[d - 1], a.bx = J(f[d - 4]) || a.x, a.by = J(f[d - 3]) || a.y, s.bx = i && (J(p[g - 4]) || s.x), s.by = i && (J(p[g - 3]) || s.y), s.x = i && p[g - 2], s.y = i && p[g - 1]
            }
            return i || (n.curve = Fe(r)), i ? [r, i] : r
        }, null, Fe),
        qe = (e._parseDots = i(function(t) {
            for (var n = [], r = 0, i = t.length; i > r; r++) {
                var a = {},
                    s = t[r].match(/^([^:]*):?([\d\.]*)/);
                if (a.color = e.getRGB(s[1]), a.color.error) return null;
                a.color = a.color.hex, s[2] && (a.offset = s[2] + "%"), n.push(a)
            }
            for (r = 1, i = n.length - 1; i > r; r++)
                if (!n[r].offset) {
                    for (var o = J(n[r - 1].offset || 0), u = 0, l = r + 1; i > l; l++)
                        if (n[l].offset) {
                            u = n[l].offset;
                            break
                        } u || (u = 100, l = i), u = J(u);
                    for (var h = (u - o) / (l - r + 1); l > r; r++) o += h, n[r].offset = o + "%"
                } return n
        }), e._tear = function(t, e) {
            t == e.top && (e.top = t.prev), t == e.bottom && (e.bottom = t.next), t.next && (t.next.prev = t.prev), t.prev && (t.prev.next = t.next)
        }),
        je = (e._tofront = function(t, e) {
            e.top !== t && (qe(t, e), t.next = null, t.prev = e.top, e.top.next = t, e.top = t)
        }, e._toback = function(t, e) {
            e.bottom !== t && (qe(t, e), t.next = e.bottom, t.prev = null, e.bottom.prev = t, e.bottom = t)
        }, e._insertafter = function(t, e, n) {
            qe(t, n), e == n.top && (n.top = t), e.next && (e.next.prev = t), t.next = e.next, t.prev = e, e.next = t
        }, e._insertbefore = function(t, e, n) {
            qe(t, n), e == n.bottom && (n.bottom = t), e.prev && (e.prev.next = t), t.prev = e.prev, e.prev = t, t.next = e
        }, e.toMatrix = function(t, e) {
            var n = Ce(t),
                r = {
                    _: {
                        transform: P
                    },
                    getBBox: function() {
                        return n
                    }
                };
            return De(r, e), r.matrix
        }),
        De = (e.transformPath = function(t, e) {
            return xe(t, je(t, e))
        }, e._extractTransform = function(t, n) {
            if (null == n) return t._.transform;
            n = M(n).replace(/\.{3}|\u2026/g, t._.transform || P);
            var r = e.parseTransformString(n),
                i = 0,
                a = 0,
                s = 0,
                o = 1,
                u = 1,
                l = t._,
                h = new p;
            if (l.transform = r || [], r)
                for (var c = 0, f = r.length; f > c; c++) {
                    var d, g, x, v, m, y = r[c],
                        b = y.length,
                        _ = M(y[0]).toLowerCase(),
                        w = y[0] != _,
                        k = w ? h.invert() : 0;
                    "t" == _ && 3 == b ? w ? (d = k.x(0, 0), g = k.y(0, 0), x = k.x(y[1], y[2]), v = k.y(y[1], y[2]), h.translate(x - d, v - g)) : h.translate(y[1], y[2]) : "r" == _ ? 2 == b ? (m = m || t.getBBox(1), h.rotate(y[1], m.x + m.width / 2, m.y + m.height / 2), i += y[1]) : 4 == b && (w ? (x = k.x(y[2], y[3]), v = k.y(y[2], y[3]), h.rotate(y[1], x, v)) : h.rotate(y[1], y[2], y[3]), i += y[1]) : "s" == _ ? 2 == b || 3 == b ? (m = m || t.getBBox(1), h.scale(y[1], y[b - 1], m.x + m.width / 2, m.y + m.height / 2), o *= y[1], u *= y[b - 1]) : 5 == b && (w ? (x = k.x(y[3], y[4]), v = k.y(y[3], y[4]), h.scale(y[1], y[2], x, v)) : h.scale(y[1], y[2], y[3], y[4]), o *= y[1], u *= y[2]) : "m" == _ && 7 == b && h.add(y[1], y[2], y[3], y[4], y[5], y[6]), l.dirtyT = 1, t.matrix = h
                }
            t.matrix = h, l.sx = o, l.sy = u, l.deg = i, l.dx = a = h.e, l.dy = s = h.f, 1 == o && 1 == u && !i && l.bbox ? (l.bbox.x += +a, l.bbox.y += +s) : l.dirtyT = 1
        }),
        ze = function(t) {
            var e = t[0];
            switch (e.toLowerCase()) {
                case "t":
                    return [e, 0, 0];
                case "m":
                    return [e, 1, 0, 0, 1, 0, 0];
                case "r":
                    return 4 == t.length ? [e, 0, t[2], t[3]] : [e, 0];
                case "s":
                    return 5 == t.length ? [e, 1, 1, t[3], t[4]] : 3 == t.length ? [e, 1, 1] : [e, 1]
            }
        },
        Oe = e._equaliseTransform = function(t, n) {
            n = M(n).replace(/\.{3}|\u2026/g, t), t = e.parseTransformString(t) || [], n = e.parseTransformString(n) || [];
            for (var r, i, a, s, o = z(t.length, n.length), u = [], l = [], h = 0; o > h; h++) {
                if (a = t[h] || ze(n[h]), s = n[h] || ze(a), a[0] != s[0] || "r" == a[0].toLowerCase() && (a[2] != s[2] || a[3] != s[3]) || "s" == a[0].toLowerCase() && (a[3] != s[3] || a[4] != s[4])) return;
                for (u[h] = [], l[h] = [], r = 0, i = z(a.length, s.length); i > r; r++) r in a && (u[h][r] = a[r]), r in s && (l[h][r] = s[r])
            }
            return {
                from: u,
                to: l
            }
        };
    e._getContainer = function(t, n, r, i) {
            var a;
            return a = null != i || e.is(t, "object") ? t : S.doc.getElementById(t), null != a ? a.tagName ? null == n ? {
                container: a,
                width: a.style.pixelWidth || a.offsetWidth,
                height: a.style.pixelHeight || a.offsetHeight
            } : {
                container: a,
                width: n,
                height: r
            } : {
                container: 1,
                x: t,
                y: n,
                width: r,
                height: i
            } : void 0
        }, e.pathToRelative = Te, e._engine = {}, e.path2curve = Re, e.matrix = function(t, e, n, r, i, a) {
            return new p(t, e, n, r, i, a)
        },
        function(t) {
            function n(t) {
                return t[0] * t[0] + t[1] * t[1]
            }

            function r(t) {
                var e = D.sqrt(n(t));
                t[0] && (t[0] /= e), t[1] && (t[1] /= e)
            }
            t.add = function(t, e, n, r, i, a) {
                var s, o, u, l, h = [
                        [],
                        [],
                        []
                    ],
                    c = [
                        [this.a, this.c, this.e],
                        [this.b, this.d, this.f],
                        [0, 0, 1]
                    ],
                    f = [
                        [t, n, i],
                        [e, r, a],
                        [0, 0, 1]
                    ];
                for (t && t instanceof p && (f = [
                        [t.a, t.c, t.e],
                        [t.b, t.d, t.f],
                        [0, 0, 1]
                    ]), s = 0; 3 > s; s++)
                    for (o = 0; 3 > o; o++) {
                        for (l = 0, u = 0; 3 > u; u++) l += c[s][u] * f[u][o];
                        h[s][o] = l
                    }
                this.a = h[0][0], this.b = h[1][0], this.c = h[0][1], this.d = h[1][1], this.e = h[0][2], this.f = h[1][2]
            }, t.invert = function() {
                var t = this,
                    e = t.a * t.d - t.b * t.c;
                return new p(t.d / e, -t.b / e, -t.c / e, t.a / e, (t.c * t.f - t.d * t.e) / e, (t.b * t.e - t.a * t.f) / e)
            }, t.clone = function() {
                return new p(this.a, this.b, this.c, this.d, this.e, this.f)
            }, t.translate = function(t, e) {
                this.add(1, 0, 0, 1, t, e)
            }, t.scale = function(t, e, n, r) {
                null == e && (e = t), (n || r) && this.add(1, 0, 0, 1, n, r), this.add(t, 0, 0, e, 0, 0), (n || r) && this.add(1, 0, 0, 1, -n, -r)
            }, t.rotate = function(t, n, r) {
                t = e.rad(t), n = n || 0, r = r || 0;
                var i = +D.cos(t).toFixed(9),
                    a = +D.sin(t).toFixed(9);
                this.add(i, a, -a, i, n, r), this.add(1, 0, 0, 1, -n, -r)
            }, t.x = function(t, e) {
                return t * this.a + e * this.c + this.e
            }, t.y = function(t, e) {
                return t * this.b + e * this.d + this.f
            }, t.get = function(t) {
                return +this[M.fromCharCode(97 + t)].toFixed(4)
            }, t.toString = function() {
                return e.svg ? "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" : [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join()
            }, t.toFilter = function() {
                return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) + ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) + ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')"
            }, t.offset = function() {
                return [this.e.toFixed(4), this.f.toFixed(4)]
            }, t.split = function() {
                var t = {};
                t.dx = this.e, t.dy = this.f;
                var i = [
                    [this.a, this.c],
                    [this.b, this.d]
                ];
                t.scalex = D.sqrt(n(i[0])), r(i[0]), t.shear = i[0][0] * i[1][0] + i[0][1] * i[1][1], i[1] = [i[1][0] - i[0][0] * t.shear, i[1][1] - i[0][1] * t.shear], t.scaley = D.sqrt(n(i[1])), r(i[1]), t.shear /= t.scaley;
                var a = -i[0][1],
                    s = i[1][1];
                return 0 > s ? (t.rotate = e.deg(D.acos(s)), 0 > a && (t.rotate = 360 - t.rotate)) : t.rotate = e.deg(D.asin(a)), t.isSimple = !(+t.shear.toFixed(9) || t.scalex.toFixed(9) != t.scaley.toFixed(9) && t.rotate), t.isSuperSimple = !+t.shear.toFixed(9) && t.scalex.toFixed(9) == t.scaley.toFixed(9) && !t.rotate, t.noRotation = !+t.shear.toFixed(9) && !t.rotate, t
            }, t.toTransformString = function(t) {
                var e = t || this[I]();
                return e.isSimple ? (e.scalex = +e.scalex.toFixed(4), e.scaley = +e.scaley.toFixed(4), e.rotate = +e.rotate.toFixed(4), (e.dx || e.dy ? "t" + [e.dx, e.dy] : P) + (1 != e.scalex || 1 != e.scaley ? "s" + [e.scalex, e.scaley, 0, 0] : P) + (e.rotate ? "r" + [e.rotate, 0, 0] : P)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)]
            }
        }(p.prototype);
    var Ve = navigator.userAgent.match(/Version\/(.*?)\s/) || navigator.userAgent.match(/Chrome\/(\d+)/);
    b.safari = "Apple Computer, Inc." == navigator.vendor && (Ve && 4 > Ve[1] || "iP" == navigator.platform.slice(0, 2)) || "Google Inc." == navigator.vendor && Ve && 8 > Ve[1] ? function() {
        var t = this.rect(-99, -99, this.width + 99, this.height + 99).attr({
            stroke: "none"
        });
        setTimeout(function() {
            t.remove()
        })
    } : ce;
    for (var Xe = function() {
            this.returnValue = !1
        }, Ye = function() {
            return this.originalEvent.preventDefault()
        }, Ge = function() {
            this.cancelBubble = !0
        }, Ne = function() {
            return this.originalEvent.stopPropagation()
        }, We = function() {
            return S.doc.addEventListener ? function(t, e, n, r) {
                var i = A && q[e] ? q[e] : e,
                    a = function(i) {
                        var a = S.doc.documentElement.scrollTop || S.doc.body.scrollTop,
                            s = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft,
                            o = i.clientX + s,
                            u = i.clientY + a;
                        if (A && q[B](e))
                            for (var l = 0, h = i.targetTouches && i.targetTouches.length; h > l; l++)
                                if (i.targetTouches[l].target == t) {
                                    var c = i;
                                    i = i.targetTouches[l], i.originalEvent = c, i.preventDefault = Ye, i.stopPropagation = Ne;
                                    break
                                } return n.call(r, i, o, u)
                    };
                return t.addEventListener(i, a, !1),
                    function() {
                        return t.removeEventListener(i, a, !1), !0
                    }
            } : S.doc.attachEvent ? function(t, e, n, r) {
                var i = function(t) {
                    t = t || S.win.event;
                    var e = S.doc.documentElement.scrollTop || S.doc.body.scrollTop,
                        i = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft,
                        a = t.clientX + i,
                        s = t.clientY + e;
                    return t.preventDefault = t.preventDefault || Xe, t.stopPropagation = t.stopPropagation || Ge, n.call(r, t, a, s)
                };
                t.attachEvent("on" + e, i);
                var a = function() {
                    return t.detachEvent("on" + e, i), !0
                };
                return a
            } : void 0
        }(), $e = [], He = function(e) {
            for (var n, r = e.clientX, i = e.clientY, a = S.doc.documentElement.scrollTop || S.doc.body.scrollTop, s = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft, o = $e.length; o--;) {
                if (n = $e[o], A) {
                    for (var u, l = e.touches.length; l--;)
                        if (u = e.touches[l], u.identifier == n.el._drag.id) {
                            r = u.clientX, i = u.clientY, (e.originalEvent ? e.originalEvent : e).preventDefault();
                            break
                        }
                } else e.preventDefault();
                var h, c = n.el.node,
                    f = c.nextSibling,
                    p = c.parentNode,
                    d = c.style.display;
                S.win.opera && p.removeChild(c), c.style.display = "none", h = n.el.paper.getElementByPoint(r, i), c.style.display = d, S.win.opera && (f ? p.insertBefore(c, f) : p.appendChild(c)), h && t("raphael.drag.over." + n.el.id, n.el, h), r += s, i += a, t("raphael.drag.move." + n.el.id, n.move_scope || n.el, r - n.el._drag.x, i - n.el._drag.y, r, i, e)
            }
        }, Ue = function(n) {
            e.unmousemove(He).unmouseup(Ue);
            for (var r, i = $e.length; i--;) r = $e[i], r.el._drag = {}, t("raphael.drag.end." + r.el.id, r.end_scope || r.start_scope || r.move_scope || r.el, n);
            $e = []
        }, Ze = e.el = {}, Qe = R.length; Qe--;)(function(t) {
        e[t] = Ze[t] = function(n, r) {
            return e.is(n, "function") && (this.events = this.events || [], this.events.push({
                name: t,
                f: n,
                unbind: We(this.shape || this.node || S.doc, t, n, r || this)
            })), this
        }, e["un" + t] = Ze["un" + t] = function(e) {
            for (var n = this.events || [], r = n.length; r--;)
                if (n[r].name == t && n[r].f == e) return n[r].unbind(), n.splice(r, 1), !n.length && delete this.events, this;
            return this
        }
    })(R[Qe]);
    Ze.data = function(n, r) {
        var i = le[this.id] = le[this.id] || {};
        if (1 == arguments.length) {
            if (e.is(n, "object")) {
                for (var a in n) n[B](a) && this.data(a, n[a]);
                return this
            }
            return t("raphael.data.get." + this.id, this, i[n], n), i[n]
        }
        return i[n] = r, t("raphael.data.set." + this.id, this, r, n), this
    }, Ze.removeData = function(t) {
        return null == t ? le[this.id] = {} : le[this.id] && delete le[this.id][t], this
    }, Ze.getData = function() {
        return n(le[this.id] || {})
    }, Ze.hover = function(t, e, n, r) {
        return this.mouseover(t, n).mouseout(e, r || n)
    }, Ze.unhover = function(t, e) {
        return this.unmouseover(t).unmouseout(e)
    };
    var Je = [];
    Ze.drag = function(n, r, i, a, s, o) {
        function u(u) {
            (u.originalEvent || u).preventDefault();
            var l = S.doc.documentElement.scrollTop || S.doc.body.scrollTop,
                h = S.doc.documentElement.scrollLeft || S.doc.body.scrollLeft;
            this._drag.x = u.clientX + h, this._drag.y = u.clientY + l, this._drag.id = u.identifier, !$e.length && e.mousemove(He).mouseup(Ue), $e.push({
                el: this,
                move_scope: a,
                start_scope: s,
                end_scope: o
            }), r && t.on("raphael.drag.start." + this.id, r), n && t.on("raphael.drag.move." + this.id, n), i && t.on("raphael.drag.end." + this.id, i), t("raphael.drag.start." + this.id, s || a || this, u.clientX + h, u.clientY + l, u)
        }
        return this._drag = {}, Je.push({
            el: this,
            start: u
        }), this.mousedown(u), this
    }, Ze.onDragOver = function(e) {
        e ? t.on("raphael.drag.over." + this.id, e) : t.unbind("raphael.drag.over." + this.id)
    }, Ze.undrag = function() {
        for (var n = Je.length; n--;) Je[n].el == this && (this.unmousedown(Je[n].start), Je.splice(n, 1), t.unbind("raphael.drag.*." + this.id));
        !Je.length && e.unmousemove(He).unmouseup(Ue), $e = []
    }, b.circle = function(t, n, r) {
        var i = e._engine.circle(this, t || 0, n || 0, r || 0);
        return this.__set__ && this.__set__.push(i), i
    }, b.rect = function(t, n, r, i, a) {
        var s = e._engine.rect(this, t || 0, n || 0, r || 0, i || 0, a || 0);
        return this.__set__ && this.__set__.push(s), s
    }, b.ellipse = function(t, n, r, i) {
        var a = e._engine.ellipse(this, t || 0, n || 0, r || 0, i || 0);
        return this.__set__ && this.__set__.push(a), a
    }, b.path = function(t) {
        t && !e.is(t, N) && !e.is(t[0], W) && (t += P);
        var n = e._engine.path(e.format[T](e, arguments), this);
        return this.__set__ && this.__set__.push(n), n
    }, b.image = function(t, n, r, i, a) {
        var s = e._engine.image(this, t || "about:blank", n || 0, r || 0, i || 0, a || 0);
        return this.__set__ && this.__set__.push(s), s
    }, b.text = function(t, n, r) {
        var i = e._engine.text(this, t || 0, n || 0, M(r));
        return this.__set__ && this.__set__.push(i), i
    }, b.set = function(t) {
        !e.is(t, "array") && (t = Array.prototype.splice.call(arguments, 0, arguments.length));
        var n = new cn(t);
        return this.__set__ && this.__set__.push(n), n.paper = this, n.type = "set", n
    }, b.setStart = function(t) {
        this.__set__ = t || this.set()
    }, b.setFinish = function() {
        var t = this.__set__;
        return delete this.__set__, t
    }, b.setSize = function(t, n) {
        return e._engine.setSize.call(this, t, n)
    }, b.setViewBox = function(t, n, r, i, a) {
        return e._engine.setViewBox.call(this, t, n, r, i, a)
    }, b.top = b.bottom = null, b.raphael = e;
    var Ke = function(t) {
        var e = t.getBoundingClientRect(),
            n = t.ownerDocument,
            r = n.body,
            i = n.documentElement,
            a = i.clientTop || r.clientTop || 0,
            s = i.clientLeft || r.clientLeft || 0,
            o = e.top + (S.win.pageYOffset || i.scrollTop || r.scrollTop) - a,
            u = e.left + (S.win.pageXOffset || i.scrollLeft || r.scrollLeft) - s;
        return {
            y: o,
            x: u
        }
    };
    b.getElementByPoint = function(t, e) {
        var n = this,
            r = n.canvas,
            i = S.doc.elementFromPoint(t, e);
        if (S.win.opera && "svg" == i.tagName) {
            var a = Ke(r),
                s = r.createSVGRect();
            s.x = t - a.x, s.y = e - a.y, s.width = s.height = 1;
            var o = r.getIntersectionList(s, null);
            o.length && (i = o[o.length - 1])
        }
        if (!i) return null;
        for (; i.parentNode && i != r.parentNode && !i.raphael;) i = i.parentNode;
        return i == n.canvas.parentNode && (i = r), i = i && i.raphael ? n.getById(i.raphaelid) : null
    }, b.getElementsByBBox = function(t) {
        var n = this.set();
        return this.forEach(function(r) {
            e.isBBoxIntersect(r.getBBox(), t) && n.push(r)
        }), n
    }, b.getById = function(t) {
        for (var e = this.bottom; e;) {
            if (e.id == t) return e;
            e = e.next
        }
        return null
    }, b.forEach = function(t, e) {
        for (var n = this.bottom; n;) {
            if (t.call(e, n) === !1) return this;
            n = n.next
        }
        return this
    }, b.getElementsByPoint = function(t, e) {
        var n = this.set();
        return this.forEach(function(r) {
            r.isPointInside(t, e) && n.push(r)
        }), n
    }, Ze.isPointInside = function(t, n) {
        var r = this.realPath = this.realPath || ge[this.type](this);
        return e.isPointInsidePath(r, t, n)
    }, Ze.getBBox = function(t) {
        if (this.removed) return {};
        var e = this._;
        return t ? ((e.dirty || !e.bboxwt) && (this.realPath = ge[this.type](this), e.bboxwt = Ce(this.realPath), e.bboxwt.toString = d, e.dirty = 0), e.bboxwt) : ((e.dirty || e.dirtyT || !e.bbox) && ((e.dirty || !this.realPath) && (e.bboxwt = 0, this.realPath = ge[this.type](this)), e.bbox = Ce(xe(this.realPath, this.matrix)), e.bbox.toString = d, e.dirty = e.dirtyT = 0), e.bbox)
    }, Ze.clone = function() {
        if (this.removed) return null;
        var t = this.paper[this.type]().attr(this.attr());
        return this.__set__ && this.__set__.push(t), t
    }, Ze.glow = function(t) {
        if ("text" == this.type) return null;
        t = t || {};
        var e = {
                width: (t.width || 10) + (+this.attr("stroke-width") || 1),
                fill: t.fill || !1,
                opacity: t.opacity || .5,
                offsetx: t.offsetx || 0,
                offsety: t.offsety || 0,
                color: t.color || "#000"
            },
            n = e.width / 2,
            r = this.paper,
            i = r.set(),
            a = this.realPath || ge[this.type](this);
        a = this.matrix ? xe(a, this.matrix) : a;
        for (var s = 1; n + 1 > s; s++) i.push(r.path(a).attr({
            stroke: e.color,
            fill: e.fill ? e.color : "none",
            "stroke-linejoin": "round",
            "stroke-linecap": "round",
            "stroke-width": +(e.width / n * s).toFixed(3),
            opacity: +(e.opacity / n).toFixed(3)
        }));
        return i.insertBefore(this).translate(e.offsetx, e.offsety)
    };
    var tn = function(t, n, r, i, a, s, o, h, c) {
            return null == c ? u(t, n, r, i, a, s, o, h) : e.findDotsAtSegment(t, n, r, i, a, s, o, h, l(t, n, r, i, a, s, o, h, c))
        },
        en = function(t, n) {
            return function(r, i, a) {
                r = Re(r);
                for (var s, o, u, l, h, c = "", f = {}, p = 0, d = 0, g = r.length; g > d; d++) {
                    if (u = r[d], "M" == u[0]) s = +u[1], o = +u[2];
                    else {
                        if (l = tn(s, o, u[1], u[2], u[3], u[4], u[5], u[6]), p + l > i) {
                            if (n && !f.start) {
                                if (h = tn(s, o, u[1], u[2], u[3], u[4], u[5], u[6], i - p), c += ["C" + h.start.x, h.start.y, h.m.x, h.m.y, h.x, h.y], a) return c;
                                f.start = c, c = ["M" + h.x, h.y + "C" + h.n.x, h.n.y, h.end.x, h.end.y, u[5], u[6]].join(), p += l, s = +u[5], o = +u[6];
                                continue
                            }
                            if (!t && !n) return h = tn(s, o, u[1], u[2], u[3], u[4], u[5], u[6], i - p), {
                                x: h.x,
                                y: h.y,
                                alpha: h.alpha
                            }
                        }
                        p += l, s = +u[5], o = +u[6]
                    }
                    c += u.shift() + u
                }
                return f.end = c, h = t ? p : n ? f : e.findDotsAtSegment(s, o, u[0], u[1], u[2], u[3], u[4], u[5], 1), h.alpha && (h = {
                    x: h.x,
                    y: h.y,
                    alpha: h.alpha
                }), h
            }
        },
        nn = en(1),
        rn = en(),
        an = en(0, 1);
    e.getTotalLength = nn, e.getPointAtLength = rn, e.getSubpath = function(t, e, n) {
        if (1e-6 > this.getTotalLength(t) - n) return an(t, e).end;
        var r = an(t, n, 1);
        return e ? an(r, e).end : r
    }, Ze.getTotalLength = function() {
        return "path" == this.type ? this.node.getTotalLength ? this.node.getTotalLength() : nn(this.attrs.path) : void 0
    }, Ze.getPointAtLength = function(t) {
        return "path" == this.type ? rn(this.attrs.path, t) : void 0
    }, Ze.getSubpath = function(t, n) {
        return "path" == this.type ? e.getSubpath(this.attrs.path, t, n) : void 0
    };
    var sn = e.easing_formulas = {
        linear: function(t) {
            return t
        },
        "<": function(t) {
            return X(t, 1.7)
        },
        ">": function(t) {
            return X(t, .48)
        },
        "<>": function(t) {
            var e = .48 - t / 1.04,
                n = D.sqrt(.1734 + e * e),
                r = n - e,
                i = X(V(r), 1 / 3) * (0 > r ? -1 : 1),
                a = -n - e,
                s = X(V(a), 1 / 3) * (0 > a ? -1 : 1),
                o = i + s + .5;
            return 3 * (1 - o) * o * o + o * o * o
        },
        backIn: function(t) {
            var e = 1.70158;
            return t * t * ((e + 1) * t - e)
        },
        backOut: function(t) {
            t -= 1;
            var e = 1.70158;
            return t * t * ((e + 1) * t + e) + 1
        },
        elastic: function(t) {
            return t == !!t ? t : X(2, -10 * t) * D.sin((t - .075) * 2 * Y / .3) + 1
        },
        bounce: function(t) {
            var e, n = 7.5625,
                r = 2.75;
            return 1 / r > t ? e = n * t * t : 2 / r > t ? (t -= 1.5 / r, e = n * t * t + .75) : 2.5 / r > t ? (t -= 2.25 / r, e = n * t * t + .9375) : (t -= 2.625 / r, e = n * t * t + .984375), e
        }
    };
    sn.easeIn = sn["ease-in"] = sn["<"], sn.easeOut = sn["ease-out"] = sn[">"], sn.easeInOut = sn["ease-in-out"] = sn["<>"], sn["back-in"] = sn.backIn, sn["back-out"] = sn.backOut;
    var on = [],
        un = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(t) {
            setTimeout(t, 16)
        },
        ln = function() {
            for (var n = +new Date, r = 0; on.length > r; r++) {
                var i = on[r];
                if (!i.el.removed && !i.paused) {
                    var a, s, o = n - i.start,
                        u = i.ms,
                        l = i.easing,
                        h = i.from,
                        c = i.diff,
                        f = i.to,
                        p = (i.t, i.el),
                        d = {},
                        g = {};
                    if (i.initstatus ? (o = (i.initstatus * i.anim.top - i.prev) / (i.percent - i.prev) * u, i.status = i.initstatus, delete i.initstatus, i.stop && on.splice(r--, 1)) : i.status = (i.prev + (i.percent - i.prev) * (o / u)) / i.anim.top, !(0 > o))
                        if (u > o) {
                            var x = l(o / u);
                            for (var m in h)
                                if (h[B](m)) {
                                    switch (ne[m]) {
                                        case G:
                                            a = +h[m] + x * u * c[m];
                                            break;
                                        case "colour":
                                            a = "rgb(" + [hn(Q(h[m].r + x * u * c[m].r)), hn(Q(h[m].g + x * u * c[m].g)), hn(Q(h[m].b + x * u * c[m].b))].join(",") + ")";
                                            break;
                                        case "path":
                                            a = [];
                                            for (var y = 0, b = h[m].length; b > y; y++) {
                                                a[y] = [h[m][y][0]];
                                                for (var _ = 1, w = h[m][y].length; w > _; _++) a[y][_] = +h[m][y][_] + x * u * c[m][y][_];
                                                a[y] = a[y].join(E)
                                            }
                                            a = a.join(E);
                                            break;
                                        case "transform":
                                            if (c[m].real)
                                                for (a = [], y = 0, b = h[m].length; b > y; y++)
                                                    for (a[y] = [h[m][y][0]], _ = 1, w = h[m][y].length; w > _; _++) a[y][_] = h[m][y][_] + x * u * c[m][y][_];
                                            else {
                                                var k = function(t) {
                                                    return +h[m][t] + x * u * c[m][t]
                                                };
                                                a = [
                                                    ["m", k(0), k(1), k(2), k(3), k(4), k(5)]
                                                ]
                                            }
                                            break;
                                        case "csv":
                                            if ("clip-rect" == m)
                                                for (a = [], y = 4; y--;) a[y] = +h[m][y] + x * u * c[m][y];
                                            break;
                                        default:
                                            var S = [][L](h[m]);
                                            for (a = [], y = p.paper.customAttributes[m].length; y--;) a[y] = +S[y] + x * u * c[m][y]
                                    }
                                    d[m] = a
                                } p.attr(d),
                                function(e, n, r) {
                                    setTimeout(function() {
                                        t("raphael.anim.frame." + e, n, r)
                                    })
                                }(p.id, p, i.anim)
                        } else {
                            if (function(n, r, i) {
                                    setTimeout(function() {
                                        t("raphael.anim.frame." + r.id, r, i), t("raphael.anim.finish." + r.id, r, i), e.is(n, "function") && n.call(r)
                                    })
                                }(i.callback, p, i.anim), p.attr(f), on.splice(r--, 1), i.repeat > 1 && !i.next) {
                                for (s in f) f[B](s) && (g[s] = i.totalOrigin[s]);
                                i.el.attr(g), v(i.anim, i.el, i.anim.percents[0], null, i.totalOrigin, i.repeat - 1)
                            }
                            i.next && !i.stop && v(i.anim, i.el, i.next, null, i.totalOrigin, i.repeat)
                        }
                }
            }
            e.svg && p && p.paper && p.paper.safari(), on.length && un(ln)
        },
        hn = function(t) {
            return t > 255 ? 255 : 0 > t ? 0 : t
        };
    Ze.animateWith = function(t, n, r, i, a, s) {
        var o = this;
        if (o.removed) return s && s.call(o), o;
        var u = r instanceof x ? r : e.animation(r, i, a, s);
        v(u, o, u.percents[0], null, o.attr());
        for (var l = 0, h = on.length; h > l; l++)
            if (on[l].anim == n && on[l].el == t) {
                on[h - 1].start = on[l].start;
                break
            } return o
    }, Ze.onAnimation = function(e) {
        return e ? t.on("raphael.anim.frame." + this.id, e) : t.unbind("raphael.anim.frame." + this.id), this
    }, x.prototype.delay = function(t) {
        var e = new x(this.anim, this.ms);
        return e.times = this.times, e.del = +t || 0, e
    }, x.prototype.repeat = function(t) {
        var e = new x(this.anim, this.ms);
        return e.del = this.del, e.times = D.floor(z(t, 0)) || 1, e
    }, e.animation = function(t, n, r, i) {
        if (t instanceof x) return t;
        (e.is(r, "function") || !r) && (i = i || r || null, r = null), t = Object(t), n = +n || 0;
        var a, s, o = {};
        for (s in t) t[B](s) && J(s) != s && J(s) + "%" != s && (a = !0, o[s] = t[s]);
        return a ? (r && (o.easing = r), i && (o.callback = i), new x({
            100: o
        }, n)) : new x(t, n)
    }, Ze.animate = function(t, n, r, i) {
        var a = this;
        if (a.removed) return i && i.call(a), a;
        var s = t instanceof x ? t : e.animation(t, n, r, i);
        return v(s, a, s.percents[0], null, a.attr()), a
    }, Ze.setTime = function(t, e) {
        return t && null != e && this.status(t, O(e, t.ms) / t.ms), this
    }, Ze.status = function(t, e) {
        var n, r, i = [],
            a = 0;
        if (null != e) return v(t, this, -1, O(e, 1)), this;
        for (n = on.length; n > a; a++)
            if (r = on[a], r.el.id == this.id && (!t || r.anim == t)) {
                if (t) return r.status;
                i.push({
                    anim: r.anim,
                    status: r.status
                })
            } return t ? 0 : i
    }, Ze.pause = function(e) {
        for (var n = 0; on.length > n; n++) on[n].el.id != this.id || e && on[n].anim != e || t("raphael.anim.pause." + this.id, this, on[n].anim) !== !1 && (on[n].paused = !0);
        return this
    }, Ze.resume = function(e) {
        for (var n = 0; on.length > n; n++)
            if (on[n].el.id == this.id && (!e || on[n].anim == e)) {
                var r = on[n];
                t("raphael.anim.resume." + this.id, this, r.anim) !== !1 && (delete r.paused, this.status(r.anim, r.status))
            } return this
    }, Ze.stop = function(e) {
        for (var n = 0; on.length > n; n++) on[n].el.id != this.id || e && on[n].anim != e || t("raphael.anim.stop." + this.id, this, on[n].anim) !== !1 && on.splice(n--, 1);
        return this
    }, t.on("raphael.remove", m), t.on("raphael.clear", m), Ze.toString = function() {
        return "Raphals object"
    };
    var cn = function(t) {
            if (this.items = [], this.length = 0, this.type = "set", t)
                for (var e = 0, n = t.length; n > e; e++) !t[e] || t[e].constructor != Ze.constructor && t[e].constructor != cn || (this[this.items.length] = this.items[this.items.length] = t[e], this.length++)
        },
        fn = cn.prototype;
    fn.push = function() {
        for (var t, e, n = 0, r = arguments.length; r > n; n++) t = arguments[n], !t || t.constructor != Ze.constructor && t.constructor != cn || (e = this.items.length, this[e] = this.items[e] = t, this.length++);
        return this
    }, fn.pop = function() {
        return this.length && delete this[this.length--], this.items.pop()
    }, fn.forEach = function(t, e) {
        for (var n = 0, r = this.items.length; r > n; n++)
            if (t.call(e, this.items[n], n) === !1) return this;
        return this
    };
    for (var pn in Ze) Ze[B](pn) && (fn[pn] = function(t) {
        return function() {
            var e = arguments;
            return this.forEach(function(n) {
                n[t][T](n, e)
            })
        }
    }(pn));
    return fn.attr = function(t, n) {
            if (t && e.is(t, W) && e.is(t[0], "object"))
                for (var r = 0, i = t.length; i > r; r++) this.items[r].attr(t[r]);
            else
                for (var a = 0, s = this.items.length; s > a; a++) this.items[a].attr(t, n);
            return this
        }, fn.clear = function() {
            for (; this.length;) this.pop()
        }, fn.splice = function(t, e) {
            t = 0 > t ? z(this.length + t, 0) : t, e = z(0, O(this.length - t, e));
            var n, r = [],
                i = [],
                a = [];
            for (n = 2; arguments.length > n; n++) a.push(arguments[n]);
            for (n = 0; e > n; n++) i.push(this[t + n]);
            for (; this.length - t > n; n++) r.push(this[t + n]);
            var s = a.length;
            for (n = 0; s + r.length > n; n++) this.items[t + n] = this[t + n] = s > n ? a[n] : r[n - s];
            for (n = this.items.length = this.length -= e - s; this[n];) delete this[n++];
            return new cn(i)
        }, fn.exclude = function(t) {
            for (var e = 0, n = this.length; n > e; e++)
                if (this[e] == t) return this.splice(e, 1), !0
        }, fn.animate = function(t, n, r, i) {
            (e.is(r, "function") || !r) && (i = r || null);
            var a, s, o = this.items.length,
                u = o,
                l = this;
            if (!o) return this;
            i && (s = function() {
                !--o && i.call(l)
            }), r = e.is(r, N) ? r : s;
            var h = e.animation(t, n, r, s);
            for (a = this.items[--u].animate(h); u--;) this.items[u] && !this.items[u].removed && this.items[u].animateWith(a, h, h);
            return this
        }, fn.insertAfter = function(t) {
            for (var e = this.items.length; e--;) this.items[e].insertAfter(t);
            return this
        }, fn.getBBox = function() {
            for (var t = [], e = [], n = [], r = [], i = this.items.length; i--;)
                if (!this.items[i].removed) {
                    var a = this.items[i].getBBox();
                    t.push(a.x), e.push(a.y), n.push(a.x + a.width), r.push(a.y + a.height)
                } return t = O[T](0, t), e = O[T](0, e), n = z[T](0, n), r = z[T](0, r), {
                x: t,
                y: e,
                x2: n,
                y2: r,
                width: n - t,
                height: r - e
            }
        }, fn.clone = function(t) {
            t = this.paper.set();
            for (var e = 0, n = this.items.length; n > e; e++) t.push(this.items[e].clone());
            return t
        }, fn.toString = function() {
            return "Raphals set"
        }, fn.glow = function(t) {
            var e = this.paper.set();
            return this.forEach(function(n) {
                var r = n.glow(t);
                null != r && r.forEach(function(t) {
                    e.push(t)
                })
            }), e
        }, e.registerFont = function(t) {
            if (!t.face) return t;
            this.fonts = this.fonts || {};
            var e = {
                    w: t.w,
                    face: {},
                    glyphs: {}
                },
                n = t.face["font-family"];
            for (var r in t.face) t.face[B](r) && (e.face[r] = t.face[r]);
            if (this.fonts[n] ? this.fonts[n].push(e) : this.fonts[n] = [e], !t.svg) {
                e.face["units-per-em"] = K(t.face["units-per-em"], 10);
                for (var i in t.glyphs)
                    if (t.glyphs[B](i)) {
                        var a = t.glyphs[i];
                        if (e.glyphs[i] = {
                                w: a.w,
                                k: {},
                                d: a.d && "M" + a.d.replace(/[mlcxtrv]/g, function(t) {
                                    return {
                                        l: "L",
                                        c: "C",
                                        x: "z",
                                        t: "m",
                                        r: "l",
                                        v: "c"
                                    } [t] || "M"
                                }) + "z"
                            }, a.k)
                            for (var s in a.k) a[B](s) && (e.glyphs[i].k[s] = a.k[s])
                    }
            }
            return t
        }, b.getFont = function(t, n, r, i) {
            if (i = i || "normal", r = r || "normal", n = +n || {
                    normal: 400,
                    bold: 700,
                    lighter: 300,
                    bolder: 800
                } [n] || 400, e.fonts) {
                var a = e.fonts[t];
                if (!a) {
                    var s = RegExp("(^|\\s)" + t.replace(/[^\w\d\s+!~.:_-]/g, P) + "(\\s|$)", "i");
                    for (var o in e.fonts)
                        if (e.fonts[B](o) && s.test(o)) {
                            a = e.fonts[o];
                            break
                        }
                }
                var u;
                if (a)
                    for (var l = 0, h = a.length; h > l && (u = a[l], u.face["font-weight"] != n || u.face["font-style"] != r && u.face["font-style"] || u.face["font-stretch"] != i); l++);
                return u
            }
        }, b.print = function(t, n, r, i, a, s, o) {
            s = s || "middle", o = z(O(o || 0, 1), -1);
            var u, l = M(r)[I](P),
                h = 0,
                c = 0,
                f = P;
            if (e.is(i, "string") && (i = this.getFont(i)), i) {
                u = (a || 16) / i.face["units-per-em"];
                for (var p = i.face.bbox[I](_), d = +p[0], g = p[3] - p[1], x = 0, v = +p[1] + ("baseline" == s ? g + +i.face.descent : g / 2), m = 0, y = l.length; y > m; m++) {
                    if ("\n" == l[m]) h = 0, w = 0, c = 0, x += g;
                    else {
                        var b = c && i.glyphs[l[m - 1]] || {},
                            w = i.glyphs[l[m]];
                        h += c ? (b.w || i.w) + (b.k && b.k[l[m]] || 0) + i.w * o : 0, c = 1
                    }
                    w && w.d && (f += e.transformPath(w.d, ["t", h * u, x * u, "s", u, u, d, v, "t", (t - d) / u, (n - v) / u]))
                }
            }
            return this.path(f).attr({
                fill: "#000",
                stroke: "none"
            })
        }, b.add = function(t) {
            if (e.is(t, "array"))
                for (var n, r = this.set(), i = 0, a = t.length; a > i; i++) n = t[i] || {}, w[B](n.type) && r.push(this[n.type]().attr(n));
            return r
        }, e.format = function(t, n) {
            var r = e.is(n, W) ? [0][L](n) : arguments;
            return t && e.is(t, N) && r.length - 1 && (t = t.replace(k, function(t, e) {
                return null == r[++e] ? P : r[e]
            })), t || P
        }, e.fullfill = function() {
            var t = /\{([^\}]+)\}/g,
                e = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,
                n = function(t, n, r) {
                    var i = r;
                    return n.replace(e, function(t, e, n, r, a) {
                        e = e || r, i && (e in i && (i = i[e]), "function" == typeof i && a && (i = i()))
                    }), i = (null == i || i == r ? t : i) + ""
                };
            return function(e, r) {
                return (e + "").replace(t, function(t, e) {
                    return n(t, e, r)
                })
            }
        }(), e.ninja = function() {
            return C.was ? S.win.Raphael = C.is : delete Raphael, e
        }, e.st = fn,
        function(t, n, r) {
            function i() {
                /in/.test(t.readyState) ? setTimeout(i, 9) : e.eve("raphael.DOMload")
            }
            null == t.readyState && t.addEventListener && (t.addEventListener(n, r = function() {
                t.removeEventListener(n, r, !1), t.readyState = "complete"
            }, !1), t.readyState = "loading"), i()
        }(document, "DOMContentLoaded"), C.was ? S.win.Raphael = e : Raphael = e, t.on("raphael.DOMload", function() {
            y = !0
        }), e
});
(function(t, e) {
    "function" == typeof define && define.amd ? require(["raphael"], e) : t.Raphael && e(t.Raphael)
})(this, function(t) {
    if (t.svg) {
        var e = "hasOwnProperty",
            r = String,
            n = parseFloat,
            i = parseInt,
            a = Math,
            s = a.max,
            o = a.abs,
            u = a.pow,
            h = /[, ]+/,
            l = t.eve,
            c = "",
            f = " ",
            p = "http://www.w3.org/1999/xlink",
            d = {
                block: "M5,0 0,2.5 5,5z",
                classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z",
                diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z",
                open: "M6,1 1,3.5 6,6",
                oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"
            },
            g = {};
        t.toString = function() {
            return "Your browser supports SVG.\nYou are running Raphal " + this.version
        };
        var x = function(n, i) {
                if (i) {
                    "string" == typeof n && (n = x(n));
                    for (var a in i) i[e](a) && ("xlink:" == a.substring(0, 6) ? n.setAttributeNS(p, a.substring(6), r(i[a])) : n.setAttribute(a, r(i[a])))
                } else n = t._g.doc.createElementNS("http://www.w3.org/2000/svg", n), n.style && (n.style.webkitTapHighlightColor = "rgba(0,0,0,0)");
                return n
            },
            v = function(e, i) {
                var h = "linear",
                    l = e.id + i,
                    f = .5,
                    p = .5,
                    d = e.node,
                    g = e.paper,
                    v = d.style,
                    y = t._g.doc.getElementById(l);
                if (!y) {
                    if (i = r(i).replace(t._radial_gradient, function(t, e, r) {
                            if (h = "radial", e && r) {
                                f = n(e), p = n(r);
                                var i = 2 * (p > .5) - 1;
                                u(f - .5, 2) + u(p - .5, 2) > .25 && (p = a.sqrt(.25 - u(f - .5, 2)) * i + .5) && .5 != p && (p = p.toFixed(5) - 1e-5 * i)
                            }
                            return c
                        }), i = i.split(/\s*\-\s*/), "linear" == h) {
                        var m = i.shift();
                        if (m = -n(m), isNaN(m)) return null;
                        var b = [0, 0, a.cos(t.rad(m)), a.sin(t.rad(m))],
                            _ = 1 / (s(o(b[2]), o(b[3])) || 1);
                        b[2] *= _, b[3] *= _, 0 > b[2] && (b[0] = -b[2], b[2] = 0), 0 > b[3] && (b[1] = -b[3], b[3] = 0)
                    }
                    var w = t._parseDots(i);
                    if (!w) return null;
                    if (l = l.replace(/[\(\)\s,\xb0#]/g, "_"), e.gradient && l != e.gradient.id && (g.defs.removeChild(e.gradient), delete e.gradient), !e.gradient) {
                        y = x(h + "Gradient", {
                            id: l
                        }), e.gradient = y, x(y, "radial" == h ? {
                            fx: f,
                            fy: p
                        } : {
                            x1: b[0],
                            y1: b[1],
                            x2: b[2],
                            y2: b[3],
                            gradientTransform: e.matrix.invert()
                        }), g.defs.appendChild(y);
                        for (var k = 0, C = w.length; C > k; k++) y.appendChild(x("stop", {
                            offset: w[k].offset ? w[k].offset : k ? "100%" : "0%",
                            "stop-color": w[k].color || "#fff"
                        }))
                    }
                }
                return x(d, {
                    fill: "url(#" + l + ")",
                    opacity: 1,
                    "fill-opacity": 1
                }), v.fill = c, v.opacity = 1, v.fillOpacity = 1, 1
            },
            y = function(t) {
                var e = t.getBBox(1);
                x(t.pattern, {
                    patternTransform: t.matrix.invert() + " translate(" + e.x + "," + e.y + ")"
                })
            },
            m = function(n, i, a) {
                if ("path" == n.type) {
                    for (var s, o, u, h, l, f = r(i).toLowerCase().split("-"), p = n.paper, v = a ? "end" : "start", y = n.node, m = n.attrs, b = m["stroke-width"], _ = f.length, w = "classic", k = 3, C = 3, B = 5; _--;) switch (f[_]) {
                        case "block":
                        case "classic":
                        case "oval":
                        case "diamond":
                        case "open":
                        case "none":
                            w = f[_];
                            break;
                        case "wide":
                            C = 5;
                            break;
                        case "narrow":
                            C = 2;
                            break;
                        case "long":
                            k = 5;
                            break;
                        case "short":
                            k = 2
                    }
                    if ("open" == w ? (k += 2, C += 2, B += 2, u = 1, h = a ? 4 : 1, l = {
                            fill: "none",
                            stroke: m.stroke
                        }) : (h = u = k / 2, l = {
                            fill: m.stroke,
                            stroke: "none"
                        }), n._.arrows ? a ? (n._.arrows.endPath && g[n._.arrows.endPath]--, n._.arrows.endMarker && g[n._.arrows.endMarker]--) : (n._.arrows.startPath && g[n._.arrows.startPath]--, n._.arrows.startMarker && g[n._.arrows.startMarker]--) : n._.arrows = {}, "none" != w) {
                        var S = "raphael-marker-" + w,
                            A = "raphael-marker-" + v + w + k + C;
                        t._g.doc.getElementById(S) ? g[S]++ : (p.defs.appendChild(x(x("path"), {
                            "stroke-linecap": "round",
                            d: d[w],
                            id: S
                        })), g[S] = 1);
                        var T, M = t._g.doc.getElementById(A);
                        M ? (g[A]++, T = M.getElementsByTagName("use")[0]) : (M = x(x("marker"), {
                            id: A,
                            markerHeight: C,
                            markerWidth: k,
                            orient: "auto",
                            refX: h,
                            refY: C / 2
                        }), T = x(x("use"), {
                            "xlink:href": "#" + S,
                            transform: (a ? "rotate(180 " + k / 2 + " " + C / 2 + ") " : c) + "scale(" + k / B + "," + C / B + ")",
                            "stroke-width": (1 / ((k / B + C / B) / 2)).toFixed(4)
                        }), M.appendChild(T), p.defs.appendChild(M), g[A] = 1), x(T, l);
                        var F = u * ("diamond" != w && "oval" != w);
                        a ? (s = n._.arrows.startdx * b || 0, o = t.getTotalLength(m.path) - F * b) : (s = F * b, o = t.getTotalLength(m.path) - (n._.arrows.enddx * b || 0)), l = {}, l["marker-" + v] = "url(#" + A + ")", (o || s) && (l.d = Raphael.getSubpath(m.path, s, o)), x(y, l), n._.arrows[v + "Path"] = S, n._.arrows[v + "Marker"] = A, n._.arrows[v + "dx"] = F, n._.arrows[v + "Type"] = w, n._.arrows[v + "String"] = i
                    } else a ? (s = n._.arrows.startdx * b || 0, o = t.getTotalLength(m.path) - s) : (s = 0, o = t.getTotalLength(m.path) - (n._.arrows.enddx * b || 0)), n._.arrows[v + "Path"] && x(y, {
                        d: Raphael.getSubpath(m.path, s, o)
                    }), delete n._.arrows[v + "Path"], delete n._.arrows[v + "Marker"], delete n._.arrows[v + "dx"], delete n._.arrows[v + "Type"], delete n._.arrows[v + "String"];
                    for (l in g)
                        if (g[e](l) && !g[l]) {
                            var L = t._g.doc.getElementById(l);
                            L && L.parentNode.removeChild(L)
                        }
                }
            },
            b = {
                "": [0],
                none: [0],
                "-": [3, 1],
                ".": [1, 1],
                "-.": [3, 1, 1, 1],
                "-..": [3, 1, 1, 1, 1, 1],
                ". ": [1, 3],
                "- ": [4, 3],
                "--": [8, 3],
                "- .": [4, 3, 1, 3],
                "--.": [8, 3, 1, 3],
                "--..": [8, 3, 1, 3, 1, 3]
            },
            _ = function(t, e, n) {
                if (e = b[r(e).toLowerCase()]) {
                    for (var i = t.attrs["stroke-width"] || "1", a = {
                            round: i,
                            square: i,
                            butt: 0
                        } [t.attrs["stroke-linecap"] || n["stroke-linecap"]] || 0, s = [], o = e.length; o--;) s[o] = e[o] * i + (o % 2 ? 1 : -1) * a;
                    x(t.node, {
                        "stroke-dasharray": s.join(",")
                    })
                }
            },
            w = function(n, a) {
                var u = n.node,
                    l = n.attrs,
                    f = u.style.visibility;
                u.style.visibility = "hidden";
                for (var d in a)
                    if (a[e](d)) {
                        if (!t._availableAttrs[e](d)) continue;
                        var g = a[d];
                        switch (l[d] = g, d) {
                            case "blur":
                                n.blur(g);
                                break;
                            case "href":
                            case "title":
                            case "target":
                                var b = u.parentNode;
                                if ("a" != b.tagName.toLowerCase()) {
                                    var w = x("a");
                                    b.insertBefore(w, u), w.appendChild(u), b = w
                                }
                                "target" == d ? b.setAttributeNS(p, "show", "blank" == g ? "new" : g) : b.setAttributeNS(p, d, g);
                                break;
                            case "cursor":
                                u.style.cursor = g;
                                break;
                            case "transform":
                                n.transform(g);
                                break;
                            case "arrow-start":
                                m(n, g);
                                break;
                            case "arrow-end":
                                m(n, g, 1);
                                break;
                            case "clip-rect":
                                var k = r(g).split(h);
                                if (4 == k.length) {
                                    n.clip && n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);
                                    var B = x("clipPath"),
                                        S = x("rect");
                                    B.id = t.createUUID(), x(S, {
                                        x: k[0],
                                        y: k[1],
                                        width: k[2],
                                        height: k[3]
                                    }), B.appendChild(S), n.paper.defs.appendChild(B), x(u, {
                                        "clip-path": "url(#" + B.id + ")"
                                    }), n.clip = S
                                }
                                if (!g) {
                                    var A = u.getAttribute("clip-path");
                                    if (A) {
                                        var T = t._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g, c));
                                        T && T.parentNode.removeChild(T), x(u, {
                                            "clip-path": c
                                        }), delete n.clip
                                    }
                                }
                                break;
                            case "path":
                                "path" == n.type && (x(u, {
                                    d: g ? l.path = t._pathToAbsolute(g) : "M0,0"
                                }), n._.dirty = 1, n._.arrows && ("startString" in n._.arrows && m(n, n._.arrows.startString), "endString" in n._.arrows && m(n, n._.arrows.endString, 1)));
                                break;
                            case "width":
                                if (u.setAttribute(d, g), n._.dirty = 1, !l.fx) break;
                                d = "x", g = l.x;
                            case "x":
                                l.fx && (g = -l.x - (l.width || 0));
                            case "rx":
                                if ("rx" == d && "rect" == n.type) break;
                            case "cx":
                                u.setAttribute(d, g), n.pattern && y(n), n._.dirty = 1;
                                break;
                            case "height":
                                if (u.setAttribute(d, g), n._.dirty = 1, !l.fy) break;
                                d = "y", g = l.y;
                            case "y":
                                l.fy && (g = -l.y - (l.height || 0));
                            case "ry":
                                if ("ry" == d && "rect" == n.type) break;
                            case "cy":
                                u.setAttribute(d, g), n.pattern && y(n), n._.dirty = 1;
                                break;
                            case "r":
                                "rect" == n.type ? x(u, {
                                    rx: g,
                                    ry: g
                                }) : u.setAttribute(d, g), n._.dirty = 1;
                                break;
                            case "src":
                                "image" == n.type && u.setAttributeNS(p, "href", g);
                                break;
                            case "stroke-width":
                                (1 != n._.sx || 1 != n._.sy) && (g /= s(o(n._.sx), o(n._.sy)) || 1), n.paper._vbSize && (g *= n.paper._vbSize), u.setAttribute(d, g), l["stroke-dasharray"] && _(n, l["stroke-dasharray"], a), n._.arrows && ("startString" in n._.arrows && m(n, n._.arrows.startString), "endString" in n._.arrows && m(n, n._.arrows.endString, 1));
                                break;
                            case "stroke-dasharray":
                                _(n, g, a);
                                break;
                            case "fill":
                                var M = r(g).match(t._ISURL);
                                if (M) {
                                    B = x("pattern");
                                    var F = x("image");
                                    B.id = t.createUUID(), x(B, {
                                            x: 0,
                                            y: 0,
                                            patternUnits: "userSpaceOnUse",
                                            height: 1,
                                            width: 1
                                        }), x(F, {
                                            x: 0,
                                            y: 0,
                                            "xlink:href": M[1]
                                        }), B.appendChild(F),
                                        function(e) {
                                            t._preload(M[1], function() {
                                                var t = this.offsetWidth,
                                                    r = this.offsetHeight;
                                                x(e, {
                                                    width: t,
                                                    height: r
                                                }), x(F, {
                                                    width: t,
                                                    height: r
                                                }), n.paper.safari()
                                            })
                                        }(B), n.paper.defs.appendChild(B), x(u, {
                                            fill: "url(#" + B.id + ")"
                                        }), n.pattern = B, n.pattern && y(n);
                                    break
                                }
                                var L = t.getRGB(g);
                                if (L.error) {
                                    if (("circle" == n.type || "ellipse" == n.type || "r" != r(g).charAt()) && v(n, g)) {
                                        if ("opacity" in l || "fill-opacity" in l) {
                                            var N = t._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g, c));
                                            if (N) {
                                                var P = N.getElementsByTagName("stop");
                                                x(P[P.length - 1], {
                                                    "stop-opacity": ("opacity" in l ? l.opacity : 1) * ("fill-opacity" in l ? l["fill-opacity"] : 1)
                                                })
                                            }
                                        }
                                        l.gradient = g, l.fill = "none";
                                        break
                                    }
                                } else delete a.gradient, delete l.gradient, !t.is(l.opacity, "undefined") && t.is(a.opacity, "undefined") && x(u, {
                                    opacity: l.opacity
                                }), !t.is(l["fill-opacity"], "undefined") && t.is(a["fill-opacity"], "undefined") && x(u, {
                                    "fill-opacity": l["fill-opacity"]
                                });
                                L[e]("opacity") && x(u, {
                                    "fill-opacity": L.opacity > 1 ? L.opacity / 100 : L.opacity
                                });
                            case "stroke":
                                L = t.getRGB(g), u.setAttribute(d, L.hex), "stroke" == d && L[e]("opacity") && x(u, {
                                    "stroke-opacity": L.opacity > 1 ? L.opacity / 100 : L.opacity
                                }), "stroke" == d && n._.arrows && ("startString" in n._.arrows && m(n, n._.arrows.startString), "endString" in n._.arrows && m(n, n._.arrows.endString, 1));
                                break;
                            case "gradient":
                                ("circle" == n.type || "ellipse" == n.type || "r" != r(g).charAt()) && v(n, g);
                                break;
                            case "opacity":
                                l.gradient && !l[e]("stroke-opacity") && x(u, {
                                    "stroke-opacity": g > 1 ? g / 100 : g
                                });
                            case "fill-opacity":
                                if (l.gradient) {
                                    N = t._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g, c)), N && (P = N.getElementsByTagName("stop"), x(P[P.length - 1], {
                                        "stop-opacity": g
                                    }));
                                    break
                                }
                                default:
                                    "font-size" == d && (g = i(g, 10) + "px");
                                    var E = d.replace(/(\-.)/g, function(t) {
                                        return t.substring(1).toUpperCase()
                                    });
                                    u.style[E] = g, n._.dirty = 1, u.setAttribute(d, g)
                        }
                    } C(n, a), u.style.visibility = f
            },
            k = 1.2,
            C = function(n, a) {
                if ("text" == n.type && (a[e]("text") || a[e]("font") || a[e]("font-size") || a[e]("x") || a[e]("y"))) {
                    var s = n.attrs,
                        o = n.node,
                        u = o.firstChild ? i(t._g.doc.defaultView.getComputedStyle(o.firstChild, c).getPropertyValue("font-size"), 10) : 10;
                    if (a[e]("text")) {
                        for (s.text = a.text; o.firstChild;) o.removeChild(o.firstChild);
                        for (var h, l = r(a.text).split("\n"), f = [], p = 0, d = l.length; d > p; p++) h = x("tspan"), p && x(h, {
                            dy: u * k,
                            x: s.x
                        }), h.appendChild(t._g.doc.createTextNode(l[p])), o.appendChild(h), f[p] = h
                    } else
                        for (f = o.getElementsByTagName("tspan"), p = 0, d = f.length; d > p; p++) p ? x(f[p], {
                            dy: u * k,
                            x: s.x
                        }) : x(f[0], {
                            dy: 0
                        });
                    x(o, {
                        x: s.x,
                        y: s.y
                    }), n._.dirty = 1;
                    var g = n._getBBox(),
                        v = s.y - (g.y + g.height / 2);
                    v && t.is(v, "finite") && x(f[0], {
                        dy: v
                    })
                }
            },
            B = function(e, r) {
                this[0] = this.node = e, e.raphael = !0, this.id = t._oid++, e.raphaelid = this.id, this.matrix = t.matrix(), this.realPath = null, this.paper = r, this.attrs = this.attrs || {}, this._ = {
                    transform: [],
                    sx: 1,
                    sy: 1,
                    deg: 0,
                    dx: 0,
                    dy: 0,
                    dirty: 1
                }, !r.bottom && (r.bottom = this), this.prev = r.top, r.top && (r.top.next = this), r.top = this, this.next = null
            },
            S = t.el;
        B.prototype = S, S.constructor = B, t._engine.path = function(t, e) {
            var r = x("path");
            e.canvas && e.canvas.appendChild(r);
            var n = new B(r, e);
            return n.type = "path", w(n, {
                fill: "none",
                stroke: "#000",
                path: t
            }), n
        }, S.rotate = function(t, e, i) {
            if (this.removed) return this;
            if (t = r(t).split(h), t.length - 1 && (e = n(t[1]), i = n(t[2])), t = n(t[0]), null == i && (e = i), null == e || null == i) {
                var a = this.getBBox(1);
                e = a.x + a.width / 2, i = a.y + a.height / 2
            }
            return this.transform(this._.transform.concat([
                ["r", t, e, i]
            ])), this
        }, S.scale = function(t, e, i, a) {
            if (this.removed) return this;
            if (t = r(t).split(h), t.length - 1 && (e = n(t[1]), i = n(t[2]), a = n(t[3])), t = n(t[0]), null == e && (e = t), null == a && (i = a), null == i || null == a) var s = this.getBBox(1);
            return i = null == i ? s.x + s.width / 2 : i, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([
                ["s", t, e, i, a]
            ])), this
        }, S.translate = function(t, e) {
            return this.removed ? this : (t = r(t).split(h), t.length - 1 && (e = n(t[1])), t = n(t[0]) || 0, e = +e || 0, this.transform(this._.transform.concat([
                ["t", t, e]
            ])), this)
        }, S.transform = function(r) {
            var n = this._;
            if (null == r) return n.transform;
            if (t._extractTransform(this, r), this.clip && x(this.clip, {
                    transform: this.matrix.invert()
                }), this.pattern && y(this), this.node && x(this.node, {
                    transform: this.matrix
                }), 1 != n.sx || 1 != n.sy) {
                var i = this.attrs[e]("stroke-width") ? this.attrs["stroke-width"] : 1;
                this.attr({
                    "stroke-width": i
                })
            }
            return this
        }, S.hide = function() {
            return !this.removed && this.paper.safari(this.node.style.display = "none"), this
        }, S.show = function() {
            return !this.removed && this.paper.safari(this.node.style.display = ""), this
        }, S.remove = function() {
            if (!this.removed && this.node.parentNode) {
                var e = this.paper;
                e.__set__ && e.__set__.exclude(this), l.unbind("raphael.*.*." + this.id), this.gradient && e.defs.removeChild(this.gradient), t._tear(this, e), "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.removeChild(this.node.parentNode) : this.node.parentNode.removeChild(this.node);
                for (var r in this) this[r] = "function" == typeof this[r] ? t._removedFactory(r) : null;
                this.removed = !0
            }
        }, S._getBBox = function() {
            if ("none" == this.node.style.display) {
                this.show();
                var t = !0
            }
            var e = {};
            try {
                e = this.node.getBBox()
            } catch (r) {} finally {
                e = e || {}
            }
            return t && this.hide(), e
        }, S.attr = function(r, n) {
            if (this.removed) return this;
            if (null == r) {
                var i = {};
                for (var a in this.attrs) this.attrs[e](a) && (i[a] = this.attrs[a]);
                return i.gradient && "none" == i.fill && (i.fill = i.gradient) && delete i.gradient, i.transform = this._.transform, i
            }
            if (null == n && t.is(r, "string")) {
                if ("fill" == r && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient;
                if ("transform" == r) return this._.transform;
                for (var s = r.split(h), o = {}, u = 0, c = s.length; c > u; u++) r = s[u], o[r] = r in this.attrs ? this.attrs[r] : t.is(this.paper.customAttributes[r], "function") ? this.paper.customAttributes[r].def : t._availableAttrs[r];
                return c - 1 ? o : o[s[0]]
            }
            if (null == n && t.is(r, "array")) {
                for (o = {}, u = 0, c = r.length; c > u; u++) o[r[u]] = this.attr(r[u]);
                return o
            }
            if (null != n) {
                var f = {};
                f[r] = n
            } else null != r && t.is(r, "object") && (f = r);
            for (var p in f) l("raphael.attr." + p + "." + this.id, this, f[p]);
            for (p in this.paper.customAttributes)
                if (this.paper.customAttributes[e](p) && f[e](p) && t.is(this.paper.customAttributes[p], "function")) {
                    var d = this.paper.customAttributes[p].apply(this, [].concat(f[p]));
                    this.attrs[p] = f[p];
                    for (var g in d) d[e](g) && (f[g] = d[g])
                } return w(this, f), this
        }, S.toFront = function() {
            if (this.removed) return this;
            "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.appendChild(this.node.parentNode) : this.node.parentNode.appendChild(this.node);
            var e = this.paper;
            return e.top != this && t._tofront(this, e), this
        }, S.toBack = function() {
            if (this.removed) return this;
            var e = this.node.parentNode;
            return "a" == e.tagName.toLowerCase() ? e.parentNode.insertBefore(this.node.parentNode, this.node.parentNode.parentNode.firstChild) : e.firstChild != this.node && e.insertBefore(this.node, this.node.parentNode.firstChild), t._toback(this, this.paper), this.paper, this
        }, S.insertAfter = function(e) {
            if (this.removed) return this;
            var r = e.node || e[e.length - 1].node;
            return r.nextSibling ? r.parentNode.insertBefore(this.node, r.nextSibling) : r.parentNode.appendChild(this.node), t._insertafter(this, e, this.paper), this
        }, S.insertBefore = function(e) {
            if (this.removed) return this;
            var r = e.node || e[0].node;
            return r.parentNode.insertBefore(this.node, r), t._insertbefore(this, e, this.paper), this
        }, S.blur = function(e) {
            var r = this;
            if (0 !== +e) {
                var n = x("filter"),
                    i = x("feGaussianBlur");
                r.attrs.blur = e, n.id = t.createUUID(), x(i, {
                    stdDeviation: +e || 1.5
                }), n.appendChild(i), r.paper.defs.appendChild(n), r._blur = n, x(r.node, {
                    filter: "url(#" + n.id + ")"
                })
            } else r._blur && (r._blur.parentNode.removeChild(r._blur), delete r._blur, delete r.attrs.blur), r.node.removeAttribute("filter")
        }, t._engine.circle = function(t, e, r, n) {
            var i = x("circle");
            t.canvas && t.canvas.appendChild(i);
            var a = new B(i, t);
            return a.attrs = {
                cx: e,
                cy: r,
                r: n,
                fill: "none",
                stroke: "#000"
            }, a.type = "circle", x(i, a.attrs), a
        }, t._engine.rect = function(t, e, r, n, i, a) {
            var s = x("rect");
            t.canvas && t.canvas.appendChild(s);
            var o = new B(s, t);
            return o.attrs = {
                x: e,
                y: r,
                width: n,
                height: i,
                r: a || 0,
                rx: a || 0,
                ry: a || 0,
                fill: "none",
                stroke: "#000"
            }, o.type = "rect", x(s, o.attrs), o
        }, t._engine.ellipse = function(t, e, r, n, i) {
            var a = x("ellipse");
            t.canvas && t.canvas.appendChild(a);
            var s = new B(a, t);
            return s.attrs = {
                cx: e,
                cy: r,
                rx: n,
                ry: i,
                fill: "none",
                stroke: "#000"
            }, s.type = "ellipse", x(a, s.attrs), s
        }, t._engine.image = function(t, e, r, n, i, a) {
            var s = x("image");
            x(s, {
                x: r,
                y: n,
                width: i,
                height: a,
                preserveAspectRatio: "none"
            }), s.setAttributeNS(p, "href", e), t.canvas && t.canvas.appendChild(s);
            var o = new B(s, t);
            return o.attrs = {
                x: r,
                y: n,
                width: i,
                height: a,
                src: e
            }, o.type = "image", o
        }, t._engine.text = function(e, r, n, i) {
            var a = x("text");
            e.canvas && e.canvas.appendChild(a);
            var s = new B(a, e);
            return s.attrs = {
                x: r,
                y: n,
                "text-anchor": "middle",
                text: i,
                font: t._availableAttrs.font,
                stroke: "none",
                fill: "#000"
            }, s.type = "text", w(s, s.attrs), s
        }, t._engine.setSize = function(t, e) {
            return this.width = t || this.width, this.height = e || this.height, this.canvas.setAttribute("width", this.width), this.canvas.setAttribute("height", this.height), this._viewBox && this.setViewBox.apply(this, this._viewBox), this
        }, t._engine.create = function() {
            var e = t._getContainer.apply(0, arguments),
                r = e && e.container,
                n = e.x,
                i = e.y,
                a = e.width,
                s = e.height;
            if (!r) throw Error("SVG container not found.");
            var o, u = x("svg"),
                h = "overflow:hidden;";
            return n = n || 0, i = i || 0, a = a || 512, s = s || 342, x(u, {
                height: s,
                version: 1.1,
                width: a,
                xmlns: "http://www.w3.org/2000/svg"
            }), 1 == r ? (u.style.cssText = h + "position:absolute;left:" + n + "px;top:" + i + "px", t._g.doc.body.appendChild(u), o = 1) : (u.style.cssText = h + "position:relative", r.firstChild ? r.insertBefore(u, r.firstChild) : r.appendChild(u)), r = new t._Paper, r.width = a, r.height = s, r.canvas = u, r.clear(), r._left = r._top = 0, o && (r.renderfix = function() {}), r.renderfix(), r
        }, t._engine.setViewBox = function(t, e, r, n, i) {
            l("raphael.setViewBox", this, this._viewBox, [t, e, r, n, i]);
            var a, o, u = s(r / this.width, n / this.height),
                h = this.top,
                c = i ? "meet" : "xMinYMin";
            for (null == t ? (this._vbSize && (u = 1), delete this._vbSize, a = "0 0 " + this.width + f + this.height) : (this._vbSize = u, a = t + f + e + f + r + f + n), x(this.canvas, {
                    viewBox: a,
                    preserveAspectRatio: c
                }); u && h;) o = "stroke-width" in h.attrs ? h.attrs["stroke-width"] : 1, h.attr({
                "stroke-width": o
            }), h._.dirty = 1, h._.dirtyT = 1, h = h.prev;
            return this._viewBox = [t, e, r, n, !!i], this
        }, t.prototype.renderfix = function() {
            var t, e = this.canvas,
                r = e.style;
            try {
                t = e.getScreenCTM() || e.createSVGMatrix()
            } catch (n) {
                t = e.createSVGMatrix()
            }
            var i = -t.e % 1,
                a = -t.f % 1;
            (i || a) && (i && (this._left = (this._left + i) % 1, r.left = this._left + "px"), a && (this._top = (this._top + a) % 1, r.top = this._top + "px"))
        }, t.prototype.clear = function() {
            t.eve("raphael.clear", this);
            for (var e = this.canvas; e.firstChild;) e.removeChild(e.firstChild);
            this.bottom = this.top = null, (this.desc = x("desc")).appendChild(t._g.doc.createTextNode("Created with Raphal " + t.version)), e.appendChild(this.desc), e.appendChild(this.defs = x("defs"))
        }, t.prototype.remove = function() {
            l("raphael.remove", this), this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);
            for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null
        };
        var A = t.st;
        for (var T in S) S[e](T) && !A[e](T) && (A[T] = function(t) {
            return function() {
                var e = arguments;
                return this.forEach(function(r) {
                    r[t].apply(r, e)
                })
            }
        }(T))
    }
});
(function(t, e) {
    "function" == typeof define && define.amd ? require(["raphael"], e) : t.Raphael && e(t.Raphael)
})(this, function(t) {
    if (t.vml) {
        var e = "hasOwnProperty",
            r = String,
            i = parseFloat,
            n = Math,
            a = n.round,
            s = n.max,
            o = n.min,
            l = n.abs,
            h = "fill",
            u = /[, ]+/,
            c = t.eve,
            f = " progid:DXImageTransform.Microsoft",
            p = " ",
            d = "",
            g = {
                M: "m",
                L: "l",
                C: "c",
                Z: "x",
                m: "t",
                l: "r",
                c: "v",
                z: "x"
            },
            x = /([clmz]),?([^clmz]*)/gi,
            v = / progid:\S+Blur\([^\)]+\)/g,
            y = /-?[^,\s-]+/g,
            m = "position:absolute;left:0;top:0;width:1px;height:1px",
            b = 21600,
            _ = {
                path: 1,
                rect: 1,
                image: 1
            },
            w = {
                circle: 1,
                ellipse: 1
            },
            k = function(e) {
                var i = /[ahqstv]/gi,
                    n = t._pathToAbsolute;
                if (r(e).match(i) && (n = t._path2curve), i = /[clmz]/g, n == t._pathToAbsolute && !r(e).match(i)) {
                    var s = r(e).replace(x, function(t, e, r) {
                        var i = [],
                            n = "m" == e.toLowerCase(),
                            s = g[e];
                        return r.replace(y, function(t) {
                            n && 2 == i.length && (s += i + g["m" == e ? "l" : "L"], i = []), i.push(a(t * b))
                        }), s + i
                    });
                    return s
                }
                var o, l, h = n(e);
                s = [];
                for (var u = 0, c = h.length; c > u; u++) {
                    o = h[u], l = h[u][0].toLowerCase(), "z" == l && (l = "x");
                    for (var f = 1, v = o.length; v > f; f++) l += a(o[f] * b) + (f != v - 1 ? "," : d);
                    s.push(l)
                }
                return s.join(p)
            },
            C = function(e, r, i) {
                var n = t.matrix();
                return n.rotate(-e, .5, .5), {
                    dx: n.x(r, i),
                    dy: n.y(r, i)
                }
            },
            B = function(t, e, r, i, n, a) {
                var s = t._,
                    o = t.matrix,
                    u = s.fillpos,
                    c = t.node,
                    f = c.style,
                    d = 1,
                    g = "",
                    x = b / e,
                    v = b / r;
                if (f.visibility = "hidden", e && r) {
                    if (c.coordsize = l(x) + p + l(v), f.rotation = a * (0 > e * r ? -1 : 1), a) {
                        var y = C(a, i, n);
                        i = y.dx, n = y.dy
                    }
                    if (0 > e && (g += "x"), 0 > r && (g += " y") && (d = -1), f.flip = g, c.coordorigin = i * -x + p + n * -v, u || s.fillsize) {
                        var m = c.getElementsByTagName(h);
                        m = m && m[0], c.removeChild(m), u && (y = C(a, o.x(u[0], u[1]), o.y(u[0], u[1])), m.position = y.dx * d + p + y.dy * d), s.fillsize && (m.size = s.fillsize[0] * l(e) + p + s.fillsize[1] * l(r)), c.appendChild(m)
                    }
                    f.visibility = "visible"
                }
            };
        t.toString = function() {
            return "Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal " + this.version
        };
        var S = function(t, e, i) {
                for (var n = r(e).toLowerCase().split("-"), a = i ? "end" : "start", s = n.length, o = "classic", l = "medium", h = "medium"; s--;) switch (n[s]) {
                    case "block":
                    case "classic":
                    case "oval":
                    case "diamond":
                    case "open":
                    case "none":
                        o = n[s];
                        break;
                    case "wide":
                    case "narrow":
                        h = n[s];
                        break;
                    case "long":
                    case "short":
                        l = n[s]
                }
                var u = t.node.getElementsByTagName("stroke")[0];
                u[a + "arrow"] = o, u[a + "arrowlength"] = l, u[a + "arrowwidth"] = h
            },
            A = function(n, l) {
                n.attrs = n.attrs || {};
                var c = n.node,
                    f = n.attrs,
                    g = c.style,
                    x = _[n.type] && (l.x != f.x || l.y != f.y || l.width != f.width || l.height != f.height || l.cx != f.cx || l.cy != f.cy || l.rx != f.rx || l.ry != f.ry || l.r != f.r),
                    v = w[n.type] && (f.cx != l.cx || f.cy != l.cy || f.r != l.r || f.rx != l.rx || f.ry != l.ry),
                    y = n;
                for (var m in l) l[e](m) && (f[m] = l[m]);
                if (x && (f.path = t._getPath[n.type](n), n._.dirty = 1), l.href && (c.href = l.href), l.title && (c.title = l.title), l.target && (c.target = l.target), l.cursor && (g.cursor = l.cursor), "blur" in l && n.blur(l.blur), (l.path && "path" == n.type || x) && (c.path = k(~r(f.path).toLowerCase().indexOf("r") ? t._pathToAbsolute(f.path) : f.path), "image" == n.type && (n._.fillpos = [f.x, f.y], n._.fillsize = [f.width, f.height], B(n, 1, 1, 0, 0, 0))), "transform" in l && n.transform(l.transform), v) {
                    var C = +f.cx,
                        A = +f.cy,
                        N = +f.rx || +f.r || 0,
                        E = +f.ry || +f.r || 0;
                    c.path = t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", a((C - N) * b), a((A - E) * b), a((C + N) * b), a((A + E) * b), a(C * b))
                }
                if ("clip-rect" in l) {
                    var M = r(l["clip-rect"]).split(u);
                    if (4 == M.length) {
                        M[2] = +M[2] + +M[0], M[3] = +M[3] + +M[1];
                        var z = c.clipRect || t._g.doc.createElement("div"),
                            F = z.style;
                        F.clip = t.format("rect({1}px {2}px {3}px {0}px)", M), c.clipRect || (F.position = "absolute", F.top = 0, F.left = 0, F.width = n.paper.width + "px", F.height = n.paper.height + "px", c.parentNode.insertBefore(z, c), z.appendChild(c), c.clipRect = z)
                    }
                    l["clip-rect"] || c.clipRect && (c.clipRect.style.clip = "auto")
                }
                if (n.textpath) {
                    var R = n.textpath.style;
                    l.font && (R.font = l.font), l["font-family"] && (R.fontFamily = '"' + l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, d) + '"'), l["font-size"] && (R.fontSize = l["font-size"]), l["font-weight"] && (R.fontWeight = l["font-weight"]), l["font-style"] && (R.fontStyle = l["font-style"])
                }
                if ("arrow-start" in l && S(y, l["arrow-start"]), "arrow-end" in l && S(y, l["arrow-end"], 1), null != l.opacity || null != l["stroke-width"] || null != l.fill || null != l.src || null != l.stroke || null != l["stroke-width"] || null != l["stroke-opacity"] || null != l["fill-opacity"] || null != l["stroke-dasharray"] || null != l["stroke-miterlimit"] || null != l["stroke-linejoin"] || null != l["stroke-linecap"]) {
                    var P = c.getElementsByTagName(h),
                        I = !1;
                    if (P = P && P[0], !P && (I = P = L(h)), "image" == n.type && l.src && (P.src = l.src), l.fill && (P.on = !0), (null == P.on || "none" == l.fill || null === l.fill) && (P.on = !1), P.on && l.fill) {
                        var j = r(l.fill).match(t._ISURL);
                        if (j) {
                            P.parentNode == c && c.removeChild(P), P.rotate = !0, P.src = j[1], P.type = "tile";
                            var q = n.getBBox(1);
                            P.position = q.x + p + q.y, n._.fillpos = [q.x, q.y], t._preload(j[1], function() {
                                n._.fillsize = [this.offsetWidth, this.offsetHeight]
                            })
                        } else P.color = t.getRGB(l.fill).hex, P.src = d, P.type = "solid", t.getRGB(l.fill).error && (y.type in {
                            circle: 1,
                            ellipse: 1
                        } || "r" != r(l.fill).charAt()) && T(y, l.fill, P) && (f.fill = "none", f.gradient = l.fill, P.rotate = !1)
                    }
                    if ("fill-opacity" in l || "opacity" in l) {
                        var D = ((+f["fill-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+t.getRGB(l.fill).o + 1 || 2) - 1);
                        D = o(s(D, 0), 1), P.opacity = D, P.src && (P.color = "none")
                    }
                    c.appendChild(P);
                    var O = c.getElementsByTagName("stroke") && c.getElementsByTagName("stroke")[0],
                        V = !1;
                    !O && (V = O = L("stroke")), (l.stroke && "none" != l.stroke || l["stroke-width"] || null != l["stroke-opacity"] || l["stroke-dasharray"] || l["stroke-miterlimit"] || l["stroke-linejoin"] || l["stroke-linecap"]) && (O.on = !0), ("none" == l.stroke || null === l.stroke || null == O.on || 0 == l.stroke || 0 == l["stroke-width"]) && (O.on = !1);
                    var Y = t.getRGB(l.stroke);
                    O.on && l.stroke && (O.color = Y.hex), D = ((+f["stroke-opacity"] + 1 || 2) - 1) * ((+f.opacity + 1 || 2) - 1) * ((+Y.o + 1 || 2) - 1);
                    var G = .75 * (i(l["stroke-width"]) || 1);
                    if (D = o(s(D, 0), 1), null == l["stroke-width"] && (G = f["stroke-width"]), l["stroke-width"] && (O.weight = G), G && 1 > G && (D *= G) && (O.weight = 1), O.opacity = D, l["stroke-linejoin"] && (O.joinstyle = l["stroke-linejoin"] || "miter"), O.miterlimit = l["stroke-miterlimit"] || 8, l["stroke-linecap"] && (O.endcap = "butt" == l["stroke-linecap"] ? "flat" : "square" == l["stroke-linecap"] ? "square" : "round"), l["stroke-dasharray"]) {
                        var W = {
                            "-": "shortdash",
                            ".": "shortdot",
                            "-.": "shortdashdot",
                            "-..": "shortdashdotdot",
                            ". ": "dot",
                            "- ": "dash",
                            "--": "longdash",
                            "- .": "dashdot",
                            "--.": "longdashdot",
                            "--..": "longdashdotdot"
                        };
                        O.dashstyle = W[e](l["stroke-dasharray"]) ? W[l["stroke-dasharray"]] : d
                    }
                    V && c.appendChild(O)
                }
                if ("text" == y.type) {
                    y.paper.canvas.style.display = d;
                    var X = y.paper.span,
                        H = 100,
                        U = f.font && f.font.match(/\d+(?:\.\d*)?(?=px)/);
                    g = X.style, f.font && (g.font = f.font), f["font-family"] && (g.fontFamily = f["font-family"]), f["font-weight"] && (g.fontWeight = f["font-weight"]), f["font-style"] && (g.fontStyle = f["font-style"]), U = i(f["font-size"] || U && U[0]) || 10, g.fontSize = U * H + "px", y.textpath.string && (X.innerHTML = r(y.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>"));
                    var $ = X.getBoundingClientRect();
                    y.W = f.w = ($.right - $.left) / H, y.H = f.h = ($.bottom - $.top) / H, y.X = f.x, y.Y = f.y + y.H / 2, ("x" in l || "y" in l) && (y.path.v = t.format("m{0},{1}l{2},{1}", a(f.x * b), a(f.y * b), a(f.x * b) + 1));
                    for (var Z = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"], Q = 0, J = Z.length; J > Q; Q++)
                        if (Z[Q] in l) {
                            y._.dirty = 1;
                            break
                        } switch (f["text-anchor"]) {
                        case "start":
                            y.textpath.style["v-text-align"] = "left", y.bbx = y.W / 2;
                            break;
                        case "end":
                            y.textpath.style["v-text-align"] = "right", y.bbx = -y.W / 2;
                            break;
                        default:
                            y.textpath.style["v-text-align"] = "center", y.bbx = 0
                    }
                    y.textpath.style["v-text-kern"] = !0
                }
            },
            T = function(e, a, s) {
                e.attrs = e.attrs || {};
                var o = (e.attrs, Math.pow),
                    l = "linear",
                    h = ".5 .5";
                if (e.attrs.gradient = a, a = r(a).replace(t._radial_gradient, function(t, e, r) {
                        return l = "radial", e && r && (e = i(e), r = i(r), o(e - .5, 2) + o(r - .5, 2) > .25 && (r = n.sqrt(.25 - o(e - .5, 2)) * (2 * (r > .5) - 1) + .5), h = e + p + r), d
                    }), a = a.split(/\s*\-\s*/), "linear" == l) {
                    var u = a.shift();
                    if (u = -i(u), isNaN(u)) return null
                }
                var c = t._parseDots(a);
                if (!c) return null;
                if (e = e.shape || e.node, c.length) {
                    e.removeChild(s), s.on = !0, s.method = "none", s.color = c[0].color, s.color2 = c[c.length - 1].color;
                    for (var f = [], g = 0, x = c.length; x > g; g++) c[g].offset && f.push(c[g].offset + p + c[g].color);
                    s.colors = f.length ? f.join() : "0% " + s.color, "radial" == l ? (s.type = "gradientTitle", s.focus = "100%", s.focussize = "0 0", s.focusposition = h, s.angle = 0) : (s.type = "gradient", s.angle = (270 - u) % 360), e.appendChild(s)
                }
                return 1
            },
            N = function(e, r) {
                this[0] = this.node = e, e.raphael = !0, this.id = t._oid++, e.raphaelid = this.id, this.X = 0, this.Y = 0, this.attrs = {}, this.paper = r, this.matrix = t.matrix(), this._ = {
                    transform: [],
                    sx: 1,
                    sy: 1,
                    dx: 0,
                    dy: 0,
                    deg: 0,
                    dirty: 1,
                    dirtyT: 1
                }, !r.bottom && (r.bottom = this), this.prev = r.top, r.top && (r.top.next = this), r.top = this, this.next = null
            },
            E = t.el;
        N.prototype = E, E.constructor = N, E.transform = function(e) {
            if (null == e) return this._.transform;
            var i, n = this.paper._viewBoxShift,
                a = n ? "s" + [n.scale, n.scale] + "-1-1t" + [n.dx, n.dy] : d;
            n && (i = e = r(e).replace(/\.{3}|\u2026/g, this._.transform || d)), t._extractTransform(this, a + e);
            var s, o = this.matrix.clone(),
                l = this.skew,
                h = this.node,
                u = ~r(this.attrs.fill).indexOf("-"),
                c = !r(this.attrs.fill).indexOf("url(");
            if (o.translate(-.5, -.5), c || u || "image" == this.type)
                if (l.matrix = "1 0 0 1", l.offset = "0 0", s = o.split(), u && s.noRotation || !s.isSimple) {
                    h.style.filter = o.toFilter();
                    var f = this.getBBox(),
                        g = this.getBBox(1),
                        x = f.x - g.x,
                        v = f.y - g.y;
                    h.coordorigin = x * -b + p + v * -b, B(this, 1, 1, x, v, 0)
                } else h.style.filter = d, B(this, s.scalex, s.scaley, s.dx, s.dy, s.rotate);
            else h.style.filter = d, l.matrix = r(o), l.offset = o.offset();
            return i && (this._.transform = i), this
        }, E.rotate = function(t, e, n) {
            if (this.removed) return this;
            if (null != t) {
                if (t = r(t).split(u), t.length - 1 && (e = i(t[1]), n = i(t[2])), t = i(t[0]), null == n && (e = n), null == e || null == n) {
                    var a = this.getBBox(1);
                    e = a.x + a.width / 2, n = a.y + a.height / 2
                }
                return this._.dirtyT = 1, this.transform(this._.transform.concat([
                    ["r", t, e, n]
                ])), this
            }
        }, E.translate = function(t, e) {
            return this.removed ? this : (t = r(t).split(u), t.length - 1 && (e = i(t[1])), t = i(t[0]) || 0, e = +e || 0, this._.bbox && (this._.bbox.x += t, this._.bbox.y += e), this.transform(this._.transform.concat([
                ["t", t, e]
            ])), this)
        }, E.scale = function(t, e, n, a) {
            if (this.removed) return this;
            if (t = r(t).split(u), t.length - 1 && (e = i(t[1]), n = i(t[2]), a = i(t[3]), isNaN(n) && (n = null), isNaN(a) && (a = null)), t = i(t[0]), null == e && (e = t), null == a && (n = a), null == n || null == a) var s = this.getBBox(1);
            return n = null == n ? s.x + s.width / 2 : n, a = null == a ? s.y + s.height / 2 : a, this.transform(this._.transform.concat([
                ["s", t, e, n, a]
            ])), this._.dirtyT = 1, this
        }, E.hide = function() {
            return !this.removed && (this.node.style.display = "none"), this
        }, E.show = function() {
            return !this.removed && (this.node.style.display = d), this
        }, E._getBBox = function() {
            return this.removed ? {} : {
                x: this.X + (this.bbx || 0) - this.W / 2,
                y: this.Y - this.H,
                width: this.W,
                height: this.H
            }
        }, E.remove = function() {
            if (!this.removed && this.node.parentNode) {
                this.paper.__set__ && this.paper.__set__.exclude(this), t.eve.unbind("raphael.*.*." + this.id), t._tear(this, this.paper), this.node.parentNode.removeChild(this.node), this.shape && this.shape.parentNode.removeChild(this.shape);
                for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null;
                this.removed = !0
            }
        }, E.attr = function(r, i) {
            if (this.removed) return this;
            if (null == r) {
                var n = {};
                for (var a in this.attrs) this.attrs[e](a) && (n[a] = this.attrs[a]);
                return n.gradient && "none" == n.fill && (n.fill = n.gradient) && delete n.gradient, n.transform = this._.transform, n
            }
            if (null == i && t.is(r, "string")) {
                if (r == h && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient;
                for (var s = r.split(u), o = {}, l = 0, f = s.length; f > l; l++) r = s[l], o[r] = r in this.attrs ? this.attrs[r] : t.is(this.paper.customAttributes[r], "function") ? this.paper.customAttributes[r].def : t._availableAttrs[r];
                return f - 1 ? o : o[s[0]]
            }
            if (this.attrs && null == i && t.is(r, "array")) {
                for (o = {}, l = 0, f = r.length; f > l; l++) o[r[l]] = this.attr(r[l]);
                return o
            }
            var p;
            null != i && (p = {}, p[r] = i), null == i && t.is(r, "object") && (p = r);
            for (var d in p) c("raphael.attr." + d + "." + this.id, this, p[d]);
            if (p) {
                for (d in this.paper.customAttributes)
                    if (this.paper.customAttributes[e](d) && p[e](d) && t.is(this.paper.customAttributes[d], "function")) {
                        var g = this.paper.customAttributes[d].apply(this, [].concat(p[d]));
                        this.attrs[d] = p[d];
                        for (var x in g) g[e](x) && (p[x] = g[x])
                    } p.text && "text" == this.type && (this.textpath.string = p.text), A(this, p)
            }
            return this
        }, E.toFront = function() {
            return !this.removed && this.node.parentNode.appendChild(this.node), this.paper && this.paper.top != this && t._tofront(this, this.paper), this
        }, E.toBack = function() {
            return this.removed ? this : (this.node.parentNode.firstChild != this.node && (this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild), t._toback(this, this.paper)), this)
        }, E.insertAfter = function(e) {
            return this.removed ? this : (e.constructor == t.st.constructor && (e = e[e.length - 1]), e.node.nextSibling ? e.node.parentNode.insertBefore(this.node, e.node.nextSibling) : e.node.parentNode.appendChild(this.node), t._insertafter(this, e, this.paper), this)
        }, E.insertBefore = function(e) {
            return this.removed ? this : (e.constructor == t.st.constructor && (e = e[0]), e.node.parentNode.insertBefore(this.node, e.node), t._insertbefore(this, e, this.paper), this)
        }, E.blur = function(e) {
            var r = this.node.runtimeStyle,
                i = r.filter;
            i = i.replace(v, d), 0 !== +e ? (this.attrs.blur = e, r.filter = i + p + f + ".Blur(pixelradius=" + (+e || 1.5) + ")", r.margin = t.format("-{0}px 0 0 -{0}px", a(+e || 1.5))) : (r.filter = i, r.margin = 0, delete this.attrs.blur)
        }, t._engine.path = function(t, e) {
            var r = L("shape");
            r.style.cssText = m, r.coordsize = b + p + b, r.coordorigin = e.coordorigin;
            var i = new N(r, e),
                n = {
                    fill: "none",
                    stroke: "#000"
                };
            t && (n.path = t), i.type = "path", i.path = [], i.Path = d, A(i, n), e.canvas.appendChild(r);
            var a = L("skew");
            return a.on = !0, r.appendChild(a), i.skew = a, i.transform(d), i
        }, t._engine.rect = function(e, r, i, n, a, s) {
            var o = t._rectPath(r, i, n, a, s),
                l = e.path(o),
                h = l.attrs;
            return l.X = h.x = r, l.Y = h.y = i, l.W = h.width = n, l.H = h.height = a, h.r = s, h.path = o, l.type = "rect", l
        }, t._engine.ellipse = function(t, e, r, i, n) {
            var a = t.path();
            return a.attrs, a.X = e - i, a.Y = r - n, a.W = 2 * i, a.H = 2 * n, a.type = "ellipse", A(a, {
                cx: e,
                cy: r,
                rx: i,
                ry: n
            }), a
        }, t._engine.circle = function(t, e, r, i) {
            var n = t.path();
            return n.attrs, n.X = e - i, n.Y = r - i, n.W = n.H = 2 * i, n.type = "circle", A(n, {
                cx: e,
                cy: r,
                r: i
            }), n
        }, t._engine.image = function(e, r, i, n, a, s) {
            var o = t._rectPath(i, n, a, s),
                l = e.path(o).attr({
                    stroke: "none"
                }),
                u = l.attrs,
                c = l.node,
                f = c.getElementsByTagName(h)[0];
            return u.src = r, l.X = u.x = i, l.Y = u.y = n, l.W = u.width = a, l.H = u.height = s, u.path = o, l.type = "image", f.parentNode == c && c.removeChild(f), f.rotate = !0, f.src = r, f.type = "tile", l._.fillpos = [i, n], l._.fillsize = [a, s], c.appendChild(f), B(l, 1, 1, 0, 0, 0), l
        }, t._engine.text = function(e, i, n, s) {
            var o = L("shape"),
                l = L("path"),
                h = L("textpath");
            i = i || 0, n = n || 0, s = s || "", l.v = t.format("m{0},{1}l{2},{1}", a(i * b), a(n * b), a(i * b) + 1), l.textpathok = !0, h.string = r(s), h.on = !0, o.style.cssText = m, o.coordsize = b + p + b, o.coordorigin = "0 0";
            var u = new N(o, e),
                c = {
                    fill: "#000",
                    stroke: "none",
                    font: t._availableAttrs.font,
                    text: s
                };
            u.shape = o, u.path = l, u.textpath = h, u.type = "text", u.attrs.text = r(s), u.attrs.x = i, u.attrs.y = n, u.attrs.w = 1, u.attrs.h = 1, A(u, c), o.appendChild(h), o.appendChild(l), e.canvas.appendChild(o);
            var f = L("skew");
            return f.on = !0, o.appendChild(f), u.skew = f, u.transform(d), u
        }, t._engine.setSize = function(e, r) {
            var i = this.canvas.style;
            return this.width = e, this.height = r, e == +e && (e += "px"), r == +r && (r += "px"), i.width = e, i.height = r, i.clip = "rect(0 " + e + " " + r + " 0)", this._viewBox && t._engine.setViewBox.apply(this, this._viewBox), this
        }, t._engine.setViewBox = function(e, r, i, n, a) {
            t.eve("raphael.setViewBox", this, this._viewBox, [e, r, i, n, a]);
            var o, l, h = this.width,
                u = this.height,
                c = 1 / s(i / h, n / u);
            return a && (o = u / n, l = h / i, h > i * o && (e -= (h - i * o) / 2 / o), u > n * l && (r -= (u - n * l) / 2 / l)), this._viewBox = [e, r, i, n, !!a], this._viewBoxShift = {
                dx: -e,
                dy: -r,
                scale: c
            }, this.forEach(function(t) {
                t.transform("...")
            }), this
        };
        var L;
        t._engine.initWin = function(t) {
            var e = t.document;
            e.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
            try {
                !e.namespaces.rvml && e.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"), L = function(t) {
                    return e.createElement("<rvml:" + t + ' class="rvml">')
                }
            } catch (r) {
                L = function(t) {
                    return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')
                }
            }
        }, t._engine.initWin(t._g.win), t._engine.create = function() {
            var e = t._getContainer.apply(0, arguments),
                r = e.container,
                i = e.height,
                n = e.width,
                a = e.x,
                s = e.y;
            if (!r) throw Error("VML container not found.");
            var o = new t._Paper,
                l = o.canvas = t._g.doc.createElement("div"),
                h = l.style;
            return a = a || 0, s = s || 0, n = n || 512, i = i || 342, o.width = n, o.height = i, n == +n && (n += "px"), i == +i && (i += "px"), o.coordsize = 1e3 * b + p + 1e3 * b, o.coordorigin = "0 0", o.span = t._g.doc.createElement("span"), o.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;", l.appendChild(o.span), h.cssText = t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", n, i), 1 == r ? (t._g.doc.body.appendChild(l), h.left = a + "px", h.top = s + "px", h.position = "absolute") : r.firstChild ? r.insertBefore(l, r.firstChild) : r.appendChild(l), o.renderfix = function() {}, o
        }, t.prototype.clear = function() {
            t.eve("raphael.clear", this), this.canvas.innerHTML = d, this.span = t._g.doc.createElement("span"), this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;", this.canvas.appendChild(this.span), this.bottom = this.top = null
        }, t.prototype.remove = function() {
            t.eve("raphael.remove", this), this.canvas.parentNode.removeChild(this.canvas);
            for (var e in this) this[e] = "function" == typeof this[e] ? t._removedFactory(e) : null;
            return !0
        };
        var M = t.st;
        for (var z in E) E[e](z) && !M[e](z) && (M[z] = function(t) {
            return function() {
                var e = arguments;
                return this.forEach(function(r) {
                    r[t].apply(r, e)
                })
            }
        }(z))
    }
});

/*  SWFObject v2.2 <http://code.google.com/p/swfobject/> 
    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject = function() {
    var D = "undefined",
        r = "object",
        S = "Shockwave Flash",
        W = "ShockwaveFlash.ShockwaveFlash",
        q = "application/x-shockwave-flash",
        R = "SWFObjectExprInst",
        x = "onreadystatechange",
        O = window,
        j = document,
        t = navigator,
        T = false,
        U = [h],
        o = [],
        N = [],
        I = [],
        l, Q, E, B, J = false,
        a = false,
        n, G, m = true,
        M = function() {
            var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D,
                ah = t.userAgent.toLowerCase(),
                Y = t.platform.toLowerCase(),
                ae = Y ? /win/.test(Y) : /win/.test(ah),
                ac = Y ? /mac/.test(Y) : /mac/.test(ah),
                af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : false,
                X = !+"\v1",
                ag = [0, 0, 0],
                ab = null;
            if (typeof t.plugins != D && typeof t.plugins[S] == r) {
                ab = t.plugins[S].description;
                if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {
                    T = true;
                    X = false;
                    ab = ab.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
                    ag[0] = parseInt(ab.replace(/^(.*)\..*$/, "$1"), 10);
                    ag[1] = parseInt(ab.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
                    ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0
                }
            } else {
                if (typeof O.ActiveXObject != D) {
                    try {
                        var ad = new ActiveXObject(W);
                        if (ad) {
                            ab = ad.GetVariable("$version");
                            if (ab) {
                                X = true;
                                ab = ab.split(" ")[1].split(",");
                                ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
                            }
                        }
                    } catch (Z) {}
                }
            }
            return {
                w3: aa,
                pv: ag,
                wk: af,
                ie: X,
                win: ae,
                mac: ac
            }
        }(),
        k = function() {
            if (!M.w3) {
                return
            }
            if ((typeof j.readyState != D && j.readyState == "complete") || (typeof j.readyState == D && (j.getElementsByTagName("body")[0] || j.body))) {
                f()
            }
            if (!J) {
                if (typeof j.addEventListener != D) {
                    j.addEventListener("DOMContentLoaded", f, false)
                }
                if (M.ie && M.win) {
                    j.attachEvent(x, function() {
                        if (j.readyState == "complete") {
                            j.detachEvent(x, arguments.callee);
                            f()
                        }
                    });
                    if (O == top) {
                        (function() {
                            if (J) {
                                return
                            }
                            try {
                                j.documentElement.doScroll("left")
                            } catch (X) {
                                setTimeout(arguments.callee, 0);
                                return
                            }
                            f()
                        })()
                    }
                }
                if (M.wk) {
                    (function() {
                        if (J) {
                            return
                        }
                        if (!/loaded|complete/.test(j.readyState)) {
                            setTimeout(arguments.callee, 0);
                            return
                        }
                        f()
                    })()
                }
                s(f)
            }
        }();

    function f() {
        if (J) {
            return
        }
        try {
            var Z = j.getElementsByTagName("body")[0].appendChild(C("span"));
            Z.parentNode.removeChild(Z)
        } catch (aa) {
            return
        }
        J = true;
        var X = U.length;
        for (var Y = 0; Y < X; Y++) {
            U[Y]()
        }
    }

    function K(X) {
        if (J) {
            X()
        } else {
            U[U.length] = X
        }
    }

    function s(Y) {
        if (typeof O.addEventListener != D) {
            O.addEventListener("load", Y, false)
        } else {
            if (typeof j.addEventListener != D) {
                j.addEventListener("load", Y, false)
            } else {
                if (typeof O.attachEvent != D) {
                    i(O, "onload", Y)
                } else {
                    if (typeof O.onload == "function") {
                        var X = O.onload;
                        O.onload = function() {
                            X();
                            Y()
                        }
                    } else {
                        O.onload = Y
                    }
                }
            }
        }
    }

    function h() {
        if (T) {
            V()
        } else {
            H()
        }
    }

    function V() {
        var X = j.getElementsByTagName("body")[0];
        var aa = C(r);
        aa.setAttribute("type", q);
        var Z = X.appendChild(aa);
        if (Z) {
            var Y = 0;
            (function() {
                if (typeof Z.GetVariable != D) {
                    var ab = Z.GetVariable("$version");
                    if (ab) {
                        ab = ab.split(" ")[1].split(",");
                        M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
                    }
                } else {
                    if (Y < 10) {
                        Y++;
                        setTimeout(arguments.callee, 10);
                        return
                    }
                }
                X.removeChild(aa);
                Z = null;
                H()
            })()
        } else {
            H()
        }
    }

    function H() {
        var ag = o.length;
        if (ag > 0) {
            for (var af = 0; af < ag; af++) {
                var Y = o[af].id;
                var ab = o[af].callbackFn;
                var aa = {
                    success: false,
                    id: Y
                };
                if (M.pv[0] > 0) {
                    var ae = c(Y);
                    if (ae) {
                        if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {
                            w(Y, true);
                            if (ab) {
                                aa.success = true;
                                aa.ref = z(Y);
                                ab(aa)
                            }
                        } else {
                            if (o[af].expressInstall && A()) {
                                var ai = {};
                                ai.data = o[af].expressInstall;
                                ai.width = ae.getAttribute("width") || "0";
                                ai.height = ae.getAttribute("height") || "0";
                                if (ae.getAttribute("class")) {
                                    ai.styleclass = ae.getAttribute("class")
                                }
                                if (ae.getAttribute("align")) {
                                    ai.align = ae.getAttribute("align")
                                }
                                var ah = {};
                                var X = ae.getElementsByTagName("param");
                                var ac = X.length;
                                for (var ad = 0; ad < ac; ad++) {
                                    if (X[ad].getAttribute("name").toLowerCase() != "movie") {
                                        ah[X[ad].getAttribute("name")] = X[ad].getAttribute("value")
                                    }
                                }
                                P(ai, ah, Y, ab)
                            } else {
                                p(ae);
                                if (ab) {
                                    ab(aa)
                                }
                            }
                        }
                    }
                } else {
                    w(Y, true);
                    if (ab) {
                        var Z = z(Y);
                        if (Z && typeof Z.SetVariable != D) {
                            aa.success = true;
                            aa.ref = Z
                        }
                        ab(aa)
                    }
                }
            }
        }
    }

    function z(aa) {
        var X = null;
        var Y = c(aa);
        if (Y && Y.nodeName == "OBJECT") {
            if (typeof Y.SetVariable != D) {
                X = Y
            } else {
                var Z = Y.getElementsByTagName(r)[0];
                if (Z) {
                    X = Z
                }
            }
        }
        return X
    }

    function A() {
        return !a && F("6.0.65") && (M.win || M.mac) && !(M.wk && M.wk < 312)
    }

    function P(aa, ab, X, Z) {
        a = true;
        E = Z || null;
        B = {
            success: false,
            id: X
        };
        var ae = c(X);
        if (ae) {
            if (ae.nodeName == "OBJECT") {
                l = g(ae);
                Q = null
            } else {
                l = ae;
                Q = X
            }
            aa.id = R;
            if (typeof aa.width == D || (!/%$/.test(aa.width) && parseInt(aa.width, 10) < 310)) {
                aa.width = "310"
            }
            if (typeof aa.height == D || (!/%$/.test(aa.height) && parseInt(aa.height, 10) < 137)) {
                aa.height = "137"
            }
            j.title = j.title.slice(0, 47) + " - Flash Player Installation";
            var ad = M.ie && M.win ? "ActiveX" : "PlugIn",
                ac = "MMredirectURL=" + O.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + ad + "&MMdoctitle=" + j.title;
            if (typeof ab.flashvars != D) {
                ab.flashvars += "&" + ac
            } else {
                ab.flashvars = ac
            }
            if (M.ie && M.win && ae.readyState != 4) {
                var Y = C("div");
                X += "SWFObjectNew";
                Y.setAttribute("id", X);
                ae.parentNode.insertBefore(Y, ae);
                ae.style.display = "none";
                (function() {
                    if (ae.readyState == 4) {
                        ae.parentNode.removeChild(ae)
                    } else {
                        setTimeout(arguments.callee, 10)
                    }
                })()
            }
            u(aa, ab, X)
        }
    }

    function p(Y) {
        if (M.ie && M.win && Y.readyState != 4) {
            var X = C("div");
            Y.parentNode.insertBefore(X, Y);
            X.parentNode.replaceChild(g(Y), X);
            Y.style.display = "none";
            (function() {
                if (Y.readyState == 4) {
                    Y.parentNode.removeChild(Y)
                } else {
                    setTimeout(arguments.callee, 10)
                }
            })()
        } else {
            Y.parentNode.replaceChild(g(Y), Y)
        }
    }

    function g(ab) {
        var aa = C("div");
        if (M.win && M.ie) {
            aa.innerHTML = ab.innerHTML
        } else {
            var Y = ab.getElementsByTagName(r)[0];
            if (Y) {
                var ad = Y.childNodes;
                if (ad) {
                    var X = ad.length;
                    for (var Z = 0; Z < X; Z++) {
                        if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == "PARAM") && !(ad[Z].nodeType == 8)) {
                            aa.appendChild(ad[Z].cloneNode(true))
                        }
                    }
                }
            }
        }
        return aa
    }

    function u(ai, ag, Y) {
        var X, aa = c(Y);
        if (M.wk && M.wk < 312) {
            return X
        }
        if (aa) {
            if (typeof ai.id == D) {
                ai.id = Y
            }
            if (M.ie && M.win) {
                var ah = "";
                for (var ae in ai) {
                    if (ai[ae] != Object.prototype[ae]) {
                        if (ae.toLowerCase() == "data") {
                            ag.movie = ai[ae]
                        } else {
                            if (ae.toLowerCase() == "styleclass") {
                                ah += ' class="' + ai[ae] + '"'
                            } else {
                                if (ae.toLowerCase() != "classid") {
                                    ah += " " + ae + '="' + ai[ae] + '"'
                                }
                            }
                        }
                    }
                }
                var af = "";
                for (var ad in ag) {
                    if (ag[ad] != Object.prototype[ad]) {
                        af += '<param name="' + ad + '" value="' + ag[ad] + '" />'
                    }
                }
                aa.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + ah + ">" + af + "</object>";
                N[N.length] = ai.id;
                X = c(ai.id)
            } else {
                var Z = C(r);
                Z.setAttribute("type", q);
                for (var ac in ai) {
                    if (ai[ac] != Object.prototype[ac]) {
                        if (ac.toLowerCase() == "styleclass") {
                            Z.setAttribute("class", ai[ac])
                        } else {
                            if (ac.toLowerCase() != "classid") {
                                Z.setAttribute(ac, ai[ac])
                            }
                        }
                    }
                }
                for (var ab in ag) {
                    if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != "movie") {
                        e(Z, ab, ag[ab])
                    }
                }
                aa.parentNode.replaceChild(Z, aa);
                X = Z
            }
        }
        return X
    }

    function e(Z, X, Y) {
        var aa = C("param");
        aa.setAttribute("name", X);
        aa.setAttribute("value", Y);
        Z.appendChild(aa)
    }

    function y(Y) {
        var X = c(Y);
        if (X && X.nodeName == "OBJECT") {
            if (M.ie && M.win) {
                X.style.display = "none";
                (function() {
                    if (X.readyState == 4) {
                        b(Y)
                    } else {
                        setTimeout(arguments.callee, 10)
                    }
                })()
            } else {
                X.parentNode.removeChild(X)
            }
        }
    }

    function b(Z) {
        var Y = c(Z);
        if (Y) {
            for (var X in Y) {
                if (typeof Y[X] == "function") {
                    Y[X] = null
                }
            }
            Y.parentNode.removeChild(Y)
        }
    }

    function c(Z) {
        var X = null;
        try {
            X = j.getElementById(Z)
        } catch (Y) {}
        return X
    }

    function C(X) {
        return j.createElement(X)
    }

    function i(Z, X, Y) {
        Z.attachEvent(X, Y);
        I[I.length] = [Z, X, Y]
    }

    function F(Z) {
        var Y = M.pv,
            X = Z.split(".");
        X[0] = parseInt(X[0], 10);
        X[1] = parseInt(X[1], 10) || 0;
        X[2] = parseInt(X[2], 10) || 0;
        return (Y[0] > X[0] || (Y[0] == X[0] && Y[1] > X[1]) || (Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2])) ? true : false
    }

    function v(ac, Y, ad, ab) {
        if (M.ie && M.mac) {
            return
        }
        var aa = j.getElementsByTagName("head")[0];
        if (!aa) {
            return
        }
        var X = (ad && typeof ad == "string") ? ad : "screen";
        if (ab) {
            n = null;
            G = null
        }
        if (!n || G != X) {
            var Z = C("style");
            Z.setAttribute("type", "text/css");
            Z.setAttribute("media", X);
            n = aa.appendChild(Z);
            if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {
                n = j.styleSheets[j.styleSheets.length - 1]
            }
            G = X
        }
        if (M.ie && M.win) {
            if (n && typeof n.addRule == r) {
                n.addRule(ac, Y)
            }
        } else {
            if (n && typeof j.createTextNode != D) {
                n.appendChild(j.createTextNode(ac + " {" + Y + "}"))
            }
        }
    }

    function w(Z, X) {
        if (!m) {
            return
        }
        var Y = X ? "visible" : "hidden";
        if (J && c(Z)) {
            c(Z).style.visibility = Y
        } else {
            v("#" + Z, "visibility:" + Y)
        }
    }

    function L(Y) {
        var Z = /[\\\"<>\.;]/;
        var X = Z.exec(Y) != null;
        return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y
    }
    var d = function() {
        if (M.ie && M.win) {
            window.attachEvent("onunload", function() {
                var ac = I.length;
                for (var ab = 0; ab < ac; ab++) {
                    I[ab][0].detachEvent(I[ab][1], I[ab][2])
                }
                var Z = N.length;
                for (var aa = 0; aa < Z; aa++) {
                    y(N[aa])
                }
                for (var Y in M) {
                    M[Y] = null
                }
                M = null;
                for (var X in swfobject) {
                    swfobject[X] = null
                }
                swfobject = null
            })
        }
    }();
    return {
        registerObject: function(ab, X, aa, Z) {
            if (M.w3 && ab && X) {
                var Y = {};
                Y.id = ab;
                Y.swfVersion = X;
                Y.expressInstall = aa;
                Y.callbackFn = Z;
                o[o.length] = Y;
                w(ab, false)
            } else {
                if (Z) {
                    Z({
                        success: false,
                        id: ab
                    })
                }
            }
        },
        getObjectById: function(X) {
            if (M.w3) {
                return z(X)
            }
        },
        embedSWF: function(ab, ah, ae, ag, Y, aa, Z, ad, af, ac) {
            var X = {
                success: false,
                id: ah
            };
            if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {
                w(ah, false);
                K(function() {
                    ae += "";
                    ag += "";
                    var aj = {};
                    if (af && typeof af === r) {
                        for (var al in af) {
                            aj[al] = af[al]
                        }
                    }
                    aj.data = ab;
                    aj.width = ae;
                    aj.height = ag;
                    var am = {};
                    if (ad && typeof ad === r) {
                        for (var ak in ad) {
                            am[ak] = ad[ak]
                        }
                    }
                    if (Z && typeof Z === r) {
                        for (var ai in Z) {
                            if (typeof am.flashvars != D) {
                                am.flashvars += "&" + ai + "=" + Z[ai]
                            } else {
                                am.flashvars = ai + "=" + Z[ai]
                            }
                        }
                    }
                    if (F(Y)) {
                        var an = u(aj, am, ah);
                        if (aj.id == ah) {
                            w(ah, true)
                        }
                        X.success = true;
                        X.ref = an
                    } else {
                        if (aa && A()) {
                            aj.data = aa;
                            P(aj, am, ah, ac);
                            return
                        } else {
                            w(ah, true)
                        }
                    }
                    if (ac) {
                        ac(X)
                    }
                })
            } else {
                if (ac) {
                    ac(X)
                }
            }
        },
        switchOffAutoHideShow: function() {
            m = false
        },
        ua: M,
        getFlashPlayerVersion: function() {
            return {
                major: M.pv[0],
                minor: M.pv[1],
                release: M.pv[2]
            }
        },
        hasFlashPlayerVersion: F,
        createSWF: function(Z, Y, X) {
            if (M.w3) {
                return u(Z, Y, X)
            } else {
                return undefined
            }
        },
        showExpressInstall: function(Z, aa, X, Y) {
            if (M.w3 && A()) {
                P(Z, aa, X, Y)
            }
        },
        removeSWF: function(X) {
            if (M.w3) {
                y(X)
            }
        },
        createCSS: function(aa, Z, Y, X) {
            if (M.w3) {
                v(aa, Z, Y, X)
            }
        },
        addDomLoadEvent: K,
        addLoadEvent: s,
        getQueryParamValue: function(aa) {
            var Z = j.location.search || j.location.hash;
            if (Z) {
                if (/\?/.test(Z)) {
                    Z = Z.split("?")[1]
                }
                if (aa == null) {
                    return L(Z)
                }
                var Y = Z.split("&");
                for (var X = 0; X < Y.length; X++) {
                    if (Y[X].substring(0, Y[X].indexOf("=")) == aa) {
                        return L(Y[X].substring((Y[X].indexOf("=") + 1)))
                    }
                }
            }
            return ""
        },
        expressInstallCallback: function() {
            if (a) {
                var X = c(R);
                if (X && l) {
                    X.parentNode.replaceChild(l, X);
                    if (Q) {
                        w(Q, true);
                        if (M.ie && M.win) {
                            l.style.display = "block"
                        }
                    }
                    if (E) {
                        E(B)
                    }
                }
                a = false
            }
        }
    }
}();

/**
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.2.1
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-05-14
 */
! function(e, t) {
    "use strict";

    function n(e, t) {
        for (var n, i = [], r = 0; r < e.length; ++r) {
            if (n = s[e[r]] || o(e[r]), !n) throw "module definition dependecy not found: " + e[r];
            i.push(n)
        }
        t.apply(null, i)
    }

    function i(e, i, r) {
        if ("string" != typeof e) throw "invalid module definition, module id must be defined and be a string";
        if (i === t) throw "invalid module definition, dependencies must be specified";
        if (r === t) throw "invalid module definition, definition function must be specified";
        n(i, function() {
            s[e] = r.apply(null, arguments)
        })
    }

    function r(e) {
        return !!s[e]
    }

    function o(t) {
        for (var n = e, i = t.split(/[.\/]/), r = 0; r < i.length; ++r) {
            if (!n[i[r]]) return;
            n = n[i[r]]
        }
        return n
    }

    function a(n) {
        for (var i = 0; i < n.length; i++) {
            for (var r = e, o = n[i], a = o.split(/[.\/]/), u = 0; u < a.length - 1; ++u) r[a[u]] === t && (r[a[u]] = {}), r = r[a[u]];
            r[a[a.length - 1]] = s[o]
        }
    }
    var s = {},
        u = "moxie/core/utils/Basic",
        c = "moxie/core/I18n",
        l = "moxie/core/utils/Mime",
        d = "moxie/core/utils/Env",
        f = "moxie/core/utils/Dom",
        h = "moxie/core/Exceptions",
        p = "moxie/core/EventTarget",
        m = "moxie/core/utils/Encode",
        g = "moxie/runtime/Runtime",
        v = "moxie/runtime/RuntimeClient",
        y = "moxie/file/Blob",
        w = "moxie/file/File",
        E = "moxie/file/FileInput",
        _ = "moxie/file/FileDrop",
        x = "moxie/runtime/RuntimeTarget",
        b = "moxie/file/FileReader",
        R = "moxie/core/utils/Url",
        T = "moxie/file/FileReaderSync",
        A = "moxie/xhr/FormData",
        S = "moxie/xhr/XMLHttpRequest",
        O = "moxie/runtime/Transporter",
        I = "moxie/image/Image",
        D = "moxie/runtime/html5/Runtime",
        N = "moxie/runtime/html5/file/Blob",
        L = "moxie/core/utils/Events",
        M = "moxie/runtime/html5/file/FileInput",
        C = "moxie/runtime/html5/file/FileDrop",
        F = "moxie/runtime/html5/file/FileReader",
        H = "moxie/runtime/html5/xhr/XMLHttpRequest",
        P = "moxie/runtime/html5/utils/BinaryReader",
        k = "moxie/runtime/html5/image/JPEGHeaders",
        U = "moxie/runtime/html5/image/ExifParser",
        B = "moxie/runtime/html5/image/JPEG",
        z = "moxie/runtime/html5/image/PNG",
        G = "moxie/runtime/html5/image/ImageInfo",
        q = "moxie/runtime/html5/image/MegaPixel",
        X = "moxie/runtime/html5/image/Image",
        j = "moxie/runtime/flash/Runtime",
        V = "moxie/runtime/flash/file/Blob",
        W = "moxie/runtime/flash/file/FileInput",
        Y = "moxie/runtime/flash/file/FileReader",
        $ = "moxie/runtime/flash/file/FileReaderSync",
        J = "moxie/runtime/flash/xhr/XMLHttpRequest",
        Z = "moxie/runtime/flash/runtime/Transporter",
        K = "moxie/runtime/flash/image/Image",
        Q = "moxie/runtime/silverlight/Runtime",
        et = "moxie/runtime/silverlight/file/Blob",
        tt = "moxie/runtime/silverlight/file/FileInput",
        nt = "moxie/runtime/silverlight/file/FileDrop",
        it = "moxie/runtime/silverlight/file/FileReader",
        rt = "moxie/runtime/silverlight/file/FileReaderSync",
        ot = "moxie/runtime/silverlight/xhr/XMLHttpRequest",
        at = "moxie/runtime/silverlight/runtime/Transporter",
        st = "moxie/runtime/silverlight/image/Image",
        ut = "moxie/runtime/html4/Runtime",
        ct = "moxie/runtime/html4/file/FileInput",
        lt = "moxie/runtime/html4/file/FileReader",
        dt = "moxie/runtime/html4/xhr/XMLHttpRequest",
        ft = "moxie/runtime/html4/image/Image";
    i(u, [], function() {
        var e = function(e) {
                var t;
                return e === t ? "undefined" : null === e ? "null" : e.nodeType ? "node" : {}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()
            },
            t = function(i) {
                var r;
                return n(arguments, function(o, s) {
                    s > 0 && n(o, function(n, o) {
                        n !== r && (e(i[o]) === e(n) && ~a(e(n), ["array", "object"]) ? t(i[o], n) : i[o] = n)
                    })
                }), i
            },
            n = function(e, t) {
                var n, i, r, o;
                if (e) {
                    try {
                        n = e.length
                    } catch (a) {
                        n = o
                    }
                    if (n === o) {
                        for (i in e)
                            if (e.hasOwnProperty(i) && t(e[i], i) === !1) return
                    } else
                        for (r = 0; n > r; r++)
                            if (t(e[r], r) === !1) return
                }
            },
            i = function(t) {
                var n;
                if (!t || "object" !== e(t)) return !0;
                for (n in t) return !1;
                return !0
            },
            r = function(t, n) {
                function i(r) {
                    "function" === e(t[r]) && t[r](function(e) {
                        ++r < o && !e ? i(r) : n(e)
                    })
                }
                var r = 0,
                    o = t.length;
                "function" !== e(n) && (n = function() {}), t && t.length || n(), i(r)
            },
            o = function(e, t) {
                var i = 0,
                    r = e.length,
                    o = new Array(r);
                n(e, function(e, n) {
                    e(function(e) {
                        if (e) return t(e);
                        var a = [].slice.call(arguments);
                        a.shift(), o[n] = a, i++, i === r && (o.unshift(null), t.apply(this, o))
                    })
                })
            },
            a = function(e, t) {
                if (t) {
                    if (Array.prototype.indexOf) return Array.prototype.indexOf.call(t, e);
                    for (var n = 0, i = t.length; i > n; n++)
                        if (t[n] === e) return n
                }
                return -1
            },
            s = function(t, n) {
                var i = [];
                "array" !== e(t) && (t = [t]), "array" !== e(n) && (n = [n]);
                for (var r in t) - 1 === a(t[r], n) && i.push(t[r]);
                return i.length ? i : !1
            },
            u = function(e, t) {
                var i = [];
                return n(e, function(e) {
                    -1 !== a(e, t) && i.push(e)
                }), i.length ? i : null
            },
            c = function(e) {
                var t, n = [];
                for (t = 0; t < e.length; t++) n[t] = e[t];
                return n
            },
            l = function() {
                var e = 0;
                return function(t) {
                    var n = (new Date).getTime().toString(32),
                        i;
                    for (i = 0; 5 > i; i++) n += Math.floor(65535 * Math.random()).toString(32);
                    return (t || "o_") + n + (e++).toString(32)
                }
            }(),
            d = function(e) {
                return e ? String.prototype.trim ? String.prototype.trim.call(e) : e.toString().replace(/^\s*/, "").replace(/\s*$/, "") : e
            },
            f = function(e) {
                if ("string" != typeof e) return e;
                var t = {
                        t: 1099511627776,
                        g: 1073741824,
                        m: 1048576,
                        k: 1024
                    },
                    n;
                return e = /^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g, "")), n = e[2], e = +e[1], t.hasOwnProperty(n) && (e *= t[n]), e
            };
        return {
            guid: l,
            typeOf: e,
            extend: t,
            each: n,
            isEmptyObj: i,
            inSeries: r,
            inParallel: o,
            inArray: a,
            arrayDiff: s,
            arrayIntersect: u,
            toArray: c,
            trim: d,
            parseSizeStr: f
        }
    }), i(c, [u], function(e) {
        var t = {};
        return {
            addI18n: function(n) {
                return e.extend(t, n)
            },
            translate: function(e) {
                return t[e] || e
            },
            _: function(e) {
                return this.translate(e)
            },
            sprintf: function(t) {
                var n = [].slice.call(arguments, 1);
                return t.replace(/%[a-z]/g, function() {
                    var t = n.shift();
                    return "undefined" !== e.typeOf(t) ? t : ""
                })
            }
        }
    }), i(l, [u, c], function(e, t) {
        var n = "application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",
            i = {
                mimes: {},
                extensions: {},
                addMimeType: function(e) {
                    var t = e.split(/,/),
                        n, i, r;
                    for (n = 0; n < t.length; n += 2) {
                        for (r = t[n + 1].split(/ /), i = 0; i < r.length; i++) this.mimes[r[i]] = t[n];
                        this.extensions[t[n]] = r
                    }
                },
                extList2mimes: function(t, n) {
                    var i = this,
                        r, o, a, s, u = [];
                    for (o = 0; o < t.length; o++)
                        for (r = t[o].extensions.split(/\s*,\s*/), a = 0; a < r.length; a++) {
                            if ("*" === r[a]) return [];
                            if (s = i.mimes[r[a]]) - 1 === e.inArray(s, u) && u.push(s);
                            else {
                                if (!n || !/^\w+$/.test(r[a])) return [];
                                u.push("." + r[a])
                            }
                        }
                    return u
                },
                mimes2exts: function(t) {
                    var n = this,
                        i = [];
                    return e.each(t, function(t) {
                        if ("*" === t) return i = [], !1;
                        var r = t.match(/^(\w+)\/(\*|\w+)$/);
                        r && ("*" === r[2] ? e.each(n.extensions, function(e, t) {
                            new RegExp("^" + r[1] + "/").test(t) && [].push.apply(i, n.extensions[t])
                        }) : n.extensions[t] && [].push.apply(i, n.extensions[t]))
                    }), i
                },
                mimes2extList: function(n) {
                    var i = [],
                        r = [];
                    return "string" === e.typeOf(n) && (n = e.trim(n).split(/\s*,\s*/)), r = this.mimes2exts(n), i.push({
                        title: t.translate("Files"),
                        extensions: r.length ? r.join(",") : "*"
                    }), i.mimes = n, i
                },
                getFileExtension: function(e) {
                    var t = e && e.match(/\.([^.]+)$/);
                    return t ? t[1].toLowerCase() : ""
                },
                getFileMime: function(e) {
                    return this.mimes[this.getFileExtension(e)] || ""
                }
            };
        return i.addMimeType(n), i
    }), i(d, [u], function(e) {
        function t(e, t, n) {
            var i = 0,
                r = 0,
                o = 0,
                a = {
                    dev: -6,
                    alpha: -5,
                    a: -5,
                    beta: -4,
                    b: -4,
                    RC: -3,
                    rc: -3,
                    "#": -2,
                    p: 1,
                    pl: 1
                },
                s = function(e) {
                    return e = ("" + e).replace(/[_\-+]/g, "."), e = e.replace(/([^.\d]+)/g, ".$1.").replace(/\.{2,}/g, "."), e.length ? e.split(".") : [-8]
                },
                u = function(e) {
                    return e ? isNaN(e) ? a[e] || -7 : parseInt(e, 10) : 0
                };
            for (e = s(e), t = s(t), r = Math.max(e.length, t.length), i = 0; r > i; i++)
                if (e[i] != t[i]) {
                    if (e[i] = u(e[i]), t[i] = u(t[i]), e[i] < t[i]) {
                        o = -1;
                        break
                    }
                    if (e[i] > t[i]) {
                        o = 1;
                        break
                    }
                } if (!n) return o;
            switch (n) {
                case ">":
                case "gt":
                    return o > 0;
                case ">=":
                case "ge":
                    return o >= 0;
                case "<=":
                case "le":
                    return 0 >= o;
                case "==":
                case "=":
                case "eq":
                    return 0 === o;
                case "<>":
                case "!=":
                case "ne":
                    return 0 !== o;
                case "":
                case "<":
                case "lt":
                    return 0 > o;
                default:
                    return null
            }
        }
        var n = function(e) {
                var t = "",
                    n = "?",
                    i = "function",
                    r = "undefined",
                    o = "object",
                    a = "major",
                    s = "model",
                    u = "name",
                    c = "type",
                    l = "vendor",
                    d = "version",
                    f = "architecture",
                    h = "console",
                    p = "mobile",
                    m = "tablet",
                    g = {
                        has: function(e, t) {
                            return -1 !== t.toLowerCase().indexOf(e.toLowerCase())
                        },
                        lowerize: function(e) {
                            return e.toLowerCase()
                        }
                    },
                    v = {
                        rgx: function() {
                            for (var t, n = 0, a, s, u, c, l, d, f = arguments; n < f.length; n += 2) {
                                var h = f[n],
                                    p = f[n + 1];
                                if (typeof t === r) {
                                    t = {};
                                    for (u in p) c = p[u], typeof c === o ? t[c[0]] = e : t[c] = e
                                }
                                for (a = s = 0; a < h.length; a++)
                                    if (l = h[a].exec(this.getUA())) {
                                        for (u = 0; u < p.length; u++) d = l[++s], c = p[u], typeof c === o && c.length > 0 ? 2 == c.length ? t[c[0]] = typeof c[1] == i ? c[1].call(this, d) : c[1] : 3 == c.length ? t[c[0]] = typeof c[1] !== i || c[1].exec && c[1].test ? d ? d.replace(c[1], c[2]) : e : d ? c[1].call(this, d, c[2]) : e : 4 == c.length && (t[c[0]] = d ? c[3].call(this, d.replace(c[1], c[2])) : e) : t[c] = d ? d : e;
                                        break
                                    } if (l) break
                            }
                            return t
                        },
                        str: function(t, i) {
                            for (var r in i)
                                if (typeof i[r] === o && i[r].length > 0) {
                                    for (var a = 0; a < i[r].length; a++)
                                        if (g.has(i[r][a], t)) return r === n ? e : r
                                } else if (g.has(i[r], t)) return r === n ? e : r;
                            return t
                        }
                    },
                    y = {
                        browser: {
                            oldsafari: {
                                major: {
                                    1: ["/8", "/1", "/3"],
                                    2: "/4",
                                    "?": "/"
                                },
                                version: {
                                    "1.0": "/8",
                                    1.2: "/1",
                                    1.3: "/3",
                                    "2.0": "/412",
                                    "2.0.2": "/416",
                                    "2.0.3": "/417",
                                    "2.0.4": "/419",
                                    "?": "/"
                                }
                            }
                        },
                        device: {
                            sprint: {
                                model: {
                                    "Evo Shift 4G": "7373KT"
                                },
                                vendor: {
                                    HTC: "APA",
                                    Sprint: "Sprint"
                                }
                            }
                        },
                        os: {
                            windows: {
                                version: {
                                    ME: "4.90",
                                    "NT 3.11": "NT3.51",
                                    "NT 4.0": "NT4.0",
                                    2000: "NT 5.0",
                                    XP: ["NT 5.1", "NT 5.2"],
                                    Vista: "NT 6.0",
                                    7: "NT 6.1",
                                    8: "NT 6.2",
                                    8.1: "NT 6.3",
                                    RT: "ARM"
                                }
                            }
                        }
                    },
                    w = {
                        browser: [
                            [/(opera\smini)\/((\d+)?[\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i, /(opera).+version\/((\d+)?[\w\.]+)/i, /(opera)[\/\s]+((\d+)?[\w\.]+)/i],
                            [u, d, a],
                            [/\s(opr)\/((\d+)?[\w\.]+)/i],
                            [
                                [u, "Opera"], d, a
                            ],
                            [/(kindle)\/((\d+)?[\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i, /(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i, /(rekonq)((?:\/)[\w\.]+)*/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],
                            [u, d, a],
                            [/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],
                            [
                                [u, "IE"], d, a
                            ],
                            [/(yabrowser)\/((\d+)?[\w\.]+)/i],
                            [
                                [u, "Yandex"], d, a
                            ],
                            [/(comodo_dragon)\/((\d+)?[\w\.]+)/i],
                            [
                                [u, /_/g, " "], d, a
                            ],
                            [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],
                            [u, d, a],
                            [/(dolfin)\/((\d+)?[\w\.]+)/i],
                            [
                                [u, "Dolphin"], d, a
                            ],
                            [/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],
                            [
                                [u, "Chrome"], d, a
                            ],
                            [/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],
                            [
                                [u, "Android Browser"], d, a
                            ],
                            [/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],
                            [d, a, [u, "Mobile Safari"]],
                            [/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],
                            [d, a, u],
                            [/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],
                            [u, [a, v.str, y.browser.oldsafari.major],
                                [d, v.str, y.browser.oldsafari.version]
                            ],
                            [/(konqueror)\/((\d+)?[\w\.]+)/i, /(webkit|khtml)\/((\d+)?[\w\.]+)/i],
                            [u, d, a],
                            [/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],
                            [
                                [u, "Netscape"], d, a
                            ],
                            [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i, /(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i, /(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i, /(links)\s\(((\d+)?[\w\.]+)/i, /(gobrowser)\/?((\d+)?[\w\.]+)*/i, /(ice\s?browser)\/v?((\d+)?[\w\._]+)/i, /(mosaic)[\/\s]((\d+)?[\w\.]+)/i],
                            [u, d, a]
                        ],
                        engine: [
                            [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i],
                            [u, d],
                            [/rv\:([\w\.]+).*(gecko)/i],
                            [d, u]
                        ],
                        os: [
                            [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
                            [u, [d, v.str, y.os.windows.version]],
                            [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],
                            [
                                [u, "Windows"],
                                [d, v.str, y.os.windows.version]
                            ],
                            [/\((bb)(10);/i],
                            [
                                [u, "BlackBerry"], d
                            ],
                            [/(blackberry)\w*\/?([\w\.]+)*/i, /(tizen)\/([\w\.]+)/i, /(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],
                            [u, d],
                            [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],
                            [
                                [u, "Symbian"], d
                            ],
                            [/mozilla.+\(mobile;.+gecko.+firefox/i],
                            [
                                [u, "Firefox OS"], d
                            ],
                            [/(nintendo|playstation)\s([wids3portablevu]+)/i, /(mint)[\/\s\(]?(\w+)*/i, /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i, /(hurd|linux)\s?([\w\.]+)*/i, /(gnu)\s?([\w\.]+)*/i],
                            [u, d],
                            [/(cros)\s[\w]+\s([\w\.]+\w)/i],
                            [
                                [u, "Chromium OS"], d
                            ],
                            [/(sunos)\s?([\w\.]+\d)*/i],
                            [
                                [u, "Solaris"], d
                            ],
                            [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
                            [u, d],
                            [/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],
                            [
                                [u, "iOS"],
                                [d, /_/g, "."]
                            ],
                            [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],
                            [u, [d, /_/g, "."]],
                            [/(haiku)\s(\w+)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i, /(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i, /(unix)\s?([\w\.]+)*/i],
                            [u, d]
                        ]
                    },
                    E = function(e) {
                        var n = e || (window && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : t);
                        this.getBrowser = function() {
                            return v.rgx.apply(this, w.browser)
                        }, this.getEngine = function() {
                            return v.rgx.apply(this, w.engine)
                        }, this.getOS = function() {
                            return v.rgx.apply(this, w.os)
                        }, this.getResult = function() {
                            return {
                                ua: this.getUA(),
                                browser: this.getBrowser(),
                                engine: this.getEngine(),
                                os: this.getOS()
                            }
                        }, this.getUA = function() {
                            return n
                        }, this.setUA = function(e) {
                            return n = e, this
                        }, this.setUA(n)
                    };
                return (new E).getResult()
            }(),
            i = function() {
                var t = {
                    define_property: function() {
                        return !1
                    }(),
                    create_canvas: function() {
                        var e = document.createElement("canvas");
                        return !(!e.getContext || !e.getContext("2d"))
                    }(),
                    return_response_type: function(t) {
                        try {
                            if (-1 !== e.inArray(t, ["", "text", "document"])) return !0;
                            if (window.XMLHttpRequest) {
                                var n = new XMLHttpRequest;
                                if (n.open("get", "/"), "responseType" in n) return n.responseType = t, n.responseType !== t ? !1 : !0
                            }
                        } catch (i) {}
                        return !1
                    },
                    use_data_uri: function() {
                        var e = new Image;
                        return e.onload = function() {
                            t.use_data_uri = 1 === e.width && 1 === e.height
                        }, setTimeout(function() {
                            e.src = "data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="
                        }, 1), !1
                    }(),
                    use_data_uri_over32kb: function() {
                        return t.use_data_uri && ("IE" !== r.browser || r.version >= 9)
                    },
                    use_data_uri_of: function(e) {
                        return t.use_data_uri && 33e3 > e || t.use_data_uri_over32kb()
                    },
                    use_fileinput: function() {
                        var e = document.createElement("input");
                        return e.setAttribute("type", "file"), !e.disabled
                    }
                };
                return function(n) {
                    var i = [].slice.call(arguments);
                    return i.shift(), "function" === e.typeOf(t[n]) ? t[n].apply(this, i) : !!t[n]
                }
            }(),
            r = {
                can: i,
                browser: n.browser.name,
                version: parseFloat(n.browser.major),
                os: n.os.name,
                osVersion: n.os.version,
                verComp: t,
                swf_url: "../flash/Moxie.swf",
                xap_url: "../silverlight/Moxie.xap",
                global_event_dispatcher: "moxie.core.EventTarget.instance.dispatchEvent"
            };
        return r.OS = r.os, r
    }), i(f, [d], function(e) {
        var t = function(e) {
                return "string" != typeof e ? e : document.getElementById(e)
            },
            n = function(e, t) {
                if (!e.className) return !1;
                var n = new RegExp("(^|\\s+)" + t + "(\\s+|$)");
                return n.test(e.className)
            },
            i = function(e, t) {
                n(e, t) || (e.className = e.className ? e.className.replace(/\s+$/, "") + " " + t : t)
            },
            r = function(e, t) {
                if (e.className) {
                    var n = new RegExp("(^|\\s+)" + t + "(\\s+|$)");
                    e.className = e.className.replace(n, function(e, t, n) {
                        return " " === t && " " === n ? " " : ""
                    })
                }
            },
            o = function(e, t) {
                return e.currentStyle ? e.currentStyle[t] : window.getComputedStyle ? window.getComputedStyle(e, null)[t] : void 0
            },
            a = function(t, n) {
                function i(e) {
                    var t, n, i = 0,
                        r = 0;
                    return e && (n = e.getBoundingClientRect(), t = "CSS1Compat" === s.compatMode ? s.documentElement : s.body, i = n.left + t.scrollLeft, r = n.top + t.scrollTop), {
                        x: i,
                        y: r
                    }
                }
                var r = 0,
                    o = 0,
                    a, s = document,
                    u, c;
                if (t = t, n = n || s.body, t && t.getBoundingClientRect && "IE" === e.browser && (!s.documentMode || s.documentMode < 8)) return u = i(t), c = i(n), {
                    x: u.x - c.x,
                    y: u.y - c.y
                };
                for (a = t; a && a != n && a.nodeType;) r += a.offsetLeft || 0, o += a.offsetTop || 0, a = a.offsetParent;
                for (a = t.parentNode; a && a != n && a.nodeType;) r -= a.scrollLeft || 0, o -= a.scrollTop || 0, a = a.parentNode;
                return {
                    x: r,
                    y: o
                }
            },
            s = function(e) {
                return {
                    w: e.offsetWidth || e.clientWidth,
                    h: e.offsetHeight || e.clientHeight
                }
            };
        return {
            get: t,
            hasClass: n,
            addClass: i,
            removeClass: r,
            getStyle: o,
            getPos: a,
            getSize: s
        }
    }), i(h, [u], function(e) {
        function t(e, t) {
            var n;
            for (n in e)
                if (e[n] === t) return n;
            return null
        }
        return {
            RuntimeError: function() {
                function n(e) {
                    this.code = e, this.name = t(i, e), this.message = this.name + ": RuntimeError " + this.code
                }
                var i = {
                    NOT_INIT_ERR: 1,
                    NOT_SUPPORTED_ERR: 9,
                    JS_ERR: 4
                };
                return e.extend(n, i), n.prototype = Error.prototype, n
            }(),
            OperationNotAllowedException: function() {
                function t(e) {
                    this.code = e, this.name = "OperationNotAllowedException"
                }
                return e.extend(t, {
                    NOT_ALLOWED_ERR: 1
                }), t.prototype = Error.prototype, t
            }(),
            ImageError: function() {
                function n(e) {
                    this.code = e, this.name = t(i, e), this.message = this.name + ": ImageError " + this.code
                }
                var i = {
                    WRONG_FORMAT: 1,
                    MAX_RESOLUTION_ERR: 2
                };
                return e.extend(n, i), n.prototype = Error.prototype, n
            }(),
            FileException: function() {
                function n(e) {
                    this.code = e, this.name = t(i, e), this.message = this.name + ": FileException " + this.code
                }
                var i = {
                    NOT_FOUND_ERR: 1,
                    SECURITY_ERR: 2,
                    ABORT_ERR: 3,
                    NOT_READABLE_ERR: 4,
                    ENCODING_ERR: 5,
                    NO_MODIFICATION_ALLOWED_ERR: 6,
                    INVALID_STATE_ERR: 7,
                    SYNTAX_ERR: 8
                };
                return e.extend(n, i), n.prototype = Error.prototype, n
            }(),
            DOMException: function() {
                function n(e) {
                    this.code = e, this.name = t(i, e), this.message = this.name + ": DOMException " + this.code
                }
                var i = {
                    INDEX_SIZE_ERR: 1,
                    DOMSTRING_SIZE_ERR: 2,
                    HIERARCHY_REQUEST_ERR: 3,
                    WRONG_DOCUMENT_ERR: 4,
                    INVALID_CHARACTER_ERR: 5,
                    NO_DATA_ALLOWED_ERR: 6,
                    NO_MODIFICATION_ALLOWED_ERR: 7,
                    NOT_FOUND_ERR: 8,
                    NOT_SUPPORTED_ERR: 9,
                    INUSE_ATTRIBUTE_ERR: 10,
                    INVALID_STATE_ERR: 11,
                    SYNTAX_ERR: 12,
                    INVALID_MODIFICATION_ERR: 13,
                    NAMESPACE_ERR: 14,
                    INVALID_ACCESS_ERR: 15,
                    VALIDATION_ERR: 16,
                    TYPE_MISMATCH_ERR: 17,
                    SECURITY_ERR: 18,
                    NETWORK_ERR: 19,
                    ABORT_ERR: 20,
                    URL_MISMATCH_ERR: 21,
                    QUOTA_EXCEEDED_ERR: 22,
                    TIMEOUT_ERR: 23,
                    INVALID_NODE_TYPE_ERR: 24,
                    DATA_CLONE_ERR: 25
                };
                return e.extend(n, i), n.prototype = Error.prototype, n
            }(),
            EventException: function() {
                function t(e) {
                    this.code = e, this.name = "EventException"
                }
                return e.extend(t, {
                    UNSPECIFIED_EVENT_TYPE_ERR: 0
                }), t.prototype = Error.prototype, t
            }()
        }
    }), i(p, [h, u], function(e, t) {
        function n() {
            var n = {};
            t.extend(this, {
                uid: null,
                init: function() {
                    this.uid || (this.uid = t.guid("uid_"))
                },
                addEventListener: function(e, i, r, o) {
                    var a = this,
                        s;
                    return e = t.trim(e), /\s/.test(e) ? void t.each(e.split(/\s+/), function(e) {
                        a.addEventListener(e, i, r, o)
                    }) : (e = e.toLowerCase(), r = parseInt(r, 10) || 0, s = n[this.uid] && n[this.uid][e] || [], s.push({
                        fn: i,
                        priority: r,
                        scope: o || this
                    }), n[this.uid] || (n[this.uid] = {}), void(n[this.uid][e] = s))
                },
                hasEventListener: function(e) {
                    return e ? !(!n[this.uid] || !n[this.uid][e]) : !!n[this.uid]
                },
                removeEventListener: function(e, i) {
                    e = e.toLowerCase();
                    var r = n[this.uid] && n[this.uid][e],
                        o;
                    if (r) {
                        if (i) {
                            for (o = r.length - 1; o >= 0; o--)
                                if (r[o].fn === i) {
                                    r.splice(o, 1);
                                    break
                                }
                        } else r = [];
                        r.length || (delete n[this.uid][e], t.isEmptyObj(n[this.uid]) && delete n[this.uid])
                    }
                },
                removeAllEventListeners: function() {
                    n[this.uid] && delete n[this.uid]
                },
                dispatchEvent: function(i) {
                    var r, o, a, s, u = {},
                        c = !0,
                        l;
                    if ("string" !== t.typeOf(i)) {
                        if (s = i, "string" !== t.typeOf(s.type)) throw new e.EventException(e.EventException.UNSPECIFIED_EVENT_TYPE_ERR);
                        i = s.type, s.total !== l && s.loaded !== l && (u.total = s.total, u.loaded = s.loaded), u.async = s.async || !1
                    }
                    if (-1 !== i.indexOf("::") ? ! function(e) {
                            r = e[0], i = e[1]
                        }(i.split("::")) : r = this.uid, i = i.toLowerCase(), o = n[r] && n[r][i]) {
                        o.sort(function(e, t) {
                            return t.priority - e.priority
                        }), a = [].slice.call(arguments), a.shift(), u.type = i, a.unshift(u);
                        var d = [];
                        t.each(o, function(e) {
                            a[0].target = e.scope, d.push(u.async ? function(t) {
                                setTimeout(function() {
                                    t(e.fn.apply(e.scope, a) === !1)
                                }, 1)
                            } : function(t) {
                                t(e.fn.apply(e.scope, a) === !1)
                            })
                        }), d.length && t.inSeries(d, function(e) {
                            c = !e
                        })
                    }
                    return c
                },
                bind: function() {
                    this.addEventListener.apply(this, arguments)
                },
                unbind: function() {
                    this.removeEventListener.apply(this, arguments)
                },
                unbindAll: function() {
                    this.removeAllEventListeners.apply(this, arguments)
                },
                trigger: function() {
                    return this.dispatchEvent.apply(this, arguments)
                },
                convertEventPropsToHandlers: function(e) {
                    var n;
                    "array" !== t.typeOf(e) && (e = [e]);
                    for (var i = 0; i < e.length; i++) n = "on" + e[i], "function" === t.typeOf(this[n]) ? this.addEventListener(e[i], this[n]) : "undefined" === t.typeOf(this[n]) && (this[n] = null)
                }
            })
        }
        return n.instance = new n, n
    }), i(m, [], function() {
        var e = function(e) {
                return unescape(encodeURIComponent(e))
            },
            t = function(e) {
                return decodeURIComponent(escape(e))
            },
            n = function(e, n) {
                if ("function" == typeof window.atob) return n ? t(window.atob(e)) : window.atob(e);
                var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                    r, o, a, s, u, c, l, d, f = 0,
                    h = 0,
                    p = "",
                    m = [];
                if (!e) return e;
                e += "";
                do s = i.indexOf(e.charAt(f++)), u = i.indexOf(e.charAt(f++)), c = i.indexOf(e.charAt(f++)), l = i.indexOf(e.charAt(f++)), d = s << 18 | u << 12 | c << 6 | l, r = d >> 16 & 255, o = d >> 8 & 255, a = 255 & d, m[h++] = 64 == c ? String.fromCharCode(r) : 64 == l ? String.fromCharCode(r, o) : String.fromCharCode(r, o, a); while (f < e.length);
                return p = m.join(""), n ? t(p) : p
            },
            i = function(t, n) {
                if (n && e(t), "function" == typeof window.btoa) return window.btoa(t);
                var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                    r, o, a, s, u, c, l, d, f = 0,
                    h = 0,
                    p = "",
                    m = [];
                if (!t) return t;
                do r = t.charCodeAt(f++), o = t.charCodeAt(f++), a = t.charCodeAt(f++), d = r << 16 | o << 8 | a, s = d >> 18 & 63, u = d >> 12 & 63, c = d >> 6 & 63, l = 63 & d, m[h++] = i.charAt(s) + i.charAt(u) + i.charAt(c) + i.charAt(l); while (f < t.length);
                p = m.join("");
                var g = t.length % 3;
                return (g ? p.slice(0, g - 3) : p) + "===".slice(g || 3)
            };
        return {
            utf8_encode: e,
            utf8_decode: t,
            atob: n,
            btoa: i
        }
    }), i(g, [u, f, p], function(e, t, n) {
        function i(n, r, a, s, u) {
            var c = this,
                l, d = e.guid(r + "_"),
                f = u || "browser";
            n = n || {}, o[d] = this, a = e.extend({
                access_binary: !1,
                access_image_binary: !1,
                display_media: !1,
                do_cors: !1,
                drag_and_drop: !1,
                filter_by_extension: !0,
                resize_image: !1,
                report_upload_progress: !1,
                return_response_headers: !1,
                return_response_type: !1,
                return_status_code: !0,
                send_custom_headers: !1,
                select_file: !1,
                select_folder: !1,
                select_multiple: !0,
                send_binary_string: !1,
                send_browser_cookies: !0,
                send_multipart: !0,
                slice_blob: !1,
                stream_upload: !1,
                summon_file_dialog: !1,
                upload_filesize: !0,
                use_http_method: !0
            }, a), n.preferred_caps && (f = i.getMode(s, n.preferred_caps, f)), l = function() {
                var t = {};
                return {
                    exec: function(e, n, i, r) {
                        return l[n] && (t[e] || (t[e] = {
                            context: this,
                            instance: new l[n]
                        }), t[e].instance[i]) ? t[e].instance[i].apply(this, r) : void 0
                    },
                    removeInstance: function(e) {
                        delete t[e]
                    },
                    removeAllInstances: function() {
                        var n = this;
                        e.each(t, function(t, i) {
                            "function" === e.typeOf(t.instance.destroy) && t.instance.destroy.call(t.context), n.removeInstance(i)
                        })
                    }
                }
            }(), e.extend(this, {
                initialized: !1,
                uid: d,
                type: r,
                mode: i.getMode(s, n.required_caps, f),
                shimid: d + "_container",
                clients: 0,
                options: n,
                can: function(t, n) {
                    var r = arguments[2] || a;
                    if ("string" === e.typeOf(t) && "undefined" === e.typeOf(n) && (t = i.parseCaps(t)), "object" === e.typeOf(t)) {
                        for (var o in t)
                            if (!this.can(o, t[o], r)) return !1;
                        return !0
                    }
                    return "function" === e.typeOf(r[t]) ? r[t].call(this, n) : n === r[t]
                },
                getShimContainer: function() {
                    var n, i = t.get(this.shimid);
                    return i || (n = this.options.container ? t.get(this.options.container) : document.body, i = document.createElement("div"), i.id = this.shimid, i.className = "moxie-shim moxie-shim-" + this.type, e.extend(i.style, {
                        position: "absolute",
                        top: "0px",
                        left: "0px",
                        width: "1px",
                        height: "1px",
                        overflow: "hidden"
                    }), n.appendChild(i), n = null), i
                },
                getShim: function() {
                    return l
                },
                shimExec: function(e, t) {
                    var n = [].slice.call(arguments, 2);
                    return c.getShim().exec.call(this, this.uid, e, t, n)
                },
                exec: function(e, t) {
                    var n = [].slice.call(arguments, 2);
                    return c[e] && c[e][t] ? c[e][t].apply(this, n) : c.shimExec.apply(this, arguments)
                },
                destroy: function() {
                    if (c) {
                        var e = t.get(this.shimid);
                        e && e.parentNode.removeChild(e), l && l.removeAllInstances(), this.unbindAll(), delete o[this.uid], this.uid = null, d = c = l = e = null
                    }
                }
            }), this.mode && n.required_caps && !this.can(n.required_caps) && (this.mode = !1)
        }
        var r = {},
            o = {};
        return i.order = "html5,flash,silverlight,html4", i.getRuntime = function(e) {
            return o[e] ? o[e] : !1
        }, i.addConstructor = function(e, t) {
            t.prototype = n.instance, r[e] = t
        }, i.getConstructor = function(e) {
            return r[e] || null
        }, i.getInfo = function(e) {
            var t = i.getRuntime(e);
            return t ? {
                uid: t.uid,
                type: t.type,
                mode: t.mode,
                can: function() {
                    return t.can.apply(t, arguments)
                }
            } : null
        }, i.parseCaps = function(t) {
            var n = {};
            return "string" !== e.typeOf(t) ? t || {} : (e.each(t.split(","), function(e) {
                n[e] = !0
            }), n)
        }, i.can = function(e, t) {
            var n, r = i.getConstructor(e),
                o;
            return r ? (n = new r({
                required_caps: t
            }), o = n.mode, n.destroy(), !!o) : !1
        }, i.thatCan = function(e, t) {
            var n = (t || i.order).split(/\s*,\s*/);
            for (var r in n)
                if (i.can(n[r], e)) return n[r];
            return null
        }, i.getMode = function(t, n, i) {
            var r = null;
            if ("undefined" === e.typeOf(i) && (i = "browser"), n && !e.isEmptyObj(t)) {
                if (e.each(n, function(n, i) {
                        if (t.hasOwnProperty(i)) {
                            var o = t[i](n);
                            if ("string" == typeof o && (o = [o]), r) {
                                if (!(r = e.arrayIntersect(r, o))) return r = !1
                            } else r = o
                        }
                    }), r) return -1 !== e.inArray(i, r) ? i : r[0];
                if (r === !1) return !1
            }
            return i
        }, i.capTrue = function() {
            return !0
        }, i.capFalse = function() {
            return !1
        }, i.capTest = function(e) {
            return function() {
                return !!e
            }
        }, i
    }), i(v, [h, u, g], function(e, t, n) {
        return function i() {
            var i;
            t.extend(this, {
                connectRuntime: function(r) {
                    function o(t) {
                        var s, u;
                        return t.length ? (s = t.shift(), (u = n.getConstructor(s)) ? (i = new u(r), i.bind("Init", function() {
                            i.initialized = !0, setTimeout(function() {
                                i.clients++, a.trigger("RuntimeInit", i)
                            }, 1)
                        }), i.bind("Error", function() {
                            i.destroy(), o(t)
                        }), i.mode ? void i.init() : void i.trigger("Error")) : void o(t)) : (a.trigger("RuntimeError", new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)), void(i = null))
                    }
                    var a = this,
                        s;
                    if ("string" === t.typeOf(r) ? s = r : "string" === t.typeOf(r.ruid) && (s = r.ruid), s) {
                        if (i = n.getRuntime(s)) return i.clients++, i;
                        throw new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)
                    }
                    o((r.runtime_order || n.order).split(/\s*,\s*/))
                },
                getRuntime: function() {
                    return i && i.uid ? i : (i = null, null)
                },
                disconnectRuntime: function() {
                    i && --i.clients <= 0 && (i.destroy(), i = null)
                }
            })
        }
    }), i(y, [u, m, v], function(e, t, n) {
        function i(o, a) {
            function s(t, n, o) {
                var a, s = r[this.uid];
                return "string" === e.typeOf(s) && s.length ? (a = new i(null, {
                    type: o,
                    size: n - t
                }), a.detach(s.substr(t, a.size)), a) : null
            }
            n.call(this), o && this.connectRuntime(o), a ? "string" === e.typeOf(a) && (a = {
                data: a
            }) : a = {}, e.extend(this, {
                uid: a.uid || e.guid("uid_"),
                ruid: o,
                size: a.size || 0,
                type: a.type || "",
                slice: function(e, t, n) {
                    return this.isDetached() ? s.apply(this, arguments) : this.getRuntime().exec.call(this, "Blob", "slice", this.getSource(), e, t, n)
                },
                getSource: function() {
                    return r[this.uid] ? r[this.uid] : null
                },
                detach: function(e) {
                    this.ruid && (this.getRuntime().exec.call(this, "Blob", "destroy"), this.disconnectRuntime(), this.ruid = null), e = e || "";
                    var n = e.match(/^data:([^;]*);base64,/);
                    n && (this.type = n[1], e = t.atob(e.substring(e.indexOf("base64,") + 7))), this.size = e.length, r[this.uid] = e
                },
                isDetached: function() {
                    return !this.ruid && "string" === e.typeOf(r[this.uid])
                },
                destroy: function() {
                    this.detach(), delete r[this.uid]
                }
            }), a.data ? this.detach(a.data) : r[this.uid] = a
        }
        var r = {};
        return i
    }), i(w, [u, l, y], function(e, t, n) {
        function i(i, r) {
            var o, a;
            if (r || (r = {}), a = r.type && "" !== r.type ? r.type : t.getFileMime(r.name), r.name) o = r.name.replace(/\\/g, "/"), o = o.substr(o.lastIndexOf("/") + 1);
            else {
                var s = a.split("/")[0];
                o = e.guid(("" !== s ? s : "file") + "_"), t.extensions[a] && (o += "." + t.extensions[a][0])
            }
            n.apply(this, arguments), e.extend(this, {
                type: a || "",
                name: o || e.guid("file_"),
                lastModifiedDate: r.lastModifiedDate || (new Date).toLocaleString()
            })
        }
        return i.prototype = n.prototype, i
    }), i(E, [u, l, f, h, p, c, w, g, v], function(e, t, n, i, r, o, a, s, u) {
        function c(r) {
            var c = this,
                d, f, h;
            if (-1 !== e.inArray(e.typeOf(r), ["string", "node"]) && (r = {
                    browse_button: r
                }), f = n.get(r.browse_button), !f) throw new i.DOMException(i.DOMException.NOT_FOUND_ERR);
            h = {
                accept: [{
                    title: o.translate("All Files"),
                    extensions: "*"
                }],
                name: "file",
                multiple: !1,
                required_caps: !1,
                container: f.parentNode || document.body
            }, r = e.extend({}, h, r), "string" == typeof r.required_caps && (r.required_caps = s.parseCaps(r.required_caps)), "string" == typeof r.accept && (r.accept = t.mimes2extList(r.accept)), d = n.get(r.container), d || (d = document.body), "static" === n.getStyle(d, "position") && (d.style.position = "relative"), d = f = null, u.call(c), e.extend(c, {
                uid: e.guid("uid_"),
                ruid: null,
                shimid: null,
                files: null,
                init: function() {
                    c.convertEventPropsToHandlers(l), c.bind("RuntimeInit", function(t, i) {
                        c.ruid = i.uid, c.shimid = i.shimid, c.bind("Ready", function() {
                            c.trigger("Refresh")
                        }, 999), c.bind("Change", function() {
                            var t = i.exec.call(c, "FileInput", "getFiles");
                            c.files = [], e.each(t, function(e) {
                                return 0 === e.size ? !0 : void c.files.push(new a(c.ruid, e))
                            })
                        }, 999), c.bind("Refresh", function() {
                            var t, o, a, s;
                            a = n.get(r.browse_button), s = n.get(i.shimid), a && (t = n.getPos(a, n.get(r.container)), o = n.getSize(a), s && e.extend(s.style, {
                                top: t.y + "px",
                                left: t.x + "px",
                                width: o.w + "px",
                                height: o.h + "px"
                            })), s = a = null
                        }), i.exec.call(c, "FileInput", "init", r)
                    }), c.connectRuntime(e.extend({}, r, {
                        required_caps: {
                            select_file: !0
                        }
                    }))
                },
                disable: function(t) {
                    var n = this.getRuntime();
                    n && n.exec.call(this, "FileInput", "disable", "undefined" === e.typeOf(t) ? !0 : t)
                },
                refresh: function() {
                    c.trigger("Refresh")
                },
                destroy: function() {
                    var t = this.getRuntime();
                    t && (t.exec.call(this, "FileInput", "destroy"), this.disconnectRuntime()), "array" === e.typeOf(this.files) && e.each(this.files, function(e) {
                        e.destroy()
                    }), this.files = null
                }
            })
        }
        var l = ["ready", "change", "cancel", "mouseenter", "mouseleave", "mousedown", "mouseup"];
        return c.prototype = r.instance, c
    }), i(_, [c, f, h, u, w, v, p, l], function(e, t, n, i, r, o, a, s) {
        function u(n) {
            var a = this,
                u;
            "string" == typeof n && (n = {
                drop_zone: n
            }), u = {
                accept: [{
                    title: e.translate("All Files"),
                    extensions: "*"
                }],
                required_caps: {
                    drag_and_drop: !0
                }
            }, n = "object" == typeof n ? i.extend({}, u, n) : u, n.container = t.get(n.drop_zone) || document.body, "static" === t.getStyle(n.container, "position") && (n.container.style.position = "relative"), "string" == typeof n.accept && (n.accept = s.mimes2extList(n.accept)), o.call(a), i.extend(a, {
                uid: i.guid("uid_"),
                ruid: null,
                files: null,
                init: function() {
                    a.convertEventPropsToHandlers(c), a.bind("RuntimeInit", function(e, t) {
                        a.ruid = t.uid, a.bind("Drop", function() {
                            var e = t.exec.call(a, "FileDrop", "getFiles");
                            a.files = [], i.each(e, function(e) {
                                a.files.push(new r(a.ruid, e))
                            })
                        }, 999), t.exec.call(a, "FileDrop", "init", n), a.dispatchEvent("ready")
                    }), a.connectRuntime(n)
                },
                destroy: function() {
                    var e = this.getRuntime();
                    e && (e.exec.call(this, "FileDrop", "destroy"), this.disconnectRuntime()), this.files = null
                }
            })
        }
        var c = ["ready", "dragenter", "dragleave", "drop", "error"];
        return u.prototype = a.instance, u
    }), i(x, [u, v, p], function(e, t, n) {
        function i() {
            this.uid = e.guid("uid_"), t.call(this), this.destroy = function() {
                this.disconnectRuntime(), this.unbindAll()
            }
        }
        return i.prototype = n.instance, i
    }), i(b, [u, m, h, p, y, w, x], function(e, t, n, i, r, o, a) {
        function s() {
            function i(e, i) {
                function l(e) {
                    o.readyState = s.DONE, o.error = e, o.trigger("error"), d()
                }

                function d() {
                    c.destroy(), c = null, o.trigger("loadend")
                }

                function f(t) {
                    c.bind("Error", function(e, t) {
                        l(t)
                    }), c.bind("Progress", function(e) {
                        o.result = t.exec.call(c, "FileReader", "getResult"), o.trigger(e)
                    }), c.bind("Load", function(e) {
                        o.readyState = s.DONE, o.result = t.exec.call(c, "FileReader", "getResult"), o.trigger(e), d()
                    }), t.exec.call(c, "FileReader", "read", e, i)
                }
                if (c = new a, this.convertEventPropsToHandlers(u), this.readyState === s.LOADING) return l(new n.DOMException(n.DOMException.INVALID_STATE_ERR));
                if (this.readyState = s.LOADING, this.trigger("loadstart"), i instanceof r)
                    if (i.isDetached()) {
                        var h = i.getSource();
                        switch (e) {
                            case "readAsText":
                            case "readAsBinaryString":
                                this.result = h;
                                break;
                            case "readAsDataURL":
                                this.result = "data:" + i.type + ";base64," + t.btoa(h)
                        }
                        this.readyState = s.DONE, this.trigger("load"), d()
                    } else f(c.connectRuntime(i.ruid));
                else l(new n.DOMException(n.DOMException.NOT_FOUND_ERR))
            }
            var o = this,
                c;
            e.extend(this, {
                uid: e.guid("uid_"),
                readyState: s.EMPTY,
                result: null,
                error: null,
                readAsBinaryString: function(e) {
                    i.call(this, "readAsBinaryString", e)
                },
                readAsDataURL: function(e) {
                    i.call(this, "readAsDataURL", e)
                },
                readAsText: function(e) {
                    i.call(this, "readAsText", e)
                },
                abort: function() {
                    this.result = null, -1 === e.inArray(this.readyState, [s.EMPTY, s.DONE]) && (this.readyState === s.LOADING && (this.readyState = s.DONE), c && c.getRuntime().exec.call(this, "FileReader", "abort"), this.trigger("abort"), this.trigger("loadend"))
                },
                destroy: function() {
                    this.abort(), c && (c.getRuntime().exec.call(this, "FileReader", "destroy"), c.disconnectRuntime()), o = c = null
                }
            })
        }
        var u = ["loadstart", "progress", "load", "abort", "error", "loadend"];
        return s.EMPTY = 0, s.LOADING = 1, s.DONE = 2, s.prototype = i.instance, s
    }), i(R, [], function() {
        var e = function(t, n) {
                for (var i = ["source", "scheme", "authority", "userInfo", "user", "pass", "host", "port", "relative", "path", "directory", "file", "query", "fragment"], r = i.length, o = {
                        http: 80,
                        https: 443
                    }, a = {}, s = /^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/, u = s.exec(t || ""); r--;) u[r] && (a[i[r]] = u[r]);
                if (!a.scheme) {
                    n && "string" != typeof n || (n = e(n || document.location.href)), a.scheme = n.scheme, a.host = n.host, a.port = n.port;
                    var c = "";
                    /^[^\/]/.test(a.path) && (c = n.path, /(\/|\/[^\.]+)$/.test(c) ? c += "/" : c = c.replace(/\/[^\/]+$/, "/")), a.path = c + (a.path || "")
                }
                return a.port || (a.port = o[a.scheme] || 80), a.port = parseInt(a.port, 10), a.path || (a.path = "/"), delete a.source, a
            },
            t = function(t) {
                var n = {
                        http: 80,
                        https: 443
                    },
                    i = e(t);
                return i.scheme + "://" + i.host + (i.port !== n[i.scheme] ? ":" + i.port : "") + i.path + (i.query ? i.query : "")
            },
            n = function(t) {
                function n(e) {
                    return [e.scheme, e.host, e.port].join("/")
                }
                return "string" == typeof t && (t = e(t)), n(e()) === n(t)
            };
        return {
            parseUrl: e,
            resolveUrl: t,
            hasSameOrigin: n
        }
    }), i(T, [u, v, m], function(e, t, n) {
        return function() {
            function i(e, t) {
                if (!t.isDetached()) {
                    var i = this.connectRuntime(t.ruid).exec.call(this, "FileReaderSync", "read", e, t);
                    return this.disconnectRuntime(), i
                }
                var r = t.getSource();
                switch (e) {
                    case "readAsBinaryString":
                        return r;
                    case "readAsDataURL":
                        return "data:" + t.type + ";base64," + n.btoa(r);
                    case "readAsText":
                        for (var o = "", a = 0, s = r.length; s > a; a++) o += String.fromCharCode(r[a]);
                        return o
                }
            }
            t.call(this), e.extend(this, {
                uid: e.guid("uid_"),
                readAsBinaryString: function(e) {
                    return i.call(this, "readAsBinaryString", e)
                },
                readAsDataURL: function(e) {
                    return i.call(this, "readAsDataURL", e)
                },
                readAsText: function(e) {
                    return i.call(this, "readAsText", e)
                }
            })
        }
    }), i(A, [h, u, y], function(e, t, n) {
        function i() {
            var e, i = [];
            t.extend(this, {
                append: function(r, o) {
                    var a = this,
                        s = t.typeOf(o);
                    o instanceof n ? e = {
                        name: r,
                        value: o
                    } : "array" === s ? (r += "[]", t.each(o, function(e) {
                        a.append(r, e)
                    })) : "object" === s ? t.each(o, function(e, t) {
                        a.append(r + "[" + t + "]", e)
                    }) : "null" === s || "undefined" === s || "number" === s && isNaN(o) ? a.append(r, "false") : i.push({
                        name: r,
                        value: o.toString()
                    })
                },
                hasBlob: function() {
                    return !!this.getBlob()
                },
                getBlob: function() {
                    return e && e.value || null
                },
                getBlobName: function() {
                    return e && e.name || null
                },
                each: function(n) {
                    t.each(i, function(e) {
                        n(e.value, e.name)
                    }), e && n(e.value, e.name)
                },
                destroy: function() {
                    e = null, i = []
                }
            })
        }
        return i
    }), i(S, [u, h, p, m, R, g, x, y, T, A, d, l], function(e, t, n, i, r, o, a, s, u, c, l, d) {
        function f() {
            this.uid = e.guid("uid_")
        }

        function h() {
            function n(e, t) {
                return y.hasOwnProperty(e) ? 1 === arguments.length ? l.can("define_property") ? y[e] : v[e] : void(l.can("define_property") ? y[e] = t : v[e] = t) : void 0
            }

            function u(t) {
                function i() {
                    k && (k.destroy(), k = null), s.dispatchEvent("loadend"), s = null
                }

                function r(r) {
                    k.bind("LoadStart", function(e) {
                        n("readyState", h.LOADING), s.dispatchEvent("readystatechange"), s.dispatchEvent(e), I && s.upload.dispatchEvent(e)
                    }), k.bind("Progress", function(e) {
                        n("readyState") !== h.LOADING && (n("readyState", h.LOADING), s.dispatchEvent("readystatechange")), s.dispatchEvent(e)
                    }), k.bind("UploadProgress", function(e) {
                        I && s.upload.dispatchEvent({
                            type: "progress",
                            lengthComputable: !1,
                            total: e.total,
                            loaded: e.loaded
                        })
                    }), k.bind("Load", function(t) {
                        n("readyState", h.DONE), n("status", Number(r.exec.call(k, "XMLHttpRequest", "getStatus") || 0)), n("statusText", p[n("status")] || ""), n("response", r.exec.call(k, "XMLHttpRequest", "getResponse", n("responseType"))), ~e.inArray(n("responseType"), ["text", ""]) ? n("responseText", n("response")) : "document" === n("responseType") && n("responseXML", n("response")), U = r.exec.call(k, "XMLHttpRequest", "getAllResponseHeaders"), s.dispatchEvent("readystatechange"), n("status") > 0 ? (I && s.upload.dispatchEvent(t), s.dispatchEvent(t)) : (N = !0, s.dispatchEvent("error")), i()
                    }), k.bind("Abort", function(e) {
                        s.dispatchEvent(e), i()
                    }), k.bind("Error", function(e) {
                        N = !0, n("readyState", h.DONE), s.dispatchEvent("readystatechange"), D = !0, s.dispatchEvent(e), i()
                    }), r.exec.call(k, "XMLHttpRequest", "send", {
                        url: E,
                        method: _,
                        async: w,
                        user: b,
                        password: R,
                        headers: x,
                        mimeType: A,
                        encoding: T,
                        responseType: s.responseType,
                        withCredentials: s.withCredentials,
                        options: P
                    }, t)
                }
                var s = this;
                M = (new Date).getTime(), k = new a, "string" == typeof P.required_caps && (P.required_caps = o.parseCaps(P.required_caps)), P.required_caps = e.extend({}, P.required_caps, {
                    return_response_type: s.responseType
                }), t instanceof c && (P.required_caps.send_multipart = !0), L || (P.required_caps.do_cors = !0), P.ruid ? r(k.connectRuntime(P)) : (k.bind("RuntimeInit", function(e, t) {
                    r(t)
                }), k.bind("RuntimeError", function(e, t) {
                    s.dispatchEvent("RuntimeError", t)
                }), k.connectRuntime(P))
            }

            function g() {
                n("responseText", ""), n("responseXML", null), n("response", null), n("status", 0), n("statusText", ""), M = C = null
            }
            var v = this,
                y = {
                    timeout: 0,
                    readyState: h.UNSENT,
                    withCredentials: !1,
                    status: 0,
                    statusText: "",
                    responseType: "",
                    responseXML: null,
                    responseText: null,
                    response: null
                },
                w = !0,
                E, _, x = {},
                b, R, T = null,
                A = null,
                S = !1,
                O = !1,
                I = !1,
                D = !1,
                N = !1,
                L = !1,
                M, C, F = null,
                H = null,
                P = {},
                k, U = "",
                B;
            e.extend(this, y, {
                uid: e.guid("uid_"),
                upload: new f,
                open: function(o, a, s, u, c) {
                    var l;
                    if (!o || !a) throw new t.DOMException(t.DOMException.SYNTAX_ERR);
                    if (/[\u0100-\uffff]/.test(o) || i.utf8_encode(o) !== o) throw new t.DOMException(t.DOMException.SYNTAX_ERR);
                    if (~e.inArray(o.toUpperCase(), ["CONNECT", "DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT", "TRACE", "TRACK"]) && (_ = o.toUpperCase()), ~e.inArray(_, ["CONNECT", "TRACE", "TRACK"])) throw new t.DOMException(t.DOMException.SECURITY_ERR);
                    if (a = i.utf8_encode(a), l = r.parseUrl(a), L = r.hasSameOrigin(l), E = r.resolveUrl(a), (u || c) && !L) throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);
                    if (b = u || l.user, R = c || l.pass, w = s || !0, w === !1 && (n("timeout") || n("withCredentials") || "" !== n("responseType"))) throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);
                    S = !w, O = !1, x = {}, g.call(this), n("readyState", h.OPENED), this.convertEventPropsToHandlers(["readystatechange"]), this.dispatchEvent("readystatechange")
                },
                setRequestHeader: function(r, o) {
                    var a = ["accept-charset", "accept-encoding", "access-control-request-headers", "access-control-request-method", "connection", "content-length", "cookie", "cookie2", "content-transfer-encoding", "date", "expect", "host", "keep-alive", "origin", "referer", "te", "trailer", "transfer-encoding", "upgrade", "user-agent", "via"];
                    if (n("readyState") !== h.OPENED || O) throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
                    if (/[\u0100-\uffff]/.test(r) || i.utf8_encode(r) !== r) throw new t.DOMException(t.DOMException.SYNTAX_ERR);
                    return r = e.trim(r).toLowerCase(), ~e.inArray(r, a) || /^(proxy\-|sec\-)/.test(r) ? !1 : (x[r] ? x[r] += ", " + o : x[r] = o, !0)
                },
                getAllResponseHeaders: function() {
                    return U || ""
                },
                getResponseHeader: function(t) {
                    return t = t.toLowerCase(), N || ~e.inArray(t, ["set-cookie", "set-cookie2"]) ? null : U && "" !== U && (B || (B = {}, e.each(U.split(/\r\n/), function(t) {
                        var n = t.split(/:\s+/);
                        2 === n.length && (n[0] = e.trim(n[0]), B[n[0].toLowerCase()] = {
                            header: n[0],
                            value: e.trim(n[1])
                        })
                    })), B.hasOwnProperty(t)) ? B[t].header + ": " + B[t].value : null
                },
                overrideMimeType: function(i) {
                    var r, o;
                    if (~e.inArray(n("readyState"), [h.LOADING, h.DONE])) throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
                    if (i = e.trim(i.toLowerCase()), /;/.test(i) && (r = i.match(/^([^;]+)(?:;\scharset\=)?(.*)$/)) && (i = r[1], r[2] && (o = r[2])), !d.mimes[i]) throw new t.DOMException(t.DOMException.SYNTAX_ERR);
                    F = i, H = o
                },
                send: function(n, r) {
                    if (P = "string" === e.typeOf(r) ? {
                            ruid: r
                        } : r ? r : {}, this.convertEventPropsToHandlers(m), this.upload.convertEventPropsToHandlers(m), this.readyState !== h.OPENED || O) throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
                    if (n instanceof s) P.ruid = n.ruid, A = n.type || "application/octet-stream";
                    else if (n instanceof c) {
                        if (n.hasBlob()) {
                            var o = n.getBlob();
                            P.ruid = o.ruid, A = o.type || "application/octet-stream"
                        }
                    } else "string" == typeof n && (T = "UTF-8", A = "text/plain;charset=UTF-8", n = i.utf8_encode(n));
                    this.withCredentials || (this.withCredentials = P.required_caps && P.required_caps.send_browser_cookies && !L), I = !S && this.upload.hasEventListener(), N = !1, D = !n, S || (O = !0), u.call(this, n)
                },
                abort: function() {
                    if (N = !0, S = !1, ~e.inArray(n("readyState"), [h.UNSENT, h.OPENED, h.DONE])) n("readyState", h.UNSENT);
                    else {
                        if (n("readyState", h.DONE), O = !1, !k) throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
                        k.getRuntime().exec.call(k, "XMLHttpRequest", "abort", D), D = !0
                    }
                },
                destroy: function() {
                    k && ("function" === e.typeOf(k.destroy) && k.destroy(), k = null), this.unbindAll(), this.upload && (this.upload.unbindAll(), this.upload = null)
                }
            })
        }
        var p = {
            100: "Continue",
            101: "Switching Protocols",
            102: "Processing",
            200: "OK",
            201: "Created",
            202: "Accepted",
            203: "Non-Authoritative Information",
            204: "No Content",
            205: "Reset Content",
            206: "Partial Content",
            207: "Multi-Status",
            226: "IM Used",
            300: "Multiple Choices",
            301: "Moved Permanently",
            302: "Found",
            303: "See Other",
            304: "Not Modified",
            305: "Use Proxy",
            306: "Reserved",
            307: "Temporary Redirect",
            400: "Bad Request",
            401: "Unauthorized",
            402: "Payment Required",
            403: "Forbidden",
            404: "Not Found",
            405: "Method Not Allowed",
            406: "Not Acceptable",
            407: "Proxy Authentication Required",
            408: "Request Timeout",
            409: "Conflict",
            410: "Gone",
            411: "Length Required",
            412: "Precondition Failed",
            413: "Request Entity Too Large",
            414: "Request-URI Too Long",
            415: "Unsupported Media Type",
            416: "Requested Range Not Satisfiable",
            417: "Expectation Failed",
            422: "Unprocessable Entity",
            423: "Locked",
            424: "Failed Dependency",
            426: "Upgrade Required",
            500: "Internal Server Error",
            501: "Not Implemented",
            502: "Bad Gateway",
            503: "Service Unavailable",
            504: "Gateway Timeout",
            505: "HTTP Version Not Supported",
            506: "Variant Also Negotiates",
            507: "Insufficient Storage",
            510: "Not Extended"
        };
        f.prototype = n.instance;
        var m = ["loadstart", "progress", "abort", "error", "load", "timeout", "loadend"],
            g = 1,
            v = 2;
        return h.UNSENT = 0, h.OPENED = 1, h.HEADERS_RECEIVED = 2, h.LOADING = 3, h.DONE = 4, h.prototype = n.instance, h
    }), i(O, [u, m, v, p], function(e, t, n, i) {
        function r() {
            function i() {
                l = d = 0, c = this.result = null
            }

            function o(t, n) {
                var i = this;
                u = n, i.bind("TransportingProgress", function(t) {
                    d = t.loaded, l > d && -1 === e.inArray(i.state, [r.IDLE, r.DONE]) && a.call(i)
                }, 999), i.bind("TransportingComplete", function() {
                    d = l, i.state = r.DONE, c = null, i.result = u.exec.call(i, "Transporter", "getAsBlob", t || "")
                }, 999), i.state = r.BUSY, i.trigger("TransportingStarted"), a.call(i)
            }

            function a() {
                var e = this,
                    n, i = l - d;
                f > i && (f = i), n = t.btoa(c.substr(d, f)), u.exec.call(e, "Transporter", "receive", n, l)
            }
            var s, u, c, l, d, f;
            n.call(this), e.extend(this, {
                uid: e.guid("uid_"),
                state: r.IDLE,
                result: null,
                transport: function(t, n, r) {
                    var a = this;
                    if (r = e.extend({
                            chunk_size: 204798
                        }, r), (s = r.chunk_size % 3) && (r.chunk_size += 3 - s), f = r.chunk_size, i.call(this), c = t, l = t.length, "string" === e.typeOf(r) || r.ruid) o.call(a, n, this.connectRuntime(r));
                    else {
                        var u = function(e, t) {
                            a.unbind("RuntimeInit", u), o.call(a, n, t)
                        };
                        this.bind("RuntimeInit", u), this.connectRuntime(r)
                    }
                },
                abort: function() {
                    var e = this;
                    e.state = r.IDLE, u && (u.exec.call(e, "Transporter", "clear"), e.trigger("TransportingAborted")), i.call(e)
                },
                destroy: function() {
                    this.unbindAll(), u = null, this.disconnectRuntime(), i.call(this)
                }
            })
        }
        return r.IDLE = 0, r.BUSY = 1, r.DONE = 2, r.prototype = i.instance, r
    }), i(I, [u, f, h, T, S, g, v, O, d, p, y, w, m], function(e, t, n, i, r, o, a, s, u, c, l, d, f) {
        function h() {
            function i(e) {
                e || (e = this.getRuntime().exec.call(this, "Image", "getInfo")), this.size = e.size, this.width = e.width, this.height = e.height, this.type = e.type, this.meta = e.meta, "" === this.name && (this.name = e.name)
            }

            function c(t) {
                var i = e.typeOf(t);
                try {
                    if (t instanceof h) {
                        if (!t.size) throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);
                        m.apply(this, arguments)
                    } else if (t instanceof l) {
                        if (!~e.inArray(t.type, ["image/jpeg", "image/png"])) throw new n.ImageError(n.ImageError.WRONG_FORMAT);
                        g.apply(this, arguments)
                    } else if (-1 !== e.inArray(i, ["blob", "file"])) c.call(this, new d(null, t), arguments[1]);
                    else if ("string" === i) /^data:[^;]*;base64,/.test(t) ? c.call(this, new l(null, {
                        data: t
                    }), arguments[1]) : v.apply(this, arguments);
                    else {
                        if ("node" !== i || "img" !== t.nodeName.toLowerCase()) throw new n.DOMException(n.DOMException.TYPE_MISMATCH_ERR);
                        c.call(this, t.src, arguments[1])
                    }
                } catch (r) {
                    this.trigger("error", r.code)
                }
            }

            function m(t, n) {
                var i = this.connectRuntime(t.ruid);
                this.ruid = i.uid, i.exec.call(this, "Image", "loadFromImage", t, "undefined" === e.typeOf(n) ? !0 : n)
            }

            function g(t, n) {
                function i(e) {
                    r.ruid = e.uid, e.exec.call(r, "Image", "loadFromBlob", t)
                }
                var r = this;
                r.name = t.name || "", t.isDetached() ? (this.bind("RuntimeInit", function(e, t) {
                    i(t)
                }), n && "string" == typeof n.required_caps && (n.required_caps = o.parseCaps(n.required_caps)), this.connectRuntime(e.extend({
                    required_caps: {
                        access_image_binary: !0,
                        resize_image: !0
                    }
                }, n))) : i(this.connectRuntime(t.ruid))
            }

            function v(e, t) {
                var n = this,
                    i;
                i = new r, i.open("get", e), i.responseType = "blob", i.onprogress = function(e) {
                    n.trigger(e)
                }, i.onload = function() {
                    g.call(n, i.response, !0)
                }, i.onerror = function(e) {
                    n.trigger(e)
                }, i.onloadend = function() {
                    i.destroy()
                }, i.bind("RuntimeError", function(e, t) {
                    n.trigger("RuntimeError", t)
                }), i.send(null, t)
            }
            a.call(this), e.extend(this, {
                uid: e.guid("uid_"),
                ruid: null,
                name: "",
                size: 0,
                width: 0,
                height: 0,
                type: "",
                meta: {},
                clone: function() {
                    this.load.apply(this, arguments)
                },
                load: function() {
                    this.bind("Load Resize", function() {
                        i.call(this)
                    }, 999), this.convertEventPropsToHandlers(p), c.apply(this, arguments)
                },
                downsize: function(t) {
                    var i = {
                        width: this.width,
                        height: this.height,
                        crop: !1,
                        preserveHeaders: !0
                    };
                    t = "object" == typeof t ? e.extend(i, t) : e.extend(i, {
                        width: arguments[0],
                        height: arguments[1],
                        crop: arguments[2],
                        preserveHeaders: arguments[3]
                    });
                    try {
                        if (!this.size) throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);
                        if (this.width > h.MAX_RESIZE_WIDTH || this.height > h.MAX_RESIZE_HEIGHT) throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);
                        this.getRuntime().exec.call(this, "Image", "downsize", t.width, t.height, t.crop, t.preserveHeaders)
                    } catch (r) {
                        this.trigger("error", r.code)
                    }
                },
                crop: function(e, t, n) {
                    this.downsize(e, t, !0, n)
                },
                getAsCanvas: function() {
                    if (!u.can("create_canvas")) throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);
                    var e = this.connectRuntime(this.ruid);
                    return e.exec.call(this, "Image", "getAsCanvas")
                },
                getAsBlob: function(e, t) {
                    if (!this.size) throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);
                    return e || (e = "image/jpeg"), "image/jpeg" !== e || t || (t = 90), this.getRuntime().exec.call(this, "Image", "getAsBlob", e, t)
                },
                getAsDataURL: function(e, t) {
                    if (!this.size) throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);
                    return this.getRuntime().exec.call(this, "Image", "getAsDataURL", e, t)
                },
                getAsBinaryString: function(e, t) {
                    var n = this.getAsDataURL(e, t);
                    return f.atob(n.substring(n.indexOf("base64,") + 7))
                },
                embed: function(i) {
                    function r() {
                        if (u.can("create_canvas")) {
                            var t = a.getAsCanvas();
                            if (t) return i.appendChild(t), t = null, a.destroy(), void o.trigger("embedded")
                        }
                        var r = a.getAsDataURL(c, l);
                        if (!r) throw new n.ImageError(n.ImageError.WRONG_FORMAT);
                        if (u.can("use_data_uri_of", r.length)) i.innerHTML = '<img src="' + r + '" width="' + a.width + '" height="' + a.height + '" />', a.destroy(), o.trigger("embedded");
                        else {
                            var d = new s;
                            d.bind("TransportingComplete", function() {
                                v = o.connectRuntime(this.result.ruid), o.bind("Embedded", function() {
                                    e.extend(v.getShimContainer().style, {
                                        top: "0px",
                                        left: "0px",
                                        width: a.width + "px",
                                        height: a.height + "px"
                                    }), v = null
                                }, 999), v.exec.call(o, "ImageView", "display", this.result.uid, m, g), a.destroy()
                            }), d.transport(f.atob(r.substring(r.indexOf("base64,") + 7)), c, e.extend({}, p, {
                                required_caps: {
                                    display_media: !0
                                },
                                runtime_order: "flash,silverlight",
                                container: i
                            }))
                        }
                    }
                    var o = this,
                        a, c, l, d, p = arguments[1] || {},
                        m = this.width,
                        g = this.height,
                        v;
                    try {
                        if (!(i = t.get(i))) throw new n.DOMException(n.DOMException.INVALID_NODE_TYPE_ERR);
                        if (!this.size) throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);
                        if (this.width > h.MAX_RESIZE_WIDTH || this.height > h.MAX_RESIZE_HEIGHT) throw new n.ImageError(n.ImageError.MAX_RESOLUTION_ERR);
                        if (c = p.type || this.type || "image/jpeg", l = p.quality || 90, d = "undefined" !== e.typeOf(p.crop) ? p.crop : !1, p.width) m = p.width, g = p.height || m;
                        else {
                            var y = t.getSize(i);
                            y.w && y.h && (m = y.w, g = y.h)
                        }
                        return a = new h, a.bind("Resize", function() {
                            r.call(o)
                        }), a.bind("Load", function() {
                            a.downsize(m, g, d, !1)
                        }), a.clone(this, !1), a
                    } catch (w) {
                        this.trigger("error", w.code)
                    }
                },
                destroy: function() {
                    this.ruid && (this.getRuntime().exec.call(this, "Image", "destroy"), this.disconnectRuntime()), this.unbindAll()
                }
            })
        }
        var p = ["progress", "load", "error", "resize", "embedded"];
        return h.MAX_RESIZE_WIDTH = 6500, h.MAX_RESIZE_HEIGHT = 6500, h.prototype = c.instance, h
    }), i(D, [u, h, g, d], function(e, t, n, i) {
        function r(t) {
            var r = this,
                s = n.capTest,
                u = n.capTrue,
                c = e.extend({
                    access_binary: s(window.FileReader || window.File && window.File.getAsDataURL),
                    access_image_binary: function() {
                        return r.can("access_binary") && !!a.Image
                    },
                    display_media: s(i.can("create_canvas") || i.can("use_data_uri_over32kb")),
                    do_cors: s(window.XMLHttpRequest && "withCredentials" in new XMLHttpRequest),
                    drag_and_drop: s(function() {
                        var e = document.createElement("div");
                        return ("draggable" in e || "ondragstart" in e && "ondrop" in e) && ("IE" !== i.browser || i.version > 9)
                    }()),
                    filter_by_extension: s(function() {
                        return "Chrome" === i.browser && i.version >= 28 || "IE" === i.browser && i.version >= 10
                    }()),
                    return_response_headers: u,
                    return_response_type: function(e) {
                        return "json" === e && window.JSON ? !0 : i.can("return_response_type", e)
                    },
                    return_status_code: u,
                    report_upload_progress: s(window.XMLHttpRequest && (new XMLHttpRequest).upload),
                    resize_image: function() {
                        return r.can("access_binary") && i.can("create_canvas")
                    },
                    select_file: function() {
                        return i.can("use_fileinput") && window.File
                    },
                    select_folder: function() {
                        return r.can("select_file") && "Chrome" === i.browser && i.version >= 21
                    },
                    select_multiple: function() {
                        return !(!r.can("select_file") || "Safari" === i.browser && "Windows" === i.os || "iOS" === i.os && i.verComp(i.osVersion, "7.0.4", "<"))
                    },
                    send_binary_string: s(window.XMLHttpRequest && ((new XMLHttpRequest).sendAsBinary || window.Uint8Array && window.ArrayBuffer)),
                    send_custom_headers: s(window.XMLHttpRequest),
                    send_multipart: function() {
                        return !!(window.XMLHttpRequest && (new XMLHttpRequest).upload && window.FormData) || r.can("send_binary_string")
                    },
                    slice_blob: s(window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice)),
                    stream_upload: function() {
                        return r.can("slice_blob") && r.can("send_multipart")
                    },
                    summon_file_dialog: s(function() {
                        return "Firefox" === i.browser && i.version >= 4 || "Opera" === i.browser && i.version >= 12 || "IE" === i.browser && i.version >= 10 || !!~e.inArray(i.browser, ["Chrome", "Safari"])
                    }()),
                    upload_filesize: u
                }, arguments[2]);
            n.call(this, t, arguments[1] || o, c), e.extend(this, {
                init: function() {
                    this.trigger("Init")
                },
                destroy: function(e) {
                    return function() {
                        e.call(r), e = r = null
                    }
                }(this.destroy)
            }), e.extend(this.getShim(), a)
        }
        var o = "html5",
            a = {};
        return n.addConstructor(o, r), a
    }), i(N, [D, y], function(e, t) {
        function n() {
            function e(e, t, n) {
                var i;
                if (!window.File.prototype.slice) return (i = window.File.prototype.webkitSlice || window.File.prototype.mozSlice) ? i.call(e, t, n) : null;
                try {
                    return e.slice(), e.slice(t, n)
                } catch (r) {
                    return e.slice(t, n - t)
                }
            }
            this.slice = function() {
                return new t(this.getRuntime().uid, e.apply(this, arguments))
            }
        }
        return e.Blob = n
    }), i(L, [u], function(e) {
        function t() {
            this.returnValue = !1
        }

        function n() {
            this.cancelBubble = !0
        }
        var i = {},
            r = "moxie_" + e.guid(),
            o = function(o, a, s, u) {
                var c, l;
                a = a.toLowerCase(), o.addEventListener ? (c = s, o.addEventListener(a, c, !1)) : o.attachEvent && (c = function() {
                    var e = window.event;
                    e.target || (e.target = e.srcElement), e.preventDefault = t, e.stopPropagation = n, s(e)
                }, o.attachEvent("on" + a, c)), o[r] || (o[r] = e.guid()), i.hasOwnProperty(o[r]) || (i[o[r]] = {}), l = i[o[r]], l.hasOwnProperty(a) || (l[a] = []), l[a].push({
                    func: c,
                    orig: s,
                    key: u
                })
            },
            a = function(t, n, o) {
                var a, s;
                if (n = n.toLowerCase(), t[r] && i[t[r]] && i[t[r]][n]) {
                    a = i[t[r]][n];
                    for (var u = a.length - 1; u >= 0 && (a[u].orig !== o && a[u].key !== o || (t.removeEventListener ? t.removeEventListener(n, a[u].func, !1) : t.detachEvent && t.detachEvent("on" + n, a[u].func), a[u].orig = null, a[u].func = null, a.splice(u, 1), o === s)); u--);
                    if (a.length || delete i[t[r]][n], e.isEmptyObj(i[t[r]])) {
                        delete i[t[r]];
                        try {
                            delete t[r]
                        } catch (c) {
                            t[r] = s
                        }
                    }
                }
            },
            s = function(t, n) {
                t && t[r] && e.each(i[t[r]], function(e, i) {
                    a(t, i, n)
                })
            };
        return {
            addEvent: o,
            removeEvent: a,
            removeAllEvents: s
        }
    }), i(M, [D, u, f, L, l, d], function(e, t, n, i, r, o) {
        function a() {
            var e = [],
                a;
            t.extend(this, {
                init: function(s) {
                    var u = this,
                        c = u.getRuntime(),
                        l, d, f, h, p, m;
                    a = s, e = [], f = a.accept.mimes || r.extList2mimes(a.accept, c.can("filter_by_extension")), d = c.getShimContainer(), d.innerHTML = '<input id="' + c.uid + '" type="file" style="font-size:999px;opacity:0;"' + (a.multiple && c.can("select_multiple") ? "multiple" : "") + (a.directory && c.can("select_folder") ? "webkitdirectory directory" : "") + (f ? ' accept="' + f.join(",") + '"' : "") + " />", l = n.get(c.uid), t.extend(l.style, {
                        position: "absolute",
                        top: 0,
                        left: 0,
                        width: "100%",
                        height: "100%"
                    }), h = n.get(a.browse_button), c.can("summon_file_dialog") && ("static" === n.getStyle(h, "position") && (h.style.position = "relative"), p = parseInt(n.getStyle(h, "z-index"), 10) || 1, h.style.zIndex = p, d.style.zIndex = p - 1, i.addEvent(h, "click", function(e) {
                        var t = n.get(c.uid);
                        t && !t.disabled && t.click(), e.preventDefault()
                    }, u.uid)), m = c.can("summon_file_dialog") ? h : d, i.addEvent(m, "mouseover", function() {
                        u.trigger("mouseenter")
                    }, u.uid), i.addEvent(m, "mouseout", function() {
                        u.trigger("mouseleave")
                    }, u.uid), i.addEvent(m, "mousedown", function() {
                        u.trigger("mousedown")
                    }, u.uid), i.addEvent(n.get(a.container), "mouseup", function() {
                        u.trigger("mouseup")
                    }, u.uid), l.onchange = function g() {
                        if (e = [], a.directory ? t.each(this.files, function(t) {
                                "." !== t.name && e.push(t)
                            }) : e = [].slice.call(this.files), "IE" !== o.browser && "IEMobile" !== o.browser) this.value = "";
                        else {
                            var n = this.cloneNode(!0);
                            this.parentNode.replaceChild(n, this), n.onchange = g
                        }
                        u.trigger("change")
                    }, u.trigger({
                        type: "ready",
                        async: !0
                    }), d = null
                },
                getFiles: function() {
                    return e
                },
                disable: function(e) {
                    var t = this.getRuntime(),
                        i;
                    (i = n.get(t.uid)) && (i.disabled = !!e)
                },
                destroy: function() {
                    var t = this.getRuntime(),
                        r = t.getShim(),
                        o = t.getShimContainer();
                    i.removeAllEvents(o, this.uid), i.removeAllEvents(a && n.get(a.container), this.uid), i.removeAllEvents(a && n.get(a.browse_button), this.uid), o && (o.innerHTML = ""), r.removeInstance(this.uid), e = a = o = r = null
                }
            })
        }
        return e.FileInput = a
    }), i(C, [D, u, f, L, l], function(e, t, n, i, r) {
        function o() {
            function e(e) {
                if (!e.dataTransfer || !e.dataTransfer.types) return !1;
                var n = t.toArray(e.dataTransfer.types || []);
                return -1 !== t.inArray("Files", n) || -1 !== t.inArray("public.file-url", n) || -1 !== t.inArray("application/x-moz-file", n)
            }

            function o(e) {
                for (var n = [], i = 0; i < e.length; i++)[].push.apply(n, e[i].extensions.split(/\s*,\s*/));
                return -1 === t.inArray("*", n) ? n : []
            }

            function a(e) {
                if (!f.length) return !0;
                var n = r.getFileExtension(e.name);
                return !n || -1 !== t.inArray(n, f)
            }

            function s(e, n) {
                var i = [];
                t.each(e, function(e) {
                    var t = e.webkitGetAsEntry();
                    if (t)
                        if (t.isFile) {
                            var n = e.getAsFile();
                            a(n) && d.push(n)
                        } else i.push(t)
                }), i.length ? u(i, n) : n()
            }

            function u(e, n) {
                var i = [];
                t.each(e, function(e) {
                    i.push(function(t) {
                        c(e, t)
                    })
                }), t.inSeries(i, function() {
                    n()
                })
            }

            function c(e, t) {
                e.isFile ? e.file(function(e) {
                    a(e) && d.push(e), t()
                }, function() {
                    t()
                }) : e.isDirectory ? l(e, t) : t()
            }

            function l(e, t) {
                function n(e) {
                    r.readEntries(function(t) {
                        t.length ? ([].push.apply(i, t), n(e)) : e()
                    }, e)
                }
                var i = [],
                    r = e.createReader();
                n(function() {
                    u(i, t)
                })
            }
            var d = [],
                f = [],
                h;
            t.extend(this, {
                init: function(n) {
                    var r = this,
                        u;
                    h = n, f = o(h.accept), u = h.container, i.addEvent(u, "dragover", function(t) {
                        e(t) && (t.preventDefault(), t.dataTransfer.dropEffect = "copy")
                    }, r.uid), i.addEvent(u, "drop", function(n) {
                        e(n) && (n.preventDefault(), d = [], n.dataTransfer.items && n.dataTransfer.items[0].webkitGetAsEntry ? s(n.dataTransfer.items, function() {
                            r.trigger("drop")
                        }) : (t.each(n.dataTransfer.files, function(e) {
                            a(e) && d.push(e)
                        }), r.trigger("drop")))
                    }, r.uid), i.addEvent(u, "dragenter", function(e) {
                        r.trigger("dragenter")
                    }, r.uid), i.addEvent(u, "dragleave", function(e) {
                        r.trigger("dragleave")
                    }, r.uid)
                },
                getFiles: function() {
                    return d
                },
                destroy: function() {
                    i.removeAllEvents(h && n.get(h.container), this.uid), d = f = h = null
                }
            })
        }
        return e.FileDrop = o
    }), i(F, [D, m, u], function(e, t, n) {
        function i() {
            function e(e) {
                return t.atob(e.substring(e.indexOf("base64,") + 7))
            }
            var i, r = !1;
            n.extend(this, {
                read: function(e, t) {
                    var o = this;
                    i = new window.FileReader, i.addEventListener("progress", function(e) {
                        o.trigger(e)
                    }), i.addEventListener("load", function(e) {
                        o.trigger(e)
                    }), i.addEventListener("error", function(e) {
                        o.trigger(e, i.error)
                    }), i.addEventListener("loadend", function() {
                        i = null
                    }), "function" === n.typeOf(i[e]) ? (r = !1, i[e](t.getSource())) : "readAsBinaryString" === e && (r = !0, i.readAsDataURL(t.getSource()))
                },
                getResult: function() {
                    return i && i.result ? r ? e(i.result) : i.result : null
                },
                abort: function() {
                    i && i.abort()
                },
                destroy: function() {
                    i = null
                }
            })
        }
        return e.FileReader = i
    }), i(H, [D, u, l, R, w, y, A, h, d], function(e, t, n, i, r, o, a, s, u) {
        function c() {
            function e(e, t) {
                var n = this,
                    i, r;
                i = t.getBlob().getSource(), r = new window.FileReader, r.onload = function() {
                    t.append(t.getBlobName(), new o(null, {
                        type: i.type,
                        data: r.result
                    })), f.send.call(n, e, t)
                }, r.readAsBinaryString(i)
            }

            function c() {
                return !window.XMLHttpRequest || "IE" === u.browser && u.version < 8 ? function() {
                    for (var e = ["Msxml2.XMLHTTP.6.0", "Microsoft.XMLHTTP"], t = 0; t < e.length; t++) try {
                        return new ActiveXObject(e[t])
                    } catch (n) {}
                }() : new window.XMLHttpRequest
            }

            function l(e) {
                var t = e.responseXML,
                    n = e.responseText;
                return "IE" === u.browser && n && t && !t.documentElement && /[^\/]+\/[^\+]+\+xml/.test(e.getResponseHeader("Content-Type")) && (t = new window.ActiveXObject("Microsoft.XMLDOM"), t.async = !1, t.validateOnParse = !1, t.loadXML(n)), t && ("IE" === u.browser && 0 !== t.parseError || !t.documentElement || "parsererror" === t.documentElement.tagName) ? null : t
            }

            function d(e) {
                var t = "----moxieboundary" + (new Date).getTime(),
                    n = "--",
                    i = "\r\n",
                    r = "",
                    a = this.getRuntime();
                if (!a.can("send_binary_string")) throw new s.RuntimeError(s.RuntimeError.NOT_SUPPORTED_ERR);
                return h.setRequestHeader("Content-Type", "multipart/form-data; boundary=" + t), e.each(function(e, a) {
                    r += e instanceof o ? n + t + i + 'Content-Disposition: form-data; name="' + a + '"; filename="' + unescape(encodeURIComponent(e.name || "blob")) + '"' + i + "Content-Type: " + (e.type || "application/octet-stream") + i + i + e.getSource() + i : n + t + i + 'Content-Disposition: form-data; name="' + a + '"' + i + i + unescape(encodeURIComponent(e)) + i
                }), r += n + t + n + i
            }
            var f = this,
                h, p;
            t.extend(this, {
                send: function(n, r) {
                    var s = this,
                        l = "Mozilla" === u.browser && u.version >= 4 && u.version < 7,
                        f = "Android Browser" === u.browser,
                        m = !1;
                    if (p = n.url.replace(/^.+?\/([\w\-\.]+)$/, "$1").toLowerCase(), h = c(), h.open(n.method, n.url, n.async, n.user, n.password), r instanceof o) r.isDetached() && (m = !0), r = r.getSource();
                    else if (r instanceof a) {
                        if (r.hasBlob())
                            if (r.getBlob().isDetached()) r = d.call(s, r), m = !0;
                            else if ((l || f) && "blob" === t.typeOf(r.getBlob().getSource()) && window.FileReader) return void e.call(s, n, r);
                        if (r instanceof a) {
                            var g = new window.FormData;
                            r.each(function(e, t) {
                                e instanceof o ? g.append(t, e.getSource()) : g.append(t, e)
                            }), r = g
                        }
                    }
                    h.upload ? (n.withCredentials && (h.withCredentials = !0), h.addEventListener("load", function(e) {
                        s.trigger(e)
                    }), h.addEventListener("error", function(e) {
                        s.trigger(e)
                    }), h.addEventListener("progress", function(e) {
                        s.trigger(e)
                    }), h.upload.addEventListener("progress", function(e) {
                        s.trigger({
                            type: "UploadProgress",
                            loaded: e.loaded,
                            total: e.total
                        })
                    })) : h.onreadystatechange = function v() {
                        switch (h.readyState) {
                            case 1:
                                break;
                            case 2:
                                break;
                            case 3:
                                var e, t;
                                try {
                                    i.hasSameOrigin(n.url) && (e = h.getResponseHeader("Content-Length") || 0), h.responseText && (t = h.responseText.length)
                                } catch (r) {
                                    e = t = 0
                                }
                                s.trigger({
                                    type: "progress",
                                    lengthComputable: !!e,
                                    total: parseInt(e, 10),
                                    loaded: t
                                });
                                break;
                            case 4:
                                h.onreadystatechange = function() {}, s.trigger(0 === h.status ? "error" : "load")
                        }
                    }, t.isEmptyObj(n.headers) || t.each(n.headers, function(e, t) {
                        h.setRequestHeader(t, e)
                    }), "" !== n.responseType && "responseType" in h && (h.responseType = "json" !== n.responseType || u.can("return_response_type", "json") ? n.responseType : "text"), m ? h.sendAsBinary ? h.sendAsBinary(r) : ! function() {
                        for (var e = new Uint8Array(r.length), t = 0; t < r.length; t++) e[t] = 255 & r.charCodeAt(t);
                        h.send(e.buffer)
                    }() : h.send(r), s.trigger("loadstart")
                },
                getStatus: function() {
                    try {
                        if (h) return h.status
                    } catch (e) {}
                    return 0
                },
                getResponse: function(e) {
                    var t = this.getRuntime();
                    try {
                        switch (e) {
                            case "blob":
                                var i = new r(t.uid, h.response),
                                    o = h.getResponseHeader("Content-Disposition");
                                if (o) {
                                    var a = o.match(/filename=([\'\"'])([^\1]+)\1/);
                                    a && (p = a[2])
                                }
                                return i.name = p, i.type || (i.type = n.getFileMime(p)), i;
                            case "json":
                                return u.can("return_response_type", "json") ? h.response : 200 === h.status && window.JSON ? JSON.parse(h.responseText) : null;
                            case "document":
                                return l(h);
                            default:
                                return "" !== h.responseText ? h.responseText : null
                        }
                    } catch (s) {
                        return null
                    }
                },
                getAllResponseHeaders: function() {
                    try {
                        return h.getAllResponseHeaders()
                    } catch (e) {}
                    return ""
                },
                abort: function() {
                    h && h.abort()
                },
                destroy: function() {
                    f = p = null
                }
            })
        }
        return e.XMLHttpRequest = c
    }), i(P, [], function() {
        return function() {
            function e(e, t) {
                var n = r ? 0 : -8 * (t - 1),
                    i = 0,
                    a;
                for (a = 0; t > a; a++) i |= o.charCodeAt(e + a) << Math.abs(n + 8 * a);
                return i
            }

            function n(e, t, n) {
                n = 3 === arguments.length ? n : o.length - t - 1, o = o.substr(0, t) + e + o.substr(n + t)
            }

            function i(e, t, i) {
                var o = "",
                    a = r ? 0 : -8 * (i - 1),
                    s;
                for (s = 0; i > s; s++) o += String.fromCharCode(t >> Math.abs(a + 8 * s) & 255);
                n(o, e, i)
            }
            var r = !1,
                o;
            return {
                II: function(e) {
                    return e === t ? r : void(r = e)
                },
                init: function(e) {
                    r = !1, o = e
                },
                SEGMENT: function(e, t, i) {
                    switch (arguments.length) {
                        case 1:
                            return o.substr(e, o.length - e - 1);
                        case 2:
                            return o.substr(e, t);
                        case 3:
                            n(i, e, t);
                            break;
                        default:
                            return o
                    }
                },
                BYTE: function(t) {
                    return e(t, 1)
                },
                SHORT: function(t) {
                    return e(t, 2)
                },
                LONG: function(n, r) {
                    return r === t ? e(n, 4) : void i(n, r, 4)
                },
                SLONG: function(t) {
                    var n = e(t, 4);
                    return n > 2147483647 ? n - 4294967296 : n
                },
                STRING: function(t, n) {
                    var i = "";
                    for (n += t; n > t; t++) i += String.fromCharCode(e(t, 1));
                    return i
                }
            }
        }
    }), i(k, [P], function(e) {
        return function t(n) {
            var i = [],
                r, o, a, s = 0;
            if (r = new e, r.init(n), 65496 === r.SHORT(0)) {
                for (o = 2; o <= n.length;)
                    if (a = r.SHORT(o), a >= 65488 && 65495 >= a) o += 2;
                    else {
                        if (65498 === a || 65497 === a) break;
                        s = r.SHORT(o + 2) + 2, a >= 65505 && 65519 >= a && i.push({
                            hex: a,
                            name: "APP" + (15 & a),
                            start: o,
                            length: s,
                            segment: r.SEGMENT(o, s)
                        }), o += s
                    } return r.init(null), {
                    headers: i,
                    restore: function(e) {
                        var t, n;
                        for (r.init(e), o = 65504 == r.SHORT(2) ? 4 + r.SHORT(4) : 2, n = 0, t = i.length; t > n; n++) r.SEGMENT(o, 0, i[n].segment), o += i[n].length;
                        return e = r.SEGMENT(), r.init(null), e
                    },
                    strip: function(e) {
                        var n, i, o;
                        for (i = new t(e), n = i.headers, i.purge(), r.init(e), o = n.length; o--;) r.SEGMENT(n[o].start, n[o].length, "");
                        return e = r.SEGMENT(), r.init(null), e
                    },
                    get: function(e) {
                        for (var t = [], n = 0, r = i.length; r > n; n++) i[n].name === e.toUpperCase() && t.push(i[n].segment);
                        return t
                    },
                    set: function(e, t) {
                        var n = [],
                            r, o, a;
                        for ("string" == typeof t ? n.push(t) : n = t, r = o = 0, a = i.length; a > r && (i[r].name === e.toUpperCase() && (i[r].segment = n[o], i[r].length = n[o].length, o++), !(o >= n.length)); r++);
                    },
                    purge: function() {
                        i = [], r.init(null), r = null
                    }
                }
            }
        }
    }), i(U, [u, P], function(e, n) {
        return function i() {
            function i(e, n) {
                var i = a.SHORT(e),
                    r, o, s, u, d, f, h, p, m = [],
                    g = {};
                for (r = 0; i > r; r++)
                    if (h = f = e + 12 * r + 2, s = n[a.SHORT(h)], s !== t) {
                        switch (u = a.SHORT(h += 2), d = a.LONG(h += 2), h += 4, m = [], u) {
                            case 1:
                            case 7:
                                for (d > 4 && (h = a.LONG(h) + c.tiffHeader), o = 0; d > o; o++) m[o] = a.BYTE(h + o);
                                break;
                            case 2:
                                d > 4 && (h = a.LONG(h) + c.tiffHeader), g[s] = a.STRING(h, d - 1);
                                continue;
                            case 3:
                                for (d > 2 && (h = a.LONG(h) + c.tiffHeader), o = 0; d > o; o++) m[o] = a.SHORT(h + 2 * o);
                                break;
                            case 4:
                                for (d > 1 && (h = a.LONG(h) + c.tiffHeader), o = 0; d > o; o++) m[o] = a.LONG(h + 4 * o);
                                break;
                            case 5:
                                for (h = a.LONG(h) + c.tiffHeader, o = 0; d > o; o++) m[o] = a.LONG(h + 4 * o) / a.LONG(h + 4 * o + 4);
                                break;
                            case 9:
                                for (h = a.LONG(h) + c.tiffHeader, o = 0; d > o; o++) m[o] = a.SLONG(h + 4 * o);
                                break;
                            case 10:
                                for (h = a.LONG(h) + c.tiffHeader, o = 0; d > o; o++) m[o] = a.SLONG(h + 4 * o) / a.SLONG(h + 4 * o + 4);
                                break;
                            default:
                                continue
                        }
                        p = 1 == d ? m[0] : m, g[s] = l.hasOwnProperty(s) && "object" != typeof p ? l[s][p] : p
                    } return g
            }

            function r() {
                var e = c.tiffHeader;
                return a.II(18761 == a.SHORT(e)), 42 !== a.SHORT(e += 2) ? !1 : (c.IFD0 = c.tiffHeader + a.LONG(e += 2), u = i(c.IFD0, s.tiff), "ExifIFDPointer" in u && (c.exifIFD = c.tiffHeader + u.ExifIFDPointer, delete u.ExifIFDPointer), "GPSInfoIFDPointer" in u && (c.gpsIFD = c.tiffHeader + u.GPSInfoIFDPointer, delete u.GPSInfoIFDPointer), !0)
            }

            function o(e, t, n) {
                var i, r, o, u = 0;
                if ("string" == typeof t) {
                    var l = s[e.toLowerCase()];
                    for (var d in l)
                        if (l[d] === t) {
                            t = d;
                            break
                        }
                }
                i = c[e.toLowerCase() + "IFD"], r = a.SHORT(i);
                for (var f = 0; r > f; f++)
                    if (o = i + 12 * f + 2, a.SHORT(o) == t) {
                        u = o + 8;
                        break
                    } return u ? (a.LONG(u, n), !0) : !1
            }
            var a, s, u, c = {},
                l;
            return a = new n, s = {
                tiff: {
                    274: "Orientation",
                    270: "ImageDescription",
                    271: "Make",
                    272: "Model",
                    305: "Software",
                    34665: "ExifIFDPointer",
                    34853: "GPSInfoIFDPointer"
                },
                exif: {
                    36864: "ExifVersion",
                    40961: "ColorSpace",
                    40962: "PixelXDimension",
                    40963: "PixelYDimension",
                    36867: "DateTimeOriginal",
                    33434: "ExposureTime",
                    33437: "FNumber",
                    34855: "ISOSpeedRatings",
                    37377: "ShutterSpeedValue",
                    37378: "ApertureValue",
                    37383: "MeteringMode",
                    37384: "LightSource",
                    37385: "Flash",
                    37386: "FocalLength",
                    41986: "ExposureMode",
                    41987: "WhiteBalance",
                    41990: "SceneCaptureType",
                    41988: "DigitalZoomRatio",
                    41992: "Contrast",
                    41993: "Saturation",
                    41994: "Sharpness"
                },
                gps: {
                    0: "GPSVersionID",
                    1: "GPSLatitudeRef",
                    2: "GPSLatitude",
                    3: "GPSLongitudeRef",
                    4: "GPSLongitude"
                }
            }, l = {
                ColorSpace: {
                    1: "sRGB",
                    0: "Uncalibrated"
                },
                MeteringMode: {
                    0: "Unknown",
                    1: "Average",
                    2: "CenterWeightedAverage",
                    3: "Spot",
                    4: "MultiSpot",
                    5: "Pattern",
                    6: "Partial",
                    255: "Other"
                },
                LightSource: {
                    1: "Daylight",
                    2: "Fliorescent",
                    3: "Tungsten",
                    4: "Flash",
                    9: "Fine weather",
                    10: "Cloudy weather",
                    11: "Shade",
                    12: "Daylight fluorescent (D 5700 - 7100K)",
                    13: "Day white fluorescent (N 4600 -5400K)",
                    14: "Cool white fluorescent (W 3900 - 4500K)",
                    15: "White fluorescent (WW 3200 - 3700K)",
                    17: "Standard light A",
                    18: "Standard light B",
                    19: "Standard light C",
                    20: "D55",
                    21: "D65",
                    22: "D75",
                    23: "D50",
                    24: "ISO studio tungsten",
                    255: "Other"
                },
                Flash: {
                    0: "Flash did not fire.",
                    1: "Flash fired.",
                    5: "Strobe return light not detected.",
                    7: "Strobe return light detected.",
                    9: "Flash fired, compulsory flash mode",
                    13: "Flash fired, compulsory flash mode, return light not detected",
                    15: "Flash fired, compulsory flash mode, return light detected",
                    16: "Flash did not fire, compulsory flash mode",
                    24: "Flash did not fire, auto mode",
                    25: "Flash fired, auto mode",
                    29: "Flash fired, auto mode, return light not detected",
                    31: "Flash fired, auto mode, return light detected",
                    32: "No flash function",
                    65: "Flash fired, red-eye reduction mode",
                    69: "Flash fired, red-eye reduction mode, return light not detected",
                    71: "Flash fired, red-eye reduction mode, return light detected",
                    73: "Flash fired, compulsory flash mode, red-eye reduction mode",
                    77: "Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",
                    79: "Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",
                    89: "Flash fired, auto mode, red-eye reduction mode",
                    93: "Flash fired, auto mode, return light not detected, red-eye reduction mode",
                    95: "Flash fired, auto mode, return light detected, red-eye reduction mode"
                },
                ExposureMode: {
                    0: "Auto exposure",
                    1: "Manual exposure",
                    2: "Auto bracket"
                },
                WhiteBalance: {
                    0: "Auto white balance",
                    1: "Manual white balance"
                },
                SceneCaptureType: {
                    0: "Standard",
                    1: "Landscape",
                    2: "Portrait",
                    3: "Night scene"
                },
                Contrast: {
                    0: "Normal",
                    1: "Soft",
                    2: "Hard"
                },
                Saturation: {
                    0: "Normal",
                    1: "Low saturation",
                    2: "High saturation"
                },
                Sharpness: {
                    0: "Normal",
                    1: "Soft",
                    2: "Hard"
                },
                GPSLatitudeRef: {
                    N: "North latitude",
                    S: "South latitude"
                },
                GPSLongitudeRef: {
                    E: "East longitude",
                    W: "West longitude"
                }
            }, {
                init: function(e) {
                    return c = {
                        tiffHeader: 10
                    }, e !== t && e.length ? (a.init(e), 65505 === a.SHORT(0) && "EXIF\x00" === a.STRING(4, 5).toUpperCase() ? r() : !1) : !1
                },
                TIFF: function() {
                    return u
                },
                EXIF: function() {
                    var t;
                    if (t = i(c.exifIFD, s.exif), t.ExifVersion && "array" === e.typeOf(t.ExifVersion)) {
                        for (var n = 0, r = ""; n < t.ExifVersion.length; n++) r += String.fromCharCode(t.ExifVersion[n]);
                        t.ExifVersion = r
                    }
                    return t
                },
                GPS: function() {
                    var t;
                    return t = i(c.gpsIFD, s.gps), t.GPSVersionID && "array" === e.typeOf(t.GPSVersionID) && (t.GPSVersionID = t.GPSVersionID.join(".")), t
                },
                setExif: function(e, t) {
                    return "PixelXDimension" !== e && "PixelYDimension" !== e ? !1 : o("exif", e, t)
                },
                getBinary: function() {
                    return a.SEGMENT()
                },
                purge: function() {
                    a.init(null), a = u = null, c = {}
                }
            }
        }
    }), i(B, [u, h, k, P, U], function(e, t, n, i, r) {
        function o(o) {
            function a() {
                for (var e = 0, t, n; e <= u.length;) {
                    if (t = c.SHORT(e += 2), t >= 65472 && 65475 >= t) return e += 5, {
                        height: c.SHORT(e),
                        width: c.SHORT(e += 2)
                    };
                    n = c.SHORT(e += 2), e += n - 2
                }
                return null
            }

            function s() {
                d && l && c && (d.purge(), l.purge(), c.init(null), u = f = l = d = c = null)
            }
            var u, c, l, d, f, h;
            if (u = o, c = new i, c.init(u), 65496 !== c.SHORT(0)) throw new t.ImageError(t.ImageError.WRONG_FORMAT);
            l = new n(o), d = new r, h = !!d.init(l.get("app1")[0]), f = a.call(this), e.extend(this, {
                type: "image/jpeg",
                size: u.length,
                width: f && f.width || 0,
                height: f && f.height || 0,
                setExif: function(t, n) {
                    return h ? ("object" === e.typeOf(t) ? e.each(t, function(e, t) {
                        d.setExif(t, e)
                    }) : d.setExif(t, n), void l.set("app1", d.getBinary())) : !1
                },
                writeHeaders: function() {
                    return arguments.length ? l.restore(arguments[0]) : u = l.restore(u)
                },
                stripHeaders: function(e) {
                    return l.strip(e)
                },
                purge: function() {
                    s.call(this)
                }
            }), h && (this.meta = {
                tiff: d.TIFF(),
                exif: d.EXIF(),
                gps: d.GPS()
            })
        }
        return o
    }), i(z, [h, u, P], function(e, t, n) {
        function i(i) {
            function r() {
                var e, t;
                return e = a.call(this, 8), "IHDR" == e.type ? (t = e.start, {
                    width: u.LONG(t),
                    height: u.LONG(t += 4)
                }) : null
            }

            function o() {
                u && (u.init(null), s = d = c = l = u = null)
            }

            function a(e) {
                var t, n, i, r;
                return t = u.LONG(e), n = u.STRING(e += 4, 4), i = e += 4, r = u.LONG(e + t), {
                    length: t,
                    type: n,
                    start: i,
                    CRC: r
                }
            }
            var s, u, c, l, d;
            s = i, u = new n, u.init(s),
                function() {
                    var t = 0,
                        n = 0,
                        i = [35152, 20039, 3338, 6666];
                    for (n = 0; n < i.length; n++, t += 2)
                        if (i[n] != u.SHORT(t)) throw new e.ImageError(e.ImageError.WRONG_FORMAT)
                }(), d = r.call(this), t.extend(this, {
                    type: "image/png",
                    size: s.length,
                    width: d.width,
                    height: d.height,
                    purge: function() {
                        o.call(this)
                    }
                }), o.call(this)
        }
        return i
    }), i(G, [u, h, B, z], function(e, t, n, i) {
        return function(r) {
            var o = [n, i],
                a;
            a = function() {
                for (var e = 0; e < o.length; e++) try {
                    return new o[e](r)
                } catch (n) {}
                throw new t.ImageError(t.ImageError.WRONG_FORMAT)
            }(), e.extend(this, {
                type: "",
                size: 0,
                width: 0,
                height: 0,
                setExif: function() {},
                writeHeaders: function(e) {
                    return e
                },
                stripHeaders: function(e) {
                    return e
                },
                purge: function() {}
            }), e.extend(this, a), this.purge = function() {
                a.purge(), a = null
            }
        }
    }), i(q, [], function() {
        function e(e, i, r) {
            var o = e.naturalWidth,
                a = e.naturalHeight,
                s = r.width,
                u = r.height,
                c = r.x || 0,
                l = r.y || 0,
                d = i.getContext("2d");
            t(e) && (o /= 2, a /= 2);
            var f = 1024,
                h = document.createElement("canvas");
            h.width = h.height = f;
            for (var p = h.getContext("2d"), m = n(e, o, a), g = 0; a > g;) {
                for (var v = g + f > a ? a - g : f, y = 0; o > y;) {
                    var w = y + f > o ? o - y : f;
                    p.clearRect(0, 0, f, f), p.drawImage(e, -y, -g);
                    var E = y * s / o + c << 0,
                        _ = Math.ceil(w * s / o),
                        x = g * u / a / m + l << 0,
                        b = Math.ceil(v * u / a / m);
                    d.drawImage(h, 0, 0, w, v, E, x, _, b), y += f
                }
                g += f
            }
            h = p = null
        }

        function t(e) {
            var t = e.naturalWidth,
                n = e.naturalHeight;
            if (t * n > 1048576) {
                var i = document.createElement("canvas");
                i.width = i.height = 1;
                var r = i.getContext("2d");
                return r.drawImage(e, -t + 1, 0), 0 === r.getImageData(0, 0, 1, 1).data[3]
            }
            return !1
        }

        function n(e, t, n) {
            var i = document.createElement("canvas");
            i.width = 1, i.height = n;
            var r = i.getContext("2d");
            r.drawImage(e, 0, 0);
            for (var o = r.getImageData(0, 0, 1, n).data, a = 0, s = n, u = n; u > a;) {
                var c = o[4 * (u - 1) + 3];
                0 === c ? s = u : a = u, u = s + a >> 1
            }
            i = null;
            var l = u / n;
            return 0 === l ? 1 : l
        }
        return {
            isSubsampled: t,
            renderTo: e
        }
    }), i(X, [D, u, h, m, w, G, q, l, d], function(e, t, n, i, r, o, a, s, u) {
        function c() {
            function e() {
                if (!E && !y) throw new n.ImageError(n.DOMException.INVALID_STATE_ERR);
                return E || y
            }

            function c(e) {
                return i.atob(e.substring(e.indexOf("base64,") + 7))
            }

            function l(e, t) {
                return "data:" + (t || "") + ";base64," + i.btoa(e)
            }

            function d(e) {
                var t = this;
                y = new Image, y.onerror = function() {
                    g.call(this), t.trigger("error", n.ImageError.WRONG_FORMAT)
                }, y.onload = function() {
                    t.trigger("load")
                }, y.src = /^data:[^;]*;base64,/.test(e) ? e : l(e, x.type)
            }

            function f(e, t) {
                var i = this,
                    r;
                return window.FileReader ? (r = new FileReader, r.onload = function() {
                    t(this.result)
                }, r.onerror = function() {
                    i.trigger("error", n.ImageError.WRONG_FORMAT)
                }, r.readAsDataURL(e), void 0) : t(e.getAsDataURL())
            }

            function h(n, i, r, o) {
                var a = this,
                    s, u, c = 0,
                    l = 0,
                    d, f, h, g;
                if (R = o, g = this.meta && this.meta.tiff && this.meta.tiff.Orientation || 1, -1 !== t.inArray(g, [5, 6, 7, 8])) {
                    var v = n;
                    n = i, i = v
                }
                return d = e(), r ? (n = Math.min(n, d.width), i = Math.min(i, d.height), s = Math.max(n / d.width, i / d.height)) : s = Math.min(n / d.width, i / d.height), s > 1 && !r && o ? void this.trigger("Resize") : (E || (E = document.createElement("canvas")), f = Math.round(d.width * s), h = Math.round(d.height * s), r ? (E.width = n, E.height = i, f > n && (c = Math.round((f - n) / 2)), h > i && (l = Math.round((h - i) / 2))) : (E.width = f, E.height = h), R || m(E.width, E.height, g), p.call(this, d, E, -c, -l, f, h), this.width = E.width, this.height = E.height, b = !0, void a.trigger("Resize"))
            }

            function p(e, t, n, i, r, o) {
                if ("iOS" === u.OS) a.renderTo(e, t, {
                    width: r,
                    height: o,
                    x: n,
                    y: i
                });
                else {
                    var s = t.getContext("2d");
                    s.drawImage(e, n, i, r, o)
                }
            }

            function m(e, t, n) {
                switch (n) {
                    case 5:
                    case 6:
                    case 7:
                    case 8:
                        E.width = t, E.height = e;
                        break;
                    default:
                        E.width = e, E.height = t
                }
                var i = E.getContext("2d");
                switch (n) {
                    case 2:
                        i.translate(e, 0), i.scale(-1, 1);
                        break;
                    case 3:
                        i.translate(e, t), i.rotate(Math.PI);
                        break;
                    case 4:
                        i.translate(0, t), i.scale(1, -1);
                        break;
                    case 5:
                        i.rotate(.5 * Math.PI), i.scale(1, -1);
                        break;
                    case 6:
                        i.rotate(.5 * Math.PI), i.translate(0, -t);
                        break;
                    case 7:
                        i.rotate(.5 * Math.PI), i.translate(e, -t), i.scale(-1, 1);
                        break;
                    case 8:
                        i.rotate(-.5 * Math.PI), i.translate(-e, 0)
                }
            }

            function g() {
                w && (w.purge(), w = null), _ = y = E = x = null, b = !1
            }
            var v = this,
                y, w, E, _, x, b = !1,
                R = !0;
            t.extend(this, {
                loadFromBlob: function(e) {
                    var t = this,
                        i = t.getRuntime(),
                        r = arguments.length > 1 ? arguments[1] : !0;
                    if (!i.can("access_binary")) throw new n.RuntimeError(n.RuntimeError.NOT_SUPPORTED_ERR);
                    return x = e, e.isDetached() ? (_ = e.getSource(), void d.call(this, _)) : void f.call(this, e.getSource(), function(e) {
                        r && (_ = c(e)), d.call(t, e)
                    })
                },
                loadFromImage: function(e, t) {
                    this.meta = e.meta, x = new r(null, {
                        name: e.name,
                        size: e.size,
                        type: e.type
                    }), d.call(this, t ? _ = e.getAsBinaryString() : e.getAsDataURL())
                },
                getInfo: function() {
                    var t = this.getRuntime(),
                        n;
                    return !w && _ && t.can("access_image_binary") && (w = new o(_)), n = {
                        width: e().width || 0,
                        height: e().height || 0,
                        type: x.type || s.getFileMime(x.name),
                        size: _ && _.length || x.size || 0,
                        name: x.name || "",
                        meta: w && w.meta || this.meta || {}
                    }
                },
                downsize: function() {
                    h.apply(this, arguments)
                },
                getAsCanvas: function() {
                    return E && (E.id = this.uid + "_canvas"), E
                },
                getAsBlob: function(e, t) {
                    return e !== this.type && h.call(this, this.width, this.height, !1), new r(null, {
                        name: x.name || "",
                        type: e,
                        data: v.getAsBinaryString.call(this, e, t)
                    })
                },
                getAsDataURL: function(e) {
                    var t = arguments[1] || 90;
                    if (!b) return y.src;
                    if ("image/jpeg" !== e) return E.toDataURL("image/png");
                    try {
                        return E.toDataURL("image/jpeg", t / 100)
                    } catch (n) {
                        return E.toDataURL("image/jpeg")
                    }
                },
                getAsBinaryString: function(e, t) {
                    if (!b) return _ || (_ = c(v.getAsDataURL(e, t))), _;
                    if ("image/jpeg" !== e) _ = c(v.getAsDataURL(e, t));
                    else {
                        var n;
                        t || (t = 90);
                        try {
                            n = E.toDataURL("image/jpeg", t / 100)
                        } catch (i) {
                            n = E.toDataURL("image/jpeg")
                        }
                        _ = c(n), w && (_ = w.stripHeaders(_), R && (w.meta && w.meta.exif && w.setExif({
                            PixelXDimension: this.width,
                            PixelYDimension: this.height
                        }), _ = w.writeHeaders(_)), w.purge(), w = null)
                    }
                    return b = !1, _
                },
                destroy: function() {
                    v = null, g.call(this), this.getRuntime().getShim().removeInstance(this.uid)
                }
            })
        }
        return e.Image = c
    }), i(j, [u, d, f, h, g], function(e, t, n, i, r) {
        function o() {
            var e;
            try {
                e = navigator.plugins["Shockwave Flash"], e = e.description
            } catch (t) {
                try {
                    e = new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")
                } catch (n) {
                    e = "0.0"
                }
            }
            return e = e.match(/\d+/g), parseFloat(e[0] + "." + e[1])
        }

        function a(a) {
            var c = this,
                l;
            a = e.extend({
                swf_url: t.swf_url
            }, a), r.call(this, a, s, {
                access_binary: function(e) {
                    return e && "browser" === c.mode
                },
                access_image_binary: function(e) {
                    return e && "browser" === c.mode
                },
                display_media: r.capTrue,
                do_cors: r.capTrue,
                drag_and_drop: !1,
                report_upload_progress: function() {
                    return "client" === c.mode
                },
                resize_image: r.capTrue,
                return_response_headers: !1,
                return_response_type: function(t) {
                    return "json" === t && window.JSON ? !0 : !e.arrayDiff(t, ["", "text", "document"]) || "browser" === c.mode
                },
                return_status_code: function(t) {
                    return "browser" === c.mode || !e.arrayDiff(t, [200, 404])
                },
                select_file: r.capTrue,
                select_multiple: r.capTrue,
                send_binary_string: function(e) {
                    return e && "browser" === c.mode
                },
                send_browser_cookies: function(e) {
                    return e && "browser" === c.mode
                },
                send_custom_headers: function(e) {
                    return e && "browser" === c.mode
                },
                send_multipart: r.capTrue,
                slice_blob: function(e) {
                    return e && "browser" === c.mode
                },
                stream_upload: function(e) {
                    return e && "browser" === c.mode
                },
                summon_file_dialog: !1,
                upload_filesize: function(t) {
                    return e.parseSizeStr(t) <= 2097152 || "client" === c.mode
                },
                use_http_method: function(t) {
                    return !e.arrayDiff(t, ["GET", "POST"])
                }
            }, {
                access_binary: function(e) {
                    return e ? "browser" : "client"
                },
                access_image_binary: function(e) {
                    return e ? "browser" : "client"
                },
                report_upload_progress: function(e) {
                    return e ? "browser" : "client"
                },
                return_response_type: function(t) {
                    return e.arrayDiff(t, ["", "text", "json", "document"]) ? "browser" : ["client", "browser"]
                },
                return_status_code: function(t) {
                    return e.arrayDiff(t, [200, 404]) ? "browser" : ["client", "browser"]
                },
                send_binary_string: function(e) {
                    return e ? "browser" : "client"
                },
                send_browser_cookies: function(e) {
                    return e ? "browser" : "client"
                },
                send_custom_headers: function(e) {
                    return e ? "browser" : "client"
                },
                stream_upload: function(e) {
                    return e ? "client" : "browser"
                },
                upload_filesize: function(t) {
                    return e.parseSizeStr(t) >= 2097152 ? "client" : "browser"
                }
            }, "client"), o() < 10 && (this.mode = !1), e.extend(this, {
                getShim: function() {
                    return n.get(this.uid)
                },
                shimExec: function(e, t) {
                    var n = [].slice.call(arguments, 2);
                    return c.getShim().exec(this.uid, e, t, n)
                },
                init: function() {
                    var n, r, o;
                    o = this.getShimContainer(), e.extend(o.style, {
                        position: "absolute",
                        top: "-8px",
                        left: "-8px",
                        width: "9px",
                        height: "9px",
                        overflow: "hidden"
                    }), n = '<object id="' + this.uid + '" type="application/x-shockwave-flash" data="' + a.swf_url + '" ', "IE" === t.browser && (n += 'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '), n += 'width="100%" height="100%" style="outline:0"><param name="movie" value="' + a.swf_url + '" /><param name="flashvars" value="uid=' + escape(this.uid) + "&target=" + t.global_event_dispatcher + '" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>', "IE" === t.browser ? (r = document.createElement("div"), o.appendChild(r), r.outerHTML = n, r = o = null) : o.innerHTML = n, l = setTimeout(function() {
                        c && !c.initialized && c.trigger("Error", new i.RuntimeError(i.RuntimeError.NOT_INIT_ERR))
                    }, 5e3)
                },
                destroy: function(e) {
                    return function() {
                        e.call(c), clearTimeout(l), a = l = e = c = null
                    }
                }(this.destroy)
            }, u)
        }
        var s = "flash",
            u = {};
        return r.addConstructor(s, a), u
    }), i(V, [j, y], function(e, t) {
        var n = {
            slice: function(e, n, i, r) {
                var o = this.getRuntime();
                return 0 > n ? n = Math.max(e.size + n, 0) : n > 0 && (n = Math.min(n, e.size)), 0 > i ? i = Math.max(e.size + i, 0) : i > 0 && (i = Math.min(i, e.size)), e = o.shimExec.call(this, "Blob", "slice", n, i, r || ""), e && (e = new t(o.uid, e)), e
            }
        };
        return e.Blob = n
    }), i(W, [j], function(e) {
        var t = {
            init: function(e) {
                this.getRuntime().shimExec.call(this, "FileInput", "init", {
                    name: e.name,
                    accept: e.accept,
                    multiple: e.multiple
                }), this.trigger("ready")
            }
        };
        return e.FileInput = t
    }), i(Y, [j, m], function(e, t) {
        function n(e, n) {
            switch (n) {
                case "readAsText":
                    return t.atob(e, "utf8");
                case "readAsBinaryString":
                    return t.atob(e);
                case "readAsDataURL":
                    return e
            }
            return null
        }
        var i = "",
            r = {
                read: function(e, t) {
                    var r = this,
                        o = r.getRuntime();
                    return "readAsDataURL" === e && (i = "data:" + (t.type || "") + ";base64,"), r.bind("Progress", function(t, r) {
                        r && (i += n(r, e))
                    }), o.shimExec.call(this, "FileReader", "readAsBase64", t.uid)
                },
                getResult: function() {
                    return i
                },
                destroy: function() {
                    i = null
                }
            };
        return e.FileReader = r
    }), i($, [j, m], function(e, t) {
        function n(e, n) {
            switch (n) {
                case "readAsText":
                    return t.atob(e, "utf8");
                case "readAsBinaryString":
                    return t.atob(e);
                case "readAsDataURL":
                    return e
            }
            return null
        }
        var i = {
            read: function(e, t) {
                var i, r = this.getRuntime();
                return (i = r.shimExec.call(this, "FileReaderSync", "readAsBase64", t.uid)) ? ("readAsDataURL" === e && (i = "data:" + (t.type || "") + ";base64," + i), n(i, e, t.type)) : null
            }
        };
        return e.FileReaderSync = i
    }), i(J, [j, u, y, w, T, A, O], function(e, t, n, i, r, o, a) {
        var s = {
            send: function(e, i) {
                function r() {
                    e.transport = l.mode, l.shimExec.call(c, "XMLHttpRequest", "send", e, i)
                }

                function s(e, t) {
                    l.shimExec.call(c, "XMLHttpRequest", "appendBlob", e, t.uid), i = null, r()
                }

                function u(e, t) {
                    var n = new a;
                    n.bind("TransportingComplete", function() {
                        t(this.result)
                    }), n.transport(e.getSource(), e.type, {
                        ruid: l.uid
                    })
                }
                var c = this,
                    l = c.getRuntime();
                if (t.isEmptyObj(e.headers) || t.each(e.headers, function(e, t) {
                        l.shimExec.call(c, "XMLHttpRequest", "setRequestHeader", t, e.toString())
                    }), i instanceof o) {
                    var d;
                    if (i.each(function(e, t) {
                            e instanceof n ? d = t : l.shimExec.call(c, "XMLHttpRequest", "append", t, e)
                        }), i.hasBlob()) {
                        var f = i.getBlob();
                        f.isDetached() ? u(f, function(e) {
                            f.destroy(), s(d, e)
                        }) : s(d, f)
                    } else i = null, r()
                } else i instanceof n ? i.isDetached() ? u(i, function(e) {
                    i.destroy(), i = e.uid, r()
                }) : (i = i.uid, r()) : r()
            },
            getResponse: function(e) {
                var n, o, a = this.getRuntime();
                if (o = a.shimExec.call(this, "XMLHttpRequest", "getResponseAsBlob")) {
                    if (o = new i(a.uid, o), "blob" === e) return o;
                    try {
                        if (n = new r, ~t.inArray(e, ["", "text"])) return n.readAsText(o);
                        if ("json" === e && window.JSON) return JSON.parse(n.readAsText(o))
                    } finally {
                        o.destroy()
                    }
                }
                return null
            },
            abort: function(e) {
                var t = this.getRuntime();
                t.shimExec.call(this, "XMLHttpRequest", "abort"), this.dispatchEvent("readystatechange"), this.dispatchEvent("abort")
            }
        };
        return e.XMLHttpRequest = s
    }), i(Z, [j, y], function(e, t) {
        var n = {
            getAsBlob: function(e) {
                var n = this.getRuntime(),
                    i = n.shimExec.call(this, "Transporter", "getAsBlob", e);
                return i ? new t(n.uid, i) : null
            }
        };
        return e.Transporter = n
    }), i(K, [j, u, O, y, T], function(e, t, n, i, r) {
        var o = {
            loadFromBlob: function(e) {
                function t(e) {
                    r.shimExec.call(i, "Image", "loadFromBlob", e.uid), i = r = null
                }
                var i = this,
                    r = i.getRuntime();
                if (e.isDetached()) {
                    var o = new n;
                    o.bind("TransportingComplete", function() {
                        t(o.result.getSource())
                    }), o.transport(e.getSource(), e.type, {
                        ruid: r.uid
                    })
                } else t(e.getSource())
            },
            loadFromImage: function(e) {
                var t = this.getRuntime();
                return t.shimExec.call(this, "Image", "loadFromImage", e.uid)
            },
            getAsBlob: function(e, t) {
                var n = this.getRuntime(),
                    r = n.shimExec.call(this, "Image", "getAsBlob", e, t);
                return r ? new i(n.uid, r) : null
            },
            getAsDataURL: function() {
                var e = this.getRuntime(),
                    t = e.Image.getAsBlob.apply(this, arguments),
                    n;
                return t ? (n = new r, n.readAsDataURL(t)) : null
            }
        };
        return e.Image = o
    }), i(Q, [u, d, f, h, g], function(e, t, n, i, r) {
        function o(e) {
            var t = !1,
                n = null,
                i, r, o, a, s, u = 0;
            try {
                try {
                    n = new ActiveXObject("AgControl.AgControl"), n.IsVersionSupported(e) && (t = !0), n = null
                } catch (c) {
                    var l = navigator.plugins["Silverlight Plug-In"];
                    if (l) {
                        for (i = l.description, "1.0.30226.2" === i && (i = "2.0.30226.2"), r = i.split("."); r.length > 3;) r.pop();
                        for (; r.length < 4;) r.push(0);
                        for (o = e.split("."); o.length > 4;) o.pop();
                        do a = parseInt(o[u], 10), s = parseInt(r[u], 10), u++; while (u < o.length && a === s);
                        s >= a && !isNaN(a) && (t = !0)
                    }
                }
            } catch (d) {
                t = !1
            }
            return t
        }

        function a(a) {
            var c = this,
                l;
            a = e.extend({
                xap_url: t.xap_url
            }, a), r.call(this, a, s, {
                access_binary: r.capTrue,
                access_image_binary: r.capTrue,
                display_media: r.capTrue,
                do_cors: r.capTrue,
                drag_and_drop: !1,
                report_upload_progress: r.capTrue,
                resize_image: r.capTrue,
                return_response_headers: function(e) {
                    return e && "client" === c.mode
                },
                return_response_type: function(e) {
                    return "json" !== e ? !0 : !!window.JSON
                },
                return_status_code: function(t) {
                    return "client" === c.mode || !e.arrayDiff(t, [200, 404])
                },
                select_file: r.capTrue,
                select_multiple: r.capTrue,
                send_binary_string: r.capTrue,
                send_browser_cookies: function(e) {
                    return e && "browser" === c.mode
                },
                send_custom_headers: function(e) {
                    return e && "client" === c.mode
                },
                send_multipart: r.capTrue,
                slice_blob: r.capTrue,
                stream_upload: !0,
                summon_file_dialog: !1,
                upload_filesize: r.capTrue,
                use_http_method: function(t) {
                    return "client" === c.mode || !e.arrayDiff(t, ["GET", "POST"])
                }
            }, {
                return_response_headers: function(e) {
                    return e ? "client" : "browser"
                },
                return_status_code: function(t) {
                    return e.arrayDiff(t, [200, 404]) ? "client" : ["client", "browser"]
                },
                send_browser_cookies: function(e) {
                    return e ? "browser" : "client"
                },
                send_custom_headers: function(e) {
                    return e ? "client" : "browser"
                },
                use_http_method: function(t) {
                    return e.arrayDiff(t, ["GET", "POST"]) ? "client" : ["client", "browser"]
                }
            }), o("2.0.31005.0") && "Opera" !== t.browser || (this.mode = !1), e.extend(this, {
                getShim: function() {
                    return n.get(this.uid).content.Moxie
                },
                shimExec: function(e, t) {
                    var n = [].slice.call(arguments, 2);
                    return c.getShim().exec(this.uid, e, t, n)
                },
                init: function() {
                    var e;
                    e = this.getShimContainer(), e.innerHTML = '<object id="' + this.uid + '" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="' + a.xap_url + '"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid=' + this.uid + ",target=" + t.global_event_dispatcher + '"/></object>', l = setTimeout(function() {
                        c && !c.initialized && c.trigger("Error", new i.RuntimeError(i.RuntimeError.NOT_INIT_ERR))
                    }, "Windows" !== t.OS ? 1e4 : 5e3)
                },
                destroy: function(e) {
                    return function() {
                        e.call(c), clearTimeout(l), a = l = e = c = null
                    }
                }(this.destroy)
            }, u)
        }
        var s = "silverlight",
            u = {};
        return r.addConstructor(s, a), u
    }), i(et, [Q, u, V], function(e, t, n) {
        return e.Blob = t.extend({}, n)
    }), i(tt, [Q], function(e) {
        var t = {
            init: function(e) {
                function t(e) {
                    for (var t = "", n = 0; n < e.length; n++) t += ("" !== t ? "|" : "") + e[n].title + " | *." + e[n].extensions.replace(/,/g, ";*.");
                    return t
                }
                this.getRuntime().shimExec.call(this, "FileInput", "init", t(e.accept), e.name, e.multiple), this.trigger("ready")
            }
        };
        return e.FileInput = t
    }), i(nt, [Q, f, L], function(e, t, n) {
        var i = {
            init: function() {
                var e = this,
                    i = e.getRuntime(),
                    r;
                return r = i.getShimContainer(), n.addEvent(r, "dragover", function(e) {
                    e.preventDefault(), e.stopPropagation(), e.dataTransfer.dropEffect = "copy"
                }, e.uid), n.addEvent(r, "dragenter", function(e) {
                    e.preventDefault();
                    var n = t.get(i.uid).dragEnter(e);
                    n && e.stopPropagation()
                }, e.uid), n.addEvent(r, "drop", function(e) {
                    e.preventDefault();
                    var n = t.get(i.uid).dragDrop(e);
                    n && e.stopPropagation()
                }, e.uid), i.shimExec.call(this, "FileDrop", "init")
            }
        };
        return e.FileDrop = i
    }), i(it, [Q, u, Y], function(e, t, n) {
        return e.FileReader = t.extend({}, n)
    }), i(rt, [Q, u, $], function(e, t, n) {
        return e.FileReaderSync = t.extend({}, n)
    }), i(ot, [Q, u, J], function(e, t, n) {
        return e.XMLHttpRequest = t.extend({}, n)
    }), i(at, [Q, u, Z], function(e, t, n) {
        return e.Transporter = t.extend({}, n)
    }), i(st, [Q, u, K], function(e, t, n) {
        return e.Image = t.extend({}, n, {
            getInfo: function() {
                var e = this.getRuntime(),
                    n = ["tiff", "exif", "gps"],
                    i = {
                        meta: {}
                    },
                    r = e.shimExec.call(this, "Image", "getInfo");
                return r.meta && t.each(n, function(e) {
                    var t = r.meta[e],
                        n, o, a, s;
                    if (t && t.keys)
                        for (i.meta[e] = {}, o = 0, a = t.keys.length; a > o; o++) n = t.keys[o], s = t[n], s && (/^(\d|[1-9]\d+)$/.test(s) ? s = parseInt(s, 10) : /^\d*\.\d+$/.test(s) && (s = parseFloat(s)), i.meta[e][n] = s)
                }), i.width = parseInt(r.width, 10), i.height = parseInt(r.height, 10), i.size = parseInt(r.size, 10), i.type = r.type, i.name = r.name, i
            }
        })
    }), i(ut, [u, h, g, d], function(e, t, n, i) {
        function r(t) {
            var r = this,
                s = n.capTest,
                u = n.capTrue;
            n.call(this, t, o, {
                access_binary: s(window.FileReader || window.File && File.getAsDataURL),
                access_image_binary: !1,
                display_media: s(a.Image && (i.can("create_canvas") || i.can("use_data_uri_over32kb"))),
                do_cors: !1,
                drag_and_drop: !1,
                filter_by_extension: s(function() {
                    return "Chrome" === i.browser && i.version >= 28 || "IE" === i.browser && i.version >= 10
                }()),
                resize_image: function() {
                    return a.Image && r.can("access_binary") && i.can("create_canvas")
                },
                report_upload_progress: !1,
                return_response_headers: !1,
                return_response_type: function(t) {
                    return "json" === t && window.JSON ? !0 : !!~e.inArray(t, ["text", "document", ""])
                },
                return_status_code: function(t) {
                    return !e.arrayDiff(t, [200, 404])
                },
                select_file: function() {
                    return i.can("use_fileinput")
                },
                select_multiple: !1,
                send_binary_string: !1,
                send_custom_headers: !1,
                send_multipart: !0,
                slice_blob: !1,
                stream_upload: function() {
                    return r.can("select_file")
                },
                summon_file_dialog: s(function() {
                    return "Firefox" === i.browser && i.version >= 4 || "Opera" === i.browser && i.version >= 12 || !!~e.inArray(i.browser, ["Chrome", "Safari"])
                }()),
                upload_filesize: u,
                use_http_method: function(t) {
                    return !e.arrayDiff(t, ["GET", "POST"])
                }
            }), e.extend(this, {
                init: function() {
                    this.trigger("Init")
                },
                destroy: function(e) {
                    return function() {
                        e.call(r), e = r = null
                    }
                }(this.destroy)
            }), e.extend(this.getShim(), a)
        }
        var o = "html4",
            a = {};
        return n.addConstructor(o, r), a
    }), i(ct, [ut, u, f, L, l, d], function(e, t, n, i, r, o) {
        function a() {
            function e() {
                var r = this,
                    l = r.getRuntime(),
                    d, f, h, p, m, g;
                g = t.guid("uid_"), d = l.getShimContainer(), a && (h = n.get(a + "_form"), h && t.extend(h.style, {
                    top: "100%"
                })), p = document.createElement("form"), p.setAttribute("id", g + "_form"), p.setAttribute("method", "post"), p.setAttribute("enctype", "multipart/form-data"), p.setAttribute("encoding", "multipart/form-data"), t.extend(p.style, {
                    overflow: "hidden",
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: "100%",
                    height: "100%"
                }), m = document.createElement("input"), m.setAttribute("id", g), m.setAttribute("type", "file"), m.setAttribute("name", c.name || "Filedata"), m.setAttribute("accept", u.join(",")), t.extend(m.style, {
                    fontSize: "999px",
                    opacity: 0
                }), p.appendChild(m), d.appendChild(p), t.extend(m.style, {
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: "100%",
                    height: "100%"
                }), "IE" === o.browser && o.version < 10 && t.extend(m.style, {
                    filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=0)"
                }), m.onchange = function() {
                    var t;
                    this.value && (t = this.files ? this.files[0] : {
                        name: this.value
                    }, s = [t], this.onchange = function() {}, e.call(r), r.bind("change", function i() {
                        var e = n.get(g),
                            t = n.get(g + "_form"),
                            o;
                        r.unbind("change", i), r.files.length && e && t && (o = r.files[0], e.setAttribute("id", o.uid), t.setAttribute("id", o.uid + "_form"), t.setAttribute("target", o.uid + "_iframe")), e = t = null
                    }, 998), m = p = null, r.trigger("change"))
                }, l.can("summon_file_dialog") && (f = n.get(c.browse_button), i.removeEvent(f, "click", r.uid), i.addEvent(f, "click", function(e) {
                    m && !m.disabled && m.click(), e.preventDefault()
                }, r.uid)), a = g, d = h = f = null
            }
            var a, s = [],
                u = [],
                c;
            t.extend(this, {
                init: function(t) {
                    var o = this,
                        a = o.getRuntime(),
                        s;
                    c = t, u = t.accept.mimes || r.extList2mimes(t.accept, a.can("filter_by_extension")), s = a.getShimContainer(),
                        function() {
                            var e, r, u;
                            e = n.get(t.browse_button), a.can("summon_file_dialog") && ("static" === n.getStyle(e, "position") && (e.style.position = "relative"), r = parseInt(n.getStyle(e, "z-index"), 10) || 1, e.style.zIndex = r, s.style.zIndex = r - 1), u = a.can("summon_file_dialog") ? e : s, i.addEvent(u, "mouseover", function() {
                                o.trigger("mouseenter")
                            }, o.uid), i.addEvent(u, "mouseout", function() {
                                o.trigger("mouseleave")
                            }, o.uid), i.addEvent(u, "mousedown", function() {
                                o.trigger("mousedown")
                            }, o.uid), i.addEvent(n.get(t.container), "mouseup", function() {
                                o.trigger("mouseup")
                            }, o.uid), e = null
                        }(), e.call(this), s = null, o.trigger({
                            type: "ready",
                            async: !0
                        })
                },
                getFiles: function() {
                    return s
                },
                disable: function(e) {
                    var t;
                    (t = n.get(a)) && (t.disabled = !!e)
                },
                destroy: function() {
                    var e = this.getRuntime(),
                        t = e.getShim(),
                        r = e.getShimContainer();
                    i.removeAllEvents(r, this.uid), i.removeAllEvents(c && n.get(c.container), this.uid), i.removeAllEvents(c && n.get(c.browse_button), this.uid), r && (r.innerHTML = ""), t.removeInstance(this.uid), a = s = u = c = r = t = null
                }
            })
        }
        return e.FileInput = a
    }), i(lt, [ut, F], function(e, t) {
        return e.FileReader = t
    }), i(dt, [ut, u, f, R, h, L, y, A], function(e, t, n, i, r, o, a, s) {
        function u() {
            function e(e) {
                var t = this,
                    i, r, a, s, u = !1;
                if (l) {
                    if (i = l.id.replace(/_iframe$/, ""), r = n.get(i + "_form")) {
                        for (a = r.getElementsByTagName("input"), s = a.length; s--;) switch (a[s].getAttribute("type")) {
                            case "hidden":
                                a[s].parentNode.removeChild(a[s]);
                                break;
                            case "file":
                                u = !0
                        }
                        a = [], u || r.parentNode.removeChild(r), r = null
                    }
                    setTimeout(function() {
                        o.removeEvent(l, "load", t.uid), l.parentNode && l.parentNode.removeChild(l);
                        var n = t.getRuntime().getShimContainer();
                        n.children.length || n.parentNode.removeChild(n), n = l = null, e()
                    }, 1)
                }
            }
            var u, c, l;
            t.extend(this, {
                send: function(d, f) {
                    function h() {
                        var n = m.getShimContainer() || document.body,
                            r = document.createElement("div");
                        r.innerHTML = '<iframe id="' + g + '_iframe" name="' + g + '_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>', l = r.firstChild, n.appendChild(l), o.addEvent(l, "load", function() {
                            var n;
                            try {
                                n = l.contentWindow.document || l.contentDocument || window.frames[l.id].document, /^4(0[0-9]|1[0-7]|2[2346])\s/.test(n.title) ? u = n.title.replace(/^(\d+).*$/, "$1") : (u = 200, c = t.trim(n.body.innerHTML), p.trigger({
                                    type: "progress",
                                    loaded: c.length,
                                    total: c.length
                                }), w && p.trigger({
                                    type: "uploadprogress",
                                    loaded: w.size || 1025,
                                    total: w.size || 1025
                                }))
                            } catch (r) {
                                if (!i.hasSameOrigin(d.url)) return void e.call(p, function() {
                                    p.trigger("error")
                                });
                                u = 404
                            }
                            e.call(p, function() {
                                p.trigger("load")
                            })
                        }, p.uid)
                    }
                    var p = this,
                        m = p.getRuntime(),
                        g, v, y, w;
                    if (u = c = null, f instanceof s && f.hasBlob()) {
                        if (w = f.getBlob(), g = w.uid, y = n.get(g), v = n.get(g + "_form"), !v) throw new r.DOMException(r.DOMException.NOT_FOUND_ERR)
                    } else g = t.guid("uid_"), v = document.createElement("form"), v.setAttribute("id", g + "_form"), v.setAttribute("method", d.method), v.setAttribute("enctype", "multipart/form-data"), v.setAttribute("encoding", "multipart/form-data"), v.setAttribute("target", g + "_iframe"), m.getShimContainer().appendChild(v);
                    f instanceof s && f.each(function(e, n) {
                        if (e instanceof a) y && y.setAttribute("name", n);
                        else {
                            var i = document.createElement("input");
                            t.extend(i, {
                                type: "hidden",
                                name: n,
                                value: e
                            }), y ? v.insertBefore(i, y) : v.appendChild(i)
                        }
                    }), v.setAttribute("action", d.url), h(), v.submit(), p.trigger("loadstart")
                },
                getStatus: function() {
                    return u
                },
                getResponse: function(e) {
                    if ("json" === e && "string" === t.typeOf(c) && window.JSON) try {
                        return JSON.parse(c.replace(/^\s*<pre[^>]*>/, "").replace(/<\/pre>\s*$/, ""))
                    } catch (n) {
                        return null
                    }
                    return c
                },
                abort: function() {
                    var t = this;
                    l && l.contentWindow && (l.contentWindow.stop ? l.contentWindow.stop() : l.contentWindow.document.execCommand ? l.contentWindow.document.execCommand("Stop") : l.src = "about:blank"), e.call(this, function() {
                        t.dispatchEvent("abort")
                    })
                }
            })
        }
        return e.XMLHttpRequest = u
    }), i(ft, [ut, X], function(e, t) {
        return e.Image = t
    }), a([u, c, l, d, f, h, p, m, g, v, y, w, E, _, x, b, R, T, A, S, O, I, L])
}(this);;
(function(e) {
    "use strict";
    var t = {},
        n = e.moxie.core.utils.Basic.inArray;
    return function r(e) {
        var i, s;
        for (i in e) s = typeof e[i], s === "object" && !~n(i, ["Exceptions", "Env", "Mime"]) ? r(e[i]) : s === "function" && (t[i] = e[i])
    }(e.moxie), t.Env = e.moxie.core.utils.Env, t.Mime = e.moxie.core.utils.Mime, t.Exceptions = e.moxie.core.Exceptions, e.mOxie = t, e.o || (e.o = t), t
})(this);
/**
 * Plupload - multi-runtime File Uploader
 * v2.1.2
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-05-14
 */
;
(function(e, t, n) {
    function s(e) {
        function r(e, t, r) {
            var i = {
                chunks: "slice_blob",
                jpgresize: "send_binary_string",
                pngresize: "send_binary_string",
                progress: "report_upload_progress",
                multi_selection: "select_multiple",
                dragdrop: "drag_and_drop",
                drop_element: "drag_and_drop",
                headers: "send_custom_headers",
                urlstream_upload: "send_binary_string",
                canSendBinary: "send_binary",
                triggerDialog: "summon_file_dialog"
            };
            i[e] ? n[i[e]] = t : r || (n[e] = t)
        }
        var t = e.required_features,
            n = {};
        if (typeof t == "string") o.each(t.split(/\s*,\s*/), function(e) {
            r(e, !0)
        });
        else if (typeof t == "object") o.each(t, function(e, t) {
            r(t, e)
        });
        else if (t === !0) {
            e.chunk_size > 0 && (n.slice_blob = !0);
            if (e.resize.enabled || !e.multipart) n.send_binary_string = !0;
            o.each(e, function(e, t) {
                r(t, !!e, !0)
            })
        }
        return n
    }
    var r = e.setTimeout,
        i = {},
        o = {
            VERSION: "2.1.2",
            STOPPED: 1,
            STARTED: 2,
            QUEUED: 1,
            UPLOADING: 2,
            FAILED: 4,
            DONE: 5,
            GENERIC_ERROR: -100,
            HTTP_ERROR: -200,
            IO_ERROR: -300,
            SECURITY_ERROR: -400,
            INIT_ERROR: -500,
            FILE_SIZE_ERROR: -600,
            FILE_EXTENSION_ERROR: -601,
            FILE_DUPLICATE_ERROR: -602,
            IMAGE_FORMAT_ERROR: -700,
            MEMORY_ERROR: -701,
            IMAGE_DIMENSIONS_ERROR: -702,
            mimeTypes: t.mimes,
            ua: t.ua,
            typeOf: t.typeOf,
            extend: t.extend,
            guid: t.guid,
            get: function(n) {
                var r = [],
                    i;
                t.typeOf(n) !== "array" && (n = [n]);
                var s = n.length;
                while (s--) i = t.get(n[s]), i && r.push(i);
                return r.length ? r : null
            },
            each: t.each,
            getPos: t.getPos,
            getSize: t.getSize,
            xmlEncode: function(e) {
                var t = {
                        "<": "lt",
                        ">": "gt",
                        "&": "amp",
                        '"': "quot",
                        "'": "#39"
                    },
                    n = /[<>&\"\']/g;
                return e ? ("" + e).replace(n, function(e) {
                    return t[e] ? "&" + t[e] + ";" : e
                }) : e
            },
            toArray: t.toArray,
            inArray: t.inArray,
            addI18n: t.addI18n,
            translate: t.translate,
            isEmptyObj: t.isEmptyObj,
            hasClass: t.hasClass,
            addClass: t.addClass,
            removeClass: t.removeClass,
            getStyle: t.getStyle,
            addEvent: t.addEvent,
            removeEvent: t.removeEvent,
            removeAllEvents: t.removeAllEvents,
            cleanName: function(e) {
                var t, n;
                n = [/[\300-\306]/g, "A", /[\340-\346]/g, "a", /\307/g, "C", /\347/g, "c", /[\310-\313]/g, "E", /[\350-\353]/g, "e", /[\314-\317]/g, "I", /[\354-\357]/g, "i", /\321/g, "N", /\361/g, "n", /[\322-\330]/g, "O", /[\362-\370]/g, "o", /[\331-\334]/g, "U", /[\371-\374]/g, "u"];
                for (t = 0; t < n.length; t += 2) e = e.replace(n[t], n[t + 1]);
                return e = e.replace(/\s+/g, "_"), e = e.replace(/[^a-z0-9_\-\.]+/gi, ""), e
            },
            buildUrl: function(e, t) {
                var n = "";
                return o.each(t, function(e, t) {
                    n += (n ? "&" : "") + encodeURIComponent(t) + "=" + encodeURIComponent(e)
                }), n && (e += (e.indexOf("?") > 0 ? "&" : "?") + n), e
            },
            formatSize: function(e) {
                function t(e, t) {
                    return Math.round(e * Math.pow(10, t)) / Math.pow(10, t)
                }
                if (e === n || /\D/.test(e)) return o.translate("N/A");
                var r = Math.pow(1024, 4);
                return e > r ? t(e / r, 1) + " " + o.translate("tb") : e > (r /= 1024) ? t(e / r, 1) + " " + o.translate("gb") : e > (r /= 1024) ? t(e / r, 1) + " " + o.translate("mb") : e > 1024 ? Math.round(e / 1024) + " " + o.translate("kb") : e + " " + o.translate("b")
            },
            parseSize: t.parseSizeStr,
            predictRuntime: function(e, n) {
                var r, i;
                return r = new o.Uploader(e), i = t.Runtime.thatCan(r.getOption().required_features, n || e.runtimes), r.destroy(), i
            },
            addFileFilter: function(e, t) {
                i[e] = t
            }
        };
    o.addFileFilter("mime_types", function(e, t, n) {
        e.length && !e.regexp.test(t.name) ? (this.trigger("Error", {
            code: o.FILE_EXTENSION_ERROR,
            message: o.translate("File extension error."),
            file: t
        }), n(!1)) : n(!0)
    }), o.addFileFilter("max_file_size", function(e, t, n) {
        var r;
        e = o.parseSize(e), t.size !== r && e && t.size > e ? (this.trigger("Error", {
            code: o.FILE_SIZE_ERROR,
            message: o.translate("File size error."),
            file: t
        }), n(!1)) : n(!0)
    }), o.addFileFilter("prevent_duplicates", function(e, t, n) {
        if (e) {
            var r = this.files.length;
            while (r--)
                if (t.name === this.files[r].name && t.size === this.files[r].size) {
                    this.trigger("Error", {
                        code: o.FILE_DUPLICATE_ERROR,
                        message: o.translate("Duplicate file error."),
                        file: t
                    }), n(!1);
                    return
                }
        }
        n(!0)
    }), o.Uploader = function(e) {
        function g() {
            var e, t = 0,
                n;
            if (this.state == o.STARTED) {
                for (n = 0; n < f.length; n++) !e && f[n].status == o.QUEUED ? (e = f[n], this.trigger("BeforeUpload", e) && (e.status = o.UPLOADING, this.trigger("UploadFile", e))) : t++;
                t == f.length && (this.state !== o.STOPPED && (this.state = o.STOPPED, this.trigger("StateChanged")), this.trigger("UploadComplete", f))
            }
        }

        function y(e) {
            e.percent = e.size > 0 ? Math.ceil(e.loaded / e.size * 100) : 100, b()
        }

        function b() {
            var e, t;
            d.reset();
            for (e = 0; e < f.length; e++) t = f[e], t.size !== n ? (d.size += t.origSize, d.loaded += t.loaded * t.origSize / t.size) : d.size = n, t.status == o.DONE ? d.uploaded++ : t.status == o.FAILED ? d.failed++ : d.queued++;
            d.size === n ? d.percent = f.length > 0 ? Math.ceil(d.uploaded / f.length * 100) : 0 : (d.bytesPerSec = Math.ceil(d.loaded / ((+(new Date) - p || 1) / 1e3)), d.percent = d.size > 0 ? Math.ceil(d.loaded / d.size * 100) : 0)
        }

        function w() {
            var e = c[0] || h[0];
            return e ? e.getRuntime().uid : !1
        }

        function E(e, n) {
            if (e.ruid) {
                var r = t.Runtime.getInfo(e.ruid);
                if (r) return r.can(n)
            }
            return !1
        }

        function S() {
            this.bind("FilesAdded FilesRemoved", function(e) {
                e.trigger("QueueChanged"), e.refresh()
            }), this.bind("CancelUpload", O), this.bind("BeforeUpload", C), this.bind("UploadFile", k), this.bind("UploadProgress", L), this.bind("StateChanged", A), this.bind("QueueChanged", b), this.bind("Error", _), this.bind("FileUploaded", M), this.bind("Destroy", D)
        }

        function x(e, n) {
            var r = this,
                i = 0,
                s = [],
                u = {
                    runtime_order: e.runtimes,
                    required_caps: e.required_features,
                    preferred_caps: l,
                    swf_url: e.flash_swf_url,
                    xap_url: e.silverlight_xap_url
                };
            o.each(e.runtimes.split(/\s*,\s*/), function(t) {
                e[t] && (u[t] = e[t])
            }), e.browse_button && o.each(e.browse_button, function(n) {
                s.push(function(s) {
                    var a = new t.FileInput(o.extend({}, u, {
                        accept: e.filters.mime_types,
                        name: e.file_data_name,
                        multiple: e.multi_selection,
                        container: e.container,
                        browse_button: n
                    }));
                    a.onready = function() {
                        var e = t.Runtime.getInfo(this.ruid);
                        t.extend(r.features, {
                            chunks: e.can("slice_blob"),
                            multipart: e.can("send_multipart"),
                            multi_selection: e.can("select_multiple")
                        }), i++, c.push(this), s()
                    }, a.onchange = function() {
                        r.addFile(this.files)
                    }, a.bind("mouseenter mouseleave mousedown mouseup", function(r) {
                        v || (e.browse_button_hover && ("mouseenter" === r.type ? t.addClass(n, e.browse_button_hover) : "mouseleave" === r.type && t.removeClass(n, e.browse_button_hover)), e.browse_button_active && ("mousedown" === r.type ? t.addClass(n, e.browse_button_active) : "mouseup" === r.type && t.removeClass(n, e.browse_button_active)))
                    }), a.bind("mousedown", function() {
                        r.trigger("Browse")
                    }), a.bind("error runtimeerror", function() {
                        a = null, s()
                    }), a.init()
                })
            }), e.drop_element && o.each(e.drop_element, function(e) {
                s.push(function(n) {
                    var s = new t.FileDrop(o.extend({}, u, {
                        drop_zone: e
                    }));
                    s.onready = function() {
                        var e = t.Runtime.getInfo(this.ruid);
                        r.features.dragdrop = e.can("drag_and_drop"), i++, h.push(this), n()
                    }, s.ondrop = function() {
                        r.addFile(this.files)
                    }, s.bind("error runtimeerror", function() {
                        s = null, n()
                    }), s.init()
                })
            }), t.inSeries(s, function() {
                typeof n == "function" && n(i)
            })
        }

        function T(e, r, i) {
            var s = new t.Image;
            try {
                s.onload = function() {
                    if (r.width > this.width && r.height > this.height && r.quality === n && r.preserve_headers && !r.crop) return this.destroy(), i(e);
                    s.downsize(r.width, r.height, r.crop, r.preserve_headers)
                }, s.onresize = function() {
                    i(this.getAsBlob(e.type, r.quality)), this.destroy()
                }, s.onerror = function() {
                    i(e)
                }, s.load(e)
            } catch (o) {
                i(e)
            }
        }

        function N(e, n, r) {
            function f(e, t, n) {
                var r = a[e];
                switch (e) {
                    case "max_file_size":
                        e === "max_file_size" && (a.max_file_size = a.filters.max_file_size = t);
                        break;
                    case "chunk_size":
                        if (t = o.parseSize(t)) a[e] = t, a.send_file_name = !0;
                        break;
                    case "multipart":
                        a[e] = t, t || (a.send_file_name = !0);
                        break;
                    case "unique_names":
                        a[e] = t, t && (a.send_file_name = !0);
                        break;
                    case "filters":
                        o.typeOf(t) === "array" && (t = {
                            mime_types: t
                        }), n ? o.extend(a.filters, t) : a.filters = t, t.mime_types && (a.filters.mime_types.regexp = function(e) {
                            var t = [];
                            return o.each(e, function(e) {
                                o.each(e.extensions.split(/,/), function(e) {
                                    /^\s*\*\s*$/.test(e) ? t.push("\\.*") : t.push("\\." + e.replace(new RegExp("[" + "/^$.*+?|()[]{}\\".replace(/./g, "\\$&") + "]", "g"), "\\$&"))
                                })
                            }), new RegExp("(" + t.join("|") + ")$", "i")
                        }(a.filters.mime_types));
                        break;
                    case "resize":
                        n ? o.extend(a.resize, t, {
                            enabled: !0
                        }) : a.resize = t;
                        break;
                    case "prevent_duplicates":
                        a.prevent_duplicates = a.filters.prevent_duplicates = !!t;
                        break;
                    case "browse_button":
                    case "drop_element":
                        t = o.get(t);
                    case "container":
                    case "runtimes":
                    case "multi_selection":
                    case "flash_swf_url":
                    case "silverlight_xap_url":
                        a[e] = t, n || (u = !0);
                        break;
                    default:
                        a[e] = t
                }
                n || i.trigger("OptionChanged", e, t, r)
            }
            var i = this,
                u = !1;
            typeof e == "object" ? o.each(e, function(e, t) {
                f(t, e, r)
            }) : f(e, n, r), r ? (a.required_features = s(o.extend({}, a)), l = s(o.extend({}, a, {
                required_features: !0
            }))) : u && (i.trigger("Destroy"), x.call(i, a, function(e) {
                e ? (i.runtime = t.Runtime.getInfo(w()).type, i.trigger("Init", {
                    runtime: i.runtime
                }), i.trigger("PostInit")) : i.trigger("Error", {
                    code: o.INIT_ERROR,
                    message: o.translate("Init error.")
                })
            }))
        }

        function C(e, t) {
            if (e.settings.unique_names) {
                var n = t.name.match(/\.([^.]+)$/),
                    r = "part";
                n && (r = n[1]), t.target_name = t.id + "." + r
            }
        }

        function k(e, n) {
            function h() {
                u-- > 0 ? r(p, 1e3) : (n.loaded = f, e.trigger("Error", {
                    code: o.HTTP_ERROR,
                    message: o.translate("HTTP Error."),
                    file: n,
                    response: m.responseText,
                    status: m.status,
                    responseHeaders: m.getAllResponseHeaders()
                }))
            }

            function p() {
                var d, v, g = {},
                    y;
                if (n.status !== o.UPLOADING || e.state === o.STOPPED) return;
                e.settings.send_file_name && (g.name = n.target_name || n.name), s && a.chunks && c.size > s ? (y = Math.min(s, c.size - f), d = c.slice(f, f + y)) : (y = c.size, d = c), s && a.chunks && (e.settings.send_chunk_number ? (g.chunk = Math.ceil(f / s), g.chunks = Math.ceil(c.size / s)) : (g.offset = f, g.total = c.size)), m = new t.XMLHttpRequest, m.upload && (m.upload.onprogress = function(t) {
                    n.loaded = Math.min(n.size, f + t.loaded), e.trigger("UploadProgress", n)
                }), m.onload = function() {
                    if (m.status >= 400) {
                        h();
                        return
                    }
                    u = e.settings.max_retries, y < c.size ? (d.destroy(), f += y, n.loaded = Math.min(f, c.size), e.trigger("ChunkUploaded", n, {
                        offset: n.loaded,
                        total: c.size,
                        response: m.responseText,
                        status: m.status,
                        responseHeaders: m.getAllResponseHeaders()
                    }), t.Env.browser === "Android Browser" && e.trigger("UploadProgress", n)) : n.loaded = n.size, d = v = null, !f || f >= c.size ? (n.size != n.origSize && (c.destroy(), c = null), e.trigger("UploadProgress", n), n.status = o.DONE, e.trigger("FileUploaded", n, {
                        response: m.responseText,
                        status: m.status,
                        responseHeaders: m.getAllResponseHeaders()
                    })) : r(p, 1)
                }, m.onerror = function() {
                    h()
                }, m.onloadend = function() {
                    this.destroy(), m = null
                }, e.settings.multipart && a.multipart ? (m.open("post", i, !0), o.each(e.settings.headers, function(e, t) {
                    m.setRequestHeader(t, e)
                }), v = new t.FormData, o.each(o.extend(g, e.settings.multipart_params), function(e, t) {
                    v.append(t, e)
                }), v.append(e.settings.file_data_name, d), m.send(v, {
                    runtime_order: e.settings.runtimes,
                    required_caps: e.settings.required_features,
                    preferred_caps: l,
                    swf_url: e.settings.flash_swf_url,
                    xap_url: e.settings.silverlight_xap_url
                })) : (i = o.buildUrl(e.settings.url, o.extend(g, e.settings.multipart_params)), m.open("post", i, !0), m.setRequestHeader("Content-Type", "application/octet-stream"), o.each(e.settings.headers, function(e, t) {
                    m.setRequestHeader(t, e)
                }), m.send(d, {
                    runtime_order: e.settings.runtimes,
                    required_caps: e.settings.required_features,
                    preferred_caps: l,
                    swf_url: e.settings.flash_swf_url,
                    xap_url: e.settings.silverlight_xap_url
                }))
            }
            var i = e.settings.url,
                s = e.settings.chunk_size,
                u = e.settings.max_retries,
                a = e.features,
                f = 0,
                c;
            n.loaded && (f = n.loaded = s ? s * Math.floor(n.loaded / s) : 0), c = n.getSource(), e.settings.resize.enabled && E(c, "send_binary_string") && !!~t.inArray(c.type, ["image/jpeg", "image/png"]) ? T.call(this, c, e.settings.resize, function(e) {
                c = e, n.size = e.size, p()
            }) : p()
        }

        function L(e, t) {
            y(t)
        }

        function A(e) {
            if (e.state == o.STARTED) p = +(new Date);
            else if (e.state == o.STOPPED)
                for (var t = e.files.length - 1; t >= 0; t--) e.files[t].status == o.UPLOADING && (e.files[t].status = o.QUEUED, b())
        }

        function O() {
            m && m.abort()
        }

        function M(e) {
            b(), r(function() {
                g.call(e)
            }, 1)
        }

        function _(e, t) {
            t.code === o.INIT_ERROR ? e.destroy() : t.file && (t.file.status = o.FAILED, y(t.file), e.state == o.STARTED && (e.trigger("CancelUpload"), r(function() {
                g.call(e)
            }, 1)))
        }

        function D(e) {
            e.stop(), o.each(f, function(e) {
                e.destroy()
            }), f = [], c.length && (o.each(c, function(e) {
                e.destroy()
            }), c = []), h.length && (o.each(h, function(e) {
                e.destroy()
            }), h = []), l = {}, v = !1, p = m = null, d.reset()
        }
        var u = o.guid(),
            a, f = [],
            l = {},
            c = [],
            h = [],
            p, d, v = !1,
            m;
        a = {
            runtimes: t.Runtime.order,
            max_retries: 0,
            chunk_size: 0,
            multipart: !0,
            multi_selection: !0,
            file_data_name: "file",
            flash_swf_url: "js/Moxie.swf",
            silverlight_xap_url: "js/Moxie.xap",
            filters: {
                mime_types: [],
                prevent_duplicates: !1,
                max_file_size: 0
            },
            resize: {
                enabled: !1,
                preserve_headers: !0,
                crop: !1
            },
            send_file_name: !0,
            send_chunk_number: !0
        }, N.call(this, e, null, !0), d = new o.QueueProgress, o.extend(this, {
            id: u,
            uid: u,
            state: o.STOPPED,
            features: {},
            runtime: null,
            files: f,
            settings: a,
            total: d,
            init: function() {
                var e = this;
                typeof a.preinit == "function" ? a.preinit(e) : o.each(a.preinit, function(t, n) {
                    e.bind(n, t)
                }), S.call(this);
                if (!a.browse_button || !a.url) {
                    this.trigger("Error", {
                        code: o.INIT_ERROR,
                        message: o.translate("Init error.")
                    });
                    return
                }
                x.call(this, a, function(n) {
                    typeof a.init == "function" ? a.init(e) : o.each(a.init, function(t, n) {
                        e.bind(n, t)
                    }), n ? (e.runtime = t.Runtime.getInfo(w()).type, e.trigger("Init", {
                        runtime: e.runtime
                    }), e.trigger("PostInit")) : e.trigger("Error", {
                        code: o.INIT_ERROR,
                        message: o.translate("Init error.")
                    })
                })
            },
            setOption: function(e, t) {
                N.call(this, e, t, !this.runtime)
            },
            getOption: function(e) {
                return e ? a[e] : a
            },
            refresh: function() {
                c.length && o.each(c, function(e) {
                    e.trigger("Refresh")
                }), this.trigger("Refresh")
            },
            start: function() {
                this.state != o.STARTED && (this.state = o.STARTED, this.trigger("StateChanged"), g.call(this))
            },
            stop: function() {
                this.state != o.STOPPED && (this.state = o.STOPPED, this.trigger("StateChanged"), this.trigger("CancelUpload"))
            },
            disableBrowse: function() {
                v = arguments[0] !== n ? arguments[0] : !0, c.length && o.each(c, function(e) {
                    e.disable(v)
                }), this.trigger("DisableBrowse", v)
            },
            getFile: function(e) {
                var t;
                for (t = f.length - 1; t >= 0; t--)
                    if (f[t].id === e) return f[t]
            },
            addFile: function(e, n) {
                function c(e, n) {
                    var r = [];
                    t.each(s.settings.filters, function(t, n) {
                        i[n] && r.push(function(r) {
                            i[n].call(s, t, e, function(e) {
                                r(!e)
                            })
                        })
                    }), t.inSeries(r, n)
                }

                function h(e) {
                    var i = t.typeOf(e);
                    if (e instanceof t.File) {
                        if (!e.ruid && !e.isDetached()) {
                            if (!l) return !1;
                            e.ruid = l, e.connectRuntime(l)
                        }
                        h(new o.File(e))
                    } else e instanceof t.Blob ? (h(e.getSource()), e.destroy()) : e instanceof o.File ? (n && (e.name = n), u.push(function(t) {
                        c(e, function(n) {
                            n || (f.push(e), a.push(e), s.trigger("FileFiltered", e)), r(t, 1)
                        })
                    })) : t.inArray(i, ["file", "blob"]) !== -1 ? h(new t.File(null, e)) : i === "node" && t.typeOf(e.files) === "filelist" ? t.each(e.files, h) : i === "array" && (n = null, t.each(e, h))
                }
                var s = this,
                    u = [],
                    a = [],
                    l;
                l = w(), h(e), u.length && t.inSeries(u, function() {
                    a.length && s.trigger("FilesAdded", a)
                })
            },
            removeFile: function(e) {
                var t = typeof e == "string" ? e : e.id;
                for (var n = f.length - 1; n >= 0; n--)
                    if (f[n].id === t) return this.splice(n, 1)[0]
            },
            splice: function(e, t) {
                var r = f.splice(e === n ? 0 : e, t === n ? f.length : t),
                    i = !1;
                return this.state == o.STARTED && (o.each(r, function(e) {
                    if (e.status === o.UPLOADING) return i = !0, !1
                }), i && this.stop()), this.trigger("FilesRemoved", r), o.each(r, function(e) {
                    e.destroy()
                }), i && this.start(), r
            },
            bind: function(e, t, n) {
                var r = this;
                o.Uploader.prototype.bind.call(this, e, function() {
                    var e = [].slice.call(arguments);
                    return e.splice(0, 1, r), t.apply(this, e)
                }, 0, n)
            },
            destroy: function() {
                this.trigger("Destroy"), a = d = null, this.unbindAll()
            }
        })
    }, o.Uploader.prototype = t.EventTarget.instance, o.File = function() {
        function n(n) {
            o.extend(this, {
                id: o.guid(),
                name: n.name || n.fileName,
                type: n.type || "",
                size: n.size || n.fileSize,
                origSize: n.size || n.fileSize,
                loaded: 0,
                percent: 0,
                status: o.QUEUED,
                lastModifiedDate: n.lastModifiedDate || (new Date).toLocaleString(),
                getNative: function() {
                    var e = this.getSource().getSource();
                    return t.inArray(t.typeOf(e), ["blob", "file"]) !== -1 ? e : null
                },
                getSource: function() {
                    return e[this.id] ? e[this.id] : null
                },
                destroy: function() {
                    var t = this.getSource();
                    t && (t.destroy(), delete e[this.id])
                }
            }), e[this.id] = n
        }
        var e = {};
        return n
    }(), o.QueueProgress = function() {
        var e = this;
        e.size = 0, e.loaded = 0, e.uploaded = 0, e.failed = 0, e.queued = 0, e.percent = 0, e.bytesPerSec = 0, e.reset = function() {
            e.size = e.loaded = e.uploaded = e.failed = e.queued = e.percent = e.bytesPerSec = 0
        }
    }, e.plupload = o
})(window, mOxie);

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright  2001 Robert Penner
 * All rights reserved.
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright  2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */
jQuery.easing.jswing = jQuery.easing.swing;
jQuery.extend(jQuery.easing, {
    def: "easeOutQuad",
    swing: function(e, f, a, h, g) {
        return jQuery.easing[jQuery.easing.def](e, f, a, h, g)
    },
    easeInQuad: function(e, f, a, h, g) {
        return h * (f /= g) * f + a
    },
    easeOutQuad: function(e, f, a, h, g) {
        return -h * (f /= g) * (f - 2) + a
    },
    easeInOutQuad: function(e, f, a, h, g) {
        if ((f /= g / 2) < 1) {
            return h / 2 * f * f + a
        }
        return -h / 2 * ((--f) * (f - 2) - 1) + a
    },
    easeInCubic: function(e, f, a, h, g) {
        return h * (f /= g) * f * f + a
    },
    easeOutCubic: function(e, f, a, h, g) {
        return h * ((f = f / g - 1) * f * f + 1) + a
    },
    easeInOutCubic: function(e, f, a, h, g) {
        if ((f /= g / 2) < 1) {
            return h / 2 * f * f * f + a
        }
        return h / 2 * ((f -= 2) * f * f + 2) + a
    },
    easeInQuart: function(e, f, a, h, g) {
        return h * (f /= g) * f * f * f + a
    },
    easeOutQuart: function(e, f, a, h, g) {
        return -h * ((f = f / g - 1) * f * f * f - 1) + a
    },
    easeInOutQuart: function(e, f, a, h, g) {
        if ((f /= g / 2) < 1) {
            return h / 2 * f * f * f * f + a
        }
        return -h / 2 * ((f -= 2) * f * f * f - 2) + a
    },
    easeInQuint: function(e, f, a, h, g) {
        return h * (f /= g) * f * f * f * f + a
    },
    easeOutQuint: function(e, f, a, h, g) {
        return h * ((f = f / g - 1) * f * f * f * f + 1) + a
    },
    easeInOutQuint: function(e, f, a, h, g) {
        if ((f /= g / 2) < 1) {
            return h / 2 * f * f * f * f * f + a
        }
        return h / 2 * ((f -= 2) * f * f * f * f + 2) + a
    },
    easeInSine: function(e, f, a, h, g) {
        return -h * Math.cos(f / g * (Math.PI / 2)) + h + a
    },
    easeOutSine: function(e, f, a, h, g) {
        return h * Math.sin(f / g * (Math.PI / 2)) + a
    },
    easeInOutSine: function(e, f, a, h, g) {
        return -h / 2 * (Math.cos(Math.PI * f / g) - 1) + a
    },
    easeInExpo: function(e, f, a, h, g) {
        return (f == 0) ? a : h * Math.pow(2, 10 * (f / g - 1)) + a
    },
    easeOutExpo: function(e, f, a, h, g) {
        return (f == g) ? a + h : h * (-Math.pow(2, -10 * f / g) + 1) + a
    },
    easeInOutExpo: function(e, f, a, h, g) {
        if (f == 0) {
            return a
        }
        if (f == g) {
            return a + h
        }
        if ((f /= g / 2) < 1) {
            return h / 2 * Math.pow(2, 10 * (f - 1)) + a
        }
        return h / 2 * (-Math.pow(2, -10 * --f) + 2) + a
    },
    easeInCirc: function(e, f, a, h, g) {
        return -h * (Math.sqrt(1 - (f /= g) * f) - 1) + a
    },
    easeOutCirc: function(e, f, a, h, g) {
        return h * Math.sqrt(1 - (f = f / g - 1) * f) + a
    },
    easeInOutCirc: function(e, f, a, h, g) {
        if ((f /= g / 2) < 1) {
            return -h / 2 * (Math.sqrt(1 - f * f) - 1) + a
        }
        return h / 2 * (Math.sqrt(1 - (f -= 2) * f) + 1) + a
    },
    easeInElastic: function(f, h, e, l, k) {
        var i = 1.70158;
        var j = 0;
        var g = l;
        if (h == 0) {
            return e
        }
        if ((h /= k) == 1) {
            return e + l
        }
        if (!j) {
            j = k * 0.3
        }
        if (g < Math.abs(l)) {
            g = l;
            var i = j / 4
        } else {
            var i = j / (2 * Math.PI) * Math.asin(l / g)
        }
        return -(g * Math.pow(2, 10 * (h -= 1)) * Math.sin((h * k - i) * (2 * Math.PI) / j)) + e
    },
    easeOutElastic: function(f, h, e, l, k) {
        var i = 1.70158;
        var j = 0;
        var g = l;
        if (h == 0) {
            return e
        }
        if ((h /= k) == 1) {
            return e + l
        }
        if (!j) {
            j = k * 0.3
        }
        if (g < Math.abs(l)) {
            g = l;
            var i = j / 4
        } else {
            var i = j / (2 * Math.PI) * Math.asin(l / g)
        }
        return g * Math.pow(2, -10 * h) * Math.sin((h * k - i) * (2 * Math.PI) / j) + l + e
    },
    easeInOutElastic: function(f, h, e, l, k) {
        var i = 1.70158;
        var j = 0;
        var g = l;
        if (h == 0) {
            return e
        }
        if ((h /= k / 2) == 2) {
            return e + l
        }
        if (!j) {
            j = k * (0.3 * 1.5)
        }
        if (g < Math.abs(l)) {
            g = l;
            var i = j / 4
        } else {
            var i = j / (2 * Math.PI) * Math.asin(l / g)
        }
        if (h < 1) {
            return -0.5 * (g * Math.pow(2, 10 * (h -= 1)) * Math.sin((h * k - i) * (2 * Math.PI) / j)) + e
        }
        return g * Math.pow(2, -10 * (h -= 1)) * Math.sin((h * k - i) * (2 * Math.PI) / j) * 0.5 + l + e
    },
    easeInBack: function(e, f, a, i, h, g) {
        if (g == undefined) {
            g = 1.70158
        }
        return i * (f /= h) * f * ((g + 1) * f - g) + a
    },
    easeOutBack: function(e, f, a, i, h, g) {
        if (g == undefined) {
            g = 1.70158
        }
        return i * ((f = f / h - 1) * f * ((g + 1) * f + g) + 1) + a
    },
    easeInOutBack: function(e, f, a, i, h, g) {
        if (g == undefined) {
            g = 1.70158
        }
        if ((f /= h / 2) < 1) {
            return i / 2 * (f * f * (((g *= (1.525)) + 1) * f - g)) + a
        }
        return i / 2 * ((f -= 2) * f * (((g *= (1.525)) + 1) * f + g) + 2) + a
    },
    easeInBounce: function(e, f, a, h, g) {
        return h - jQuery.easing.easeOutBounce(e, g - f, 0, h, g) + a
    },
    easeOutBounce: function(e, f, a, h, g) {
        if ((f /= g) < (1 / 2.75)) {
            return h * (7.5625 * f * f) + a
        } else {
            if (f < (2 / 2.75)) {
                return h * (7.5625 * (f -= (1.5 / 2.75)) * f + 0.75) + a
            } else {
                if (f < (2.5 / 2.75)) {
                    return h * (7.5625 * (f -= (2.25 / 2.75)) * f + 0.9375) + a
                } else {
                    return h * (7.5625 * (f -= (2.625 / 2.75)) * f + 0.984375) + a
                }
            }
        }
    },
    easeInOutBounce: function(e, f, a, h, g) {
        if (f < g / 2) {
            return jQuery.easing.easeInBounce(e, f * 2, 0, h, g) * 0.5 + a
        }
        return jQuery.easing.easeOutBounce(e, f * 2 - g, 0, h, g) * 0.5 + h * 0.5 + a
    }
});


window.JSON || (window.JSON = {}),
    function() {
        function f(a) {
            return a < 10 ? "0" + a : a
        }

        function quote(a) {
            return escapable.lastIndex = 0, escapable.test(a) ? '"' + a.replace(escapable, function(a) {
                var b = meta[a];
                return typeof b == "string" ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }) + '"' : '"' + a + '"'
        }

        function str(a, b) {
            var c, d, e, f, g = gap,
                h, i = b[a];
            i && typeof i == "object" && typeof i.toJSON == "function" && (i = i.toJSON(a)), typeof rep == "function" && (i = rep.call(b, a, i));
            switch (typeof i) {
                case "string":
                    return quote(i);
                case "number":
                    return isFinite(i) ? String(i) : "null";
                case "boolean":
                case "null":
                    return String(i);
                case "object":
                    if (!i) return "null";
                    gap += indent, h = [];
                    if (Object.prototype.toString.apply(i) === "[object Array]") {
                        f = i.length;
                        for (c = 0; c < f; c += 1) h[c] = str(c, i) || "null";
                        return e = h.length === 0 ? "[]" : gap ? "[\n" + gap + h.join(",\n" + gap) + "\n" + g + "]" : "[" + h.join(",") + "]", gap = g, e
                    }
                    if (rep && typeof rep == "object") {
                        f = rep.length;
                        for (c = 0; c < f; c += 1) d = rep[c], typeof d == "string" && (e = str(d, i), e && h.push(quote(d) + (gap ? ": " : ":") + e))
                    } else
                        for (d in i) Object.hasOwnProperty.call(i, d) && (e = str(d, i), e && h.push(quote(d) + (gap ? ": " : ":") + e));
                    return e = h.length === 0 ? "{}" : gap ? "{\n" + gap + h.join(",\n" + gap) + "\n" + g + "}" : "{" + h.join(",") + "}", gap = g, e
            }
        }
        "use strict", typeof Date.prototype.toJSON != "function" && (Date.prototype.toJSON = function(a) {
            return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
        }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function(a) {
            return this.valueOf()
        });
        var JSON = window.JSON,
            cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            gap, indent, meta = {
                "\b": "\\b",
                "\t": "\\t",
                "\n": "\\n",
                "\f": "\\f",
                "\r": "\\r",
                '"': '\\"',
                "\\": "\\\\"
            },
            rep;
        typeof JSON.stringify != "function" && (JSON.stringify = function(a, b, c) {
            var d;
            gap = "", indent = "";
            if (typeof c == "number")
                for (d = 0; d < c; d += 1) indent += " ";
            else typeof c == "string" && (indent = c);
            rep = b;
            if (!b || typeof b == "function" || typeof b == "object" && typeof b.length == "number") return str("", {
                "": a
            });
            throw new Error("JSON.stringify")
        }), typeof JSON.parse != "function" && (JSON.parse = function(text, reviver) {
            function walk(a, b) {
                var c, d, e = a[b];
                if (e && typeof e == "object")
                    for (c in e) Object.hasOwnProperty.call(e, c) && (d = walk(e, c), d !== undefined ? e[c] = d : delete e[c]);
                return reviver.call(a, b, e)
            }
            var j;
            text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }));
            if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), typeof reviver == "function" ? walk({
                "": j
            }, "") : j;
            throw new SyntaxError("JSON.parse")
        })
    }(),
    function(a, b) {
        "use strict";
        var c = a.History = a.History || {},
            d = a.jQuery;
        if (typeof c.Adapter != "undefined") throw new Error("History.js Adapter has already been loaded...");
        c.Adapter = {
            bind: function(a, b, c) {
                d(a).bind(b, c)
            },
            trigger: function(a, b, c) {
                d(a).trigger(b, c)
            },
            extractEventData: function(a, c, d) {
                var e = c && c.originalEvent && c.originalEvent[a] || d && d[a] || b;
                return e
            },
            onDomLoad: function(a) {
                d(a)
            }
        }, typeof c.init != "undefined" && c.init()
    }(window),
    function(a, b) {
        "use strict";
        var c = a.document,
            d = a.setTimeout || d,
            e = a.clearTimeout || e,
            f = a.setInterval || f,
            g = a.History = a.History || {};
        if (typeof g.initHtml4 != "undefined") throw new Error("History.js HTML4 Support has already been loaded...");
        g.initHtml4 = function() {
            if (typeof g.initHtml4.initialized != "undefined") return !1;
            g.initHtml4.initialized = !0, g.enabled = !0, g.savedHashes = [], g.isLastHash = function(a) {
                var b = g.getHashByIndex(),
                    c;
                return c = a === b, c
            }, g.saveHash = function(a) {
                return g.isLastHash(a) ? !1 : (g.savedHashes.push(a), !0)
            }, g.getHashByIndex = function(a) {
                var b = null;
                return typeof a == "undefined" ? b = g.savedHashes[g.savedHashes.length - 1] : a < 0 ? b = g.savedHashes[g.savedHashes.length + a] : b = g.savedHashes[a], b
            }, g.discardedHashes = {}, g.discardedStates = {}, g.discardState = function(a, b, c) {
                var d = g.getHashByState(a),
                    e;
                return e = {
                    discardedState: a,
                    backState: c,
                    forwardState: b
                }, g.discardedStates[d] = e, !0
            }, g.discardHash = function(a, b, c) {
                var d = {
                    discardedHash: a,
                    backState: c,
                    forwardState: b
                };
                return g.discardedHashes[a] = d, !0
            }, g.discardedState = function(a) {
                var b = g.getHashByState(a),
                    c;
                return c = g.discardedStates[b] || !1, c
            }, g.discardedHash = function(a) {
                var b = g.discardedHashes[a] || !1;
                return b
            }, g.recycleState = function(a) {
                var b = g.getHashByState(a);
                return g.discardedState(a) && delete g.discardedStates[b], !0
            }, g.emulated.hashChange && (g.hashChangeInit = function() {
                g.checkerFunction = null;
                var b = "",
                    d, e, h, i;
                return g.isInternetExplorer() ? (d = "historyjs-iframe", e = c.createElement("iframe"), e.setAttribute("id", d), e.style.display = "none", c.body.appendChild(e), e.contentWindow.document.open(), e.contentWindow.document.close(), h = "", i = !1, g.checkerFunction = function() {
                    if (i) return !1;
                    i = !0;
                    var c = g.getHash() || "",
                        d = g.unescapeHash(e.contentWindow.document.location.hash) || "";
                    return c !== b ? (b = c, d !== c && (h = d = c, e.contentWindow.document.open(), e.contentWindow.document.close(), e.contentWindow.document.location.hash = g.escapeHash(c)), g.Adapter.trigger(a, "hashchange")) : d !== h && (h = d, g.setHash(d, !1)), i = !1, !0
                }) : g.checkerFunction = function() {
                    var c = g.getHash();
                    return c !== b && (b = c, g.Adapter.trigger(a, "hashchange")), !0
                }, g.intervalList.push(f(g.checkerFunction, g.options.hashChangeInterval)), !0
            }, g.Adapter.onDomLoad(g.hashChangeInit)), g.emulated.pushState && (g.onHashChange = function(b) {
                var d = b && b.newURL || c.location.href,
                    e = g.getHashByUrl(d),
                    f = null,
                    h = null,
                    i = null,
                    j;
                return g.isLastHash(e) ? (g.busy(!1), !1) : (g.doubleCheckComplete(), g.saveHash(e), e && g.isTraditionalAnchor(e) ? (g.Adapter.trigger(a, "anchorchange"), g.busy(!1), !1) : (f = g.extractState(g.getFullUrl(e || c.location.href, !1), !0), g.isLastSavedState(f) ? (g.busy(!1), !1) : (h = g.getHashByState(f), j = g.discardedState(f), j ? (g.getHashByIndex(-2) === g.getHashByState(j.forwardState) ? g.back(!1) : g.forward(!1), !1) : (g.pushState(f.data, f.title, f.url, !1), !0))))
            }, g.Adapter.bind(a, "hashchange", g.onHashChange), g.pushState = function(b, d, e, f) {
                if (g.getHashByUrl(e)) throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
                if (f !== !1 && g.busy()) return g.pushQueue({
                    scope: g,
                    callback: g.pushState,
                    args: arguments,
                    queue: f
                }), !1;
                g.busy(!0);
                var h = g.createStateObject(b, d, e),
                    i = g.getHashByState(h),
                    j = g.getState(!1),
                    k = g.getHashByState(j),
                    l = g.getHash();
                return g.storeState(h), g.expectedStateId = h.id, g.recycleState(h), g.setTitle(h), i === k ? (g.busy(!1), !1) : i !== l && i !== g.getShortUrl(c.location.href) ? (g.setHash(i, !1), !1) : (g.saveState(h), g.Adapter.trigger(a, "statechange"), g.busy(!1), !0)
            }, g.replaceState = function(a, b, c, d) {
                if (g.getHashByUrl(c)) throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
                if (d !== !1 && g.busy()) return g.pushQueue({
                    scope: g,
                    callback: g.replaceState,
                    args: arguments,
                    queue: d
                }), !1;
                g.busy(!0);
                var e = g.createStateObject(a, b, c),
                    f = g.getState(!1),
                    h = g.getStateByIndex(-2);
                return g.discardState(f, e, h), g.pushState(e.data, e.title, e.url, !1), !0
            }), g.emulated.pushState && g.getHash() && !g.emulated.hashChange && g.Adapter.onDomLoad(function() {
                g.Adapter.trigger(a, "hashchange")
            })
        }, typeof g.init != "undefined" && g.init()
    }(window),
    function(a, b) {
        "use strict";
        var c = a.console || b,
            d = a.document,
            e = a.navigator,
            f = a.sessionStorage || !1,
            g = a.setTimeout,
            h = a.clearTimeout,
            i = a.setInterval,
            j = a.clearInterval,
            k = a.JSON,
            l = a.alert,
            m = a.History = a.History || {},
            n = a.history;
        k.stringify = k.stringify || k.encode, k.parse = k.parse || k.decode;
        if (typeof m.init != "undefined") throw new Error("History.js Core has already been loaded...");
        m.init = function() {
            return typeof m.Adapter == "undefined" ? !1 : (typeof m.initCore != "undefined" && m.initCore(), typeof m.initHtml4 != "undefined" && m.initHtml4(), !0)
        }, m.initCore = function() {
            if (typeof m.initCore.initialized != "undefined") return !1;
            m.initCore.initialized = !0, m.options = m.options || {}, m.options.hashChangeInterval = m.options.hashChangeInterval || 100, m.options.safariPollInterval = m.options.safariPollInterval || 500, m.options.doubleCheckInterval = m.options.doubleCheckInterval || 500, m.options.storeInterval = m.options.storeInterval || 1e3, m.options.busyDelay = m.options.busyDelay || 250, m.options.debug = m.options.debug || !1, m.options.initialTitle = m.options.initialTitle || d.title, m.intervalList = [], m.clearAllIntervals = function() {
                var a, b = m.intervalList;
                if (typeof b != "undefined" && b !== null) {
                    for (a = 0; a < b.length; a++) j(b[a]);
                    m.intervalList = null
                }
            }, m.debug = function() {
                (m.options.debug || !1) && m.log.apply(m, arguments)
            }, m.log = function() {
                var a = typeof c != "undefined" && typeof c.log != "undefined" && typeof c.log.apply != "undefined",
                    b = d.getElementById("log"),
                    e, f, g, h, i;
                a ? (h = Array.prototype.slice.call(arguments), e = h.shift(), typeof c.debug != "undefined" ? c.debug.apply(c, [e, h]) : c.log.apply(c, [e, h])) : e = "\n" + arguments[0] + "\n";
                for (f = 1, g = arguments.length; f < g; ++f) {
                    i = arguments[f];
                    if (typeof i == "object" && typeof k != "undefined") try {
                        i = k.stringify(i)
                    } catch (j) {}
                    e += "\n" + i + "\n"
                }
                return b ? (b.value += e + "\n-----\n", b.scrollTop = b.scrollHeight - b.clientHeight) : a || l(e), !0
            }, m.getInternetExplorerMajorVersion = function() {
                var a = m.getInternetExplorerMajorVersion.cached = typeof m.getInternetExplorerMajorVersion.cached != "undefined" ? m.getInternetExplorerMajorVersion.cached : function() {
                    var a = 3,
                        b = d.createElement("div"),
                        c = b.getElementsByTagName("i");
                    while ((b.innerHTML = "<!--[if gt IE " + ++a + "]><i></i><![endif]-->") && c[0]);
                    return a > 4 ? a : !1
                }();
                return a
            }, m.isInternetExplorer = function() {
                var a = m.isInternetExplorer.cached = typeof m.isInternetExplorer.cached != "undefined" ? m.isInternetExplorer.cached : Boolean(m.getInternetExplorerMajorVersion());
                return a
            }, m.emulated = {
                pushState: !Boolean(a.history && a.history.pushState && a.history.replaceState && !/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent) && !/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),
                hashChange: Boolean(!("onhashchange" in a || "onhashchange" in d) || m.isInternetExplorer() && m.getInternetExplorerMajorVersion() < 8)
            }, m.enabled = !m.emulated.pushState, m.bugs = {
                setHash: Boolean(!m.emulated.pushState && e.vendor === "Apple Computer, Inc." && /AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),
                safariPoll: Boolean(!m.emulated.pushState && e.vendor === "Apple Computer, Inc." && /AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),
                ieDoubleCheck: Boolean(m.isInternetExplorer() && m.getInternetExplorerMajorVersion() < 8),
                hashEscape: Boolean(m.isInternetExplorer() && m.getInternetExplorerMajorVersion() < 7)
            }, m.isEmptyObject = function(a) {
                for (var b in a) return !1;
                return !0
            }, m.cloneObject = function(a) {
                var b, c;
                return a ? (b = k.stringify(a), c = k.parse(b)) : c = {}, c
            }, m.getRootUrl = function() {
                var a = d.location.protocol + "//" + (d.location.hostname || d.location.host);
                if (d.location.port || !1) a += ":" + d.location.port;
                return a += "/", a
            }, m.getBaseHref = function() {
                var a = d.getElementsByTagName("base"),
                    b = null,
                    c = "";
                return a.length === 1 && (b = a[0], c = b.href.replace(/[^\/]+$/, "")), c = c.replace(/\/+$/, ""), c && (c += "/"), c
            }, m.getBaseUrl = function() {
                var a = m.getBaseHref() || m.getBasePageUrl() || m.getRootUrl();
                return a
            }, m.getPageUrl = function() {
                var a = m.getState(!1, !1),
                    b = (a || {}).url || d.location.href,
                    c;
                return c = b.replace(/\/+$/, "").replace(/[^\/]+$/, function(a, b, c) {
                    return /\./.test(a) ? a : a + "/"
                }), c
            }, m.getBasePageUrl = function() {
                var a = d.location.href.replace(/[#\?].*/, "").replace(/[^\/]+$/, function(a, b, c) {
                    return /[^\/]$/.test(a) ? "" : a
                }).replace(/\/+$/, "") + "/";
                return a
            }, m.getFullUrl = function(a, b) {
                var c = a,
                    d = a.substring(0, 1);
                return b = typeof b == "undefined" ? !0 : b, /[a-z]+\:\/\//.test(a) || (d === "/" ? c = m.getRootUrl() + a.replace(/^\/+/, "") : d === "#" ? c = m.getPageUrl().replace(/#.*/, "") + a : d === "?" ? c = m.getPageUrl().replace(/[\?#].*/, "") + a : b ? c = m.getBaseUrl() + a.replace(/^(\.\/)+/, "") : c = m.getBasePageUrl() + a.replace(/^(\.\/)+/, "")), c.replace(/\#$/, "")
            }, m.getShortUrl = function(a) {
                var b = a,
                    c = m.getBaseUrl(),
                    d = m.getRootUrl();
                return m.emulated.pushState && (b = b.replace(c, "")), b = b.replace(d, "/"), m.isTraditionalAnchor(b) && (b = "./" + b), b = b.replace(/^(\.\/)+/g, "./").replace(/\#$/, ""), b
            }, m.store = {}, m.idToState = m.idToState || {}, m.stateToId = m.stateToId || {}, m.urlToId = m.urlToId || {}, m.storedStates = m.storedStates || [], m.savedStates = m.savedStates || [], m.normalizeStore = function() {
                m.store.idToState = m.store.idToState || {}, m.store.urlToId = m.store.urlToId || {}, m.store.stateToId = m.store.stateToId || {}
            }, m.getState = function(a, b) {
                typeof a == "undefined" && (a = !0), typeof b == "undefined" && (b = !0);
                var c = m.getLastSavedState();
                return !c && b && (c = m.createStateObject()), a && (c = m.cloneObject(c), c.url = c.cleanUrl || c.url), c
            }, m.getIdByState = function(a) {
                var b = m.extractId(a.url),
                    c;
                if (!b) {
                    c = m.getStateString(a);
                    if (typeof m.stateToId[c] != "undefined") b = m.stateToId[c];
                    else if (typeof m.store.stateToId[c] != "undefined") b = m.store.stateToId[c];
                    else {
                        for (;;) {
                            b = (new Date).getTime() + String(Math.random()).replace(/\D/g, "");
                            if (typeof m.idToState[b] == "undefined" && typeof m.store.idToState[b] == "undefined") break
                        }
                        m.stateToId[c] = b, m.idToState[b] = a
                    }
                }
                return b
            }, m.normalizeState = function(a) {
                var b, c;
                if (!a || typeof a != "object") a = {};
                if (typeof a.normalized != "undefined") return a;
                if (!a.data || typeof a.data != "object") a.data = {};
                b = {}, b.normalized = !0, b.title = a.title || "", b.url = m.getFullUrl(m.unescapeString(a.url || d.location.href)), b.hash = m.getShortUrl(b.url), b.data = m.cloneObject(a.data), b.id = m.getIdByState(b), b.cleanUrl = b.url.replace(/\??\&_suid.*/, ""), b.url = b.cleanUrl, c = !m.isEmptyObject(b.data);
                if (b.title || c) b.hash = m.getShortUrl(b.url).replace(/\??\&_suid.*/, ""), /\?/.test(b.hash) || (b.hash += "?"), b.hash += "&_suid=" + b.id;
                return b.hashedUrl = m.getFullUrl(b.hash), (m.emulated.pushState || m.bugs.safariPoll) && m.hasUrlDuplicate(b) && (b.url = b.hashedUrl), b
            }, m.createStateObject = function(a, b, c) {
                var d = {
                    data: a,
                    title: b,
                    url: c
                };
                return d = m.normalizeState(d), d
            }, m.getStateById = function(a) {
                a = String(a);
                var c = m.idToState[a] || m.store.idToState[a] || b;
                return c
            }, m.getStateString = function(a) {
                var b, c, d;
                return b = m.normalizeState(a), c = {
                    data: b.data,
                    title: a.title,
                    url: a.url
                }, d = k.stringify(c), d
            }, m.getStateId = function(a) {
                var b, c;
                return b = m.normalizeState(a), c = b.id, c
            }, m.getHashByState = function(a) {
                var b, c;
                return b = m.normalizeState(a), c = b.hash, c
            }, m.extractId = function(a) {
                var b, c, d;
                return c = /(.*)\&_suid=([0-9]+)$/.exec(a), d = c ? c[1] || a : a, b = c ? String(c[2] || "") : "", b || !1
            }, m.isTraditionalAnchor = function(a) {
                var b = !/[\/\?\.]/.test(a);
                return b
            }, m.extractState = function(a, b) {
                var c = null,
                    d, e;
                return b = b || !1, d = m.extractId(a), d && (c = m.getStateById(d)), c || (e = m.getFullUrl(a), d = m.getIdByUrl(e) || !1, d && (c = m.getStateById(d)), !c && b && !m.isTraditionalAnchor(a) && (c = m.createStateObject(null, null, e))), c
            }, m.getIdByUrl = function(a) {
                var c = m.urlToId[a] || m.store.urlToId[a] || b;
                return c
            }, m.getLastSavedState = function() {
                return m.savedStates[m.savedStates.length - 1] || b
            }, m.getLastStoredState = function() {
                return m.storedStates[m.storedStates.length - 1] || b
            }, m.hasUrlDuplicate = function(a) {
                var b = !1,
                    c;
                return c = m.extractState(a.url), b = c && c.id !== a.id, b
            }, m.storeState = function(a) {
                return m.urlToId[a.url] = a.id, m.storedStates.push(m.cloneObject(a)), a
            }, m.isLastSavedState = function(a) {
                var b = !1,
                    c, d, e;
                return m.savedStates.length && (c = a.id, d = m.getLastSavedState(), e = d.id, b = c === e), b
            }, m.saveState = function(a) {
                return m.isLastSavedState(a) ? !1 : (m.savedStates.push(m.cloneObject(a)), !0)
            }, m.getStateByIndex = function(a) {
                var b = null;
                return typeof a == "undefined" ? b = m.savedStates[m.savedStates.length - 1] : a < 0 ? b = m.savedStates[m.savedStates.length + a] : b = m.savedStates[a], b
            }, m.getHash = function() {
                var a = m.unescapeHash(d.location.hash);
                return a
            }, m.unescapeString = function(b) {
                var c = b,
                    d;
                for (;;) {
                    d = a.unescape(c);
                    if (d === c) break;
                    c = d
                }
                return c
            }, m.unescapeHash = function(a) {
                var b = m.normalizeHash(a);
                return b = m.unescapeString(b), b
            }, m.normalizeHash = function(a) {
                var b = a.replace(/[^#]*#/, "").replace(/#.*/, "");
                return b
            }, m.setHash = function(a, b) {
                var c, e, f;
                return b !== !1 && m.busy() ? (m.pushQueue({
                    scope: m,
                    callback: m.setHash,
                    args: arguments,
                    queue: b
                }), !1) : (c = m.escapeHash(a), m.busy(!0), e = m.extractState(a, !0), e && !m.emulated.pushState ? m.pushState(e.data, e.title, e.url, !1) : d.location.hash !== c && (m.bugs.setHash ? (f = m.getPageUrl(), m.pushState(null, null, f + "#" + c, !1)) : d.location.hash = c), m)
            }, m.escapeHash = function(b) {
                var c = m.normalizeHash(b);
                return c = a.escape(c), m.bugs.hashEscape || (c = c.replace(/\%21/g, "!").replace(/\%26/g, "&").replace(/\%3D/g, "=").replace(/\%3F/g, "?")), c
            }, m.getHashByUrl = function(a) {
                var b = String(a).replace(/([^#]*)#?([^#]*)#?(.*)/, "$2");
                return b = m.unescapeHash(b), b
            }, m.setTitle = function(a) {
                var b = a.title,
                    c;
                b || (c = m.getStateByIndex(0), c && c.url === a.url && (b = c.title || m.options.initialTitle));
                try {
                    d.getElementsByTagName("title")[0].innerHTML = b.replace("<", "&lt;").replace(">", "&gt;").replace(" & ", " &amp; ")
                } catch (e) {}
                return d.title = b, m
            }, m.queues = [], m.busy = function(a) {
                typeof a != "undefined" ? m.busy.flag = a : typeof m.busy.flag == "undefined" && (m.busy.flag = !1);
                if (!m.busy.flag) {
                    h(m.busy.timeout);
                    var b = function() {
                        var a, c, d;
                        if (m.busy.flag) return;
                        for (a = m.queues.length - 1; a >= 0; --a) {
                            c = m.queues[a];
                            if (c.length === 0) continue;
                            d = c.shift(), m.fireQueueItem(d), m.busy.timeout = g(b, m.options.busyDelay)
                        }
                    };
                    m.busy.timeout = g(b, m.options.busyDelay)
                }
                return m.busy.flag
            }, m.busy.flag = !1, m.fireQueueItem = function(a) {
                return a.callback.apply(a.scope || m, a.args || [])
            }, m.pushQueue = function(a) {
                return m.queues[a.queue || 0] = m.queues[a.queue || 0] || [], m.queues[a.queue || 0].push(a), m
            }, m.queue = function(a, b) {
                return typeof a == "function" && (a = {
                    callback: a
                }), typeof b != "undefined" && (a.queue = b), m.busy() ? m.pushQueue(a) : m.fireQueueItem(a), m
            }, m.clearQueue = function() {
                return m.busy.flag = !1, m.queues = [], m
            }, m.stateChanged = !1, m.doubleChecker = !1, m.doubleCheckComplete = function() {
                return m.stateChanged = !0, m.doubleCheckClear(), m
            }, m.doubleCheckClear = function() {
                return m.doubleChecker && (h(m.doubleChecker), m.doubleChecker = !1), m
            }, m.doubleCheck = function(a) {
                return m.stateChanged = !1, m.doubleCheckClear(), m.bugs.ieDoubleCheck && (m.doubleChecker = g(function() {
                    return m.doubleCheckClear(), m.stateChanged || a(), !0
                }, m.options.doubleCheckInterval)), m
            }, m.safariStatePoll = function() {
                var b = m.extractState(d.location.href),
                    c;
                if (!m.isLastSavedState(b)) c = b;
                else return;
                return c || (c = m.createStateObject()), m.Adapter.trigger(a, "popstate"), m
            }, m.back = function(a) {
                return a !== !1 && m.busy() ? (m.pushQueue({
                    scope: m,
                    callback: m.back,
                    args: arguments,
                    queue: a
                }), !1) : (m.busy(!0), m.doubleCheck(function() {
                    m.back(!1)
                }), n.go(-1), !0)
            }, m.forward = function(a) {
                return a !== !1 && m.busy() ? (m.pushQueue({
                    scope: m,
                    callback: m.forward,
                    args: arguments,
                    queue: a
                }), !1) : (m.busy(!0), m.doubleCheck(function() {
                    m.forward(!1)
                }), n.go(1), !0)
            }, m.go = function(a, b) {
                var c;
                if (a > 0)
                    for (c = 1; c <= a; ++c) m.forward(b);
                else {
                    if (!(a < 0)) throw new Error("History.go: History.go requires a positive or negative integer passed.");
                    for (c = -1; c >= a; --c) m.back(b)
                }
                return m
            };
            if (m.emulated.pushState) {
                var o = function() {};
                m.pushState = m.pushState || o, m.replaceState = m.replaceState || o
            } else m.onPopState = function(b, c) {
                var e = !1,
                    f = !1,
                    g, h;
                return m.doubleCheckComplete(), g = m.getHash(), g ? (h = m.extractState(g || d.location.href, !0), h ? m.replaceState(h.data, h.title, h.url, !1) : (m.Adapter.trigger(a, "anchorchange"), m.busy(!1)), m.expectedStateId = !1, !1) : (e = m.Adapter.extractEventData("state", b, c) || !1, e ? f = m.getStateById(e) : m.expectedStateId ? f = m.getStateById(m.expectedStateId) : f = m.extractState(d.location.href), f || (f = m.createStateObject(null, null, d.location.href)), m.expectedStateId = !1, m.isLastSavedState(f) ? (m.busy(!1), !1) : (m.storeState(f), m.saveState(f), m.setTitle(f), m.Adapter.trigger(a, "statechange"), m.busy(!1), !0))
            }, m.Adapter.bind(a, "popstate", m.onPopState), m.pushState = function(b, c, d, e) {
                if (m.getHashByUrl(d) && m.emulated.pushState) throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
                if (e !== !1 && m.busy()) return m.pushQueue({
                    scope: m,
                    callback: m.pushState,
                    args: arguments,
                    queue: e
                }), !1;
                m.busy(!0);
                var f = m.createStateObject(b, c, d);
                return m.isLastSavedState(f) ? m.busy(!1) : (m.storeState(f), m.expectedStateId = f.id, n.pushState(f.id, f.title, f.url), m.Adapter.trigger(a, "popstate")), !0
            }, m.replaceState = function(b, c, d, e) {
                if (m.getHashByUrl(d) && m.emulated.pushState) throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
                if (e !== !1 && m.busy()) return m.pushQueue({
                    scope: m,
                    callback: m.replaceState,
                    args: arguments,
                    queue: e
                }), !1;
                m.busy(!0);
                var f = m.createStateObject(b, c, d);
                return m.isLastSavedState(f) ? m.busy(!1) : (m.storeState(f), m.expectedStateId = f.id, n.replaceState(f.id, f.title, f.url), m.Adapter.trigger(a, "popstate")), !0
            };
            if (f) {
                try {
                    m.store = k.parse(f.getItem("History.store")) || {}
                } catch (p) {
                    m.store = {}
                }
                m.normalizeStore()
            } else m.store = {}, m.normalizeStore();
            m.Adapter.bind(a, "beforeunload", m.clearAllIntervals), m.Adapter.bind(a, "unload", m.clearAllIntervals), m.saveState(m.storeState(m.extractState(d.location.href, !0))), f && (m.onUnload = function() {
                var a, b;
                try {
                    a = k.parse(f.getItem("History.store")) || {}
                } catch (c) {
                    a = {}
                }
                a.idToState = a.idToState || {}, a.urlToId = a.urlToId || {}, a.stateToId = a.stateToId || {};
                for (b in m.idToState) {
                    if (!m.idToState.hasOwnProperty(b)) continue;
                    a.idToState[b] = m.idToState[b]
                }
                for (b in m.urlToId) {
                    if (!m.urlToId.hasOwnProperty(b)) continue;
                    a.urlToId[b] = m.urlToId[b]
                }
                for (b in m.stateToId) {
                    if (!m.stateToId.hasOwnProperty(b)) continue;
                    a.stateToId[b] = m.stateToId[b]
                }
                m.store = a, m.normalizeStore(), f.setItem("History.store", k.stringify(a))
            }, m.intervalList.push(i(m.onUnload, m.options.storeInterval)), m.Adapter.bind(a, "beforeunload", m.onUnload), m.Adapter.bind(a, "unload", m.onUnload));
            if (!m.emulated.pushState) {
                m.bugs.safariPoll && m.intervalList.push(i(m.safariStatePoll, m.options.safariPollInterval));
                if (e.vendor === "Apple Computer, Inc." || (e.appCodeName || "") === "Mozilla") m.Adapter.bind(a, "hashchange", function() {
                    m.Adapter.trigger(a, "popstate")
                }), m.getHash() && m.Adapter.onDomLoad(function() {
                    m.Adapter.trigger(a, "hashchange")
                })
            }
        }, m.init()
    }(window)

/*
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */

/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */
var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */
var b64pad = ""; /* base-64 pad character. "=" for strict RFC compliance   */

/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_md5(s) {
    return rstr2hex(rstr_md5(str2rstr_utf8(s)));
}

function b64_md5(s) {
    return rstr2b64(rstr_md5(str2rstr_utf8(s)));
}

function any_md5(s, e) {
    return rstr2any(rstr_md5(str2rstr_utf8(s)), e);
}

function hex_hmac_md5(k, d) {
    return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)));
}

function b64_hmac_md5(k, d) {
    return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)));
}

function any_hmac_md5(k, d, e) {
    return rstr2any(rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d)), e);
}

/*
 * Perform a simple self-test to see if the VM is working
 */
function md5_vm_test() {
    return hex_md5("abc").toLowerCase() == "900150983cd24fb0d6963f7d28e17f72";
}

/*
 * Calculate the MD5 of a raw string
 */
function rstr_md5(s) {
    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));
}

/*
 * Calculate the HMAC-MD5, of a key and some data (raw strings)
 */
function rstr_hmac_md5(key, data) {
    var bkey = rstr2binl(key);
    if (bkey.length > 16) bkey = binl_md5(bkey, key.length * 8);

    var ipad = Array(16),
        opad = Array(16);
    for (var i = 0; i < 16; i++) {
        ipad[i] = bkey[i] ^ 0x36363636;
        opad[i] = bkey[i] ^ 0x5C5C5C5C;
    }

    var hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);
    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));
}

/*
 * Convert a raw string to a hex string
 */
function rstr2hex(input) {
    try {
        hexcase
    } catch (e) {
        hexcase = 0;
    }
    var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
    var output = "";
    var x;
    for (var i = 0; i < input.length; i++) {
        x = input.charCodeAt(i);
        output += hex_tab.charAt((x >>> 4) & 0x0F) +
            hex_tab.charAt(x & 0x0F);
    }
    return output;
}

/*
 * Convert a raw string to a base-64 string
 */
function rstr2b64(input) {
    try {
        b64pad
    } catch (e) {
        b64pad = '';
    }
    var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    var output = "";
    var len = input.length;
    for (var i = 0; i < len; i += 3) {
        var triplet = (input.charCodeAt(i) << 16) |
            (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) |
            (i + 2 < len ? input.charCodeAt(i + 2) : 0);
        for (var j = 0; j < 4; j++) {
            if (i * 8 + j * 6 > input.length * 8) output += b64pad;
            else output += tab.charAt((triplet >>> 6 * (3 - j)) & 0x3F);
        }
    }
    return output;
}

/*
 * Convert a raw string to an arbitrary string encoding
 */
function rstr2any(input, encoding) {
    var divisor = encoding.length;
    var i, j, q, x, quotient;

    /* Convert to an array of 16-bit big-endian values, forming the dividend */
    var dividend = Array(Math.ceil(input.length / 2));
    for (i = 0; i < dividend.length; i++) {
        dividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);
    }

    /*
     * Repeatedly perform a long division. The binary array forms the dividend,
     * the length of the encoding is the divisor. Once computed, the quotient
     * forms the dividend for the next step. All remainders are stored for later
     * use.
     */
    var full_length = Math.ceil(input.length * 8 /
        (Math.log(encoding.length) / Math.log(2)));
    var remainders = Array(full_length);
    for (j = 0; j < full_length; j++) {
        quotient = Array();
        x = 0;
        for (i = 0; i < dividend.length; i++) {
            x = (x << 16) + dividend[i];
            q = Math.floor(x / divisor);
            x -= q * divisor;
            if (quotient.length > 0 || q > 0)
                quotient[quotient.length] = q;
        }
        remainders[j] = x;
        dividend = quotient;
    }

    /* Convert the remainders to the output string */
    var output = "";
    for (i = remainders.length - 1; i >= 0; i--)
        output += encoding.charAt(remainders[i]);

    return output;
}

/*
 * Encode a string as utf-8.
 * For efficiency, this assumes the input is valid utf-16.
 */
function str2rstr_utf8(input) {
    var output = "";
    var i = -1;
    var x, y;

    while (++i < input.length) {
        /* Decode utf-16 surrogate pairs */
        x = input.charCodeAt(i);
        y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;
        if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {
            x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
            i++;
        }

        /* Encode output as utf-8 */
        if (x <= 0x7F)
            output += String.fromCharCode(x);
        else if (x <= 0x7FF)
            output += String.fromCharCode(0xC0 | ((x >>> 6) & 0x1F),
                0x80 | (x & 0x3F));
        else if (x <= 0xFFFF)
            output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),
                0x80 | ((x >>> 6) & 0x3F),
                0x80 | (x & 0x3F));
        else if (x <= 0x1FFFFF)
            output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),
                0x80 | ((x >>> 12) & 0x3F),
                0x80 | ((x >>> 6) & 0x3F),
                0x80 | (x & 0x3F));
    }
    return output;
}

/*
 * Encode a string as utf-16
 */
function str2rstr_utf16le(input) {
    var output = "";
    for (var i = 0; i < input.length; i++)
        output += String.fromCharCode(input.charCodeAt(i) & 0xFF,
            (input.charCodeAt(i) >>> 8) & 0xFF);
    return output;
}

function str2rstr_utf16be(input) {
    var output = "";
    for (var i = 0; i < input.length; i++)
        output += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,
            input.charCodeAt(i) & 0xFF);
    return output;
}

/*
 * Convert a raw string to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */
function rstr2binl(input) {
    var output = Array(input.length >> 2);
    for (var i = 0; i < output.length; i++)
        output[i] = 0;
    for (var i = 0; i < input.length * 8; i += 8)
        output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);
    return output;
}

/*
 * Convert an array of little-endian words to a string
 */
function binl2rstr(input) {
    var output = "";
    for (var i = 0; i < input.length * 32; i += 8)
        output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);
    return output;
}

/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */
function binl_md5(x, len) {
    /* append padding */
    x[len >> 5] |= 0x80 << ((len) % 32);
    x[(((len + 64) >>> 9) << 4) + 14] = len;

    var a = 1732584193;
    var b = -271733879;
    var c = -1732584194;
    var d = 271733878;

    for (var i = 0; i < x.length; i += 16) {
        var olda = a;
        var oldb = b;
        var oldc = c;
        var oldd = d;

        a = md5_ff(a, b, c, d, x[i + 0], 7, -680876936);
        d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);
        c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);
        b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);
        a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);
        d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);
        c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);
        b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);
        a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);
        d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);
        c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);
        b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);
        a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);
        d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);
        c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);
        b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);

        a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);
        d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);
        c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);
        b = md5_gg(b, c, d, a, x[i + 0], 20, -373897302);
        a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);
        d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);
        c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);
        b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);
        a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);
        d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);
        c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);
        b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);
        a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);
        d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);
        c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);
        b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);

        a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);
        d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);
        c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);
        b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);
        a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);
        d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);
        c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);
        b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);
        a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);
        d = md5_hh(d, a, b, c, x[i + 0], 11, -358537222);
        c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);
        b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);
        a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);
        d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);
        c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);
        b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);

        a = md5_ii(a, b, c, d, x[i + 0], 6, -198630844);
        d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);
        c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);
        b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);
        a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);
        d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);
        c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);
        b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);
        a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);
        d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);
        c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);
        b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);
        a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);
        d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);
        c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);
        b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);

        a = safe_add(a, olda);
        b = safe_add(b, oldb);
        c = safe_add(c, oldc);
        d = safe_add(d, oldd);
    }
    return Array(a, b, c, d);
}

/*
 * These functions implement the four basic operations the algorithm uses.
 */
function md5_cmn(q, a, b, x, s, t) {
    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);
}

function md5_ff(a, b, c, d, x, s, t) {
    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);
}

function md5_gg(a, b, c, d, x, s, t) {
    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);
}

function md5_hh(a, b, c, d, x, s, t) {
    return md5_cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5_ii(a, b, c, d, x, s, t) {
    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);
}

/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */
function safe_add(x, y) {
    var lsw = (x & 0xFFFF) + (y & 0xFFFF);
    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
    return (msw << 16) | (lsw & 0xFFFF);
}

/*
 * Bitwise rotate a 32-bit number to the left.
 */
function bit_rol(num, cnt) {
    return (num << cnt) | (num >>> (32 - cnt));
}


/*
    http://www.JSON.org/json2.js
    2011-02-23

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http://www.JSON.org/js.html


    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.


    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects. It can be a
                        function or an array of strings.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as '\t' or '&nbsp;'),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name/value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the value

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        // Format integers to have at least two digits.
                        return n < 10 ? '0' + n : n;
                    }

                    return this.getUTCFullYear()   + '-' +
                         f(this.getUTCMonth() + 1) + '-' +
                         f(this.getUTCDate())      + 'T' +
                         f(this.getUTCHours())     + ':' +
                         f(this.getUTCMinutes())   + ':' +
                         f(this.getUTCSeconds())   + 'Z';
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array of strings, then it will be
            used to select the members to be serialized. It filters the results
            such that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify(['e', {pluribus: 'unum'}]);
            // text is '["e",{"pluribus":"unum"}]'


            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\t');
            // text is '[\n\t"e",\n\t{\n\t\t"pluribus": "unum"\n\t}\n]'

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    'Date(' + this[key] + ')' : value;
            });
            // text is '["Date(---current time---)"]'


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse('["Date(09/09/2001)"]', function (key, value) {
                var d;
                if (typeof value === 'string' &&
                        value.slice(0, 5) === 'Date(' &&
                        value.slice(-1) === ')') {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.
*/

/*jslint evil: true, strict: false, regexp: false */

/*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf
*/


// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.

var JSON;
if (!JSON) {
    JSON = {};
}

(function() {
    "use strict";

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10 ? '0' + n : n;
    }

    if (typeof Date.prototype.toJSON !== 'function') {

        Date.prototype.toJSON = function(key) {

            return isFinite(this.valueOf()) ?
                this.getUTCFullYear() + '-' +
                f(this.getUTCMonth() + 1) + '-' +
                f(this.getUTCDate()) + 'T' +
                f(this.getUTCHours()) + ':' +
                f(this.getUTCMinutes()) + ':' +
                f(this.getUTCSeconds()) + 'Z' : null;
        };

        String.prototype.toJSON =
            Number.prototype.toJSON =
            Boolean.prototype.toJSON = function(key) {
                return this.valueOf();
            };
    }

    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        gap,
        indent,
        meta = { // table of character substitutions
            '\b': '\\b',
            '\t': '\\t',
            '\n': '\\n',
            '\f': '\\f',
            '\r': '\\r',
            '"': '\\"',
            '\\': '\\\\'
        },
        rep;


    function quote(string) {

        // If the string contains no control characters, no quote characters, and no
        // backslash characters, then we can safely slap some quotes around it.
        // Otherwise we must also replace the offending characters with safe escape
        // sequences.

        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function(a) {
            var c = meta[a];
            return typeof c === 'string' ? c :
                '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }


    function str(key, holder) {

        // Produce a string from holder[key].

        var i, // The loop counter.
            k, // The member key.
            v, // The member value.
            length,
            mind = gap,
            partial,
            value = holder[key];

        // If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === 'object' &&
            typeof value.toJSON === 'function') {
            value = value.toJSON(key);
        }

        // If we were called with a replacer function, then call the replacer to
        // obtain a replacement value.

        if (typeof rep === 'function') {
            value = rep.call(holder, key, value);
        }

        // What happens next depends on the value's type.

        switch (typeof value) {
            case 'string':
                return quote(value);

            case 'number':

                // JSON numbers must be finite. Encode non-finite numbers as null.

                return isFinite(value) ? String(value) : 'null';

            case 'boolean':
            case 'null':

                // If the value is a boolean or null, convert it to a string. Note:
                // typeof null does not produce 'null'. The case is included here in
                // the remote chance that this gets fixed someday.

                return String(value);

                // If the type is 'object', we might be dealing with an object or an array or
                // null.

            case 'object':

                // Due to a specification blunder in ECMAScript, typeof null is 'object',
                // so watch out for that case.

                if (!value) {
                    return 'null';
                }

                // Make an array to hold the partial results of stringifying this object value.

                gap += indent;
                partial = [];

                // Is the value an array?

                if (Object.prototype.toString.apply(value) === '[object Array]') {

                    // The value is an array. Stringify every element. Use null as a placeholder
                    // for non-JSON values.

                    length = value.length;
                    for (i = 0; i < length; i += 1) {
                        partial[i] = str(i, value) || 'null';
                    }

                    // Join all of the elements together, separated with commas, and wrap them in
                    // brackets.

                    v = partial.length === 0 ? '[]' : gap ?
                        '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']' :
                        '[' + partial.join(',') + ']';
                    gap = mind;
                    return v;
                }

                // If the replacer is an array, use it to select the members to be stringified.

                if (rep && typeof rep === 'object') {
                    length = rep.length;
                    for (i = 0; i < length; i += 1) {
                        if (typeof rep[i] === 'string') {
                            k = rep[i];
                            v = str(k, value);
                            if (v) {
                                partial.push(quote(k) + (gap ? ': ' : ':') + v);
                            }
                        }
                    }
                } else {

                    // Otherwise, iterate through all of the keys in the object.

                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = str(k, value);
                            if (v) {
                                partial.push(quote(k) + (gap ? ': ' : ':') + v);
                            }
                        }
                    }
                }

                // Join all of the member texts together, separated with commas,
                // and wrap them in braces.

                v = partial.length === 0 ? '{}' : gap ?
                    '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}' :
                    '{' + partial.join(',') + '}';
                gap = mind;
                return v;
        }
    }

    // If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON.stringify !== 'function') {
        JSON.stringify = function(value, replacer, space) {

            // The stringify method takes a value and an optional replacer, and an optional
            // space parameter, and returns a JSON text. The replacer can be a function
            // that can replace values, or an array of strings that will select the keys.
            // A default replacer method can be provided. Use of the space parameter can
            // produce text that is more easily readable.

            var i;
            gap = '';
            indent = '';

            // If the space parameter is a number, make an indent string containing that
            // many spaces.

            if (typeof space === 'number') {
                for (i = 0; i < space; i += 1) {
                    indent += ' ';
                }

                // If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === 'string') {
                indent = space;
            }

            // If there is a replacer, it must be a function or an array.
            // Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== 'function' &&
                (typeof replacer !== 'object' ||
                    typeof replacer.length !== 'number')) {
                throw new Error('JSON.stringify');
            }

            // Make a fake root object containing our value under the key of ''.
            // Return the result of stringifying the value.

            return str('', {
                '': value
            });
        };
    }


    // If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON.parse !== 'function') {
        JSON.parse = function(text, reviver) {

            // The parse method takes a text and an optional reviver function, and returns
            // a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

                // The walk method is used to recursively walk the resulting structure so
                // that modifications can be made.

                var k, v, value = holder[key];
                if (value && typeof value === 'object') {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }


            // Parsing happens in four stages. In the first stage, we replace certain
            // Unicode characters with escape sequences. JavaScript handles many characters
            // incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function(a) {
                    return '\\u' +
                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

            // In the second stage, we run the text against regular expressions that look
            // for non-JSON patterns. We are especially concerned with '()' and 'new'
            // because they can cause invocation, and '=' because it can cause mutation.
            // But just to be safe, we want to reject all unexpected forms.

            // We split the second stage into 4 regexp operations in order to work around
            // crippling inefficiencies in IE's and Safari's regexp engines. First we
            // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
            // replace all simple value tokens with ']' characters. Third, we delete all
            // open brackets that follow a colon or comma or that begin the text. Finally,
            // we look to see that the remaining characters are only whitespace or ']' or
            // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

            if (/^[\],:{}\s]*$/
                .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                    .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                    .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

                // In the third stage we use the eval function to compile the text into a
                // JavaScript structure. The '{' operator is subject to a syntactic ambiguity
                // in JavaScript: it can begin a block or an object literal. We wrap the text
                // in parens to eliminate the ambiguity.

                j = eval('(' + text + ')');

                // In the optional fourth stage, we recursively walk the new structure, passing
                // each name/value pair to a reviver function for possible transformation.

                return typeof reviver === 'function' ?
                    walk({
                        '': j
                    }, '') : j;
            }

            // If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError('JSON.parse');
        };
    }
}());


/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
// Inspired by base2 and Prototype
(function() {
    var initializing = false,
        fnTest = /xyz/.test(function() {
            xyz;
        }) ? /\b_super\b/ : /.*/;
    // The base Class implementation (does nothing)
    this.Class = function() {};

    // Create a new Class that inherits from this class
    Class.extend = function(prop) {
        var _super = this.prototype;

        // Instantiate a base class (but only create the instance,
        // don't run the init constructor)
        initializing = true;
        var prototype = new this();
        initializing = false;

        // Copy the properties over onto the new prototype
        for (var name in prop) {
            // Check if we're overwriting an existing function
            prototype[name] = typeof prop[name] == "function" &&
                typeof _super[name] == "function" && fnTest.test(prop[name]) ?
                (function(name, fn) {
                    var ret = function() {
                        var tmp = this._super;

                        // Add a new ._super() method that is the same method
                        // but on the super-class
                        this._super = _super[name];

                        // The method only need to be bound temporarily, so we
                        // remove it when we're done executing
                        var ret = fn.apply(this, arguments);
                        this._super = tmp;

                        return ret;
                    };
                    var level = 1;
                    if (_super[name].level) level += _super[name].level;
                    ret.hash = name + level;
                    ret.level = level;
                    return ret;
                })(name, prop[name]) :
                prop[name];
        }

        // The dummy class constructor
        function Class() {
            // All construction is actually done in the init method
            if (!initializing && this.init)
                this.init.apply(this, arguments);
        }

        // Populate our constructed prototype object
        Class.prototype = prototype;

        // Enforce the constructor to be what we expect
        Class.constructor = Class;

        // And make this class extendable
        Class.extend = arguments.callee;

        return Class;
    };
})();


/**
 * @preserve jSmart Javascript template engine
 * http://code.google.com/p/jsmart/
 *
 * Copyright 2011, Max Miroshnikov <miroshnikov at gmail dot com> 
 * jSmart is licensed under the GNU Lesser General Public License
 * http://www.gnu.org/licenses/lgpl.html
 */


(function() {

    /**
       merges two or more objects into one 
       shallow copy for objects
    */
    function obMerge(ob1, ob2 /*, ...*/ ) {
        for (var i = 1; i < arguments.length; ++i) {
            for (var nm in arguments[i]) {
                ob1[nm] = arguments[i][nm];
            }
        }
        return ob1;
    }

    /**
       @return  number of own properties in ob
    */
    function countProperties(ob) {
        var count = 0;
        for (var nm in ob) {
            if (ob.hasOwnProperty(nm)) {
                count++;
            }
        }
        return count;
    }

    /**
       IE workaround
    */
    function findInArray(a, v) {
        if (Array.prototype.indexOf) {
            return a.indexOf(v);
        }
        for (var i = 0; i < a.length; ++i) {
            if (a[i] === v) {
                return i;
            }
        }
        return -1;
    }

    function evalString(s) {
        return s.replace(/\\t/, '\t').replace(/\\n/, '\n').replace(/\\(['"\\])/g, '$1');
    }

    /**
       @return  s trimmed and without quotes
    */
    function trimQuotes(s) {
        return evalString(s.replace(/^['"](.*)['"]$/, '$1')).replace(/^\s+|\s+$/g, '');
    }

    /**
       finds first {tag} in string
       @param re string with regular expression or an empty string to find any tag
       @return  null or s.match(re) result object where 
       [0] - full tag matched with delimiters (and whitespaces at the begin and the end): { tag }
       [1] - found part from passed re
       [index] - position of tag starting { in s
    */
    function findTag(re, s) {
        var openCount = 0;
        var offset = 0;
        var ldelim = jSmart.prototype.left_delimiter;
        var rdelim = jSmart.prototype.right_delimiter;
        var skipInWS = jSmart.prototype.auto_literal;

        var reAny = /^\s*(.+)\s*$/i;
        var reTag = re ? new RegExp('^\\s*(' + re + ')\\s*$', 'i') : reAny;

        for (var i = 0; i < s.length; ++i) {
            if (s.substr(i, ldelim.length) == ldelim) {
                if (skipInWS && i + 1 < s.length && s.substr(i + 1, 1).match(/\s/)) {
                    continue;
                }
                if (!openCount) {
                    s = s.slice(i);
                    offset += parseInt(i);
                    i = 0;
                }
                ++openCount;
            } else if (s.substr(i, rdelim.length) == rdelim) {
                if (skipInWS && i - 1 >= 0 && s.substr(i - 1, 1).match(/\s/)) {
                    continue;
                }
                if (!--openCount) {
                    var sTag = s.slice(ldelim.length, i).replace(/[\r\n]/g, ' ');
                    var found = sTag.match(reTag);
                    if (found) {
                        found.index = offset;
                        found[0] = s.slice(0, i + rdelim.length);
                        return found;
                    }
                }
                if (openCount < 0) //ignore unmatched right delimiter
                {
                    openCount = 0;
                }
            }
        }
        return null;
    }

    function findCloseTag(reClose, reOpen, s) {
        var sInner = '';
        var closeTag = null;
        var openTag = null;
        var findIndex = 0;

        do {
            if (closeTag) {
                findIndex += closeTag[0].length;
            }
            closeTag = findTag(reClose, s);
            if (!closeTag) {
                throw new Error('Unclosed {' + reOpen + '}');
            }
            sInner += s.slice(0, closeTag.index);
            findIndex += closeTag.index;
            s = s.slice(closeTag.index + closeTag[0].length);

            openTag = findTag(reOpen, sInner);
            if (openTag) {
                sInner = sInner.slice(openTag.index + openTag[0].length);
            }
        }
        while (openTag);

        closeTag.index = findIndex;
        return closeTag;
    }

    function findElseTag(reOpen, reClose, reElse, s) {
        var offset = 0;
        for (var elseTag = findTag(reElse, s); elseTag; elseTag = findTag(reElse, s)) {
            var openTag = findTag(reOpen, s);
            if (!openTag || openTag.index > elseTag.index) {
                elseTag.index += offset;
                return elseTag;
            } else {
                s = s.slice(openTag.index + openTag[0].length);
                offset += openTag.index + openTag[0].length;
                var closeTag = findCloseTag(reClose, reOpen, s);
                s = s.slice(closeTag.index + closeTag[0].length);
                offset += closeTag.index + closeTag[0].length;
            }
        }
        return null;
    }

    function execute(code, data) {
        if (typeof(code) == 'string') {
            with({
                '__code': code
            }) {
                with(modifiers) {
                    with(data) {
                        try {
                            return eval(__code);
                        } catch (e) {
                            throw new Error(e.message + ' in \n' + code);
                        }
                    }
                }
            }
        }
        return code;
    }

    function assignVar(nm, val, data) {
        if (nm.match(/\[\]$/)) //ar[] = 
        {
            data[nm.replace(/\[\]$/, '')].push(val);
        } else {
            data[nm] = val;
        }
    }

    var buildInFunctions = {
        expression: {
            parse: function(s, tree) {
                var e = parseExpression(s);

                tree.push({
                    type: 'build-in',
                    name: 'expression',
                    expression: e.tree,
                    params: parseParams(s.slice(e.value.length).replace(/^\s+|\s+$/g, ''))
                });

                return e.tree;

            },
            process: function(node, data) {
                var params = getActualParamValues(node.params, data);
                var res = process([node.expression], data);

                if (findInArray(params, 'nofilter') < 0) {
                    for (var i = 0; i < default_modifiers.length; ++i) {
                        var m = default_modifiers[i];
                        m.params.__parsed[0] = {
                            type: 'text',
                            data: res
                        };
                        res = process([m], data);
                    }
                    if (escape_html) {
                        res = modifiers.escape(res);
                    }
                    res = applyFilters(varFilters, res);

                    if (tpl_modifiers.length) {
                        __t = function() {
                            return res;
                        }
                        res = process(tpl_modifiers, data);
                    }
                }
                return res;
            }
        },

        operator: {
            process: function(node, data) {
                var params = getActualParamValues(node.params, data);
                var arg1 = params[0];

                if (node.optype == 'binary') {
                    var arg2 = params[1];
                    if (node.op == '=') {
                        getVarValue(node.params.__parsed[0], data, arg2);
                        return '';
                    } else if (node.op.match(/(\+=|-=|\*=|\/=|%=)/)) {
                        arg1 = getVarValue(node.params.__parsed[0], data);
                        switch (node.op) {
                            case '+=':
                                arg1 += arg2;
                                break;
                            case '-=':
                                arg1 -= arg2;
                                break;
                            case '*=':
                                arg1 *= arg2;
                                break;
                            case '/=':
                                arg1 /= arg2;
                                break;
                            case '%=':
                                arg1 %= arg2;
                                break;
                        }
                        return getVarValue(node.params.__parsed[0], data, arg1);
                    } else if (node.op.match(/div/)) {
                        return (node.op != 'div') ^ (arg1 % arg2 == 0);
                    } else if (node.op.match(/even/)) {
                        return (node.op != 'even') ^ ((arg1 / arg2) % 2 == 0);
                    } else if (node.op.match(/xor/)) {
                        return (arg1 || arg2) && !(arg1 && arg2);
                    }

                    switch (node.op) {
                        case '==':
                            return arg1 == arg2;
                        case '!=':
                            return arg1 != arg2;
                        case '+':
                            return arg1 + arg2;
                        case '-':
                            return arg1 - arg2;
                        case '*':
                            return arg1 * arg2;
                        case '/':
                            return arg1 / arg2;
                        case '%':
                            return arg1 % arg2;
                        case '&&':
                            return arg1 && arg2;
                        case '||':
                            return arg1 || arg2;
                        case '<':
                            return arg1 < arg2;
                        case '<=':
                            return arg1 <= arg2;
                        case '>':
                            return arg1 > arg2;
                        case '>=':
                            return arg1 >= arg2;
                        case '===':
                            return arg1 === arg2;
                        case '!==':
                            return arg1 !== arg2;
                    }
                } else if (node.op == '!') {
                    return !arg1;
                } else {
                    var isVar = node.params.__parsed[0].type == 'var';
                    if (isVar) {
                        arg1 = getVarValue(node.params.__parsed[0], data);
                    }
                    var v = arg1;
                    if (node.optype == 'pre-unary') {
                        switch (node.op) {
                            case '-':
                                v = -arg1;
                                break;
                            case '++':
                                v = ++arg1;
                                break;
                            case '--':
                                v = --arg1;
                                break;
                        }
                        if (isVar) {
                            getVarValue(node.params.__parsed[0], data, arg1);
                        }
                    } else {
                        switch (node.op) {
                            case '++':
                                arg1++;
                                break;
                            case '--':
                                arg1--;
                                break;
                        }
                        getVarValue(node.params.__parsed[0], data, arg1);
                    }
                    return v;
                }
            }
        },

        section: {
            type: 'block',
            parse: function(params, tree, content) {
                var subTree = [];
                var subTreeElse = [];
                tree.push({
                    type: 'build-in',
                    name: 'section',
                    params: params,
                    subTree: subTree,
                    subTreeElse: subTreeElse
                });

                var findElse = findElseTag('section [^}]+', '\/section', 'sectionelse', content);
                if (findElse) {
                    parse(content.slice(0, findElse.index), subTree);
                    parse(content.slice(findElse.index + findElse[0].length).replace(/^[\r\n]/, ''), subTreeElse);
                } else {
                    parse(content, subTree);
                }
            },

            process: function(node, data) {
                var params = getActualParamValues(node.params, data);

                var props = {};
                data.smarty.section[params.__get('name', null, 0)] = props;

                var show = params.__get('show', true);
                props.show = show;
                if (!show) {
                    return process(node.subTreeElse, data);
                }

                var from = parseInt(params.__get('start', 0));
                var to = (params.loop instanceof Object) ? countProperties(params.loop) : isNaN(params.loop) ? 0 : parseInt(params.loop);
                var step = parseInt(params.__get('step', 1));
                var max = parseInt(params.__get('max'));
                if (isNaN(max)) {
                    max = Number.MAX_VALUE;
                }

                if (from < 0) {
                    from += to;
                    if (from < 0) {
                        from = 0;
                    }
                } else if (from >= to) {
                    from = to ? to - 1 : 0;
                }

                var count = 0;
                var loop = 0;
                var i = from;
                for (; i >= 0 && i < to && count < max; i += step, ++count) {
                    loop = i;
                }
                props.total = count;
                props.loop = count; //? - because it is so in Smarty

                count = 0;
                var s = '';
                for (i = from; i >= 0 && i < to && count < max; i += step, ++count) {
                    if (data.smarty['break']) {
                        break;
                    }

                    props.first = (i == from);
                    props.last = ((i + step) < 0 || (i + step) >= to);
                    props.index = i;
                    props.index_prev = i - step;
                    props.index_next = i + step;
                    props.iteration = props.rownum = count + 1;

                    s += process(node.subTree, data);
                    data.smarty['continue'] = false;
                }
                data.smarty['break'] = false;

                if (count) {
                    return s;
                }
                return process(node.subTreeElse, data);
            }
        },

        setfilter: {
            type: 'block',
            parseParams: function(paramStr) {
                return [parseExpression('__t()|' + paramStr).tree];
            },

            parse: function(params, tree, content) {
                tree.push({
                    type: 'build-in',
                    name: 'setfilter',
                    params: params,
                    subTree: parse(content, [])
                });
            },

            process: function(node, data) {
                tpl_modifiers = node.params;
                var s = process(node.subTree, data);
                tpl_modifiers = [];
                return s;
            }
        },

        'for': {
            type: 'block',
            parseParams: function(paramStr) {
                var res = paramStr.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);
                if (!res) {
                    throw new Error('Invalid {for} parameters: ' + paramStr);
                }
                return parseParams("varName='" + res[1] + "' from=" + res[2] + " to=" + res[3] + " step=" + (res[4] ? res[4] : '1') + " " + res[5]);
            },

            parse: function(params, tree, content) {
                var subTree = [];
                var subTreeElse = [];
                tree.push({
                    type: 'build-in',
                    name: 'for',
                    params: params,
                    subTree: subTree,
                    subTreeElse: subTreeElse
                });

                var findElse = findElseTag('for\\s[^}]+', '\/for', 'forelse', content);
                if (findElse) {
                    parse(content.slice(0, findElse.index), subTree);
                    parse(content.slice(findElse.index + findElse[0].length), subTreeElse);
                } else {
                    parse(content, subTree);
                }
            },

            process: function(node, data) {
                var params = getActualParamValues(node.params, data);
                var from = parseInt(params.__get('from'));
                var to = parseInt(params.__get('to'));
                var step = parseInt(params.__get('step'));
                if (isNaN(step)) {
                    step = 1;
                }
                var max = parseInt(params.__get('max'));
                if (isNaN(max)) {
                    max = Number.MAX_VALUE;
                }

                var count = 0;
                var s = '';
                var total = Math.min(Math.ceil(((step > 0 ? to - from : from - to) + 1) / Math.abs(step)), max);

                for (var i = parseInt(params.from); count < total; i += step, ++count) {
                    if (data.smarty['break']) {
                        break;
                    }
                    data[params.varName] = i;
                    s += process(node.subTree, data);
                    data.smarty['continue'] = false;
                }
                data.smarty['break'] = false;

                if (!count) {
                    s = process(node.subTreeElse, data);
                }
                return s;
            }
        },

        'if': {
            type: 'block',
            parse: function(params, tree, content) {
                var subTreeIf = [];
                var subTreeElse = [];
                tree.push({
                    type: 'build-in',
                    name: 'if',
                    params: params,
                    subTreeIf: subTreeIf,
                    subTreeElse: subTreeElse
                });

                var findElse = findElseTag('if\\s+[^}]+', '\/if', 'else[^}]*', content);
                if (findElse) {
                    parse(content.slice(0, findElse.index), subTreeIf);

                    content = content.slice(findElse.index + findElse[0].length);
                    var findElseIf = findElse[1].match(/^elseif(.*)/);
                    if (findElseIf) {
                        buildInFunctions['if'].parse(parseParams(findElseIf[1]), subTreeElse, content.replace(/^\n/, ''));
                    } else {
                        parse(content.replace(/^\n/, ''), subTreeElse);
                    }
                } else {
                    parse(content, subTreeIf);
                }
            },

            process: function(node, data) {
                if (getActualParamValues(node.params, data)[0]) {
                    return process(node.subTreeIf, data);
                } else {
                    return process(node.subTreeElse, data);
                }
            }
        },

        foreach: {
            type: 'block',
            parseParams: function(paramStr) {
                var params = {};
                var res = paramStr.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);
                if (res) //Smarty 3.x syntax => Smarty 2.x syntax
                {
                    paramStr = 'from=' + res[1] + ' item=' + (res[4] || res[2]);
                    if (res[4]) {
                        paramStr += ' key=' + res[2];
                    }
                }
                return parseParams(paramStr);
            },

            parse: function(params, tree, content) {
                var subTree = [];
                var subTreeElse = [];
                tree.push({
                    type: 'build-in',
                    name: 'foreach',
                    params: params,
                    subTree: subTree,
                    subTreeElse: subTreeElse
                });

                var findElse = findElseTag('foreach\\s[^}]+', '\/foreach', 'foreachelse', content);
                if (findElse) {
                    parse(content.slice(0, findElse.index), subTree);
                    parse(content.slice(findElse.index + findElse[0].length).replace(/^[\r\n]/, ''), subTreeElse);
                } else {
                    parse(content, subTree);
                }
            },

            process: function(node, data) {
                var params = getActualParamValues(node.params, data);
                var a = params.from;
                if (!(a instanceof Object)) {
                    a = [a];
                }

                var total = countProperties(a);

                data[params.item + '__total'] = total;
                if ('name' in params) {
                    data.smarty.foreach[params.name] = {};
                    data.smarty.foreach[params.name].total = total;
                }

                var s = '';
                var i = 0;
                for (var key in a) {
                    if (!a.hasOwnProperty(key)) {
                        continue;
                    }

                    if (data.smarty['break']) {
                        break;
                    }

                    data[params.item + '__key'] = isNaN(key) ? key : parseInt(key);
                    if ('key' in params) {
                        data[params.key] = data[params.item + '__key'];
                    }
                    data[params.item] = a[key];
                    data[params.item + '__index'] = parseInt(i);
                    data[params.item + '__iteration'] = parseInt(i + 1);
                    data[params.item + '__first'] = (i === 0);
                    data[params.item + '__last'] = (i == total - 1);

                    if ('name' in params) {
                        data.smarty.foreach[params.name].index = parseInt(i);
                        data.smarty.foreach[params.name].iteration = parseInt(i + 1);
                        data.smarty.foreach[params.name].first = (i === 0) ? 1 : '';
                        data.smarty.foreach[params.name].last = (i == total - 1) ? 1 : '';
                    }

                    ++i;

                    s += process(node.subTree, data);
                    data.smarty['continue'] = false;
                }
                data.smarty['break'] = false;

                data[params.item + '__show'] = (i > 0);
                if (params.name) {
                    data.smarty.foreach[params.name].show = (i > 0) ? 1 : '';
                }
                if (i > 0) {
                    return s;
                }
                return process(node.subTreeElse, data);
            }
        },

        'function': {
            type: 'block',
            parse: function(params, tree, content) {
                var subTree = [];
                plugins[trimQuotes(params.name ? params.name : params[0])] = {
                    type: 'function',
                    subTree: subTree,
                    defautParams: params,
                    process: function(params, data) {
                        var defaults = getActualParamValues(this.defautParams, data);
                        delete defaults.name;
                        return process(this.subTree, obMerge({}, data, defaults, params));
                    }
                };
                parse(content, subTree);
            }
        },

        php: {
            type: 'block',
            parse: function(params, tree, content) {}
        },

        'extends': {
            type: 'function',
            parse: function(params, tree) {
                tree.splice(0, tree.length);
                getTemplate(trimQuotes(params.file ? params.file : params[0]), tree, true);
            }
        },

        block: {
            type: 'block',
            parse: function(params, tree, content) {
                tree.push({
                    type: 'build-in',
                    name: 'block',
                    params: params
                });
                params.append = findInArray(params, 'append') >= 0;
                params.prepend = findInArray(params, 'prepend') >= 0;
                params.hide = findInArray(params, 'hide') >= 0;
                params.hasChild = params.hasParent = false;

                onParseVar = function(nm) {
                    if (nm.match(/^\s*[$]smarty.block.child\s*$/)) {
                        params.hasChild = true;
                    }
                    if (nm.match(/^\s*[$]smarty.block.parent\s*$/)) {
                        params.hasParent = true;
                    }
                }
                var tree = parse(content, []);
                onParseVar = function(nm) {}

                var blockName = trimQuotes(params.name ? params.name : params[0]);
                if (!(blockName in blocks)) {
                    blocks[blockName] = [];
                }
                blocks[blockName].push({
                    tree: tree,
                    params: params
                });
            },

            process: function(node, data) {
                data.smarty.block.parent = data.smarty.block.child = '';
                var blockName = trimQuotes(node.params.name ? node.params.name : node.params[0]);
                this.processBlocks(blocks[blockName], blocks[blockName].length - 1, data);
                return data.smarty.block.child;
            },

            processBlocks: function(blockAncestry, i, data) {
                if (!i && blockAncestry[i].params.hide) {
                    data.smarty.block.child = '';
                    return;
                }
                var append = true;
                var prepend = false;
                for (; i >= 0; --i) {
                    if (blockAncestry[i].params.hasParent) {
                        var tmpChild = data.smarty.block.child;
                        data.smarty.block.child = '';
                        this.processBlocks(blockAncestry, i - 1, data);
                        data.smarty.block.parent = data.smarty.block.child;
                        data.smarty.block.child = tmpChild;
                    }

                    var tmpChild = data.smarty.block.child;
                    var s = process(blockAncestry[i].tree, data);
                    data.smarty.block.child = tmpChild;

                    if (blockAncestry[i].params.hasChild) {
                        data.smarty.block.child = s;
                    } else if (append) {
                        data.smarty.block.child = s + data.smarty.block.child;
                    } else if (prepend) {
                        data.smarty.block.child += s;
                    }
                    append = blockAncestry[i].params.append;
                    prepend = blockAncestry[i].params.prepend;
                }
            }
        },

        strip: {
            type: 'block',
            parse: function(params, tree, content) {
                parse(content.replace(/[ \t]*[\r\n]+[ \t]*/g, ''), tree);
            }
        },

        literal: {
            type: 'block',
            parse: function(params, tree, content) {
                parseText(content, tree);
            }
        },

        ldelim: {
            type: 'function',
            parse: function(params, tree) {
                parseText(jSmart.prototype.left_delimiter, tree);
            }
        },

        rdelim: {
            type: 'function',
            parse: function(params, tree) {
                parseText(jSmart.prototype.right_delimiter, tree);
            }
        },

        'while': {
            type: 'block',
            parse: function(params, tree, content) {
                tree.push({
                    type: 'build-in',
                    name: 'while',
                    params: params,
                    subTree: parse(content, [])
                });
            },

            process: function(node, data) {
                var s = '';
                while (getActualParamValues(node.params, data)[0]) {
                    if (data.smarty['break']) {
                        break;
                    }
                    s += process(node.subTree, data);
                    data.smarty['continue'] = false;
                }
                data.smarty['break'] = false;
                return s;
            }
        }
    };

    var plugins = {};
    var modifiers = {};
    var files = {};
    var blocks = null;
    var scripts = null;
    var tpl_modifiers = [];

    function parse(s, tree) {
        for (var openTag = findTag('', s); openTag; openTag = findTag('', s)) {
            if (openTag.index) {
                parseText(s.slice(0, openTag.index), tree);
            }
            s = s.slice(openTag.index + openTag[0].length);

            var res = openTag[1].match(/^\s*(\w+)(.*)$/);
            if (res) //function
            {
                var nm = res[1];
                var paramStr = (res.length > 2) ? res[2].replace(/^\s+|\s+$/g, '') : '';

                if (nm in buildInFunctions) {
                    var buildIn = buildInFunctions[nm];
                    var params = ('parseParams' in buildIn ? buildIn.parseParams : parseParams)(paramStr);
                    if (buildIn.type == 'block') {
                        s = s.replace(/^\n/, ''); //remove new line after block open tag (like in Smarty)
                        var closeTag = findCloseTag('\/' + nm, nm + ' +[^}]*', s);
                        buildIn.parse(params, tree, s.slice(0, closeTag.index));
                        s = s.slice(closeTag.index + closeTag[0].length);
                    } else {
                        buildIn.parse(params, tree);
                        if (nm == 'extends') {
                            tree = []; //throw away further parsing except for {block}
                        }
                    }
                    s = s.replace(/^\n/, '');
                } else if (nm in plugins) {
                    var plugin = plugins[nm];
                    if (plugin.type == 'block') {
                        var closeTag = findCloseTag('\/' + nm, nm + ' +[^}]*', s);
                        parsePluginBlock(nm, parseParams(paramStr), tree, s.slice(0, closeTag.index));
                        s = s.slice(closeTag.index + closeTag[0].length);
                    } else if (plugin.type == 'function') {
                        parsePluginFunc(nm, parseParams(paramStr), tree);
                    }
                    if (nm == 'append' || nm == 'assign' || nm == 'capture' || nm == 'eval' || nm == 'include') {
                        s = s.replace(/^\n/, '');
                    }
                } else //variable
                {
                    buildInFunctions.expression.parse(openTag[1], tree);
                }
            } else //variable
            {
                var node = buildInFunctions.expression.parse(openTag[1], tree);
                if (node.type == 'build-in' && node.name == 'operator' && node.op == '=') {
                    s = s.replace(/^\n/, '');
                }
            }
        }
        if (s) {
            parseText(s, tree);
        }
        return tree;
    }

    function parseText(text, tree) {
        if (parseText.parseEmbeddedVars) {
            var re = /([$][\w@]+)|`([^`]*)`/;
            for (var found = text.match(re); found; found = text.match(re)) {
                tree.push({
                    type: 'text',
                    data: text.slice(0, found.index)
                });
                tree.push(parseExpression(found[1] ? found[1] : found[2]).tree);
                text = text.slice(found.index + found[0].length);
            }
        }
        tree.push({
            type: 'text',
            data: text
        });
        return tree;
    }

    function parseFunc(name, params, tree) {
        params.__parsed.name = parseText(name, [])[0];
        tree.push({
            type: 'plugin',
            name: '__func',
            params: params
        });
        return tree;
    }

    function parseOperator(op, type, precedence, tree) {
        tree.push({
            type: 'build-in',
            name: 'operator',
            op: op,
            optype: type,
            precedence: precedence,
            params: {}
        });
    }

    function parseVar(s, e, nm) {
        var rootName = e.token;
        var parts = [{
            type: 'text',
            data: nm.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi, "$1__$2")
        }];

        var re = /^(?:\.|\s*->\s*|\[\s*)/;
        for (var op = s.match(re); op; op = s.match(re)) {
            e.token += op[0];
            s = s.slice(op[0].length);

            var eProp = {
                value: '',
                tree: []
            };
            if (op[0].match(/\[/)) {
                eProp = parseExpression(s);
                if (eProp) {
                    e.token += eProp.value;
                    parts.push(eProp.tree);
                    s = s.slice(eProp.value.length);
                }

                var closeOp = s.match(/\s*\]/);
                if (closeOp) {
                    e.token += closeOp[0];
                    s = s.slice(closeOp[0].length);
                }
            } else {
                var parseMod = parseModifiers.stop;
                parseModifiers.stop = true;
                if (lookUp(s, eProp)) {
                    e.token += eProp.value;
                    var part = eProp.tree[0];
                    if (part.type == 'plugin' && part.name == '__func') {
                        part.hasOwner = true;
                    }
                    parts.push(part);
                    s = s.slice(eProp.value.length);
                } else {
                    eProp = false;
                }
                parseModifiers.stop = parseMod;
            }

            if (!eProp) {
                parts.push({
                    type: 'text',
                    data: ''
                });
            }
        }

        e.tree.push({
            type: 'var',
            parts: parts
        });

        e.value += e.token.substr(rootName.length);

        onParseVar(e.token);

        return s;
    }

    function onParseVar(nm) {}


    var tokens = [{
            re: /^\$([\w@]+)/, //var
            parse: function(e, s) {
                parseModifiers(parseVar(s, e, RegExp.$1), e);
            }
        },
        {
            re: /^(true|false)/i, //bool
            parse: function(e, s) {
                parseText(e.token.match(/true/i) ? '1' : '', e.tree);
            }
        },
        {
            re: /^'([^'\\]*(?:\\.[^'\\]*)*)'/, //single quotes
            parse: function(e, s) {
                parseText(evalString(RegExp.$1), e.tree);
                parseModifiers(s, e);
            }
        },
        {
            re: /^"([^"\\]*(?:\\.[^"\\]*)*)"/, //double quotes
            parse: function(e, s) {
                var v = evalString(RegExp.$1);
                var isVar = v.match(tokens[0].re);
                if (isVar) {
                    var eVar = {
                        token: isVar[0],
                        tree: []
                    };
                    parseVar(v, eVar, isVar[1]);
                    if (eVar.token.length == v.length) {
                        e.tree.push(eVar.tree[0]);
                        return;
                    }
                }
                parseText.parseEmbeddedVars = true;
                e.tree.push({
                    type: 'plugin',
                    name: '__quoted',
                    params: {
                        __parsed: parse(v, [])
                    }
                });
                parseText.parseEmbeddedVars = false;
                parseModifiers(s, e);
            }
        },
        {
            re: /^(\w+)\s*[(]([)]?)/, //func()
            parse: function(e, s) {
                var fnm = RegExp.$1;
                var noArgs = RegExp.$2;
                var params = parseParams(noArgs ? '' : s, /^\s*,\s*/);
                parseFunc(fnm, params, e.tree);
                e.value += params.toString();
                parseModifiers(s.slice(params.toString().length), e);
            }
        },
        {
            re: /^\s*\(\s*/, //expression in parentheses
            parse: function(e, s) {
                var parens = [];
                e.tree.push(parens);
                parens.parent = e.tree;
                e.tree = parens;
            }
        },
        {
            re: /^\s*\)\s*/,
            parse: function(e, s) {
                if (e.tree.parent) //it may be the end of func() or (expr)
                {
                    e.tree = e.tree.parent;
                }
            }
        },
        {
            re: /^\s*(\+\+|--)\s*/,
            parse: function(e, s) {
                if (e.tree.length && e.tree[e.tree.length - 1].type == 'var') {
                    parseOperator(RegExp.$1, 'post-unary', 1, e.tree);
                } else {
                    parseOperator(RegExp.$1, 'pre-unary', 1, e.tree);
                }
            }
        },
        {
            re: /^\s*(==|!=|===|!==)\s*/,
            parse: function(e, s) {
                parseOperator(RegExp.$1, 'binary', 6, e.tree);
            }
        },
        {
            re: /^\s+(eq|ne|neq)\s+/i,
            parse: function(e, s) {
                var op = RegExp.$1.replace(/ne(q)?/, '!=').replace(/eq/, '==');
                parseOperator(op, 'binary', 6, e.tree);
            }
        },
        {
            re: /^\s*!\s*/,
            parse: function(e, s) {
                parseOperator('!', 'pre-unary', 2, e.tree);
            }
        },
        {
            re: /^\s+not\s+/i,
            parse: function(e, s) {
                parseOperator('!', 'pre-unary', 2, e.tree);
            }
        },
        {
            re: /^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,
            parse: function(e, s) {
                parseOperator(RegExp.$1, 'binary', 10, e.tree);
            }
        },
        {
            re: /^\s*(\*|\/|%)\s*/,
            parse: function(e, s) {
                parseOperator(RegExp.$1, 'binary', 3, e.tree);
            }
        },
        {
            re: /^\s+mod\s+/i,
            parse: function(e, s) {
                parseOperator('%', 'binary', 3, e.tree);
            }
        },
        {
            re: /^\s*(\+|-)\s*/,
            parse: function(e, s) {
                if (!e.tree.length || e.tree[e.tree.length - 1].name == 'operator') {
                    parseOperator(RegExp.$1, 'pre-unary', 4, e.tree);
                } else {
                    parseOperator(RegExp.$1, 'binary', 4, e.tree);
                }
            }
        },
        {
            re: /^\s*(<=|>=|<>|<|>)\s*/,
            parse: function(e, s) {
                parseOperator(RegExp.$1.replace(/<>/, '!='), 'binary', 5, e.tree);
            }
        },
        {
            re: /^\s+(lt|lte|le|gt|gte|ge)\s+/i,
            parse: function(e, s) {
                var op = RegExp.$1.replace(/lt/, '<').replace(/l(t)?e/, '<=').replace(/gt/, '>').replace(/g(t)?e/, '>=');
                parseOperator(op, 'binary', 5, e.tree);
            }
        },
        {
            re: /^\s+(is\s+(not\s+)?div\s+by)\s+/i,
            parse: function(e, s) {
                parseOperator(RegExp.$2 ? 'div_not' : 'div', 'binary', 7, e.tree);
            }
        },
        {
            re: /^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,
            parse: function(e, s) {
                var op = RegExp.$1 ? ((RegExp.$2 == 'odd') ? 'even' : 'even_not') : ((RegExp.$2 == 'odd') ? 'even_not' : 'even');
                parseOperator(op, 'binary', 7, e.tree);
                if (!RegExp.$3) {
                    parseText('1', e.tree);
                }
            }
        },
        {
            re: /^\s*(&&)\s*/,
            parse: function(e, s) {
                parseOperator(RegExp.$1, 'binary', 8, e.tree);
            }
        },
        {
            re: /^\s*(\|\|)\s*/,
            parse: function(e, s) {
                parseOperator(RegExp.$1, 'binary', 9, e.tree);
            }
        },
        {
            re: /^\s+and\s+/i,
            parse: function(e, s) {
                parseOperator('&&', 'binary', 11, e.tree);
            }
        },
        {
            re: /^\s+xor\s+/i,
            parse: function(e, s) {
                parseOperator('xor', 'binary', 12, e.tree);
            }
        },
        {
            re: /^\s+or\s+/i,
            parse: function(e, s) {
                parseOperator('||', 'binary', 13, e.tree);
            }
        },
        {
            re: /^#(\w+)#/, //config variable
            parse: function(e, s) {
                var eVar = {
                    token: '$smarty',
                    tree: []
                };
                parseVar('.config.' + RegExp.$1, eVar, 'smarty');
                e.tree.push(eVar.tree[0]);
                parseModifiers(s, e);
            }
        },
        {
            re: /^\s*\[\s*/, //array
            parse: function(e, s) {
                var params = parseParams(s, /^\s*,\s*/, /^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/);
                parsePluginFunc('__array', params, e.tree);
                e.value += params.toString();
                var paren = s.slice(params.toString().length).match(/\s*\]/);
                if (paren) {
                    e.value += paren[0];
                }
            }
        },
        {
            re: /^[\d.]+/, //number
            parse: function(e, s) {
                parseText(e.token, e.tree);
                parseModifiers(s, e);
            }
        },
        {
            re: /^\w+/, //static
            parse: function(e, s) {
                parseText(e.token, e.tree);
                parseModifiers(s, e);
            }
        }
    ];

    function parseModifiers(s, e) {
        if (parseModifiers.stop) {
            return;
        }

        var modifier = s.match(/^\|(\w+)/);
        if (!modifier) {
            return;
        }

        e.value += modifier[0];

        var fnm = modifier[1] == 'default' ? 'defaultValue' : modifier[1];
        s = s.slice(modifier[0].length).replace(/^\s+/, '');

        parseModifiers.stop = true;
        var params = [];
        for (var colon = s.match(/^\s*:\s*/); colon; colon = s.match(/^\s*:\s*/)) {
            e.value += s.slice(0, colon[0].length);
            s = s.slice(colon[0].length);

            var param = {
                value: '',
                tree: []
            };
            if (lookUp(s, param)) {
                e.value += param.value;
                params.push(param.tree[0]);
                s = s.slice(param.value.length);
            } else {
                parseText('', params);
            }
        }
        parseModifiers.stop = false;

        params.unshift(e.tree.pop()); //modifiers have the highest priority
        e.tree.push(parseFunc(fnm, {
            __parsed: params
        }, [])[0]);

        parseModifiers(s, e); //modifiers can be combined
    }

    function lookUp(s, e) {
        if (!s) {
            return false;
        }

        if (s.substr(0, jSmart.prototype.left_delimiter.length) == jSmart.prototype.left_delimiter) {
            var tag = findTag('', s);
            if (tag) {
                e.token = tag[0];
                e.value += tag[0];
                parse(tag[0], e.tree);
                parseModifiers(s.slice(e.value.length), e);
                return true;
            }
        }

        for (var i = 0; i < tokens.length; ++i) {
            if (s.match(tokens[i].re)) {
                e.token = RegExp.lastMatch;
                e.value += RegExp.lastMatch;
                tokens[i].parse(e, s.slice(e.token.length));
                return true;
            }
        }
        return false;
    }

    function bundleOp(i, tree, precedence) {
        var op = tree[i];
        if (op.name == 'operator' && op.precedence == precedence && !op.params.__parsed) {
            if (op.optype == 'binary') {
                op.params.__parsed = [tree[i - 1], tree[i + 1]];
                tree.splice(i - 1, 3, op);
                return true;
            } else if (op.optype == 'post-unary') {
                op.params.__parsed = [tree[i - 1]];
                tree.splice(i - 1, 2, op);
                return true;
            }

            op.params.__parsed = [tree[i + 1]];
            tree.splice(i, 2, op);
        }
        return false;
    }

    function composeExpression(tree) {
        var i = 0;
        for (i = 0; i < tree.length; ++i) {
            if (tree[i] instanceof Array) {
                tree[i] = composeExpression(tree[i])
            }
        }

        for (var precedence = 1; precedence < 14; ++precedence) {
            if (precedence == 2 || precedence == 10) {
                for (i = tree.length; i > 0; --i) {
                    i -= bundleOp(i - 1, tree, precedence);
                }
            } else {
                for (i = 0; i < tree.length; ++i) {
                    i -= bundleOp(i, tree, precedence);
                }
            }
        }
        return tree[0]; //only one node must be left
    }

    function parseExpression(s) {
        var e = {
            value: '',
            tree: []
        };
        while (lookUp(s.slice(e.value.length), e)) {}
        if (!e.tree.length) {
            return false;
        }
        e.tree = composeExpression(e.tree);
        return e;
    }

    function parseParams(paramsStr, reDelim, reName) {
        var s = paramsStr.replace(/\n/g, ' ').replace(/^\s+|\s+$/g, '');
        var params = [];
        params.__parsed = [];
        var paramsStr = '';

        if (!s) {
            return params;
        }

        if (!reDelim) {
            reDelim = /^\s+/;
            reName = /^(\w+)\s*=\s*/;
        }

        while (s) {
            var nm = null;
            if (reName) {
                var foundName = s.match(reName);
                if (foundName) {
                    nm = trimQuotes(foundName[1]);
                    paramsStr += s.slice(0, foundName[0].length);
                    s = s.slice(foundName[0].length);
                }
            }

            var param = parseExpression(s);
            if (!param) {
                break;
            }

            if (nm) {
                params[nm] = param.value;
                params.__parsed[nm] = param.tree;
            } else {
                params.push(param.value);
                params.__parsed.push(param.tree);
            }

            paramsStr += s.slice(0, param.value.length);
            s = s.slice(param.value.length);

            var foundDelim = s.match(reDelim);
            if (foundDelim) {
                paramsStr += s.slice(0, foundDelim[0].length);
                s = s.slice(foundDelim[0].length);
            } else {
                break;
            }
        }
        params.toString = function() {
            return paramsStr;
        }
        return params;
    }

    function parsePluginBlock(name, params, tree, content) {
        tree.push({
            type: 'plugin',
            name: name,
            params: params,
            subTree: parse(content, [])
        });
    }

    function parsePluginFunc(name, params, tree) {
        tree.push({
            type: 'plugin',
            name: name,
            params: params
        });
    }

    function getActualParamValues(params, data) {
        var actualParams = [];
        for (var nm in params.__parsed) {
            if (params.__parsed.hasOwnProperty(nm)) {
                var v = process([params.__parsed[nm]], data);
                if (typeof(v) == 'string' && v.match(/^[1-9]\d{0,14}$/) && !isNaN(v)) {
                    v = parseInt(v, 10);
                }
                actualParams[nm] = v;
            }
        }

        actualParams.__get = function(nm, defVal, id) {
            if (nm in actualParams && typeof(actualParams[nm]) != 'undefined') {
                return actualParams[nm];
            }
            if (typeof(id) != 'undefined' && typeof(actualParams[id]) != 'undefined') {
                return actualParams[id];
            }
            if (defVal === null) {
                throw new Error("The required attribute '" + nm + "' is missing");
            }
            return defVal;
        };
        return actualParams;
    }

    function getVarValue(node, data, val) {
        var v = data;
        var nm = '';
        for (var i = 0; i < node.parts.length; ++i) {
            var part = node.parts[i];
            if (part.type == 'plugin' && part.name == '__func' && part.hasOwner) {
                data.__owner = v;
                v = process([node.parts[i]], data);
                delete data.__owner;
            } else {
                nm = process([part], data);

                //section name
                if (nm in data.smarty.section && part.type == 'text' && process([node.parts[0]], data) != 'smarty') {
                    nm = data.smarty.section[nm].index;
                }

                //add to array
                if (!nm && typeof val != 'undefined' && v instanceof Array) {
                    nm = v.length;
                }

                //set new value
                if (typeof val != 'undefined' && i == node.parts.length - 1) {
                    v[nm] = val;
                }

                if (typeof v == 'object' && v !== null && nm in v) {
                    v = v[nm];
                } else {
                    if (typeof val == 'undefined') {
                        return '';
                    }
                    v[nm] = {};
                    v = v[nm];
                }
            }
        }
        return v;
    }

    function process(tree, data) {
        var res = '';
        for (var i = 0; i < tree.length; ++i) {
            var s = '';
            var node = tree[i];
            if (node.type == 'text') {
                s = node.data;
            } else if (node.type == 'var') {
                s = getVarValue(node, data);
            } else if (node.type == 'build-in') {
                s = buildInFunctions[node.name].process(node, data);
            } else if (node.type == 'plugin') {
                var plugin = plugins[node.name];
                if (plugin.type == 'block') {
                    var repeat = {
                        value: true
                    };
                    plugin.process(getActualParamValues(node.params, data), '', data, repeat);
                    while (repeat.value) {
                        repeat.value = false;
                        s += plugin.process(
                            getActualParamValues(node.params, data),
                            process(node.subTree, data),
                            data,
                            repeat
                        );
                    }
                } else if (plugin.type == 'function') {
                    s = plugin.process(getActualParamValues(node.params, data), data);
                }
            }
            if (typeof s == 'boolean') {
                s = s ? '1' : '';
            }
            if (tree.length == 1) {
                return s;
            }
            res += s;

            if (data.smarty['continue'] || data.smarty['break']) {
                return res;
            }
        }
        return res;
    }

    function getTemplate(name, tree, nocache) {
        if (nocache || !(name in files)) {
            var tpl = jSmart.prototype.getTemplate(name);
            if (typeof(tpl) != 'string') {
                throw new Error('No template for ' + name);
            }
            parse(applyFilters(jSmart.prototype.filters_global.pre, stripComments(tpl.replace(/\r\n/g, '\n'))), tree);
            files[name] = tree;
        } else {
            tree = files[name];
        }
        return tree;
    }

    function stripComments(s) {
        var sRes = '';
        for (var openTag = s.match(/{\*/); openTag; openTag = s.match(/{\*/)) {
            sRes += s.slice(0, openTag.index);
            s = s.slice(openTag.index + openTag[0].length);
            var closeTag = s.match(/\*}/);
            if (!closeTag) {
                throw new Error('Unclosed {*');
            }
            s = s.slice(closeTag.index + closeTag[0].length);
        }
        return sRes + s;
    }

    function applyFilters(filters, s) {
        for (var i = 0; i < filters.length; ++i) {
            s = filters[i](s);
        }
        return s;
    }


    jSmart = function(tpl) {
        this.tree = [];
        this.tree.blocks = {};
        this.scripts = {};
        this.default_modifiers = [];
        this.filters = {
            'variable': [],
            'post': []
        };
        this.smarty = {
            'smarty': {
                block: {},
                'break': false,
                capture: {},
                'continue': false,
                counter: {},
                cycle: {},
                foreach: {},
                section: {},
                now: Math.floor((new Date()).getTime() / 1000),
                'const': {},
                config: {},
                current_dir: '/',
                template: '',
                ldelim: jSmart.prototype.left_delimiter,
                rdelim: jSmart.prototype.right_delimiter,
                version: '2.9'
            }
        };
        blocks = this.tree.blocks;
        parse(
            applyFilters(jSmart.prototype.filters_global.pre, stripComments((new String(tpl ? tpl : '')).replace(/\r\n/g, '\n'))),
            this.tree
        );
    };

    jSmart.prototype.fetch = function(data) {
        blocks = this.tree.blocks;
        scripts = this.scripts;
        escape_html = this.escape_html;
        default_modifiers = jSmart.prototype.default_modifiers_global.concat(this.default_modifiers);
        this.data = obMerge((typeof data == 'object') ? data : {}, this.smarty);
        varFilters = jSmart.prototype.filters_global.variable.concat(this.filters.variable);
        var res = process(this.tree, this.data);
        if (jSmart.prototype.debugging) {
            plugins.debug.process([], this.data);
        }
        return applyFilters(jSmart.prototype.filters_global.post.concat(this.filters.post), res);
    };

    jSmart.prototype.escape_html = false;

    /**
       @param type  valid values are 'function', 'block', 'modifier'
       @param callback  func(params,data)  or  block(params,content,data,repeat)
    */
    jSmart.prototype.registerPlugin = function(type, name, callback) {
        if (type == 'modifier') {
            modifiers[name] = callback;
        } else {
            plugins[name] = {
                'type': type,
                'process': callback
            };
        }
    };

    /**
       @param type  valid values are 'pre', 'variable', 'post'
       @param callback function(textValue) { ... }
    */
    jSmart.prototype.registerFilter = function(type, callback) {
        (this.tree ? this.filters : jSmart.prototype.filters_global)[type == 'output' ? 'post' : type].push(callback);
    }

    jSmart.prototype.filters_global = {
        'pre': [],
        'variable': [],
        'post': []
    };

    jSmart.prototype.configLoad = function(confValues, section, data) {
        data = data ? data : this.data;
        var s = confValues.replace(/\r\n/g, '\n').replace(/^\s+|\s+$/g, '');
        var re = /^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m;
        var currSect = '';
        for (var f = s.match(re); f; f = s.match(re)) {
            s = s.slice(f.index + f[0].length);
            if (f[1]) {
                currSect = f[1];
            } else if ((!currSect || currSect == section) && currSect.substr(0, 1) != '.') {
                if (f[3] == '"""') {
                    var triple = s.match(/"""/);
                    if (triple) {
                        data.smarty.config[f[2]] = s.slice(0, triple.index);
                        s = s.slice(triple.index + triple[0].length);
                    }
                } else {
                    data.smarty.config[f[2]] = trimQuotes(f[3]);
                }
            }
            var newln = s.match(/\n+/);
            if (newln) {
                s = s.slice(newln.index + newln[0].length);
            } else {
                break;
            }
        }
    }

    jSmart.prototype.clearConfig = function(varName) {
        if (varName) {
            delete this.data.smarty.config[varName];
        } else {
            this.data.smarty.config = {};
        }
    }

    /**
       add modifier to implicitly apply to every variable in a template
       @param modifiers  single string (e.g. "replace:'from':'to'") 
                         or array of strings (e.g. ['escape:"htmlall"', "replace:'from':'to'"]) 
     */
    jSmart.prototype.addDefaultModifier = function(modifiers) {
        if (!(modifiers instanceof Array)) {
            modifiers = [modifiers];
        }

        for (var i = 0; i < modifiers.length; ++i) {
            var e = {
                value: '',
                tree: [0]
            };
            parseModifiers('|' + modifiers[i], e);
            (this.tree ? this.default_modifiers : this.default_modifiers_global).push(e.tree[0]);
        }
    }

    jSmart.prototype.default_modifiers_global = [];

    /**
       override this function
       @param name  value of 'file' parameter in {include} and {extends}
       @return template text
    */
    jSmart.prototype.getTemplate = function(name) {
        throw new Error('No template for ' + name);
    }

    /**
       override this function
       @param name  value of 'file' parameter in {fetch}
       @return file content
    */
    jSmart.prototype.getFile = function(name) {
        throw new Error('No file for ' + name);
    }

    /**
       override this function
       @param name  value of 'file' parameter in {include_php} and {include_javascript} 
                     or value of 'script' parameter in {insert}
       @return Javascript script
    */
    jSmart.prototype.getJavascript = function(name) {
        throw new Error('No Javascript for ' + name);
    }

    /**
       override this function
       @param name  value of 'file' parameter in {config_load}
       @return config file content
    */
    jSmart.prototype.getConfig = function(name) {
        throw new Error('No config for ' + name);
    }



    /**     
       whether to skip tags in open brace { followed by white space(s) and close brace } with white space(s) before
    */
    jSmart.prototype.auto_literal = true;

    jSmart.prototype.left_delimiter = '{';
    jSmart.prototype.right_delimiter = '}';

    /** enables the debugging console */
    jSmart.prototype.debugging = false;


    jSmart.prototype.PHPJS = function(fnm, modifier) {
        if (eval('typeof ' + fnm) == 'function') {
            return (typeof window == 'object') ? window : global;
        } else if (typeof(PHP_JS) == 'function') {
            return new PHP_JS();
        }
        throw new Error("Modifier '" + modifier + "' uses JavaScript port of PHP function '" + fnm + "'. You can find one at http://phpjs.org");
    }

    jSmart.prototype.makeTimeStamp = function(s) {
        if (!s) {
            return Math.floor((new Date()).getTime() / 1000);
        }
        if (isNaN(s)) {
            var tm = jSmart.prototype.PHPJS('strtotime', 'date_format').strtotime(s);
            if (tm == -1 || tm === false) {
                return Math.floor((new Date()).getTime() / 1000);
            }
            return tm;
        }
        s = new String(s);
        if (s.length == 14) //mysql timestamp format of YYYYMMDDHHMMSS
        {
            return Math.floor((new Date(s.substr(0, 4), s.substr(4, 2) - 1, s.substr(6, 2), s.substr(8, 2), s.substr(10, 2)).getTime() / 1000));
        }
        return parseInt(s);
    }



    /**
       register custom functions
    */
    jSmart.prototype.registerPlugin(
        'function',
        '__array',
        function(params, data) {
            var a = [];
            for (var nm in params) {
                if (params.hasOwnProperty(nm) && params[nm] && typeof params[nm] != 'function') {
                    a[nm] = params[nm];
                }
            }
            return a;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        '__func',
        function(params, data) {
            var paramNames = [];
            var paramValues = {};
            for (var i = 0; i < params.length; ++i) {
                paramNames.push(params.name + '__p' + i);
                paramValues[params.name + '__p' + i] = params[i];
            }
            var fname = ('__owner' in data && params.name in data.__owner) ? ('__owner.' + params.name) : params.name;
            return execute(fname + '(' + paramNames.join(',') + ')', obMerge({}, data, paramValues));
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        '__quoted',
        function(params, data) {
            return params.join('');
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'append',
        function(params, data) {
            var varName = params.__get('var', null, 0);
            if (!(varName in data) || !(data[varName] instanceof Array)) {
                data[varName] = [];
            }
            var index = params.__get('index', false);
            var val = params.__get('value', null, 1);
            if (index === false) {
                data[varName].push(val);
            } else {
                data[varName][index] = val;
            }
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'assign',
        function(params, data) {
            assignVar(params.__get('var', null, 0), params.__get('value', null, 1), data);
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'break',
        function(params, data) {
            data.smarty['break'] = true;
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'call',
        function(params, data) {
            var fname = params.__get('name', null, 0);
            delete params.name;
            var assignTo = params.__get('assign', false);
            delete params.assign;
            var s = plugins[fname].process(params, data);
            if (assignTo) {
                assignVar(assignTo, s, data);
                return '';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'block',
        'capture',
        function(params, content, data, repeat) {
            if (content) {
                content = content.replace(/^\n/, '');
                data.smarty.capture[params.__get('name', 'default', 0)] = content;

                if ('assign' in params) {
                    assignVar(params.assign, content, data);
                }

                var append = params.__get('append', false);
                if (append) {
                    if (append in data) {
                        if (data[append] instanceof Array) {
                            data[append].push(content);
                        }
                    } else {
                        data[append] = [content];
                    }
                }
            }
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'continue',
        function(params, data) {
            data.smarty['continue'] = true;
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'counter',
        function(params, data) {
            var name = params.__get('name', 'default');
            if (name in data.smarty.counter) {
                var counter = data.smarty.counter[name];
                if ('start' in params) {
                    counter.value = parseInt(params['start']);
                } else {
                    counter.value = parseInt(counter.value);
                    counter.skip = parseInt(counter.skip);
                    if ('down' == counter.direction) {
                        counter.value -= counter.skip;
                    } else {
                        counter.value += counter.skip;
                    }
                }
                counter.skip = params.__get('skip', counter.skip);
                counter.direction = params.__get('direction', counter.direction);
                counter.assign = params.__get('assign', counter.assign);
            } else {
                data.smarty.counter[name] = {
                    value: parseInt(params.__get('start', 1)),
                    skip: parseInt(params.__get('skip', 1)),
                    direction: params.__get('direction', 'up'),
                    assign: params.__get('assign', false)
                };
            }

            if (data.smarty.counter[name].assign) {
                data[data.smarty.counter[name].assign] = data.smarty.counter[name].value;
                return '';
            }

            if (params.__get('print', true)) {
                return data.smarty.counter[name].value;
            }

            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'cycle',
        function(params, data) {
            var name = params.__get('name', 'default');
            var reset = params.__get('reset', false);
            if (!(name in data.smarty.cycle)) {
                data.smarty.cycle[name] = {
                    arr: [''],
                    delimiter: params.__get('delimiter', ','),
                    index: 0
                };
                reset = true;
            }

            if (params.__get('delimiter', false)) {
                data.smarty.cycle[name].delimiter = params.delimiter;
            }
            var values = params.__get('values', false);
            if (values) {
                var arr = [];
                if (values instanceof Object) {
                    for (nm in values) {
                        arr.push(values[nm]);
                    }
                } else {
                    arr = values.split(data.smarty.cycle[name].delimiter);
                }

                if (arr.length != data.smarty.cycle[name].arr.length || arr[0] != data.smarty.cycle[name].arr[0]) {
                    data.smarty.cycle[name].arr = arr;
                    data.smarty.cycle[name].index = 0;
                    reset = true;
                }
            }

            if (params.__get('advance', 'true')) {
                data.smarty.cycle[name].index += 1;
            }
            if (data.smarty.cycle[name].index >= data.smarty.cycle[name].arr.length || reset) {
                data.smarty.cycle[name].index = 0;
            }

            if (params.__get('assign', false)) {
                assignVar(params.assign, data.smarty.cycle[name].arr[data.smarty.cycle[name].index], data);
                return '';
            }

            if (params.__get('print', true)) {
                return data.smarty.cycle[name].arr[data.smarty.cycle[name].index];
            }

            return '';
        }
    );

    jSmart.prototype.print_r = function(v, indent) {
        if (v instanceof Object) {
            var s = ((v instanceof Array) ? 'Array[' + v.length + ']' : 'Object') + '<br>';
            for (var nm in v) {
                if (v.hasOwnProperty(nm)) {
                    s += indent + '&nbsp;&nbsp;<strong>' + nm + '</strong> : ' + jSmart.prototype.print_r(v[nm], indent + '&nbsp;&nbsp;&nbsp;') + '<br>';
                }
            }
            return s;
        }
        return v;
    }

    jSmart.prototype.registerPlugin(
        'function',
        'debug',
        function(params, data) {
            if (typeof dbgWnd != 'undefined') {
                dbgWnd.close();
            }
            dbgWnd = window.open('', '', 'width=680,height=600,resizable,scrollbars=yes');
            var sVars = '';
            var i = 0;
            for (var nm in data) {
                sVars += '<tr class=' + (++i % 2 ? 'odd' : 'even') + '><td><strong>' + nm + '</strong></td><td>' + jSmart.prototype.print_r(data[nm], '') + '</td></tr>';
            }
            dbgWnd.document.write(" \
               <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'> \
               <head> \
                    <title>jSmart Debug Console</title> \
                  <style type='text/css'> \
                     table {width: 100%;} \
                     td {vertical-align:top;width: 50%;} \
                     .even td {background-color: #fafafa;} \
                  </style> \
               </head> \
               <body> \
                  <h1>jSmart Debug Console</h1> \
                  <h2>assigned template variables</h2> \
                  <table>" + sVars + "</table> \
               </body> \
               </html> \
            ");
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'eval',
        function(params, data) {
            var tree = [];
            parse(params.__get('var', '', 0), tree);
            var s = process(tree, data);
            if ('assign' in params) {
                assignVar(params.assign, s, data);
                return '';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'fetch',
        function(params, data) {
            var s = jSmart.prototype.getFile(params.__get('file', null, 0));
            if ('assign' in params) {
                assignVar(params.assign, s, data);
                return '';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'html_checkboxes',
        function(params, data) {
            var type = params.__get('type', 'checkbox');
            var name = params.__get('name', type);
            if (type == 'checkbox') {
                name += '[]';
            }
            var values = params.__get('values', params.options);
            var output = params.__get('options', []);
            var useName = ('options' in params);
            var p;
            if (!useName) {
                for (p in params.output) {
                    output.push(params.output[p]);
                }
            }
            var selected = params.__get('selected', false);
            var separator = params.__get('separator', '');
            var labels = Boolean(params.__get('labels', true));

            var res = [];
            var i = 0;
            var s = '';
            for (p in values) {
                if (values.hasOwnProperty(p)) {
                    s = (labels ? '<label>' : '');
                    s += '<input type="' + type + '" name="' + name + '" value="' + (useName ? p : values[p]) + '" ';
                    if (selected == (useName ? p : values[p])) {
                        s += 'checked="checked" ';
                    }
                    s += '/>' + output[useName ? p : i++];
                    s += (labels ? '</label>' : '');
                    s += separator;
                    res.push(s);
                }
            }
            if ('assign' in params) {
                assignVar(params.assign, res, data);
                return '';
            }
            return res.join('\n');
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'html_image',
        function(params, data) {
            var url = params.__get('file', null);
            var width = params.__get('width', false);
            var height = params.__get('height', false);
            var alt = params.__get('alt', '');
            var href = params.__get('href', false);
            var path_prefix = params.__get('path_prefix', '');
            var paramNames = {
                file: 1,
                width: 1,
                height: 1,
                alt: 1,
                href: 1,
                basedir: 1,
                path_prefix: 1
            };

            var s = '<img src="' + path_prefix + url + '"' + ' alt="' + alt + '"' + (width ? ' width="' + width + '"' : '') + (height ? ' height="' + height + '"' : '');
            var p;
            for (p in params) {
                if (params.hasOwnProperty(p) && typeof(params[p]) == 'string') {
                    if (!(p in paramNames)) {
                        s += ' ' + p + '="' + params[p] + '"';
                    }
                }
            }
            s += ' />';
            return href ? '<a href="' + href + '">' + s + '</a>' : s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'html_options',
        function(params, data) {
            var values = params.__get('values', params.options);
            var output = params.__get('options', []);
            var useName = ('options' in params);
            var p;
            if (!useName) {
                for (p in params.output) {
                    output.push(params.output[p]);
                }
            }
            var selected = params.__get('selected', false);

            var res = [];
            var s = '';
            var i = 0;
            for (p in values) {
                if (values.hasOwnProperty(p)) {
                    s = '<option value="' + (useName ? p : values[p]) + '"';
                    if (selected == (useName ? p : values[p])) {
                        s += ' selected="selected"';
                    }
                    s += '>' + output[useName ? p : i++] + '</option>';
                    res.push(s);
                }
            }
            var name = params.__get('name', false);
            return (name ? ('<select name="' + name + '">\n' + res.join('\n') + '\n</select>') : res.join('\n')) + '\n';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'html_radios',
        function(params, data) {
            params.type = 'radio';
            return plugins.html_checkboxes.process(params, data);
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'html_select_date',
        function(params, data) {
            var prefix = params.__get('prefix', 'Date_');
            var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

            var s = '';
            s += '<select name="' + prefix + 'Month">\n';
            var i = 0;
            for (i = 0; i < months.length; ++i) {
                s += '<option value="' + i + '">' + months[i] + '</option>\n';
            }
            s += '</select>\n'

            s += '<select name="' + prefix + 'Day">\n';
            for (i = 0; i < 31; ++i) {
                s += '<option value="' + i + '">' + i + '</option>\n';
            }
            s += '</select>\n'
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'html_table',
        function(params, data) {
            var loop = [];
            var p;
            if (params.loop instanceof Array) {
                loop = params.loop
            } else {
                for (p in params.loop) {
                    if (params.loop.hasOwnProperty(p)) {
                        loop.push(params.loop[p]);
                    }
                }
            }
            var rows = params.__get('rows', false);
            var cols = params.__get('cols', false);
            if (!cols) {
                cols = rows ? Math.ceil(loop.length / rows) : 3;
            }
            var colNames = [];
            if (isNaN(cols)) {
                if (typeof cols == 'object') {
                    for (p in cols) {
                        if (cols.hasOwnProperty(p)) {
                            colNames.push(cols[p]);
                        }
                    }
                } else {
                    colNames = cols.split(/\s*,\s*/);
                }
                cols = colNames.length;
            }
            rows = rows ? rows : Math.ceil(loop.length / cols);

            var inner = params.__get('inner', 'cols');
            var caption = params.__get('caption', '');
            var table_attr = params.__get('table_attr', 'border="1"');
            var th_attr = params.__get('th_attr', false);
            if (th_attr && typeof th_attr != 'object') {
                th_attr = [th_attr];
            }
            var tr_attr = params.__get('tr_attr', false);
            if (tr_attr && typeof tr_attr != 'object') {
                tr_attr = [tr_attr];
            }
            var td_attr = params.__get('td_attr', false);
            if (td_attr && typeof td_attr != 'object') {
                td_attr = [td_attr];
            }
            var trailpad = params.__get('trailpad', '&nbsp;');
            var hdir = params.__get('hdir', 'right');
            var vdir = params.__get('vdir', 'down');

            var s = '';
            for (var row = 0; row < rows; ++row) {
                s += '<tr' + (tr_attr ? ' ' + tr_attr[row % tr_attr.length] : '') + '>\n';
                for (var col = 0; col < cols; ++col) {
                    var idx = (inner == 'cols') ? ((vdir == 'down' ? row : rows - 1 - row) * cols + (hdir == 'right' ? col : cols - 1 - col)) : ((hdir == 'right' ? col : cols - 1 - col) * rows + (vdir == 'down' ? row : rows - 1 - row));

                    s += '<td' + (td_attr ? ' ' + td_attr[col % td_attr.length] : '') + '>' + (idx < loop.length ? loop[idx] : trailpad) + '</td>\n';
                }
                s += '</tr>\n';
            }

            var sHead = '';
            if (colNames.length) {
                sHead = '\n<thead><tr>';
                for (var i = 0; i < colNames.length; ++i) {
                    sHead += '\n<th' + (th_attr ? ' ' + th_attr[i % th_attr.length] : '') + '>' + colNames[hdir == 'right' ? i : colNames.length - 1 - i] + '</th>';
                }
                sHead += '\n</tr></thead>';
            }

            return '<table ' + table_attr + '>' + (caption ? '\n<caption>' + caption + '</caption>' : '') + sHead + '\n<tbody>\n' + s + '</tbody>\n</table>\n';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'include',
        function(params, data) {
            var file = params.__get('file', null, 0);
            var incData = obMerge({}, data, params);
            incData.smarty.template = file;
            var s = process(getTemplate(file, [], findInArray(params, 'nocache') >= 0), incData);
            if ('assign' in params) {
                assignVar(params.assign, s, data);
                return '';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'include_javascript',
        function(params, data) {
            var file = params.__get('file', null, 0);
            if (params.__get('once', true) && file in scripts) {
                return '';
            }
            scripts[file] = true;
            var s = execute(jSmart.prototype.getJavascript(file), {
                '$this': data
            });
            if ('assign' in params) {
                assignVar(params.assign, s, data);
                return '';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'include_php',
        function(params, data) {
            return plugins['include_javascript'].process(params, data);
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'insert',
        function(params, data) {
            var fparams = {};
            for (var nm in params) {
                if (params.hasOwnProperty(nm) && isNaN(nm) && params[nm] && typeof params[nm] == 'string' && nm != 'name' && nm != 'assign' && nm != 'script') {
                    fparams[nm] = params[nm];
                }
            }
            var prefix = 'insert_';
            if ('script' in params) {
                eval(jSmart.prototype.getJavascript(params.script));
                prefix = 'smarty_insert_';
            }
            var func = eval(prefix + params.__get('name', null, 0));
            var s = func(fparams, data);
            if ('assign' in params) {
                assignVar(params.assign, s, data);
                return '';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'block',
        'javascript',
        function(params, content, data, repeat) {
            data['$this'] = data;
            execute(content, data);
            delete data['$this'];
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'config_load',
        function(params, data) {
            jSmart.prototype.configLoad(jSmart.prototype.getConfig(params.__get('file', null, 0)), params.__get('section', '', 1), data);
            return '';
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'mailto',
        function(params, data) {
            var address = params.__get('address', null);
            var encode = params.__get('encode', 'none');
            var text = params.__get('text', address);
            var cc = jSmart.prototype.PHPJS('rawurlencode', 'mailto').rawurlencode(params.__get('cc', '')).replace('%40', '@');
            var bcc = jSmart.prototype.PHPJS('rawurlencode', 'mailto').rawurlencode(params.__get('bcc', '')).replace('%40', '@');
            var followupto = jSmart.prototype.PHPJS('rawurlencode', 'mailto').rawurlencode(params.__get('followupto', '')).replace('%40', '@');
            var subject = jSmart.prototype.PHPJS('rawurlencode', 'mailto').rawurlencode(params.__get('subject', ''));
            var newsgroups = jSmart.prototype.PHPJS('rawurlencode', 'mailto').rawurlencode(params.__get('newsgroups', ''));
            var extra = params.__get('extra', '');

            address += (cc ? '?cc=' + cc : '');
            address += (bcc ? (cc ? '&' : '?') + 'bcc=' + bcc : '');
            address += (subject ? ((cc || bcc) ? '&' : '?') + 'subject=' + subject : '');
            address += (newsgroups ? ((cc || bcc || subject) ? '&' : '?') + 'newsgroups=' + newsgroups : '');
            address += (followupto ? ((cc || bcc || subject || newsgroups) ? '&' : '?') + 'followupto=' + followupto : '');

            s = '<a href="mailto:' + address + '" ' + extra + '>' + text + '</a>';

            if (encode == 'javascript') {
                s = "document.write('" + s + "');";
                var sEncoded = '';
                for (var i = 0; i < s.length; ++i) {
                    sEncoded += '%' + jSmart.prototype.PHPJS('bin2hex', 'mailto').bin2hex(s.substr(i, 1));
                }
                return '<script type="text/javascript">eval(unescape(\'' + sEncoded + "'))</script>";
            } else if (encode == 'javascript_charcode') {
                var codes = [];
                for (var i = 0; i < s.length; ++i) {
                    codes.push(jSmart.prototype.PHPJS('ord', 'mailto').ord(s.substr(i, 1)));
                }
                return '<script type="text/javascript" language="javascript">\n<!--\n{document.write(String.fromCharCode(' +
                    codes.join(',') + '))}\n//-->\n</script>\n';
            } else if (encode == 'hex') {
                if (address.match(/^.+\?.+$/)) {
                    throw new Error('mailto: hex encoding does not work with extra attributes. Try javascript.');
                }
                var aEncoded = '';
                for (var i = 0; i < address.length; ++i) {
                    if (address.substr(i, 1).match(/\w/)) {
                        aEncoded += '%' + jSmart.prototype.PHPJS('bin2hex', 'mailto').bin2hex(address.substr(i, 1));
                    } else {
                        aEncoded += address.substr(i, 1);
                    }
                }
                var tEncoded = '';
                for (var i = 0; i < text.length; ++i) {
                    tEncoded += '&#x' + jSmart.prototype.PHPJS('bin2hex', 'mailto').bin2hex(text.substr(i, 1)) + ';';
                }
                return '<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;' + aEncoded + '" ' + extra + '>' + tEncoded + '</a>';
            }
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'function',
        'math',
        function(params, data) {
            with(Math) {
                with(params) {
                    var res = eval(params.__get('equation', null).replace(/pi\(\s*\)/g, 'PI'));
                }
            }

            if ('format' in params) {
                res = jSmart.prototype.PHPJS('sprintf', 'math').sprintf(params.format, res);
            }

            if ('assign' in params) {
                assignVar(params.assign, res, data);
                return '';
            }
            return res;
        }
    );

    jSmart.prototype.registerPlugin(
        'block',
        'nocache',
        function(params, content, data, repeat) {
            return content;
        }
    );

    jSmart.prototype.registerPlugin(
        'block',
        'textformat',
        function(params, content, data, repeat) {
            if (!content) {
                return '';
            }

            var wrap = params.__get('wrap', 80);
            var wrap_char = params.__get('wrap_char', '\n');
            var wrap_cut = params.__get('wrap_cut', false);
            var indent_char = params.__get('indent_char', ' ');
            var indent = params.__get('indent', 0);
            var indentStr = (new Array(indent + 1)).join(indent_char);
            var indent_first = params.__get('indent_first', 0);
            var indentFirstStr = (new Array(indent_first + 1)).join(indent_char);

            var style = params.__get('style', '');
            if (style == 'email') {
                wrap = 72;
            }

            var paragraphs = content.split('\n');
            for (var i = 0; i < paragraphs.length; ++i) {
                var p = paragraphs[i];
                if (!p) {
                    continue;
                }
                p = p.replace(/^\s+|\s+$/, '').replace(/\s+/g, ' ');
                if (indent_first) {
                    p = indentFirstStr + p;
                }

                p = modifiers.wordwrap(p, wrap - indent, wrap_char, wrap_cut);

                if (indent) {
                    p = p.replace(/^/mg, indentStr);
                }
                paragraphs[i] = p;
            }
            var s = paragraphs.join(wrap_char + wrap_char);
            if ('assign' in params) {
                assignVar(params.assign, s, data);
                return '';
            }
            return s;
        }
    );


    /**
       register modifiers
    */
    jSmart.prototype.registerPlugin(
        'modifier',
        'capitalize',
        function(s, withDigits) {
            var re = new RegExp(withDigits ? '[\\W\\d]+' : '\\W+');
            var found = null;
            var res = '';
            for (found = s.match(re); found; found = s.match(re)) {
                var word = s.slice(0, found.index);
                if (word.match(/\d/)) {
                    res += word;
                } else {
                    res += word.charAt(0).toUpperCase() + word.slice(1);
                }
                res += s.slice(found.index, found.index + found[0].length);
                s = s.slice(found.index + found[0].length);
            }
            if (s.match(/\d/)) {
                return res + s;
            }
            return res + s.charAt(0).toUpperCase() + s.slice(1);
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'cat',
        function(s, value) {
            value = value ? value : '';
            return s + value;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'count',
        function(v, recursive) {
            if (v === null || typeof v === 'undefined') {
                return 0;
            } else if (v.constructor !== Array && v.constructor !== Object) {
                return 1;
            }

            recursive = Boolean(recursive);
            var k, cnt = 0;
            for (k in v) {
                if (v.hasOwnProperty(k)) {
                    cnt++;
                    if (recursive && v[k] && (v[k].constructor === Array || v[k].constructor === Object)) {
                        cnt += modifiers.count(v[k], true);
                    }
                }
            }
            return cnt;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'count_characters',
        function(s, includeWhitespaces) {
            return includeWhitespaces ? s.length : s.replace(/\s/g, '').length;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'count_paragraphs',
        function(s) {
            var found = s.match(/\n+/g);
            if (found) {
                return found.length + 1;
            }
            return 1;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'count_sentences',
        function(s) {
            var found = s.match(/[^\s]\.(?!\w)/g);
            if (found) {
                return found.length;
            }
            return 0;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'count_words',
        function(s) {
            var found = s.match(/\w+/g);
            if (found) {
                return found.length;
            }
            return 0;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'date_format',
        function(s, fmt, defaultDate) {
            return jSmart.prototype.PHPJS('strftime', 'date_format').strftime(fmt ? fmt : '%b %e, %Y', jSmart.prototype.makeTimeStamp(s ? s : defaultDate));
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'defaultValue',
        function(s, value) {
            return (s && s != 'null' && s != 'undefined') ? s : (value ? value : '');
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'escape',
        function(s, esc_type, char_set, double_encode) {
            s = new String(s);
            esc_type = esc_type || 'html';
            char_set = char_set || 'UTF-8';
            double_encode = (typeof double_encode != 'undefined') ? Boolean(double_encode) : true;

            switch (esc_type) {
                case 'html':
                    if (double_encode) {
                        s = s.replace(/&/g, '&amp;');
                    }
                    return s.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/'/g, '&#039;').replace(/"/g, '&quot;');
                case 'htmlall':
                    return jSmart.prototype.PHPJS('htmlentities', 'escape').htmlentities(s, 3, char_set);
                case 'url':
                    return jSmart.prototype.PHPJS('rawurlencode', 'escape').rawurlencode(s);
                case 'urlpathinfo':
                    return jSmart.prototype.PHPJS('rawurlencode', 'escape').rawurlencode(s).replace(/%2F/g, '/');
                case 'quotes':
                    return s.replace(/(^|[^\\])'/g, "$1\\'");
                case 'hex':
                    var res = '';
                    for (var i = 0; i < s.length; ++i) {
                        res += '%' + jSmart.prototype.PHPJS('bin2hex', 'escape').bin2hex(s.substr(i, 1));
                    }
                    return res;
                case 'hexentity':
                    var res = '';
                    for (var i = 0; i < s.length; ++i) {
                        res += '&#x' + jSmart.prototype.PHPJS('bin2hex', 'escape').bin2hex(s.substr(i, 1)).toUpperCase() + ';';
                    }
                    return res;
                case 'decentity':
                    var res = '';
                    for (var i = 0; i < s.length; ++i) {
                        res += '&#' + jSmart.prototype.PHPJS('ord', 'escape').ord(s.substr(i, 1)) + ';';
                    }
                    return res;
                case 'mail':
                    return s.replace(/@/g, ' [AT] ').replace(/[.]/g, ' [DOT] ');
                case 'nonstd':
                    var res = '';
                    for (var i = 0; i < s.length; ++i) {
                        var _ord = jSmart.prototype.PHPJS('ord', 'escape').ord(s.substr(i, 1));
                        if (_ord >= 126) {
                            res += '&#' + _ord + ';';
                        } else {
                            res += s.substr(i, 1);
                        }

                    }
                    return res;
                case 'javascript':
                    return s.replace(/\\/g, '\\\\').replace(/'/g, "\\'").replace(/"/g, '\\"').replace(/\r/g, '\\r').replace(/\n/g, '\\n').replace(/<\//g, '<\/');
            };
            return s;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'indent',
        function(s, repeat, indentWith) {
            repeat = repeat ? repeat : 4;
            indentWith = indentWith ? indentWith : ' ';

            var indentStr = '';
            while (repeat--) {
                indentStr += indentWith;
            }

            var tail = s.match(/\n+$/);
            return indentStr + s.replace(/\n+$/, '').replace(/\n/g, '\n' + indentStr) + (tail ? tail[0] : '');
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'lower',
        function(s) {
            return s.toLowerCase();
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'nl2br',
        function(s) {
            return s.toString().replace(/\n/g, '<br />\n');
        }
    );

    /** 
        only modifiers (flags) 'i' and 'm' are supported 
        backslashes should be escaped e.g. \\s
    */
    jSmart.prototype.registerPlugin(
        'modifier',
        'regex_replace',
        function(s, re, replaceWith) {
            var pattern = re.match(/^ *\/(.*)\/(.*) *$/);
            return (new String(s)).replace(new RegExp(pattern[1], 'g' + (pattern.length > 1 ? pattern[2] : '')), replaceWith);
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'replace',
        function(s, search, replaceWith) {
            if (!search) {
                return s;
            }
            s = new String(s);
            search = new String(search);
            replaceWith = new String(replaceWith);
            var res = '';
            var pos = -1;
            for (pos = s.indexOf(search); pos >= 0; pos = s.indexOf(search)) {
                res += s.slice(0, pos) + replaceWith;
                pos += search.length;
                s = s.slice(pos);
            }
            return res + s;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'spacify',
        function(s, space) {
            if (!space) {
                space = ' ';
            }
            return s.replace(/(\n|.)(?!$)/g, '$1' + space);
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'string_format',
        function(s, fmt) {
            return jSmart.prototype.PHPJS('sprintf', 'string_format').sprintf(fmt, s);
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'strip',
        function(s, replaceWith) {
            replaceWith = replaceWith ? replaceWith : ' ';
            return (new String(s)).replace(/[\s]+/g, replaceWith);
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'strip_tags',
        function(s, addSpace) {
            addSpace = (addSpace == null) ? true : addSpace;
            return (new String(s)).replace(/<[^>]*?>/g, addSpace ? ' ' : '');
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'truncate',
        function(s, length, etc, breakWords, middle) {
            length = length ? length : 80;
            etc = (etc != null) ? etc : '...';

            if (s.length <= length) {
                return s;
            }

            length -= Math.min(length, etc.length);
            if (middle) {
                //one of floor()'s should be replaced with ceil() but it so in Smarty 
                return s.slice(0, Math.floor(length / 2)) + etc + s.slice(s.length - Math.floor(length / 2));
            }

            if (!breakWords) {
                s = s.slice(0, length + 1).replace(/\s+?(\S+)?$/, '');
            }

            return s.slice(0, length) + etc;
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'upper',
        function(s) {
            return s.toUpperCase();
        }
    );

    jSmart.prototype.registerPlugin(
        'modifier',
        'wordwrap',
        function(s, width, wrapWith, breakWords) {
            width = width || 80;
            wrapWith = wrapWith || '\n';

            var lines = s.split('\n');
            for (var i = 0; i < lines.length; ++i) {
                var line = lines[i];
                var parts = ''
                while (line.length > width) {
                    var pos = 0;
                    var found = line.slice(pos).match(/\s+/);
                    for (; found && (pos + found.index) <= width; found = line.slice(pos).match(/\s+/)) {
                        pos += found.index + found[0].length;
                    }
                    pos = pos || (breakWords ? width : (found ? found.index + found[0].length : line.length));
                    parts += line.slice(0, pos).replace(/\s+$/, ''); // + wrapWith;
                    if (pos < line.length) {
                        parts += wrapWith;
                    }
                    line = line.slice(pos);
                }
                lines[i] = parts + line;
            }
            return lines.join('\n');
        }
    );


    String.prototype.fetch = function(data) {
        var tpl = new jSmart(this);
        return tpl.fetch(data);
    };

})();


/*jslint browser: true */
/*global jQuery: true */

/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

// TODO JsDoc

/**
 * Create a cookie with the given key and value and other optional parameters.
 *
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Set the value of a cookie.
 * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });
 * @desc Create a cookie with all available options.
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Create a session cookie.
 * @example $.cookie('the_cookie', null);
 * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain
 *       used when the cookie was set.
 *
 * @param String key The key of the cookie.
 * @param String value The value of the cookie.
 * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
 *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
 *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
 *                             when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
 *                        require a secure protocol (like HTTPS).
 * @type undefined
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Get the value of a cookie with the given key.
 *
 * @example $.cookie('the_cookie');
 * @desc Get the value of a cookie.
 *
 * @param String key The key of the cookie.
 * @return The value of the cookie.
 * @type String
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */
jQuery.cookie = function(key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && String(value) !== "[object Object]") {
        options = jQuery.extend({}, options);

        if (value === null || value === undefined) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires,
                t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }

        value = String(value);

        return (document.cookie = [
            encodeURIComponent(key), '=',
            options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path ? '; path=' + options.path : '',
            options.domain ? '; domain=' + options.domain : '',
            options.secure ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || {};
    var result, decode = options.raw ? function(s) {
        return s;
    } : decodeURIComponent;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;
};


/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */

(function($) {
    $.transit = {
        version: "0.9.9",

        // Map of $.css() keys to values for 'transitionProperty'.
        // See https://developer.mozilla.org/en/CSS/CSS_transitions#Properties_that_can_be_animated
        propertyMap: {
            marginLeft: 'margin',
            marginRight: 'margin',
            marginBottom: 'margin',
            marginTop: 'margin',
            paddingLeft: 'padding',
            paddingRight: 'padding',
            paddingBottom: 'padding',
            paddingTop: 'padding'
        },

        // Will simply transition "instantly" if false
        enabled: true,

        // Set this to false if you don't want to use the transition end property.
        useTransitionEnd: false
    };

    var div = document.createElement('div');
    var support = {};

    // Helper function to get the proper vendor property name.
    // (`transition` => `WebkitTransition`)
    function getVendorPropertyName(prop) {
        // Handle unprefixed versions (FF16+, for example)
        if (prop in div.style) return prop;

        var prefixes = ['Moz', 'Webkit', 'O', 'ms'];
        var prop_ = prop.charAt(0).toUpperCase() + prop.substr(1);

        if (prop in div.style) {
            return prop;
        }

        for (var i = 0; i < prefixes.length; ++i) {
            var vendorProp = prefixes[i] + prop_;
            if (vendorProp in div.style) {
                return vendorProp;
            }
        }
    }

    // Helper function to check if transform3D is supported.
    // Should return true for Webkits and Firefox 10+.
    function checkTransform3dSupport() {
        div.style[support.transform] = '';
        div.style[support.transform] = 'rotateY(90deg)';
        return div.style[support.transform] !== '';
    }

    var isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;

    // Check for the browser's transitions support.
    support.transition = getVendorPropertyName('transition');
    support.transitionDelay = getVendorPropertyName('transitionDelay');
    support.transform = getVendorPropertyName('transform');
    support.transformOrigin = getVendorPropertyName('transformOrigin');
    support.transform3d = checkTransform3dSupport();

    var eventNames = {
        'transition': 'transitionEnd',
        'MozTransition': 'transitionend',
        'OTransition': 'oTransitionEnd',
        'WebkitTransition': 'webkitTransitionEnd',
        'msTransition': 'MSTransitionEnd'
    };

    // Detect the 'transitionend' event needed.
    var transitionEnd = support.transitionEnd = eventNames[support.transition] || null;

    // Populate jQuery's `$.support` with the vendor prefixes we know.
    // As per [jQuery's cssHooks documentation](http://api.jquery.com/jQuery.cssHooks/),
    // we set $.support.transition to a string of the actual property name used.
    for (var key in support) {
        if (support.hasOwnProperty(key) && typeof $.support[key] === 'undefined') {
            $.support[key] = support[key];
        }
    }

    // Avoid memory leak in IE.
    div = null;

    // ## $.cssEase
    // List of easing aliases that you can use with `$.fn.transition`.
    $.cssEase = {
        '_default': 'ease',
        'in': 'ease-in',
        'out': 'ease-out',
        'in-out': 'ease-in-out',
        'snap': 'cubic-bezier(0,1,.5,1)',
        // Penner equations
        'easeOutCubic': 'cubic-bezier(.215,.61,.355,1)',
        'easeInOutCubic': 'cubic-bezier(.645,.045,.355,1)',
        'easeInCirc': 'cubic-bezier(.6,.04,.98,.335)',
        'easeOutCirc': 'cubic-bezier(.075,.82,.165,1)',
        'easeInOutCirc': 'cubic-bezier(.785,.135,.15,.86)',
        'easeInExpo': 'cubic-bezier(.95,.05,.795,.035)',
        'easeOutExpo': 'cubic-bezier(.19,1,.22,1)',
        'easeInOutExpo': 'cubic-bezier(1,0,0,1)',
        'easeInQuad': 'cubic-bezier(.55,.085,.68,.53)',
        'easeOutQuad': 'cubic-bezier(.25,.46,.45,.94)',
        'easeInOutQuad': 'cubic-bezier(.455,.03,.515,.955)',
        'easeInQuart': 'cubic-bezier(.895,.03,.685,.22)',
        'easeOutQuart': 'cubic-bezier(.165,.84,.44,1)',
        'easeInOutQuart': 'cubic-bezier(.77,0,.175,1)',
        'easeInQuint': 'cubic-bezier(.755,.05,.855,.06)',
        'easeOutQuint': 'cubic-bezier(.23,1,.32,1)',
        'easeInOutQuint': 'cubic-bezier(.86,0,.07,1)',
        'easeInSine': 'cubic-bezier(.47,0,.745,.715)',
        'easeOutSine': 'cubic-bezier(.39,.575,.565,1)',
        'easeInOutSine': 'cubic-bezier(.445,.05,.55,.95)',
        'easeInBack': 'cubic-bezier(.6,-.28,.735,.045)',
        'easeOutBack': 'cubic-bezier(.175, .885,.32,1.275)',
        'easeInOutBack': 'cubic-bezier(.68,-.55,.265,1.55)'
    };

    // ## 'transform' CSS hook
    // Allows you to use the `transform` property in CSS.
    //
    //     $("#hello").css({ transform: "rotate(90deg)" });
    //
    //     $("#hello").css('transform');
    //     //=> { rotate: '90deg' }
    //
    $.cssHooks['transit:transform'] = {
        // The getter returns a `Transform` object.
        get: function(elem) {
            return $(elem).data('transform') || new Transform();
        },

        // The setter accepts a `Transform` object or a string.
        set: function(elem, v) {
            var value = v;

            if (!(value instanceof Transform)) {
                value = new Transform(value);
            }

            // We've seen the 3D version of Scale() not work in Chrome when the
            // element being scaled extends outside of the viewport.  Thus, we're
            // forcing Chrome to not use the 3d transforms as well.  Not sure if
            // translate is affectede, but not risking it.  Detection code from
            // http://davidwalsh.name/detecting-google-chrome-javascript
            if (support.transform === 'WebkitTransform' && !isChrome) {
                elem.style[support.transform] = value.toString(true);
            } else {
                elem.style[support.transform] = value.toString();
            }

            $(elem).data('transform', value);
        }
    };

    // Add a CSS hook for `.css({ transform: '...' })`.
    // In jQuery 1.8+, this will intentionally override the default `transform`
    // CSS hook so it'll play well with Transit. (see issue #62)
    $.cssHooks.transform = {
        set: $.cssHooks['transit:transform'].set
    };

    // jQuery 1.8+ supports prefix-free transitions, so these polyfills will not
    // be necessary.
    if ($.fn.jquery < "1.8") {
        // ## 'transformOrigin' CSS hook
        // Allows the use for `transformOrigin` to define where scaling and rotation
        // is pivoted.
        //
        //     $("#hello").css({ transformOrigin: '0 0' });
        //
        $.cssHooks.transformOrigin = {
            get: function(elem) {
                return elem.style[support.transformOrigin];
            },
            set: function(elem, value) {
                elem.style[support.transformOrigin] = value;
            }
        };

        // ## 'transition' CSS hook
        // Allows you to use the `transition` property in CSS.
        //
        //     $("#hello").css({ transition: 'all 0 ease 0' });
        //
        $.cssHooks.transition = {
            get: function(elem) {
                return elem.style[support.transition];
            },
            set: function(elem, value) {
                elem.style[support.transition] = value;
            }
        };
    }

    // ## Other CSS hooks
    // Allows you to rotate, scale and translate.
    registerCssHook('scale');
    registerCssHook('translate');
    registerCssHook('rotate');
    registerCssHook('rotateX');
    registerCssHook('rotateY');
    registerCssHook('rotate3d');
    registerCssHook('perspective');
    registerCssHook('skewX');
    registerCssHook('skewY');
    registerCssHook('x', true);
    registerCssHook('y', true);

    // ## Transform class
    // This is the main class of a transformation property that powers
    // `$.fn.css({ transform: '...' })`.
    //
    // This is, in essence, a dictionary object with key/values as `-transform`
    // properties.
    //
    //     var t = new Transform("rotate(90) scale(4)");
    //
    //     t.rotate             //=> "90deg"
    //     t.scale              //=> "4,4"
    //
    // Setters are accounted for.
    //
    //     t.set('rotate', 4)
    //     t.rotate             //=> "4deg"
    //
    // Convert it to a CSS string using the `toString()` and `toString(true)` (for WebKit)
    // functions.
    //
    //     t.toString()         //=> "rotate(90deg) scale(4,4)"
    //     t.toString(true)     //=> "rotate(90deg) scale3d(4,4,0)" (WebKit version)
    //
    function Transform(str) {
        if (typeof str === 'string') {
            this.parse(str);
        }
        return this;
    }

    Transform.prototype = {
        // ### setFromString()
        // Sets a property from a string.
        //
        //     t.setFromString('scale', '2,4');
        //     // Same as set('scale', '2', '4');
        //
        setFromString: function(prop, val) {
            var args =
                (typeof val === 'string') ? val.split(',') :
                (val.constructor === Array) ? val : [val];

            args.unshift(prop);

            Transform.prototype.set.apply(this, args);
        },

        // ### set()
        // Sets a property.
        //
        //     t.set('scale', 2, 4);
        //
        set: function(prop) {
            var args = Array.prototype.slice.apply(arguments, [1]);
            if (this.setter[prop]) {
                this.setter[prop].apply(this, args);
            } else {
                this[prop] = args.join(',');
            }
        },

        get: function(prop) {
            if (this.getter[prop]) {
                return this.getter[prop].apply(this);
            } else {
                return this[prop] || 0;
            }
        },

        setter: {
            // ### rotate
            //
            //     .css({ rotate: 30 })
            //     .css({ rotate: "30" })
            //     .css({ rotate: "30deg" })
            //     .css({ rotate: "30deg" })
            //
            rotate: function(theta) {
                this.rotate = unit(theta, 'deg');
            },

            rotateX: function(theta) {
                this.rotateX = unit(theta, 'deg');
            },

            rotateY: function(theta) {
                this.rotateY = unit(theta, 'deg');
            },

            // ### scale
            //
            //     .css({ scale: 9 })      //=> "scale(9,9)"
            //     .css({ scale: '3,2' })  //=> "scale(3,2)"
            //
            scale: function(x, y) {
                if (y === undefined) {
                    y = x;
                }
                this.scale = x + "," + y;
            },

            // ### skewX + skewY
            skewX: function(x) {
                this.skewX = unit(x, 'deg');
            },

            skewY: function(y) {
                this.skewY = unit(y, 'deg');
            },

            // ### perspectvie
            perspective: function(dist) {
                this.perspective = unit(dist, 'px');
            },

            // ### x / y
            // Translations. Notice how this keeps the other value.
            //
            //     .css({ x: 4 })       //=> "translate(4px, 0)"
            //     .css({ y: 10 })      //=> "translate(4px, 10px)"
            //
            x: function(x) {
                this.set('translate', x, null);
            },

            y: function(y) {
                this.set('translate', null, y);
            },

            // ### translate
            // Notice how this keeps the other value.
            //
            //     .css({ translate: '2, 5' })    //=> "translate(2px, 5px)"
            //
            translate: function(x, y) {
                if (this._translateX === undefined) {
                    this._translateX = 0;
                }
                if (this._translateY === undefined) {
                    this._translateY = 0;
                }

                if (x !== null && x !== undefined) {
                    this._translateX = unit(x, 'px');
                }
                if (y !== null && y !== undefined) {
                    this._translateY = unit(y, 'px');
                }

                this.translate = this._translateX + "," + this._translateY;
            }
        },

        getter: {
            x: function() {
                return this._translateX || 0;
            },

            y: function() {
                return this._translateY || 0;
            },

            scale: function() {
                var s = (this.scale || "1,1").split(',');
                if (s[0]) {
                    s[0] = parseFloat(s[0]);
                }
                if (s[1]) {
                    s[1] = parseFloat(s[1]);
                }

                // "2.5,2.5" => 2.5
                // "2.5,1" => [2.5,1]
                return (s[0] === s[1]) ? s[0] : s;
            },

            rotate3d: function() {
                var s = (this.rotate3d || "0,0,0,0deg").split(',');
                for (var i = 0; i <= 3; ++i) {
                    if (s[i]) {
                        s[i] = parseFloat(s[i]);
                    }
                }
                if (s[3]) {
                    s[3] = unit(s[3], 'deg');
                }

                return s;
            }
        },

        // ### parse()
        // Parses from a string. Called on constructor.
        parse: function(str) {
            var self = this;
            str.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(x, prop, val) {
                self.setFromString(prop, val);
            });
        },

        // ### toString()
        // Converts to a `transition` CSS property string. If `use3d` is given,
        // it converts to a `-webkit-transition` CSS property string instead.
        toString: function(use3d) {
            var re = [];

            for (var i in this) {
                if (this.hasOwnProperty(i)) {
                    // Don't use 3D transformations if the browser can't support it.
                    if ((!support.transform3d) && (
                            (i === 'rotateX') ||
                            (i === 'rotateY') ||
                            (i === 'perspective') ||
                            (i === 'transformOrigin'))) {
                        continue;
                    }

                    if (i[0] !== '_') {
                        if (use3d && (i === 'scale')) {
                            re.push(i + "3d(" + this[i] + ",1)");
                        } else if (use3d && (i === 'translate')) {
                            re.push(i + "3d(" + this[i] + ",0)");
                        } else {
                            re.push(i + "(" + this[i] + ")");
                        }
                    }
                }
            }

            return re.join(" ");
        }
    };

    function callOrQueue(self, queue, fn) {
        if (queue === true) {
            self.queue(fn);
        } else if (queue) {
            self.queue(queue, fn);
        } else {
            fn();
        }
    }

    // ### getProperties(dict)
    // Returns properties (for `transition-property`) for dictionary `props`. The
    // value of `props` is what you would expect in `$.css(...)`.
    function getProperties(props) {
        var re = [];

        $.each(props, function(key) {
            key = $.camelCase(key); // Convert "text-align" => "textAlign"
            key = $.transit.propertyMap[key] || $.cssProps[key] || key;
            key = uncamel(key); // Convert back to dasherized

            if ($.inArray(key, re) === -1) {
                re.push(key);
            }
        });

        return re;
    }

    // ### getTransition()
    // Returns the transition string to be used for the `transition` CSS property.
    //
    // Example:
    //
    //     getTransition({ opacity: 1, rotate: 30 }, 500, 'ease');
    //     //=> 'opacity 500ms ease, -webkit-transform 500ms ease'
    //
    function getTransition(properties, duration, easing, delay) {
        // Get the CSS properties needed.
        var props = getProperties(properties);

        // Account for aliases (`in` => `ease-in`).
        if ($.cssEase[easing]) {
            easing = $.cssEase[easing];
        }

        // Build the duration/easing/delay attributes for it.
        var attribs = '' + toMS(duration) + ' ' + easing;
        if (parseInt(delay, 10) > 0) {
            attribs += ' ' + toMS(delay);
        }

        // For more properties, add them this way:
        // "margin 200ms ease, padding 200ms ease, ..."
        var transitions = [];
        $.each(props, function(i, name) {
            transitions.push(name + ' ' + attribs);
        });

        return transitions.join(', ');
    }

    // ## $.fn.transition
    // Works like $.fn.animate(), but uses CSS transitions.
    //
    //     $("...").transition({ opacity: 0.1, scale: 0.3 });
    //
    //     // Specific duration
    //     $("...").transition({ opacity: 0.1, scale: 0.3 }, 500);
    //
    //     // With duration and easing
    //     $("...").transition({ opacity: 0.1, scale: 0.3 }, 500, 'in');
    //
    //     // With callback
    //     $("...").transition({ opacity: 0.1, scale: 0.3 }, function() { ... });
    //
    //     // With everything
    //     $("...").transition({ opacity: 0.1, scale: 0.3 }, 500, 'in', function() { ... });
    //
    //     // Alternate syntax
    //     $("...").transition({
    //       opacity: 0.1,
    //       duration: 200,
    //       delay: 40,
    //       easing: 'in',
    //       complete: function() { /* ... */ }
    //      });
    //
    $.fn.transition = $.fn.transit = function(properties, duration, easing, callback) {
        var self = this;
        var delay = 0;
        var queue = true;

        // Account for `.transition(properties, callback)`.
        if (typeof duration === 'function') {
            callback = duration;
            duration = undefined;
        }

        // Account for `.transition(properties, duration, callback)`.
        if (typeof easing === 'function') {
            callback = easing;
            easing = undefined;
        }

        // Alternate syntax.
        if (typeof properties.easing !== 'undefined') {
            easing = properties.easing;
            delete properties.easing;
        }

        if (typeof properties.duration !== 'undefined') {
            duration = properties.duration;
            delete properties.duration;
        }

        if (typeof properties.complete !== 'undefined') {
            callback = properties.complete;
            delete properties.complete;
        }

        if (typeof properties.queue !== 'undefined') {
            queue = properties.queue;
            delete properties.queue;
        }

        if (typeof properties.delay !== 'undefined') {
            delay = properties.delay;
            delete properties.delay;
        }

        // Set defaults. (`400` duration, `ease` easing)
        if (typeof duration === 'undefined') {
            duration = $.fx.speeds._default;
        }
        if (typeof easing === 'undefined') {
            easing = $.cssEase._default;
        }

        duration = toMS(duration);

        // Build the `transition` property.
        var transitionValue = getTransition(properties, duration, easing, delay);

        // Compute delay until callback.
        // If this becomes 0, don't bother setting the transition property.
        var work = $.transit.enabled && support.transition;
        var i = work ? (parseInt(duration, 10) + parseInt(delay, 10)) : 0;

        // If there's nothing to do...
        if (i === 0) {
            var fn = function(next) {
                self.css(properties);
                if (callback) {
                    callback.apply(self);
                }
                if (next) {
                    next();
                }
            };

            callOrQueue(self, queue, fn);
            return self;
        }

        // Save the old transitions of each element so we can restore it later.
        var oldTransitions = {};

        var run = function(nextCall) {
            var bound = false;

            // Prepare the callback.
            var cb = function() {
                if (bound) {
                    self.unbind(transitionEnd, cb);
                }

                if (i > 0) {
                    self.each(function() {
                        this.style[support.transition] = (oldTransitions[this] || null);
                    });
                }

                if (typeof callback === 'function') {
                    callback.apply(self);
                }
                if (typeof nextCall === 'function') {
                    nextCall();
                }
            };

            if ((i > 0) && (transitionEnd) && ($.transit.useTransitionEnd)) {
                // Use the 'transitionend' event if it's available.
                bound = true;
                self.bind(transitionEnd, cb);
            } else {
                // Fallback to timers if the 'transitionend' event isn't supported.
                window.setTimeout(cb, i);
            }

            // Apply transitions.
            self.each(function() {
                if (i > 0) {
                    this.style[support.transition] = transitionValue;
                }
                $(this).css(properties);
            });
        };

        // Defer running. This allows the browser to paint any pending CSS it hasn't
        // painted yet before doing the transitions.
        var deferredRun = function(next) {
            this.offsetWidth; // force a repaint
            run(next);
        };

        // Use jQuery's fx queue.
        callOrQueue(self, queue, deferredRun);

        // Chainability.
        return this;
    };

    function registerCssHook(prop, isPixels) {
        // For certain properties, the 'px' should not be implied.
        if (!isPixels) {
            $.cssNumber[prop] = true;
        }

        $.transit.propertyMap[prop] = support.transform;

        $.cssHooks[prop] = {
            get: function(elem) {
                var t = $(elem).css('transit:transform');
                return t.get(prop);
            },

            set: function(elem, value) {
                var t = $(elem).css('transit:transform');
                t.setFromString(prop, value);

                $(elem).css({
                    'transit:transform': t
                });
            }
        };

    }

    // ### uncamel(str)
    // Converts a camelcase string to a dasherized string.
    // (`marginLeft` => `margin-left`)
    function uncamel(str) {
        return str.replace(/([A-Z])/g, function(letter) {
            return '-' + letter.toLowerCase();
        });
    }

    // ### unit(number, unit)
    // Ensures that number `number` has a unit. If no unit is found, assume the
    // default is `unit`.
    //
    //     unit(2, 'px')          //=> "2px"
    //     unit("30deg", 'rad')   //=> "30deg"
    //
    function unit(i, units) {
        if ((typeof i === "string") && (!i.match(/^[\-0-9\.]+$/))) {
            return i;
        } else {
            return "" + i + units;
        }
    }

    // ### toMS(duration)
    // Converts given `duration` to a millisecond string.
    //
    //     toMS('fast')   //=> '400ms'
    //     toMS(10)       //=> '10ms'
    //
    function toMS(duration) {
        var i = duration;

        // Allow for string durations like 'fast'.
        if ($.fx.speeds[i]) {
            i = $.fx.speeds[i];
        }

        return unit(i, 'ms');
    }

    // Export some functions for testable-ness.
    $.transit.getTransitionValue = getTransition;
})(jQuery);


(function(r) {
    r.fn.qrcode = function(h) {
        var s;

        function u(a) {
            this.mode = s;
            this.data = a
        }

        function o(a, c) {
            this.typeNumber = a;
            this.errorCorrectLevel = c;
            this.modules = null;
            this.moduleCount = 0;
            this.dataCache = null;
            this.dataList = []
        }

        function q(a, c) {
            if (void 0 == a.length) throw Error(a.length + "/" + c);
            for (var d = 0; d < a.length && 0 == a[d];) d++;
            this.num = Array(a.length - d + c);
            for (var b = 0; b < a.length - d; b++) this.num[b] = a[b + d]
        }

        function p(a, c) {
            this.totalCount = a;
            this.dataCount = c
        }

        function t() {
            this.buffer = [];
            this.length = 0
        }
        u.prototype = {
            getLength: function() {
                return this.data.length
            },
            write: function(a) {
                for (var c = 0; c < this.data.length; c++) a.put(this.data.charCodeAt(c), 8)
            }
        };
        o.prototype = {
            addData: function(a) {
                this.dataList.push(new u(a));
                this.dataCache = null
            },
            isDark: function(a, c) {
                if (0 > a || this.moduleCount <= a || 0 > c || this.moduleCount <= c) throw Error(a + "," + c);
                return this.modules[a][c]
            },
            getModuleCount: function() {
                return this.moduleCount
            },
            make: function() {
                if (1 > this.typeNumber) {
                    for (var a = 1, a = 1; 40 > a; a++) {
                        for (var c = p.getRSBlocks(a, this.errorCorrectLevel), d = new t, b = 0, e = 0; e < c.length; e++) b += c[e].dataCount;
                        for (e = 0; e < this.dataList.length; e++) c = this.dataList[e], d.put(c.mode, 4), d.put(c.getLength(), j.getLengthInBits(c.mode, a)), c.write(d);
                        if (d.getLengthInBits() <= 8 * b) break
                    }
                    this.typeNumber = a
                }
                this.makeImpl(!1, this.getBestMaskPattern())
            },
            makeImpl: function(a, c) {
                this.moduleCount = 4 * this.typeNumber + 17;
                this.modules = Array(this.moduleCount);
                for (var d = 0; d < this.moduleCount; d++) {
                    this.modules[d] = Array(this.moduleCount);
                    for (var b = 0; b < this.moduleCount; b++) this.modules[d][b] = null
                }
                this.setupPositionProbePattern(0, 0);
                this.setupPositionProbePattern(this.moduleCount -
                    7, 0);
                this.setupPositionProbePattern(0, this.moduleCount - 7);
                this.setupPositionAdjustPattern();
                this.setupTimingPattern();
                this.setupTypeInfo(a, c);
                7 <= this.typeNumber && this.setupTypeNumber(a);
                null == this.dataCache && (this.dataCache = o.createData(this.typeNumber, this.errorCorrectLevel, this.dataList));
                this.mapData(this.dataCache, c)
            },
            setupPositionProbePattern: function(a, c) {
                for (var d = -1; 7 >= d; d++)
                    if (!(-1 >= a + d || this.moduleCount <= a + d))
                        for (var b = -1; 7 >= b; b++) - 1 >= c + b || this.moduleCount <= c + b || (this.modules[a + d][c + b] =
                            0 <= d && 6 >= d && (0 == b || 6 == b) || 0 <= b && 6 >= b && (0 == d || 6 == d) || 2 <= d && 4 >= d && 2 <= b && 4 >= b ? !0 : !1)
            },
            getBestMaskPattern: function() {
                for (var a = 0, c = 0, d = 0; 8 > d; d++) {
                    this.makeImpl(!0, d);
                    var b = j.getLostPoint(this);
                    if (0 == d || a > b) a = b, c = d
                }
                return c
            },
            createMovieClip: function(a, c, d) {
                a = a.createEmptyMovieClip(c, d);
                this.make();
                for (c = 0; c < this.modules.length; c++)
                    for (var d = 1 * c, b = 0; b < this.modules[c].length; b++) {
                        var e = 1 * b;
                        this.modules[c][b] && (a.beginFill(0, 100), a.moveTo(e, d), a.lineTo(e + 1, d), a.lineTo(e + 1, d + 1), a.lineTo(e, d + 1), a.endFill())
                    }
                return a
            },
            setupTimingPattern: function() {
                for (var a = 8; a < this.moduleCount - 8; a++) null == this.modules[a][6] && (this.modules[a][6] = 0 == a % 2);
                for (a = 8; a < this.moduleCount - 8; a++) null == this.modules[6][a] && (this.modules[6][a] = 0 == a % 2)
            },
            setupPositionAdjustPattern: function() {
                for (var a = j.getPatternPosition(this.typeNumber), c = 0; c < a.length; c++)
                    for (var d = 0; d < a.length; d++) {
                        var b = a[c],
                            e = a[d];
                        if (null == this.modules[b][e])
                            for (var f = -2; 2 >= f; f++)
                                for (var i = -2; 2 >= i; i++) this.modules[b + f][e + i] = -2 == f || 2 == f || -2 == i || 2 == i || 0 == f && 0 == i ? !0 : !1
                    }
            },
            setupTypeNumber: function(a) {
                for (var c =
                        j.getBCHTypeNumber(this.typeNumber), d = 0; 18 > d; d++) {
                    var b = !a && 1 == (c >> d & 1);
                    this.modules[Math.floor(d / 3)][d % 3 + this.moduleCount - 8 - 3] = b
                }
                for (d = 0; 18 > d; d++) b = !a && 1 == (c >> d & 1), this.modules[d % 3 + this.moduleCount - 8 - 3][Math.floor(d / 3)] = b
            },
            setupTypeInfo: function(a, c) {
                for (var d = j.getBCHTypeInfo(this.errorCorrectLevel << 3 | c), b = 0; 15 > b; b++) {
                    var e = !a && 1 == (d >> b & 1);
                    6 > b ? this.modules[b][8] = e : 8 > b ? this.modules[b + 1][8] = e : this.modules[this.moduleCount - 15 + b][8] = e
                }
                for (b = 0; 15 > b; b++) e = !a && 1 == (d >> b & 1), 8 > b ? this.modules[8][this.moduleCount -
                    b - 1
                ] = e : 9 > b ? this.modules[8][15 - b - 1 + 1] = e : this.modules[8][15 - b - 1] = e;
                this.modules[this.moduleCount - 8][8] = !a
            },
            mapData: function(a, c) {
                for (var d = -1, b = this.moduleCount - 1, e = 7, f = 0, i = this.moduleCount - 1; 0 < i; i -= 2)
                    for (6 == i && i--;;) {
                        for (var g = 0; 2 > g; g++)
                            if (null == this.modules[b][i - g]) {
                                var n = !1;
                                f < a.length && (n = 1 == (a[f] >>> e & 1));
                                j.getMask(c, b, i - g) && (n = !n);
                                this.modules[b][i - g] = n;
                                e--; - 1 == e && (f++, e = 7)
                            } b += d;
                        if (0 > b || this.moduleCount <= b) {
                            b -= d;
                            d = -d;
                            break
                        }
                    }
            }
        };
        o.PAD0 = 236;
        o.PAD1 = 17;
        o.createData = function(a, c, d) {
            for (var c = p.getRSBlocks(a,
                    c), b = new t, e = 0; e < d.length; e++) {
                var f = d[e];
                b.put(f.mode, 4);
                b.put(f.getLength(), j.getLengthInBits(f.mode, a));
                f.write(b)
            }
            for (e = a = 0; e < c.length; e++) a += c[e].dataCount;
            if (b.getLengthInBits() > 8 * a) throw Error("code length overflow. (" + b.getLengthInBits() + ">" + 8 * a + ")");
            for (b.getLengthInBits() + 4 <= 8 * a && b.put(0, 4); 0 != b.getLengthInBits() % 8;) b.putBit(!1);
            for (; !(b.getLengthInBits() >= 8 * a);) {
                b.put(o.PAD0, 8);
                if (b.getLengthInBits() >= 8 * a) break;
                b.put(o.PAD1, 8)
            }
            return o.createBytes(b, c)
        };
        o.createBytes = function(a, c) {
            for (var d =
                    0, b = 0, e = 0, f = Array(c.length), i = Array(c.length), g = 0; g < c.length; g++) {
                var n = c[g].dataCount,
                    h = c[g].totalCount - n,
                    b = Math.max(b, n),
                    e = Math.max(e, h);
                f[g] = Array(n);
                for (var k = 0; k < f[g].length; k++) f[g][k] = 255 & a.buffer[k + d];
                d += n;
                k = j.getErrorCorrectPolynomial(h);
                n = (new q(f[g], k.getLength() - 1)).mod(k);
                i[g] = Array(k.getLength() - 1);
                for (k = 0; k < i[g].length; k++) h = k + n.getLength() - i[g].length, i[g][k] = 0 <= h ? n.get(h) : 0
            }
            for (k = g = 0; k < c.length; k++) g += c[k].totalCount;
            d = Array(g);
            for (k = n = 0; k < b; k++)
                for (g = 0; g < c.length; g++) k < f[g].length &&
                    (d[n++] = f[g][k]);
            for (k = 0; k < e; k++)
                for (g = 0; g < c.length; g++) k < i[g].length && (d[n++] = i[g][k]);
            return d
        };
        s = 4;
        for (var j = {
                PATTERN_POSITION_TABLE: [
                    [],
                    [6, 18],
                    [6, 22],
                    [6, 26],
                    [6, 30],
                    [6, 34],
                    [6, 22, 38],
                    [6, 24, 42],
                    [6, 26, 46],
                    [6, 28, 50],
                    [6, 30, 54],
                    [6, 32, 58],
                    [6, 34, 62],
                    [6, 26, 46, 66],
                    [6, 26, 48, 70],
                    [6, 26, 50, 74],
                    [6, 30, 54, 78],
                    [6, 30, 56, 82],
                    [6, 30, 58, 86],
                    [6, 34, 62, 90],
                    [6, 28, 50, 72, 94],
                    [6, 26, 50, 74, 98],
                    [6, 30, 54, 78, 102],
                    [6, 28, 54, 80, 106],
                    [6, 32, 58, 84, 110],
                    [6, 30, 58, 86, 114],
                    [6, 34, 62, 90, 118],
                    [6, 26, 50, 74, 98, 122],
                    [6, 30, 54, 78, 102, 126],
                    [6, 26, 52,
                        78, 104, 130
                    ],
                    [6, 30, 56, 82, 108, 134],
                    [6, 34, 60, 86, 112, 138],
                    [6, 30, 58, 86, 114, 142],
                    [6, 34, 62, 90, 118, 146],
                    [6, 30, 54, 78, 102, 126, 150],
                    [6, 24, 50, 76, 102, 128, 154],
                    [6, 28, 54, 80, 106, 132, 158],
                    [6, 32, 58, 84, 110, 136, 162],
                    [6, 26, 54, 82, 110, 138, 166],
                    [6, 30, 58, 86, 114, 142, 170]
                ],
                G15: 1335,
                G18: 7973,
                G15_MASK: 21522,
                getBCHTypeInfo: function(a) {
                    for (var c = a << 10; 0 <= j.getBCHDigit(c) - j.getBCHDigit(j.G15);) c ^= j.G15 << j.getBCHDigit(c) - j.getBCHDigit(j.G15);
                    return (a << 10 | c) ^ j.G15_MASK
                },
                getBCHTypeNumber: function(a) {
                    for (var c = a << 12; 0 <= j.getBCHDigit(c) -
                        j.getBCHDigit(j.G18);) c ^= j.G18 << j.getBCHDigit(c) - j.getBCHDigit(j.G18);
                    return a << 12 | c
                },
                getBCHDigit: function(a) {
                    for (var c = 0; 0 != a;) c++, a >>>= 1;
                    return c
                },
                getPatternPosition: function(a) {
                    return j.PATTERN_POSITION_TABLE[a - 1]
                },
                getMask: function(a, c, d) {
                    switch (a) {
                        case 0:
                            return 0 == (c + d) % 2;
                        case 1:
                            return 0 == c % 2;
                        case 2:
                            return 0 == d % 3;
                        case 3:
                            return 0 == (c + d) % 3;
                        case 4:
                            return 0 == (Math.floor(c / 2) + Math.floor(d / 3)) % 2;
                        case 5:
                            return 0 == c * d % 2 + c * d % 3;
                        case 6:
                            return 0 == (c * d % 2 + c * d % 3) % 2;
                        case 7:
                            return 0 == (c * d % 3 + (c + d) % 2) % 2;
                        default:
                            throw Error("bad maskPattern:" +
                                a);
                    }
                },
                getErrorCorrectPolynomial: function(a) {
                    for (var c = new q([1], 0), d = 0; d < a; d++) c = c.multiply(new q([1, l.gexp(d)], 0));
                    return c
                },
                getLengthInBits: function(a, c) {
                    if (1 <= c && 10 > c) switch (a) {
                        case 1:
                            return 10;
                        case 2:
                            return 9;
                        case s:
                            return 8;
                        case 8:
                            return 8;
                        default:
                            throw Error("mode:" + a);
                    } else if (27 > c) switch (a) {
                        case 1:
                            return 12;
                        case 2:
                            return 11;
                        case s:
                            return 16;
                        case 8:
                            return 10;
                        default:
                            throw Error("mode:" + a);
                    } else if (41 > c) switch (a) {
                        case 1:
                            return 14;
                        case 2:
                            return 13;
                        case s:
                            return 16;
                        case 8:
                            return 12;
                        default:
                            throw Error("mode:" +
                                a);
                    } else throw Error("type:" + c);
                },
                getLostPoint: function(a) {
                    for (var c = a.getModuleCount(), d = 0, b = 0; b < c; b++)
                        for (var e = 0; e < c; e++) {
                            for (var f = 0, i = a.isDark(b, e), g = -1; 1 >= g; g++)
                                if (!(0 > b + g || c <= b + g))
                                    for (var h = -1; 1 >= h; h++) 0 > e + h || c <= e + h || 0 == g && 0 == h || i == a.isDark(b + g, e + h) && f++;
                            5 < f && (d += 3 + f - 5)
                        }
                    for (b = 0; b < c - 1; b++)
                        for (e = 0; e < c - 1; e++)
                            if (f = 0, a.isDark(b, e) && f++, a.isDark(b + 1, e) && f++, a.isDark(b, e + 1) && f++, a.isDark(b + 1, e + 1) && f++, 0 == f || 4 == f) d += 3;
                    for (b = 0; b < c; b++)
                        for (e = 0; e < c - 6; e++) a.isDark(b, e) && !a.isDark(b, e + 1) && a.isDark(b, e +
                            2) && a.isDark(b, e + 3) && a.isDark(b, e + 4) && !a.isDark(b, e + 5) && a.isDark(b, e + 6) && (d += 40);
                    for (e = 0; e < c; e++)
                        for (b = 0; b < c - 6; b++) a.isDark(b, e) && !a.isDark(b + 1, e) && a.isDark(b + 2, e) && a.isDark(b + 3, e) && a.isDark(b + 4, e) && !a.isDark(b + 5, e) && a.isDark(b + 6, e) && (d += 40);
                    for (e = f = 0; e < c; e++)
                        for (b = 0; b < c; b++) a.isDark(b, e) && f++;
                    a = Math.abs(100 * f / c / c - 50) / 5;
                    return d + 10 * a
                }
            }, l = {
                glog: function(a) {
                    if (1 > a) throw Error("glog(" + a + ")");
                    return l.LOG_TABLE[a]
                },
                gexp: function(a) {
                    for (; 0 > a;) a += 255;
                    for (; 256 <= a;) a -= 255;
                    return l.EXP_TABLE[a]
                },
                EXP_TABLE: Array(256),
                LOG_TABLE: Array(256)
            }, m = 0; 8 > m; m++) l.EXP_TABLE[m] = 1 << m;
        for (m = 8; 256 > m; m++) l.EXP_TABLE[m] = l.EXP_TABLE[m - 4] ^ l.EXP_TABLE[m - 5] ^ l.EXP_TABLE[m - 6] ^ l.EXP_TABLE[m - 8];
        for (m = 0; 255 > m; m++) l.LOG_TABLE[l.EXP_TABLE[m]] = m;
        q.prototype = {
            get: function(a) {
                return this.num[a]
            },
            getLength: function() {
                return this.num.length
            },
            multiply: function(a) {
                for (var c = Array(this.getLength() + a.getLength() - 1), d = 0; d < this.getLength(); d++)
                    for (var b = 0; b < a.getLength(); b++) c[d + b] ^= l.gexp(l.glog(this.get(d)) + l.glog(a.get(b)));
                return new q(c, 0)
            },
            mod: function(a) {
                if (0 >
                    this.getLength() - a.getLength()) return this;
                for (var c = l.glog(this.get(0)) - l.glog(a.get(0)), d = Array(this.getLength()), b = 0; b < this.getLength(); b++) d[b] = this.get(b);
                for (b = 0; b < a.getLength(); b++) d[b] ^= l.gexp(l.glog(a.get(b)) + c);
                return (new q(d, 0)).mod(a)
            }
        };
        p.RS_BLOCK_TABLE = [
            [1, 26, 19],
            [1, 26, 16],
            [1, 26, 13],
            [1, 26, 9],
            [1, 44, 34],
            [1, 44, 28],
            [1, 44, 22],
            [1, 44, 16],
            [1, 70, 55],
            [1, 70, 44],
            [2, 35, 17],
            [2, 35, 13],
            [1, 100, 80],
            [2, 50, 32],
            [2, 50, 24],
            [4, 25, 9],
            [1, 134, 108],
            [2, 67, 43],
            [2, 33, 15, 2, 34, 16],
            [2, 33, 11, 2, 34, 12],
            [2, 86, 68],
            [4, 43, 27],
            [4, 43, 19],
            [4, 43, 15],
            [2, 98, 78],
            [4, 49, 31],
            [2, 32, 14, 4, 33, 15],
            [4, 39, 13, 1, 40, 14],
            [2, 121, 97],
            [2, 60, 38, 2, 61, 39],
            [4, 40, 18, 2, 41, 19],
            [4, 40, 14, 2, 41, 15],
            [2, 146, 116],
            [3, 58, 36, 2, 59, 37],
            [4, 36, 16, 4, 37, 17],
            [4, 36, 12, 4, 37, 13],
            [2, 86, 68, 2, 87, 69],
            [4, 69, 43, 1, 70, 44],
            [6, 43, 19, 2, 44, 20],
            [6, 43, 15, 2, 44, 16],
            [4, 101, 81],
            [1, 80, 50, 4, 81, 51],
            [4, 50, 22, 4, 51, 23],
            [3, 36, 12, 8, 37, 13],
            [2, 116, 92, 2, 117, 93],
            [6, 58, 36, 2, 59, 37],
            [4, 46, 20, 6, 47, 21],
            [7, 42, 14, 4, 43, 15],
            [4, 133, 107],
            [8, 59, 37, 1, 60, 38],
            [8, 44, 20, 4, 45, 21],
            [12, 33, 11, 4, 34, 12],
            [3, 145, 115, 1, 146,
                116
            ],
            [4, 64, 40, 5, 65, 41],
            [11, 36, 16, 5, 37, 17],
            [11, 36, 12, 5, 37, 13],
            [5, 109, 87, 1, 110, 88],
            [5, 65, 41, 5, 66, 42],
            [5, 54, 24, 7, 55, 25],
            [11, 36, 12],
            [5, 122, 98, 1, 123, 99],
            [7, 73, 45, 3, 74, 46],
            [15, 43, 19, 2, 44, 20],
            [3, 45, 15, 13, 46, 16],
            [1, 135, 107, 5, 136, 108],
            [10, 74, 46, 1, 75, 47],
            [1, 50, 22, 15, 51, 23],
            [2, 42, 14, 17, 43, 15],
            [5, 150, 120, 1, 151, 121],
            [9, 69, 43, 4, 70, 44],
            [17, 50, 22, 1, 51, 23],
            [2, 42, 14, 19, 43, 15],
            [3, 141, 113, 4, 142, 114],
            [3, 70, 44, 11, 71, 45],
            [17, 47, 21, 4, 48, 22],
            [9, 39, 13, 16, 40, 14],
            [3, 135, 107, 5, 136, 108],
            [3, 67, 41, 13, 68, 42],
            [15, 54, 24, 5, 55, 25],
            [15,
                43, 15, 10, 44, 16
            ],
            [4, 144, 116, 4, 145, 117],
            [17, 68, 42],
            [17, 50, 22, 6, 51, 23],
            [19, 46, 16, 6, 47, 17],
            [2, 139, 111, 7, 140, 112],
            [17, 74, 46],
            [7, 54, 24, 16, 55, 25],
            [34, 37, 13],
            [4, 151, 121, 5, 152, 122],
            [4, 75, 47, 14, 76, 48],
            [11, 54, 24, 14, 55, 25],
            [16, 45, 15, 14, 46, 16],
            [6, 147, 117, 4, 148, 118],
            [6, 73, 45, 14, 74, 46],
            [11, 54, 24, 16, 55, 25],
            [30, 46, 16, 2, 47, 17],
            [8, 132, 106, 4, 133, 107],
            [8, 75, 47, 13, 76, 48],
            [7, 54, 24, 22, 55, 25],
            [22, 45, 15, 13, 46, 16],
            [10, 142, 114, 2, 143, 115],
            [19, 74, 46, 4, 75, 47],
            [28, 50, 22, 6, 51, 23],
            [33, 46, 16, 4, 47, 17],
            [8, 152, 122, 4, 153, 123],
            [22, 73, 45,
                3, 74, 46
            ],
            [8, 53, 23, 26, 54, 24],
            [12, 45, 15, 28, 46, 16],
            [3, 147, 117, 10, 148, 118],
            [3, 73, 45, 23, 74, 46],
            [4, 54, 24, 31, 55, 25],
            [11, 45, 15, 31, 46, 16],
            [7, 146, 116, 7, 147, 117],
            [21, 73, 45, 7, 74, 46],
            [1, 53, 23, 37, 54, 24],
            [19, 45, 15, 26, 46, 16],
            [5, 145, 115, 10, 146, 116],
            [19, 75, 47, 10, 76, 48],
            [15, 54, 24, 25, 55, 25],
            [23, 45, 15, 25, 46, 16],
            [13, 145, 115, 3, 146, 116],
            [2, 74, 46, 29, 75, 47],
            [42, 54, 24, 1, 55, 25],
            [23, 45, 15, 28, 46, 16],
            [17, 145, 115],
            [10, 74, 46, 23, 75, 47],
            [10, 54, 24, 35, 55, 25],
            [19, 45, 15, 35, 46, 16],
            [17, 145, 115, 1, 146, 116],
            [14, 74, 46, 21, 75, 47],
            [29, 54, 24, 19,
                55, 25
            ],
            [11, 45, 15, 46, 46, 16],
            [13, 145, 115, 6, 146, 116],
            [14, 74, 46, 23, 75, 47],
            [44, 54, 24, 7, 55, 25],
            [59, 46, 16, 1, 47, 17],
            [12, 151, 121, 7, 152, 122],
            [12, 75, 47, 26, 76, 48],
            [39, 54, 24, 14, 55, 25],
            [22, 45, 15, 41, 46, 16],
            [6, 151, 121, 14, 152, 122],
            [6, 75, 47, 34, 76, 48],
            [46, 54, 24, 10, 55, 25],
            [2, 45, 15, 64, 46, 16],
            [17, 152, 122, 4, 153, 123],
            [29, 74, 46, 14, 75, 47],
            [49, 54, 24, 10, 55, 25],
            [24, 45, 15, 46, 46, 16],
            [4, 152, 122, 18, 153, 123],
            [13, 74, 46, 32, 75, 47],
            [48, 54, 24, 14, 55, 25],
            [42, 45, 15, 32, 46, 16],
            [20, 147, 117, 4, 148, 118],
            [40, 75, 47, 7, 76, 48],
            [43, 54, 24, 22, 55, 25],
            [10,
                45, 15, 67, 46, 16
            ],
            [19, 148, 118, 6, 149, 119],
            [18, 75, 47, 31, 76, 48],
            [34, 54, 24, 34, 55, 25],
            [20, 45, 15, 61, 46, 16]
        ];
        p.getRSBlocks = function(a, c) {
            var d = p.getRsBlockTable(a, c);
            if (void 0 == d) throw Error("bad rs block @ typeNumber:" + a + "/errorCorrectLevel:" + c);
            for (var b = d.length / 3, e = [], f = 0; f < b; f++)
                for (var h = d[3 * f + 0], g = d[3 * f + 1], j = d[3 * f + 2], l = 0; l < h; l++) e.push(new p(g, j));
            return e
        };
        p.getRsBlockTable = function(a, c) {
            switch (c) {
                case 1:
                    return p.RS_BLOCK_TABLE[4 * (a - 1) + 0];
                case 0:
                    return p.RS_BLOCK_TABLE[4 * (a - 1) + 1];
                case 3:
                    return p.RS_BLOCK_TABLE[4 *
                        (a - 1) + 2];
                case 2:
                    return p.RS_BLOCK_TABLE[4 * (a - 1) + 3]
            }
        };
        t.prototype = {
            get: function(a) {
                return 1 == (this.buffer[Math.floor(a / 8)] >>> 7 - a % 8 & 1)
            },
            put: function(a, c) {
                for (var d = 0; d < c; d++) this.putBit(1 == (a >>> c - d - 1 & 1))
            },
            getLengthInBits: function() {
                return this.length
            },
            putBit: function(a) {
                var c = Math.floor(this.length / 8);
                this.buffer.length <= c && this.buffer.push(0);
                a && (this.buffer[c] |= 128 >>> this.length % 8);
                this.length++
            }
        };
        "string" === typeof h && (h = {
            text: h
        });
        h = r.extend({}, {
            render: "canvas",
            width: 256,
            height: 256,
            typeNumber: -1,
            correctLevel: 2,
            background: "#ffffff",
            foreground: "#000000"
        }, h);
        return this.each(function() {
            var a;
            if ("canvas" == h.render) {
                a = new o(h.typeNumber, h.correctLevel);
                a.addData(h.text);
                a.make();
                var c = document.createElement("canvas");
                c.width = h.width;
                c.height = h.height;
                for (var d = c.getContext("2d"), b = h.width / a.getModuleCount(), e = h.height / a.getModuleCount(), f = 0; f < a.getModuleCount(); f++)
                    for (var i = 0; i < a.getModuleCount(); i++) {
                        d.fillStyle = a.isDark(f, i) ? h.foreground : h.background;
                        var g = Math.ceil((i + 1) * b) - Math.floor(i * b),
                            j = Math.ceil((f + 1) * b) - Math.floor(f * b);
                        d.fillRect(Math.round(i * b), Math.round(f * e), g, j)
                    }
            } else {
                a = new o(h.typeNumber, h.correctLevel);
                a.addData(h.text);
                a.make();
                c = r("<table></table>").css("width", h.width + "px").css("height", h.height + "px").css("border", "0px").css("border-collapse", "collapse").css("background-color", h.background);
                d = h.width / a.getModuleCount();
                b = h.height / a.getModuleCount();
                for (e = 0; e < a.getModuleCount(); e++) {
                    f = r("<tr></tr>").css("height", b + "px").appendTo(c);
                    for (i = 0; i < a.getModuleCount(); i++) r("<td></td>").css("width",
                        d + "px").css("background-color", a.isDark(e, i) ? h.foreground : h.background).appendTo(f)
                }
            }
            a = c;
            jQuery(a).appendTo(this)
        })
    }
})(jQuery);


/**
 * @author sole / http://soledadpenades.com
 * @author mrdoob / http://mrdoob.com
 * @author Robert Eisele / http://www.xarg.org
 * @author Philippe / http://philippe.elsass.me
 * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html
 * @author Paul Lewis / http://www.aerotwist.com/
 * @author lechecacharro
 * @author Josh Faul / http://jocafa.com/
 * @author egraether / http://egraether.com/
 * @author endel / http://endel.me
 * @author Ben Delarre / http://delarre.net
 */

// Date.now shim for (ahem) Internet Explo(d|r)er
if (Date.now === undefined) {

    Date.now = function() {

        return new Date().valueOf();

    };

}

var TWEEN = TWEEN || (function() {

    var _tweens = [];

    return {

        REVISION: '12',

        getAll: function() {

            return _tweens;

        },

        removeAll: function() {

            _tweens = [];

        },

        add: function(tween) {

            _tweens.push(tween);

        },

        remove: function(tween) {

            var i = _tweens.indexOf(tween);

            if (i !== -1) {

                _tweens.splice(i, 1);

            }

        },

        update: function(time) {

            if (_tweens.length === 0) return false;

            var i = 0;

            time = time !== undefined ? time : (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined ? window.performance.now() : Date.now());

            while (i < _tweens.length) {

                if (_tweens[i].update(time)) {

                    i++;

                } else {

                    _tweens.splice(i, 1);

                }

            }

            return true;

        }
    };

})();

TWEEN.Tween = function(object) {

    var _object = object;
    var _valuesStart = {};
    var _valuesEnd = {};
    var _valuesStartRepeat = {};
    var _duration = 1000;
    var _repeat = 0;
    var _yoyo = false;
    var _isPlaying = false;
    var _reversed = false;
    var _delayTime = 0;
    var _startTime = null;
    var _easingFunction = TWEEN.Easing.Linear.None;
    var _interpolationFunction = TWEEN.Interpolation.Linear;
    var _chainedTweens = [];
    var _onStartCallback = null;
    var _onStartCallbackFired = false;
    var _onUpdateCallback = null;
    var _onCompleteCallback = null;

    // Set all starting values present on the target object
    for (var field in object) {

        _valuesStart[field] = parseFloat(object[field], 10);

    }

    this.to = function(properties, duration) {

        if (duration !== undefined) {

            _duration = duration;

        }

        _valuesEnd = properties;

        return this;

    };

    this.start = function(time) {

        TWEEN.add(this);

        _isPlaying = true;

        _onStartCallbackFired = false;

        _startTime = time !== undefined ? time : (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined ? window.performance.now() : Date.now());
        _startTime += _delayTime;

        for (var property in _valuesEnd) {

            // check if an Array was provided as property value
            if (_valuesEnd[property] instanceof Array) {

                if (_valuesEnd[property].length === 0) {

                    continue;

                }

                // create a local copy of the Array with the start value at the front
                _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);

            }

            _valuesStart[property] = _object[property];

            if ((_valuesStart[property] instanceof Array) === false) {
                _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings
            }

            _valuesStartRepeat[property] = _valuesStart[property] || 0;

        }

        return this;

    };

    this.stop = function() {

        if (!_isPlaying) {
            return this;
        }

        TWEEN.remove(this);
        _isPlaying = false;
        this.stopChainedTweens();
        return this;

    };

    this.stopChainedTweens = function() {

        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {

            _chainedTweens[i].stop();

        }

    };

    this.delay = function(amount) {

        _delayTime = amount;
        return this;

    };

    this.repeat = function(times) {

        _repeat = times;
        return this;

    };

    this.yoyo = function(yoyo) {

        _yoyo = yoyo;
        return this;

    };


    this.easing = function(easing) {

        _easingFunction = easing;
        return this;

    };

    this.interpolation = function(interpolation) {

        _interpolationFunction = interpolation;
        return this;

    };

    this.chain = function() {

        _chainedTweens = arguments;
        return this;

    };

    this.onStart = function(callback) {

        _onStartCallback = callback;
        return this;

    };

    this.onUpdate = function(callback) {

        _onUpdateCallback = callback;
        return this;

    };

    this.onComplete = function(callback) {

        _onCompleteCallback = callback;
        return this;

    };

    this.update = function(time) {

        var property;

        if (time < _startTime) {

            return true;

        }

        if (_onStartCallbackFired === false) {

            if (_onStartCallback !== null) {

                _onStartCallback.call(_object);

            }

            _onStartCallbackFired = true;

        }

        var elapsed = (time - _startTime) / _duration;
        elapsed = elapsed > 1 ? 1 : elapsed;

        var value = _easingFunction(elapsed);

        for (property in _valuesEnd) {

            var start = _valuesStart[property] || 0;
            var end = _valuesEnd[property];

            if (end instanceof Array) {

                _object[property] = _interpolationFunction(end, value);

            } else {

                // Parses relative end values with start as base (e.g.: +10, -3)
                if (typeof(end) === "string") {
                    end = start + parseFloat(end, 10);
                }

                // protect against non numeric properties.
                if (typeof(end) === "number") {
                    _object[property] = start + (end - start) * value;
                }

            }

        }

        if (_onUpdateCallback !== null) {

            _onUpdateCallback.call(_object, value);

        }

        if (elapsed == 1) {

            if (_repeat > 0) {

                if (isFinite(_repeat)) {
                    _repeat--;
                }

                // reassign starting values, restart by making startTime = now
                for (property in _valuesStartRepeat) {

                    if (typeof(_valuesEnd[property]) === "string") {
                        _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);
                    }

                    if (_yoyo) {
                        var tmp = _valuesStartRepeat[property];
                        _valuesStartRepeat[property] = _valuesEnd[property];
                        _valuesEnd[property] = tmp;
                        _reversed = !_reversed;
                    }
                    _valuesStart[property] = _valuesStartRepeat[property];

                }

                _startTime = time + _delayTime;

                return true;

            } else {

                if (_onCompleteCallback !== null) {

                    _onCompleteCallback.call(_object);

                }

                for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {

                    _chainedTweens[i].start(time);

                }

                return false;

            }

        }

        return true;

    };

};


TWEEN.Easing = {

    Linear: {

        None: function(k) {

            return k;

        }

    },

    Quadratic: {

        In: function(k) {

            return k * k;

        },

        Out: function(k) {

            return k * (2 - k);

        },

        InOut: function(k) {

            if ((k *= 2) < 1) return 0.5 * k * k;
            return -0.5 * (--k * (k - 2) - 1);

        }

    },

    Cubic: {

        In: function(k) {

            return k * k * k;

        },

        Out: function(k) {

            return --k * k * k + 1;

        },

        InOut: function(k) {

            if ((k *= 2) < 1) return 0.5 * k * k * k;
            return 0.5 * ((k -= 2) * k * k + 2);

        }

    },

    Quartic: {

        In: function(k) {

            return k * k * k * k;

        },

        Out: function(k) {

            return 1 - (--k * k * k * k);

        },

        InOut: function(k) {

            if ((k *= 2) < 1) return 0.5 * k * k * k * k;
            return -0.5 * ((k -= 2) * k * k * k - 2);

        }

    },

    Quintic: {

        In: function(k) {

            return k * k * k * k * k;

        },

        Out: function(k) {

            return --k * k * k * k * k + 1;

        },

        InOut: function(k) {

            if ((k *= 2) < 1) return 0.5 * k * k * k * k * k;
            return 0.5 * ((k -= 2) * k * k * k * k + 2);

        }

    },

    Sinusoidal: {

        In: function(k) {

            return 1 - Math.cos(k * Math.PI / 2);

        },

        Out: function(k) {

            return Math.sin(k * Math.PI / 2);

        },

        InOut: function(k) {

            return 0.5 * (1 - Math.cos(Math.PI * k));

        }

    },

    Exponential: {

        In: function(k) {

            return k === 0 ? 0 : Math.pow(1024, k - 1);

        },

        Out: function(k) {

            return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);

        },

        InOut: function(k) {

            if (k === 0) return 0;
            if (k === 1) return 1;
            if ((k *= 2) < 1) return 0.5 * Math.pow(1024, k - 1);
            return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);

        }

    },

    Circular: {

        In: function(k) {

            return 1 - Math.sqrt(1 - k * k);

        },

        Out: function(k) {

            return Math.sqrt(1 - (--k * k));

        },

        InOut: function(k) {

            if ((k *= 2) < 1) return -0.5 * (Math.sqrt(1 - k * k) - 1);
            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);

        }

    },

    Elastic: {

        In: function(k) {

            var s, a = 0.1,
                p = 0.4;
            if (k === 0) return 0;
            if (k === 1) return 1;
            if (!a || a < 1) {
                a = 1;
                s = p / 4;
            } else s = p * Math.asin(1 / a) / (2 * Math.PI);
            return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));

        },

        Out: function(k) {

            var s, a = 0.1,
                p = 0.4;
            if (k === 0) return 0;
            if (k === 1) return 1;
            if (!a || a < 1) {
                a = 1;
                s = p / 4;
            } else s = p * Math.asin(1 / a) / (2 * Math.PI);
            return (a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1);

        },

        InOut: function(k) {

            var s, a = 0.1,
                p = 0.4;
            if (k === 0) return 0;
            if (k === 1) return 1;
            if (!a || a < 1) {
                a = 1;
                s = p / 4;
            } else s = p * Math.asin(1 / a) / (2 * Math.PI);
            if ((k *= 2) < 1) return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));
            return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;

        }

    },

    Back: {

        In: function(k) {

            var s = 1.70158;
            return k * k * ((s + 1) * k - s);

        },

        Out: function(k) {

            var s = 1.70158;
            return --k * k * ((s + 1) * k + s) + 1;

        },

        InOut: function(k) {

            var s = 1.70158 * 1.525;
            if ((k *= 2) < 1) return 0.5 * (k * k * ((s + 1) * k - s));
            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);

        }

    },

    Bounce: {

        In: function(k) {

            return 1 - TWEEN.Easing.Bounce.Out(1 - k);

        },

        Out: function(k) {

            if (k < (1 / 2.75)) {

                return 7.5625 * k * k;

            } else if (k < (2 / 2.75)) {

                return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;

            } else if (k < (2.5 / 2.75)) {

                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;

            } else {

                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;

            }

        },

        InOut: function(k) {

            if (k < 0.5) return TWEEN.Easing.Bounce.In(k * 2) * 0.5;
            return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;

        }

    }

};

TWEEN.Interpolation = {

    Linear: function(v, k) {

        var m = v.length - 1,
            f = m * k,
            i = Math.floor(f),
            fn = TWEEN.Interpolation.Utils.Linear;

        if (k < 0) return fn(v[0], v[1], f);
        if (k > 1) return fn(v[m], v[m - 1], m - f);

        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);

    },

    Bezier: function(v, k) {

        var b = 0,
            n = v.length - 1,
            pw = Math.pow,
            bn = TWEEN.Interpolation.Utils.Bernstein,
            i;

        for (i = 0; i <= n; i++) {
            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);
        }

        return b;

    },

    CatmullRom: function(v, k) {

        var m = v.length - 1,
            f = m * k,
            i = Math.floor(f),
            fn = TWEEN.Interpolation.Utils.CatmullRom;

        if (v[0] === v[m]) {

            if (k < 0) i = Math.floor(f = m * (1 + k));

            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);

        } else {

            if (k < 0) return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);
            if (k > 1) return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);

            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);

        }

    },

    Utils: {

        Linear: function(p0, p1, t) {

            return (p1 - p0) * t + p0;

        },

        Bernstein: function(n, i) {

            var fc = TWEEN.Interpolation.Utils.Factorial;
            return fc(n) / fc(i) / fc(n - i);

        },

        Factorial: (function() {

            var a = [1];

            return function(n) {

                var s = 1,
                    i;
                if (a[n]) return a[n];
                for (i = n; i > 1; i--) s *= i;
                return a[n] = s;

            };

        })(),

        CatmullRom: function(p0, p1, p2, p3, t) {

            var v0 = (p2 - p0) * 0.5,
                v1 = (p3 - p1) * 0.5,
                t2 = t * t,
                t3 = t * t2;
            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;

        }

    }

};


/*
 * jQuery.upload v1.0.2
 *
 * Copyright (c) 2010 lagos
 * Dual licensed under the MIT and GPL licenses.
 *
 * http://lagoscript.org
 */
(function($) {

    var uuid = 0;

    $.fn.upload = function(url, data, callback, type) {
        var self = this,
            inputs, checkbox, checked,
            iframeName = 'jquery_upload' + ++uuid,
            iframe = $('<iframe name="' + iframeName + '" style="position:absolute;top:-9999px" />').appendTo('body'),
            form = '<form target="' + iframeName + '" method="post" enctype="multipart/form-data" />';

        if ($.isFunction(data)) {
            type = callback;
            callback = data;
            data = {};
        }

        checkbox = $('input:checkbox', this);
        checked = $('input:checked', this);
        form = self.wrapAll(form).parent('form').attr('action', url);

        // Make sure radios and checkboxes keep original values
        // (IE resets checkd attributes when appending)
        checkbox.removeAttr('checked');
        checked.attr('checked', true);

        inputs = createInputs(data);
        inputs = inputs ? $(inputs).appendTo(form) : null;

        form.submit(function() {
            iframe.load(function() {
                var data = handleData(this, type),
                    checked = $('input:checked', self);

                form.after(self).remove();
                checkbox.removeAttr('checked');
                checked.attr('checked', true);
                if (inputs) {
                    inputs.remove();
                }

                setTimeout(function() {
                    iframe.remove();
                    if (type === 'script') {
                        $.globalEval(data);
                    }
                    if (callback) {
                        callback.call(self, data);
                    }
                }, 0);
            });
        }).submit();

        return this;
    };

    function createInputs(data) {
        return $.map(param(data), function(param) {
            return '<input type="hidden" name="' + param.name + '" value="' + param.value + '"/>';
        }).join('');
    }

    function param(data) {
        if ($.isArray(data)) {
            return data;
        }
        var params = [];

        function add(name, value) {
            params.push({
                name: name,
                value: value
            });
        }

        if (typeof data === 'object') {
            $.each(data, function(name) {
                if ($.isArray(this)) {
                    $.each(this, function() {
                        add(name, this);
                    });
                } else {
                    add(name, $.isFunction(this) ? this() : this);
                }
            });
        } else if (typeof data === 'string') {
            $.each(data.split('&'), function() {
                var param = $.map(this.split('='), function(v) {
                    return decodeURIComponent(v.replace(/\+/g, ' '));
                });

                add(param[0], param[1]);
            });
        }

        return params;
    }

    function handleData(iframe, type) {
        var data, contents = $(iframe).contents().get(0);

        if ($.isXMLDoc(contents) || contents.XMLDocument) {
            return contents.XMLDocument || contents;
        }
        data = $(contents).find('body').html();

        switch (type) {
            case 'xml':
                data = parseXml(data);
                break;
            case 'json':
                var regex = /(<([^>]+)>)/ig;
                data = data.replace(regex, "");
                // data = data.replace("<pre>","");
                // data = data.replace("</pre>","");
                data = window.eval("(" + data + ")");
                break;
        }
        return data;
    }

    function parseXml(text) {
        if (window.DOMParser) {
            return new DOMParser().parseFromString(text, 'application/xml');
        } else {
            var xml = new ActiveXObject('Microsoft.XMLDOM');
            xml.async = false;
            xml.loadXML(text);
            return xml;
        }
    }

})(jQuery);

// VERSION: 2.2 LAST UPDATE: 13.03.2012
/* 
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 * 
 * Made by Wilq32, wilq32@gmail.com, Wroclaw, Poland, 01.2009
 * Website: http://code.google.com/p/jqueryrotate/ 
 */
(function(j) {
    for (var d, k = document.getElementsByTagName("head")[0].style, h = ["transformProperty", "WebkitTransform", "OTransform", "msTransform", "MozTransform"], g = 0; g < h.length; g++) void 0 !== k[h[g]] && (d = h[g]);
    var i = "v" == "\v";
    jQuery.fn.extend({
        rotate: function(a) {
            if (!(0 === this.length || "undefined" == typeof a)) {
                "number" == typeof a && (a = {
                    angle: a
                });
                for (var b = [], c = 0, f = this.length; c < f; c++) {
                    var e = this.get(c);
                    if (!e.Wilq32 || !e.Wilq32.PhotoEffect) {
                        var d = j.extend(!0, {}, a),
                            e = (new Wilq32.PhotoEffect(e, d))._rootObj;
                        b.push(j(e))
                    } else e.Wilq32.PhotoEffect._handleRotation(a)
                }
                return b
            }
        },
        getRotateAngle: function() {
            for (var a = [], b = 0, c = this.length; b < c; b++) {
                var f = this.get(b);
                f.Wilq32 && f.Wilq32.PhotoEffect && (a[b] = f.Wilq32.PhotoEffect._angle)
            }
            return a
        },
        stopRotate: function() {
            for (var a = 0, b = this.length; a < b; a++) {
                var c = this.get(a);
                c.Wilq32 && c.Wilq32.PhotoEffect && clearTimeout(c.Wilq32.PhotoEffect._timer)
            }
        }
    });
    Wilq32 = window.Wilq32 || {};
    Wilq32.PhotoEffect = function() {
        return d ? function(a, b) {
            a.Wilq32 = {
                PhotoEffect: this
            };
            this._img = this._rootObj =
                this._eventObj = a;
            this._handleRotation(b)
        } : function(a, b) {
            this._img = a;
            this._rootObj = document.createElement("span");
            this._rootObj.style.display = "inline-block";
            this._rootObj.Wilq32 = {
                PhotoEffect: this
            };
            a.parentNode.insertBefore(this._rootObj, a);
            if (a.complete) this._Loader(b);
            else {
                var c = this;
                jQuery(this._img).bind("load", function() {
                    c._Loader(b)
                })
            }
        }
    }();
    Wilq32.PhotoEffect.prototype = {
        _setupParameters: function(a) {
            this._parameters = this._parameters || {};
            "number" !== typeof this._angle && (this._angle = 0);
            "number" ===
            typeof a.angle && (this._angle = a.angle);
            this._parameters.animateTo = "number" === typeof a.animateTo ? a.animateTo : this._angle;
            this._parameters.step = a.step || this._parameters.step || null;
            this._parameters.easing = a.easing || this._parameters.easing || function(a, c, f, e, d) {
                return -e * ((c = c / d - 1) * c * c * c - 1) + f
            };
            this._parameters.duration = a.duration || this._parameters.duration || 1E3;
            this._parameters.callback = a.callback || this._parameters.callback || function() {};
            a.bind && a.bind != this._parameters.bind && this._BindEvents(a.bind)
        },
        _handleRotation: function(a) {
            this._setupParameters(a);
            this._angle == this._parameters.animateTo ? this._rotate(this._angle) : this._animateStart()
        },
        _BindEvents: function(a) {
            if (a && this._eventObj) {
                if (this._parameters.bind) {
                    var b = this._parameters.bind,
                        c;
                    for (c in b) b.hasOwnProperty(c) && jQuery(this._eventObj).unbind(c, b[c])
                }
                this._parameters.bind = a;
                for (c in a) a.hasOwnProperty(c) && jQuery(this._eventObj).bind(c, a[c])
            }
        },
        _Loader: function() {
            return i ? function(a) {
                var b = this._img.width,
                    c = this._img.height;
                this._img.parentNode.removeChild(this._img);
                this._vimage = this.createVMLNode("image");
                this._vimage.src = this._img.src;
                this._vimage.style.height = c + "px";
                this._vimage.style.width = b + "px";
                this._vimage.style.position = "absolute";
                this._vimage.style.top = "0px";
                this._vimage.style.left = "0px";
                this._container = this.createVMLNode("group");
                this._container.style.width = b;
                this._container.style.height = c;
                this._container.style.position = "absolute";
                this._container.setAttribute("coordsize", b - 1 + "," + (c - 1));
                this._container.appendChild(this._vimage);
                this._rootObj.appendChild(this._container);
                this._rootObj.style.position =
                    "relative";
                this._rootObj.style.width = b + "px";
                this._rootObj.style.height = c + "px";
                this._rootObj.setAttribute("id", this._img.getAttribute("id"));
                this._rootObj.className = this._img.className;
                this._eventObj = this._rootObj;
                this._handleRotation(a)
            } : function(a) {
                this._rootObj.setAttribute("id", this._img.getAttribute("id"));
                this._rootObj.className = this._img.className;
                this._width = this._img.width;
                this._height = this._img.height;
                this._widthHalf = this._width / 2;
                this._heightHalf = this._height / 2;
                var b = Math.sqrt(this._height *
                    this._height + this._width * this._width);
                this._widthAdd = b - this._width;
                this._heightAdd = b - this._height;
                this._widthAddHalf = this._widthAdd / 2;
                this._heightAddHalf = this._heightAdd / 2;
                this._img.parentNode.removeChild(this._img);
                this._aspectW = (parseInt(this._img.style.width, 10) || this._width) / this._img.width;
                this._aspectH = (parseInt(this._img.style.height, 10) || this._height) / this._img.height;
                this._canvas = document.createElement("canvas");
                this._canvas.setAttribute("width", this._width);
                this._canvas.style.position = "relative";
                this._canvas.style.left = -this._widthAddHalf + "px";
                this._canvas.style.top = -this._heightAddHalf + "px";
                this._canvas.Wilq32 = this._rootObj.Wilq32;
                this._rootObj.appendChild(this._canvas);
                this._rootObj.style.width = this._width + "px";
                this._rootObj.style.height = this._height + "px";
                this._eventObj = this._canvas;
                this._cnv = this._canvas.getContext("2d");
                this._handleRotation(a)
            }
        }(),
        _animateStart: function() {
            this._timer && clearTimeout(this._timer);
            this._animateStartTime = +new Date;
            this._animateStartAngle = this._angle;
            this._animate()
        },
        _animate: function() {
            var a = +new Date,
                b = a - this._animateStartTime > this._parameters.duration;
            if (b && !this._parameters.animatedGif) clearTimeout(this._timer);
            else {
                (this._canvas || this._vimage || this._img) && this._rotate(~~(10 * this._parameters.easing(0, a - this._animateStartTime, this._animateStartAngle, this._parameters.animateTo - this._animateStartAngle, this._parameters.duration)) / 10);
                this._parameters.step && this._parameters.step(this._angle);
                var c = this;
                this._timer = setTimeout(function() {
                    c._animate.call(c)
                }, 10)
            }
            this._parameters.callback &&
                b && (this._angle = this._parameters.animateTo, this._rotate(this._angle), this._parameters.callback.call(this._rootObj))
        },
        _rotate: function() {
            var a = Math.PI / 180;
            return i ? function(a) {
                this._angle = a;
                this._container.style.rotation = a % 360 + "deg"
            } : d ? function(a) {
                this._angle = a;
                this._img.style[d] = "rotate(" + a % 360 + "deg)"
            } : function(b) {
                this._angle = b;
                b = b % 360 * a;
                this._canvas.width = this._width + this._widthAdd;
                this._canvas.height = this._height + this._heightAdd;
                this._cnv.translate(this._widthAddHalf, this._heightAddHalf);
                this._cnv.translate(this._widthHalf,
                    this._heightHalf);
                this._cnv.rotate(b);
                this._cnv.translate(-this._widthHalf, -this._heightHalf);
                this._cnv.scale(this._aspectW, this._aspectH);
                this._cnv.drawImage(this._img, 0, 0)
            }
        }()
    };
    i && (Wilq32.PhotoEffect.prototype.createVMLNode = function() {
        document.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
        try {
            return !document.namespaces.rvml && document.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"),
                function(a) {
                    return document.createElement("<rvml:" + a + ' class="rvml">')
                }
        } catch (a) {
            return function(a) {
                return document.createElement("<" +
                    a + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')
            }
        }
    }())
})(jQuery);


/* =========================================================
 * bootstrap-slider.js v2.0.0
 * http://www.eyecon.ro/bootstrap-slider
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================
 * 
 * Modified by Turbulent Media inc.
 * 
 * ========================================================= */

! function($) {

    var Slider = function(element, options) {
        this.element = $(element);
        this.picker = $('<div class="slider">' +
                '<div class="slider-track">' +
                '<div class="slider-selection"></div>' +
                '<div class="slider-handle"></div>' +
                '<div class="slider-handle"></div>' +
                '</div>' +
                '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>' +
                '</div>')
            .insertBefore(this.element)
            .append(this.element);
        this.id = this.element.data('slider-id') || options.id;
        if (this.id) {
            this.picker[0].id = this.id;
        }

        if (typeof Modernizr !== 'undefined' && Modernizr.touch) {
            this.touchCapable = true;
        }

        var tooltip = this.element.data('slider-tooltip') || options.tooltip;

        this.tooltip = this.picker.find('.tooltip');
        this.tooltipInner = this.tooltip.find('div.tooltip-inner');

        this.orientation = this.element.data('slider-orientation') || options.orientation;
        switch (this.orientation) {
            case 'vertical':
                this.picker.addClass('slider-vertical');
                this.stylePos = 'top';
                this.mousePos = 'pageY';
                this.sizePos = 'offsetHeight';
                this.tooltip.addClass('right')[0].style.left = '100%';
                break;
            default:
                this.picker
                    .addClass('slider-horizontal')
                    .css('width', this.element.outerWidth());
                this.orientation = 'horizontal';
                this.stylePos = 'left';
                this.mousePos = 'pageX';
                this.sizePos = 'offsetWidth';
                this.tooltip.addClass('top')[0].style.top = -this.tooltip.outerHeight() - 14 + 'px';
                break;
        }

        this.min = this.element.data('slider-min') || options.min;
        this.max = this.element.data('slider-max') || options.max;
        this.step = this.element.data('slider-step') || options.step;
        this.value = this.element.data('slider-value') || options.value;
        if (this.value[1]) {
            this.range = true;
        }

        this.selection = this.element.data('slider-selection') || options.selection;
        this.selectionEl = this.picker.find('.slider-selection');
        if (this.selection === 'none') {
            this.selectionEl.addClass('hide');
        }
        this.selectionElStyle = this.selectionEl[0].style;


        this.handle1 = this.picker.find('.slider-handle:first');
        this.handle1Stype = this.handle1[0].style;
        this.handle2 = this.picker.find('.slider-handle:last');
        this.handle2Stype = this.handle2[0].style;

        var handle = this.element.data('slider-handle') || options.handle;
        switch (handle) {
            case 'round':
                this.handle1.addClass('round');
                this.handle2.addClass('round');
                break
            case 'triangle':
                this.handle1.addClass('triangle');
                this.handle2.addClass('triangle');
                break
        }

        if (this.range) {
            this.value[0] = Math.max(this.min, Math.min(this.max, this.value[0]));
            this.value[1] = Math.max(this.min, Math.min(this.max, this.value[1]));
        } else {
            this.value = [Math.max(this.min, Math.min(this.max, this.value))];
            this.handle2.addClass('hide');
            if (this.selection == 'after') {
                this.value[1] = this.max;
            } else {
                this.value[1] = this.min;
            }
        }
        this.diff = this.max - this.min;
        this.percentage = [
            (this.value[0] - this.min) * 100 / this.diff,
            (this.value[1] - this.min) * 100 / this.diff,
            this.step * 100 / this.diff
        ];

        this.offset = this.picker.offset();
        this.size = this.picker[0][this.sizePos];

        this.formater = options.formater;

        this.layout();

        if (this.touchCapable) {
            // Touch: Bind touch events:
            this.picker.on({
                touchstart: $.proxy(this.mousedown, this)
            });
        } else {
            this.picker.on({
                mousedown: $.proxy(this.mousedown, this)
            });
        }

        if (tooltip === 'show') {
            this.picker.on({
                mouseenter: $.proxy(this.showTooltip, this),
                mouseleave: $.proxy(this.hideTooltip, this)
            });
        } else {
            this.tooltip.addClass('hide');
        }
    };

    Slider.prototype = {
        constructor: Slider,

        over: false,
        inDrag: false,

        showTooltip: function() {
            this.tooltip.addClass('in');
            //var left = Math.round(this.percent*this.width);
            //this.tooltip.css('left', left - this.tooltip.outerWidth()/2);
            this.over = true;
        },

        hideTooltip: function() {
            if (this.inDrag === false) {
                this.tooltip.removeClass('in');
            }
            this.over = false;
        },

        layout: function() {
            var val = this.calculateValue();

            this.element
                .trigger({
                    type: 'slide',
                    value: val
                })
                .data('value', val)
                .prop('value', val)
                .trigger('change');

            this.handle1Stype[this.stylePos] = this.percentage[0] + '%';
            this.handle2Stype[this.stylePos] = this.percentage[1] + '%';
            if (this.orientation == 'vertical') {
                this.selectionElStyle.top = Math.min(this.percentage[0], this.percentage[1]) + '%';
                this.selectionElStyle.height = Math.abs(this.percentage[0] - this.percentage[1]) + '%';
            } else {
                this.selectionElStyle.left = Math.min(this.percentage[0], this.percentage[1]) + '%';
                this.selectionElStyle.width = Math.abs(this.percentage[0] - this.percentage[1]) + '%';
            }
            if (this.range) {
                this.tooltipInner.text(
                    this.formater(this.value[0]) +
                    ' - ' +
                    this.formater(this.value[1])
                );
                this.tooltip[0].style[this.stylePos] = this.size * (this.percentage[0] + (this.percentage[1] - this.percentage[0]) / 2) / 100 - (this.orientation === 'vertical' ? this.tooltip.outerHeight() / 2 : this.tooltip.outerWidth() / 2) + 'px';
            } else {
                this.tooltipInner.text(
                    this.formater(this.value[0])
                );
                this.tooltip[0].style[this.stylePos] = this.size * this.percentage[0] / 100 - (this.orientation === 'vertical' ? this.tooltip.outerHeight() / 2 : this.tooltip.outerWidth() / 2) + 'px';
            }

            //this.element.prop('value', this.calculateValue());
        },

        mousedown: function(ev) {

            // Touch: Get the original event:
            if (this.touchCapable && ev.type === 'touchstart') {
                ev = ev.originalEvent;
            }

            this.offset = this.picker.offset();
            this.size = this.picker[0][this.sizePos];

            var percentage = this.getPercentage(ev);

            if (this.range) {
                var diff1 = Math.abs(this.percentage[0] - percentage);
                var diff2 = Math.abs(this.percentage[1] - percentage);
                this.dragged = (diff1 < diff2) ? 0 : 1;
            } else {
                this.dragged = 0;
            }

            this.percentage[this.dragged] = percentage;
            this.layout();

            if (this.touchCapable) {
                // Touch: Bind touch events:
                $(document).on({
                    touchmove: $.proxy(this.mousemove, this),
                    touchend: $.proxy(this.mouseup, this)
                });
            } else {
                $(document).on({
                    mousemove: $.proxy(this.mousemove, this),
                    mouseup: $.proxy(this.mouseup, this)
                });
            }

            this.inDrag = true;
            var val = this.calculateValue();
            this.element.trigger({
                type: 'slideStart',
                value: val
            }).trigger({
                type: 'slide',
                value: val
            });
            return false;
        },

        mousemove: function(ev) {

            // Touch: Get the original event:
            if (this.touchCapable && ev.type === 'touchmove') {
                ev = ev.originalEvent;
            }

            var percentage = this.getPercentage(ev);
            if (this.range) {
                if (this.dragged === 0 && this.percentage[1] < percentage) {
                    this.percentage[0] = this.percentage[1];
                    this.dragged = 1;
                } else if (this.dragged === 1 && this.percentage[0] > percentage) {
                    this.percentage[1] = this.percentage[0];
                    this.dragged = 0;
                }
            }
            this.percentage[this.dragged] = percentage;
            this.layout();

            return false;
        },

        mouseup: function(ev) {
            if (this.touchCapable) {
                // Touch: Bind touch events:
                $(document).off({
                    touchmove: this.mousemove,
                    touchend: this.mouseup
                });
            } else {
                $(document).off({
                    mousemove: this.mousemove,
                    mouseup: this.mouseup
                });
            }

            this.inDrag = false;
            if (this.over == false) {
                this.hideTooltip();
            }
            this.element;
            var val = this.calculateValue();
            this.element
                .trigger({
                    type: 'slideStop',
                    value: val
                })
                .data('value', val)
                .prop('value', val);
            return false;
        },

        calculateValue: function() {
            var val;
            if (this.range) {
                val = [
                    (this.min + Math.round((this.diff * this.percentage[0] / 100) / this.step) * this.step),
                    (this.min + Math.round((this.diff * this.percentage[1] / 100) / this.step) * this.step)
                ];
                this.value = val;
            } else {
                val = (this.min + Math.round((this.diff * this.percentage[0] / 100) / this.step) * this.step);
                this.value = [val, this.value[1]];
            }
            return val;
        },

        getPercentage: function(ev) {
            if (this.touchCapable) {
                ev = ev.touches[0];
            }
            var percentage = (ev[this.mousePos] - this.offset[this.stylePos]) * 100 / this.size;
            percentage = Math.round(percentage / this.percentage[2]) * this.percentage[2];
            return Math.max(0, Math.min(100, percentage));
        },

        getValue: function() {
            if (this.range) {
                return this.value;
            }
            return this.value[0];
        },

        setValue: function(val) {
            this.value = val;

            if (this.range) {
                this.value[0] = Math.max(this.min, Math.min(this.max, this.value[0]));
                this.value[1] = Math.max(this.min, Math.min(this.max, this.value[1]));
            } else {
                this.value = [Math.max(this.min, Math.min(this.max, this.value))];
                this.handle2.addClass('hide');
                if (this.selection == 'after') {
                    this.value[1] = this.max;
                } else {
                    this.value[1] = this.min;
                }
            }
            this.diff = this.max - this.min;
            this.percentage = [
                (this.value[0] - this.min) * 100 / this.diff,
                (this.value[1] - this.min) * 100 / this.diff,
                this.step * 100 / this.diff
            ];
            this.layout();
        }
    };

    $.fn.slider = function(option, val) {
        return this.each(function() {
            var $this = $(this),
                data = $this.data('slider'),
                options = typeof option === 'object' && option;
            if (!data) {
                $this.data('slider', (data = new Slider(this, $.extend({}, $.fn.slider.defaults, options))));
            }
            if (typeof option == 'string') {
                data[option](val);
            }
        })
    };

    $.fn.slider.defaults = {
        min: 0,
        max: 10,
        step: 1,
        orientation: 'horizontal',
        value: 5,
        selection: 'before',
        tooltip: 'show',
        handle: 'round',
        formater: function(value) {
            return value;
        }
    };

    $.fn.slider.Constructor = Slider;

}(window.jQuery);

/* jQuery elevateZoom 3.0.8 - Demo's and documentation: - www.elevateweb.co.uk/image-zoom - Copyright (c) 2013 Andrew Eades - www.elevateweb.co.uk - Dual licensed under the LGPL licenses. - http://en.wikipedia.org/wiki/MIT_License - http://en.wikipedia.org/wiki/GNU_General_Public_License */
"function" !== typeof Object.create && (Object.create = function(d) {
    function h() {}
    h.prototype = d;
    return new h
});
(function(d, h, l, m) {
    var k = {
        init: function(b, a) {
            var c = this;
            c.elem = a;
            c.$elem = d(a);
            c.imageSrc = c.$elem.data("zoom-image") ? c.$elem.data("zoom-image") : c.$elem.attr("src");
            c.options = d.extend({}, d.fn.elevateZoom.options, b);
            c.options.tint && (c.options.lensColour = "none", c.options.lensOpacity = "1");
            "inner" == c.options.zoomType && (c.options.showLens = !1);
            c.$elem.parent().removeAttr("title").removeAttr("alt");
            c.zoomImage = c.imageSrc;
            c.refresh(1);
            d("#" + c.options.gallery + " a").click(function(a) {
                c.options.galleryActiveClass &&
                    (d("#" + c.options.gallery + " a").removeClass(c.options.galleryActiveClass), d(this).addClass(c.options.galleryActiveClass));
                a.preventDefault();
                d(this).data("zoom-image") ? c.zoomImagePre = d(this).data("zoom-image") : c.zoomImagePre = d(this).data("image");
                c.swaptheimage(d(this).data("image"), c.zoomImagePre);
                return !1
            })
        },
        refresh: function(b) {
            var a = this;
            setTimeout(function() {
                a.fetch(a.imageSrc)
            }, b || a.options.refresh)
        },
        fetch: function(b) {
            var a = this,
                c = new Image;
            c.onload = function() {
                a.largeWidth = c.width;
                a.largeHeight =
                    c.height;
                a.startZoom();
                a.currentImage = a.imageSrc;
                a.options.onZoomedImageLoaded(a.$elem)
            };
            c.src = b
        },
        startZoom: function() {
            var b = this;
            b.nzWidth = b.$elem.width();
            b.nzHeight = b.$elem.height();
            b.isWindowActive = !1;
            b.isLensActive = !1;
            b.isTintActive = !1;
            b.overWindow = !1;
            b.options.imageCrossfade && (b.zoomWrap = b.$elem.wrap('<div style="height:' + b.nzHeight + "px;width:" + b.nzWidth + 'px;" class="zoomWrapper" />'), b.$elem.css("position", "absolute"));
            b.zoomLock = 1;
            b.scrollingLock = !1;
            b.changeBgSize = !1;
            b.currentZoomLevel = b.options.zoomLevel;
            b.nzOffset = b.$elem.offset();
            b.widthRatio = b.largeWidth / b.currentZoomLevel / b.nzWidth;
            b.heightRatio = b.largeHeight / b.currentZoomLevel / b.nzHeight;
            "window" == b.options.zoomType && (b.zoomWindowStyle = "overflow: hidden;background-position: 0px 0px;text-align:center;background-color: " + String(b.options.zoomWindowBgColour) + ";width: " + String(b.options.zoomWindowWidth) + "px;height: " + String(b.options.zoomWindowHeight) + "px;float: left;background-size: " + b.largeWidth / b.currentZoomLevel + "px " + b.largeHeight / b.currentZoomLevel +
                "px;display: none;z-index:9998;border: " + String(b.options.borderSize) + "px solid " + b.options.borderColour + ";background-repeat: no-repeat;position: absolute;");
            if ("inner" == b.options.zoomType) {
                var a = b.$elem.css("border-left-width");
                b.zoomWindowStyle = "overflow: hidden;margin-left: " + String(a) + ";margin-top: " + String(a) + ";background-position: 0px 0px;width: " + String(b.nzWidth) + "px;height: " + String(b.nzHeight) + "px;float: left;display: none;cursor:" + b.options.cursor + ";px solid " + b.options.borderColour + ";background-repeat: no-repeat;position: absolute;"
            }
            "window" ==
            b.options.zoomType && (lensHeight = b.nzHeight < b.options.zoomWindowWidth / b.widthRatio ? b.nzHeight : String(b.options.zoomWindowHeight / b.heightRatio), lensWidth = b.largeWidth < b.options.zoomWindowWidth ? b.nzWidth : b.options.zoomWindowWidth / b.widthRatio, b.lensStyle = "background-position: 0px 0px;width: " + String(b.options.zoomWindowWidth / b.widthRatio) + "px;height: " + String(b.options.zoomWindowHeight / b.heightRatio) + "px;float: right;display: none;overflow: hidden;-webkit-transform: translateZ(0);opacity:" +
                b.options.lensOpacity + ";filter: alpha(opacity = " + 100 * b.options.lensOpacity + "); zoom:1;width:" + lensWidth + "px;height:" + lensHeight + "px;background-color:" + b.options.lensColour + ";cursor:" + b.options.cursor + ";border: " + b.options.lensBorderSize + "px solid " + b.options.lensBorderColour + ";background-repeat: no-repeat;position: absolute;");
            b.tintStyle = "display: block;position: absolute;background-color: " + b.options.tintColour + ";filter:alpha(opacity=0);opacity: 0;width: " + b.nzWidth + "px;height: " + b.nzHeight + "px;";
            b.lensRound = "";
            "lens" == b.options.zoomType && (b.lensStyle = "background-position: 0px 0px;float: left;display: none;border: " + String(b.options.borderSize) + "px solid " + b.options.borderColour + ";width:" + String(b.options.lensSize) + "px;height:" + String(b.options.lensSize) + "px;background-repeat: no-repeat;position: absolute;");
            "round" == b.options.lensShape && (b.lensRound = "border-top-left-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;border-top-right-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) +
                "px;border-bottom-left-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;border-bottom-right-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;");
            b.zoomContainer = d('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:' + b.nzOffset.left + "px;top:" + b.nzOffset.top + "px;height:" + b.nzHeight + "px;width:" + b.nzWidth + 'px;"></div>');
            d("body").append(b.zoomContainer);
            b.options.containLensZoom && "lens" == b.options.zoomType && b.zoomContainer.css("overflow",
                "hidden");
            "inner" != b.options.zoomType && (b.zoomLens = d("<div class='zoomLens' style='" + b.lensStyle + b.lensRound + "'>&nbsp;</div>").appendTo(b.zoomContainer).click(function() {
                b.$elem.trigger("click")
            }), b.options.tint && (b.tintContainer = d("<div/>").addClass("tintContainer"), b.zoomTint = d("<div class='zoomTint' style='" + b.tintStyle + "'></div>"), b.zoomLens.wrap(b.tintContainer), b.zoomTintcss = b.zoomLens.after(b.zoomTint), b.zoomTintImage = d('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: ' +
                b.nzWidth + "px; height: " + b.nzHeight + 'px;" src="' + b.imageSrc + '">').appendTo(b.zoomLens).click(function() {
                b.$elem.trigger("click")
            })));
            isNaN(b.options.zoomWindowPosition) ? b.zoomWindow = d("<div style='z-index:999;left:" + b.windowOffsetLeft + "px;top:" + b.windowOffsetTop + "px;" + b.zoomWindowStyle + "' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function() {
                b.$elem.trigger("click")
            }) : b.zoomWindow = d("<div style='z-index:999;left:" + b.windowOffsetLeft + "px;top:" + b.windowOffsetTop + "px;" + b.zoomWindowStyle +
                "' class='zoomWindow'>&nbsp;</div>").appendTo(b.zoomContainer).click(function() {
                b.$elem.trigger("click")
            });
            b.zoomWindowContainer = d("<div/>").addClass("zoomWindowContainer").css("width", b.options.zoomWindowWidth);
            b.zoomWindow.wrap(b.zoomWindowContainer);
            "lens" == b.options.zoomType && b.zoomLens.css({
                backgroundImage: "url('" + b.imageSrc + "')"
            });
            "window" == b.options.zoomType && b.zoomWindow.css({
                backgroundImage: "url('" + b.imageSrc + "')"
            });
            "inner" == b.options.zoomType && b.zoomWindow.css({
                backgroundImage: "url('" + b.imageSrc +
                    "')"
            });
            b.$elem.bind("touchmove", function(a) {
                a.preventDefault();
                b.setPosition(a.originalEvent.touches[0] || a.originalEvent.changedTouches[0])
            });
            b.zoomContainer.bind("touchmove", function(a) {
                "inner" == b.options.zoomType && b.showHideWindow("show");
                a.preventDefault();
                b.setPosition(a.originalEvent.touches[0] || a.originalEvent.changedTouches[0])
            });
            b.zoomContainer.bind("touchend", function(a) {
                b.showHideWindow("hide");
                b.options.showLens && b.showHideLens("hide");
                b.options.tint && "inner" != b.options.zoomType && b.showHideTint("hide")
            });
            b.$elem.bind("touchend", function(a) {
                b.showHideWindow("hide");
                b.options.showLens && b.showHideLens("hide");
                b.options.tint && "inner" != b.options.zoomType && b.showHideTint("hide")
            });
            b.options.showLens && (b.zoomLens.bind("touchmove", function(a) {
                a.preventDefault();
                b.setPosition(a.originalEvent.touches[0] || a.originalEvent.changedTouches[0])
            }), b.zoomLens.bind("touchend", function(a) {
                b.showHideWindow("hide");
                b.options.showLens && b.showHideLens("hide");
                b.options.tint && "inner" != b.options.zoomType && b.showHideTint("hide")
            }));
            b.$elem.bind("mousemove", function(a) {
                !1 == b.overWindow && b.setElements("show");
                if (b.lastX !== a.clientX || b.lastY !== a.clientY) b.setPosition(a), b.currentLoc = a;
                b.lastX = a.clientX;
                b.lastY = a.clientY
            });
            b.zoomContainer.bind("mousemove", function(a) {
                !1 == b.overWindow && b.setElements("show");
                if (b.lastX !== a.clientX || b.lastY !== a.clientY) b.setPosition(a), b.currentLoc = a;
                b.lastX = a.clientX;
                b.lastY = a.clientY
            });
            "inner" != b.options.zoomType && b.zoomLens.bind("mousemove", function(a) {
                if (b.lastX !== a.clientX || b.lastY !== a.clientY) b.setPosition(a),
                    b.currentLoc = a;
                b.lastX = a.clientX;
                b.lastY = a.clientY
            });
            b.options.tint && "inner" != b.options.zoomType && b.zoomTint.bind("mousemove", function(a) {
                if (b.lastX !== a.clientX || b.lastY !== a.clientY) b.setPosition(a), b.currentLoc = a;
                b.lastX = a.clientX;
                b.lastY = a.clientY
            });
            "inner" == b.options.zoomType && b.zoomWindow.bind("mousemove", function(a) {
                if (b.lastX !== a.clientX || b.lastY !== a.clientY) b.setPosition(a), b.currentLoc = a;
                b.lastX = a.clientX;
                b.lastY = a.clientY
            });
            b.zoomContainer.add(b.$elem).mouseenter(function() {
                !1 == b.overWindow &&
                    b.setElements("show")
            }).mouseleave(function() {
                b.scrollLock || b.setElements("hide")
            });
            "inner" != b.options.zoomType && b.zoomWindow.mouseenter(function() {
                b.overWindow = !0;
                b.setElements("hide")
            }).mouseleave(function() {
                b.overWindow = !1
            });
            b.minZoomLevel = b.options.minZoomLevel ? b.options.minZoomLevel : 2 * b.options.scrollZoomIncrement;
            b.options.scrollZoom && b.zoomContainer.add(b.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll", function(a) {
                b.scrollLock = !0;
                clearTimeout(d.data(this, "timer"));
                d.data(this, "timer",
                    setTimeout(function() {
                        b.scrollLock = !1
                    }, 250));
                var e = a.originalEvent.wheelDelta || -1 * a.originalEvent.detail;
                a.stopImmediatePropagation();
                a.stopPropagation();
                a.preventDefault();
                0 < e / 120 ? b.currentZoomLevel >= b.minZoomLevel && b.changeZoomLevel(b.currentZoomLevel - b.options.scrollZoomIncrement) : b.options.maxZoomLevel ? b.currentZoomLevel <= b.options.maxZoomLevel && b.changeZoomLevel(parseFloat(b.currentZoomLevel) + b.options.scrollZoomIncrement) : b.changeZoomLevel(parseFloat(b.currentZoomLevel) + b.options.scrollZoomIncrement);
                return !1
            })
        },
        setElements: function(b) {
            if (!this.options.zoomEnabled) return !1;
            "show" == b && this.isWindowSet && ("inner" == this.options.zoomType && this.showHideWindow("show"), "window" == this.options.zoomType && this.showHideWindow("show"), this.options.showLens && this.showHideLens("show"), this.options.tint && "inner" != this.options.zoomType && this.showHideTint("show"));
            "hide" == b && ("window" == this.options.zoomType && this.showHideWindow("hide"), this.options.tint || this.showHideWindow("hide"), this.options.showLens && this.showHideLens("hide"),
                this.options.tint && this.showHideTint("hide"))
        },
        setPosition: function(b) {
            if (!this.options.zoomEnabled) return !1;
            this.nzHeight = this.$elem.height();
            this.nzWidth = this.$elem.width();
            this.nzOffset = this.$elem.offset();
            this.options.tint && "inner" != this.options.zoomType && (this.zoomTint.css({
                top: 0
            }), this.zoomTint.css({
                left: 0
            }));
            this.options.responsive && !this.options.scrollZoom && this.options.showLens && (lensHeight = this.nzHeight < this.options.zoomWindowWidth / this.widthRatio ? this.nzHeight : String(this.options.zoomWindowHeight /
                this.heightRatio), lensWidth = this.largeWidth < this.options.zoomWindowWidth ? this.nzWidth : this.options.zoomWindowWidth / this.widthRatio, this.widthRatio = this.largeWidth / this.nzWidth, this.heightRatio = this.largeHeight / this.nzHeight, "lens" != this.options.zoomType && (lensHeight = this.nzHeight < this.options.zoomWindowWidth / this.widthRatio ? this.nzHeight : String(this.options.zoomWindowHeight / this.heightRatio), lensWidth = this.options.zoomWindowWidth < this.options.zoomWindowWidth ? this.nzWidth : this.options.zoomWindowWidth /
                this.widthRatio, this.zoomLens.css("width", lensWidth), this.zoomLens.css("height", lensHeight), this.options.tint && (this.zoomTintImage.css("width", this.nzWidth), this.zoomTintImage.css("height", this.nzHeight))), "lens" == this.options.zoomType && this.zoomLens.css({
                width: String(this.options.lensSize) + "px",
                height: String(this.options.lensSize) + "px"
            }));
            this.zoomContainer.css({
                top: this.nzOffset.top
            });
            this.zoomContainer.css({
                left: this.nzOffset.left
            });
            this.mouseLeft = parseInt(b.pageX - this.nzOffset.left);
            this.mouseTop =
                parseInt(b.pageY - this.nzOffset.top);
            "window" == this.options.zoomType && (this.Etoppos = this.mouseTop < this.zoomLens.height() / 2, this.Eboppos = this.mouseTop > this.nzHeight - this.zoomLens.height() / 2 - 2 * this.options.lensBorderSize, this.Eloppos = this.mouseLeft < 0 + this.zoomLens.width() / 2, this.Eroppos = this.mouseLeft > this.nzWidth - this.zoomLens.width() / 2 - 2 * this.options.lensBorderSize);
            "inner" == this.options.zoomType && (this.Etoppos = this.mouseTop < this.nzHeight / 2 / this.heightRatio, this.Eboppos = this.mouseTop > this.nzHeight -
                this.nzHeight / 2 / this.heightRatio, this.Eloppos = this.mouseLeft < 0 + this.nzWidth / 2 / this.widthRatio, this.Eroppos = this.mouseLeft > this.nzWidth - this.nzWidth / 2 / this.widthRatio - 2 * this.options.lensBorderSize);
            0 >= this.mouseLeft || 0 > this.mouseTop || this.mouseLeft > this.nzWidth || this.mouseTop > this.nzHeight ? this.setElements("hide") : (this.options.showLens && (this.lensLeftPos = String(this.mouseLeft - this.zoomLens.width() / 2), this.lensTopPos = String(this.mouseTop - this.zoomLens.height() / 2)), this.Etoppos && (this.lensTopPos = 0),
                this.Eloppos && (this.tintpos = this.lensLeftPos = this.windowLeftPos = 0), "window" == this.options.zoomType && (this.Eboppos && (this.lensTopPos = Math.max(this.nzHeight - this.zoomLens.height() - 2 * this.options.lensBorderSize, 0)), this.Eroppos && (this.lensLeftPos = this.nzWidth - this.zoomLens.width() - 2 * this.options.lensBorderSize)), "inner" == this.options.zoomType && (this.Eboppos && (this.lensTopPos = Math.max(this.nzHeight - 2 * this.options.lensBorderSize, 0)), this.Eroppos && (this.lensLeftPos = this.nzWidth - this.nzWidth - 2 * this.options.lensBorderSize)),
                "lens" == this.options.zoomType && (this.windowLeftPos = String(-1 * ((b.pageX - this.nzOffset.left) * this.widthRatio - this.zoomLens.width() / 2)), this.windowTopPos = String(-1 * ((b.pageY - this.nzOffset.top) * this.heightRatio - this.zoomLens.height() / 2)), this.zoomLens.css({
                    backgroundPosition: this.windowLeftPos + "px " + this.windowTopPos + "px"
                }), this.changeBgSize && (this.nzHeight > this.nzWidth ? ("lens" == this.options.zoomType && this.zoomLens.css({
                    "background-size": this.largeWidth / this.newvalueheight + "px " + this.largeHeight / this.newvalueheight +
                        "px"
                }), this.zoomWindow.css({
                    "background-size": this.largeWidth / this.newvalueheight + "px " + this.largeHeight / this.newvalueheight + "px"
                })) : ("lens" == this.options.zoomType && this.zoomLens.css({
                    "background-size": this.largeWidth / this.newvaluewidth + "px " + this.largeHeight / this.newvaluewidth + "px"
                }), this.zoomWindow.css({
                    "background-size": this.largeWidth / this.newvaluewidth + "px " + this.largeHeight / this.newvaluewidth + "px"
                })), this.changeBgSize = !1), this.setWindowPostition(b)), this.options.tint && "inner" != this.options.zoomType &&
                this.setTintPosition(b), "window" == this.options.zoomType && this.setWindowPostition(b), "inner" == this.options.zoomType && this.setWindowPostition(b), this.options.showLens && (this.fullwidth && "lens" != this.options.zoomType && (this.lensLeftPos = 0), this.zoomLens.css({
                    left: this.lensLeftPos + "px",
                    top: this.lensTopPos + "px"
                })))
        },
        showHideWindow: function(b) {
            "show" != b || this.isWindowActive || (this.options.zoomWindowFadeIn ? this.zoomWindow.stop(!0, !0, !1).fadeIn(this.options.zoomWindowFadeIn) : this.zoomWindow.show(), this.isWindowActive = !0);
            "hide" == b && this.isWindowActive && (this.options.zoomWindowFadeOut ? this.zoomWindow.stop(!0, !0).fadeOut(this.options.zoomWindowFadeOut) : this.zoomWindow.hide(), this.isWindowActive = !1)
        },
        showHideLens: function(b) {
            "show" != b || this.isLensActive || (this.options.lensFadeIn ? this.zoomLens.stop(!0, !0, !1).fadeIn(this.options.lensFadeIn) : this.zoomLens.show(), this.isLensActive = !0);
            "hide" == b && this.isLensActive && (this.options.lensFadeOut ? this.zoomLens.stop(!0, !0).fadeOut(this.options.lensFadeOut) : this.zoomLens.hide(),
                this.isLensActive = !1)
        },
        showHideTint: function(b) {
            "show" != b || this.isTintActive || (this.options.zoomTintFadeIn ? this.zoomTint.css({
                opacity: this.options.tintOpacity
            }).animate().stop(!0, !0).fadeIn("slow") : (this.zoomTint.css({
                opacity: this.options.tintOpacity
            }).animate(), this.zoomTint.show()), this.isTintActive = !0);
            "hide" == b && this.isTintActive && (this.options.zoomTintFadeOut ? this.zoomTint.stop(!0, !0).fadeOut(this.options.zoomTintFadeOut) : this.zoomTint.hide(), this.isTintActive = !1)
        },
        setLensPostition: function(b) {},
        setWindowPostition: function(b) {
            var a = this;
            if (isNaN(a.options.zoomWindowPosition)) a.externalContainer = d("#" + a.options.zoomWindowPosition), a.externalContainerWidth = a.externalContainer.width(), a.externalContainerHeight = a.externalContainer.height(), a.externalContainerOffset = a.externalContainer.offset(), a.windowOffsetTop = a.externalContainerOffset.top, a.windowOffsetLeft = a.externalContainerOffset.left;
            else switch (a.options.zoomWindowPosition) {
                case 1:
                    a.windowOffsetTop = a.options.zoomWindowOffety;
                    a.windowOffsetLeft = +a.nzWidth;
                    break;
                case 2:
                    a.options.zoomWindowHeight > a.nzHeight && (a.windowOffsetTop = -1 * (a.options.zoomWindowHeight / 2 - a.nzHeight / 2), a.windowOffsetLeft = a.nzWidth);
                    break;
                case 3:
                    a.windowOffsetTop = a.nzHeight - a.zoomWindow.height() - 2 * a.options.borderSize;
                    a.windowOffsetLeft = a.nzWidth;
                    break;
                case 4:
                    a.windowOffsetTop = a.nzHeight;
                    a.windowOffsetLeft = a.nzWidth;
                    break;
                case 5:
                    a.windowOffsetTop = a.nzHeight;
                    a.windowOffsetLeft = a.nzWidth - a.zoomWindow.width() - 2 * a.options.borderSize;
                    break;
                case 6:
                    a.options.zoomWindowHeight >
                        a.nzHeight && (a.windowOffsetTop = a.nzHeight, a.windowOffsetLeft = -1 * (a.options.zoomWindowWidth / 2 - a.nzWidth / 2 + 2 * a.options.borderSize));
                    break;
                case 7:
                    a.windowOffsetTop = a.nzHeight;
                    a.windowOffsetLeft = 0;
                    break;
                case 8:
                    a.windowOffsetTop = a.nzHeight;
                    a.windowOffsetLeft = -1 * (a.zoomWindow.width() + 2 * a.options.borderSize);
                    break;
                case 9:
                    a.windowOffsetTop = a.nzHeight - a.zoomWindow.height() - 2 * a.options.borderSize;
                    a.windowOffsetLeft = -1 * (a.zoomWindow.width() + 2 * a.options.borderSize);
                    break;
                case 10:
                    a.options.zoomWindowHeight > a.nzHeight &&
                        (a.windowOffsetTop = -1 * (a.options.zoomWindowHeight / 2 - a.nzHeight / 2), a.windowOffsetLeft = -1 * (a.zoomWindow.width() + 2 * a.options.borderSize));
                    break;
                case 11:
                    a.windowOffsetTop = a.options.zoomWindowOffety;
                    a.windowOffsetLeft = -1 * (a.zoomWindow.width() + 2 * a.options.borderSize);
                    break;
                case 12:
                    a.windowOffsetTop = -1 * (a.zoomWindow.height() + 2 * a.options.borderSize);
                    a.windowOffsetLeft = -1 * (a.zoomWindow.width() + 2 * a.options.borderSize);
                    break;
                case 13:
                    a.windowOffsetTop = -1 * (a.zoomWindow.height() + 2 * a.options.borderSize);
                    a.windowOffsetLeft =
                        0;
                    break;
                case 14:
                    a.options.zoomWindowHeight > a.nzHeight && (a.windowOffsetTop = -1 * (a.zoomWindow.height() + 2 * a.options.borderSize), a.windowOffsetLeft = -1 * (a.options.zoomWindowWidth / 2 - a.nzWidth / 2 + 2 * a.options.borderSize));
                    break;
                case 15:
                    a.windowOffsetTop = -1 * (a.zoomWindow.height() + 2 * a.options.borderSize);
                    a.windowOffsetLeft = a.nzWidth - a.zoomWindow.width() - 2 * a.options.borderSize;
                    break;
                case 16:
                    a.windowOffsetTop = -1 * (a.zoomWindow.height() + 2 * a.options.borderSize);
                    a.windowOffsetLeft = a.nzWidth;
                    break;
                default:
                    a.windowOffsetTop =
                        a.options.zoomWindowOffety, a.windowOffsetLeft = a.nzWidth
            }
            a.isWindowSet = !0;
            a.windowOffsetTop += a.options.zoomWindowOffety;
            a.windowOffsetLeft += a.options.zoomWindowOffetx;
            a.zoomWindow.css({
                top: a.windowOffsetTop
            });
            a.zoomWindow.css({
                left: a.windowOffsetLeft
            });
            "inner" == a.options.zoomType && (a.zoomWindow.css({
                top: 0
            }), a.zoomWindow.css({
                left: 0
            }));
            a.windowLeftPos = String(-1 * ((b.pageX - a.nzOffset.left) * a.widthRatio - a.zoomWindow.width() / 2));
            a.windowTopPos = String(-1 * ((b.pageY - a.nzOffset.top) * a.heightRatio - a.zoomWindow.height() /
                2));
            a.Etoppos && (a.windowTopPos = 0);
            a.Eloppos && (a.windowLeftPos = 0);
            a.Eboppos && (a.windowTopPos = -1 * (a.largeHeight / a.currentZoomLevel - a.zoomWindow.height()));
            a.Eroppos && (a.windowLeftPos = -1 * (a.largeWidth / a.currentZoomLevel - a.zoomWindow.width()));
            a.fullheight && (a.windowTopPos = 0);
            a.fullwidth && (a.windowLeftPos = 0);
            if ("window" == a.options.zoomType || "inner" == a.options.zoomType) 1 == a.zoomLock && (1 >= a.widthRatio && (a.windowLeftPos = 0), 1 >= a.heightRatio && (a.windowTopPos = 0)), a.largeHeight < a.options.zoomWindowHeight && (a.windowTopPos =
                0), a.largeWidth < a.options.zoomWindowWidth && (a.windowLeftPos = 0), a.options.easing ? (a.xp || (a.xp = 0), a.yp || (a.yp = 0), a.loop || (a.loop = setInterval(function() {
                a.xp += (a.windowLeftPos - a.xp) / a.options.easingAmount;
                a.yp += (a.windowTopPos - a.yp) / a.options.easingAmount;
                a.scrollingLock ? (clearInterval(a.loop), a.xp = a.windowLeftPos, a.yp = a.windowTopPos, a.xp = -1 * ((b.pageX - a.nzOffset.left) * a.widthRatio - a.zoomWindow.width() / 2), a.yp = -1 * ((b.pageY - a.nzOffset.top) * a.heightRatio - a.zoomWindow.height() / 2), a.changeBgSize && (a.nzHeight >
                    a.nzWidth ? ("lens" == a.options.zoomType && a.zoomLens.css({
                        "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight / a.newvalueheight + "px"
                    }), a.zoomWindow.css({
                        "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight / a.newvalueheight + "px"
                    })) : ("lens" != a.options.zoomType && a.zoomLens.css({
                        "background-size": a.largeWidth / a.newvaluewidth + "px " + a.largeHeight / a.newvalueheight + "px"
                    }), a.zoomWindow.css({
                        "background-size": a.largeWidth / a.newvaluewidth + "px " + a.largeHeight / a.newvaluewidth + "px"
                    })),
                    a.changeBgSize = !1), a.zoomWindow.css({
                    backgroundPosition: a.windowLeftPos + "px " + a.windowTopPos + "px"
                }), a.scrollingLock = !1, a.loop = !1) : (a.changeBgSize && (a.nzHeight > a.nzWidth ? ("lens" == a.options.zoomType && a.zoomLens.css({
                    "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight / a.newvalueheight + "px"
                }), a.zoomWindow.css({
                    "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight / a.newvalueheight + "px"
                })) : ("lens" != a.options.zoomType && a.zoomLens.css({
                    "background-size": a.largeWidth / a.newvaluewidth +
                        "px " + a.largeHeight / a.newvaluewidth + "px"
                }), a.zoomWindow.css({
                    "background-size": a.largeWidth / a.newvaluewidth + "px " + a.largeHeight / a.newvaluewidth + "px"
                })), a.changeBgSize = !1), a.zoomWindow.css({
                    backgroundPosition: a.xp + "px " + a.yp + "px"
                }))
            }, 16))) : (a.changeBgSize && (a.nzHeight > a.nzWidth ? ("lens" == a.options.zoomType && a.zoomLens.css({
                "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight / a.newvalueheight + "px"
            }), a.zoomWindow.css({
                "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight /
                    a.newvalueheight + "px"
            })) : ("lens" == a.options.zoomType && a.zoomLens.css({
                "background-size": a.largeWidth / a.newvaluewidth + "px " + a.largeHeight / a.newvaluewidth + "px"
            }), a.largeHeight / a.newvaluewidth < a.options.zoomWindowHeight ? a.zoomWindow.css({
                "background-size": a.largeWidth / a.newvaluewidth + "px " + a.largeHeight / a.newvaluewidth + "px"
            }) : a.zoomWindow.css({
                "background-size": a.largeWidth / a.newvalueheight + "px " + a.largeHeight / a.newvalueheight + "px"
            })), a.changeBgSize = !1), a.zoomWindow.css({
                backgroundPosition: a.windowLeftPos +
                    "px " + a.windowTopPos + "px"
            }))
        },
        setTintPosition: function(b) {
            this.nzOffset = this.$elem.offset();
            this.tintpos = String(-1 * (b.pageX - this.nzOffset.left - this.zoomLens.width() / 2));
            this.tintposy = String(-1 * (b.pageY - this.nzOffset.top - this.zoomLens.height() / 2));
            this.Etoppos && (this.tintposy = 0);
            this.Eloppos && (this.tintpos = 0);
            this.Eboppos && (this.tintposy = -1 * (this.nzHeight - this.zoomLens.height() - 2 * this.options.lensBorderSize));
            this.Eroppos && (this.tintpos = -1 * (this.nzWidth - this.zoomLens.width() - 2 * this.options.lensBorderSize));
            this.options.tint && (this.fullheight && (this.tintposy = 0), this.fullwidth && (this.tintpos = 0), this.zoomTintImage.css({
                left: this.tintpos + "px"
            }), this.zoomTintImage.css({
                top: this.tintposy + "px"
            }))
        },
        swaptheimage: function(b, a) {
            var c = this,
                e = new Image;
            c.options.loadingIcon && (c.spinner = d("<div style=\"background: url('" + c.options.loadingIcon + "') no-repeat center;height:" + c.nzHeight + "px;width:" + c.nzWidth + 'px;z-index: 2000;position: absolute; background-position: center center;"></div>'), c.$elem.after(c.spinner));
            c.options.onImageSwap(c.$elem);
            e.onload = function() {
                c.largeWidth = e.width;
                c.largeHeight = e.height;
                c.zoomImage = a;
                c.zoomWindow.css({
                    "background-size": c.largeWidth + "px " + c.largeHeight + "px"
                });
                c.zoomWindow.css({
                    "background-size": c.largeWidth + "px " + c.largeHeight + "px"
                });
                c.swapAction(b, a)
            };
            e.src = a
        },
        swapAction: function(b, a) {
            var c = this,
                e = new Image;
            e.onload = function() {
                c.nzHeight = e.height;
                c.nzWidth = e.width;
                c.options.onImageSwapComplete(c.$elem);
                c.doneCallback()
            };
            e.src = b;
            c.currentZoomLevel = c.options.zoomLevel;
            c.options.maxZoomLevel = !1;
            "lens" == c.options.zoomType && c.zoomLens.css({
                backgroundImage: "url('" + a + "')"
            });
            "window" == c.options.zoomType && c.zoomWindow.css({
                backgroundImage: "url('" + a + "')"
            });
            "inner" == c.options.zoomType && c.zoomWindow.css({
                backgroundImage: "url('" + a + "')"
            });
            c.currentImage = a;
            if (c.options.imageCrossfade) {
                var f = c.$elem,
                    g = f.clone();
                c.$elem.attr("src", b);
                c.$elem.after(g);
                g.stop(!0).fadeOut(c.options.imageCrossfade, function() {
                    d(this).remove()
                });
                c.$elem.width("auto").removeAttr("width");
                c.$elem.height("auto").removeAttr("height");
                f.fadeIn(c.options.imageCrossfade);
                c.options.tint && "inner" != c.options.zoomType && (f = c.zoomTintImage, g = f.clone(), c.zoomTintImage.attr("src", a), c.zoomTintImage.after(g), g.stop(!0).fadeOut(c.options.imageCrossfade, function() {
                    d(this).remove()
                }), f.fadeIn(c.options.imageCrossfade), c.zoomTint.css({
                    height: c.$elem.height()
                }), c.zoomTint.css({
                    width: c.$elem.width()
                }));
                c.zoomContainer.css("height", c.$elem.height());
                c.zoomContainer.css("width", c.$elem.width());
                "inner" != c.options.zoomType || c.options.constrainType ||
                    (c.zoomWrap.parent().css("height", c.$elem.height()), c.zoomWrap.parent().css("width", c.$elem.width()), c.zoomWindow.css("height", c.$elem.height()), c.zoomWindow.css("width", c.$elem.width()))
            } else c.$elem.attr("src", b), c.options.tint && (c.zoomTintImage.attr("src", a), c.zoomTintImage.attr("height", c.$elem.height()), c.zoomTintImage.css({
                height: c.$elem.height()
            }), c.zoomTint.css({
                height: c.$elem.height()
            })), c.zoomContainer.css("height", c.$elem.height()), c.zoomContainer.css("width", c.$elem.width());
            c.options.imageCrossfade &&
                (c.zoomWrap.css("height", c.$elem.height()), c.zoomWrap.css("width", c.$elem.width()));
            c.options.constrainType && ("height" == c.options.constrainType && (c.zoomContainer.css("height", c.options.constrainSize), c.zoomContainer.css("width", "auto"), c.options.imageCrossfade ? (c.zoomWrap.css("height", c.options.constrainSize), c.zoomWrap.css("width", "auto"), c.constwidth = c.zoomWrap.width()) : (c.$elem.css("height", c.options.constrainSize), c.$elem.css("width", "auto"), c.constwidth = c.$elem.width()), "inner" == c.options.zoomType &&
                    (c.zoomWrap.parent().css("height", c.options.constrainSize), c.zoomWrap.parent().css("width", c.constwidth), c.zoomWindow.css("height", c.options.constrainSize), c.zoomWindow.css("width", c.constwidth)), c.options.tint && (c.tintContainer.css("height", c.options.constrainSize), c.tintContainer.css("width", c.constwidth), c.zoomTint.css("height", c.options.constrainSize), c.zoomTint.css("width", c.constwidth), c.zoomTintImage.css("height", c.options.constrainSize), c.zoomTintImage.css("width", c.constwidth))), "width" ==
                c.options.constrainType && (c.zoomContainer.css("height", "auto"), c.zoomContainer.css("width", c.options.constrainSize), c.options.imageCrossfade ? (c.zoomWrap.css("height", "auto"), c.zoomWrap.css("width", c.options.constrainSize), c.constheight = c.zoomWrap.height()) : (c.$elem.css("height", "auto"), c.$elem.css("width", c.options.constrainSize), c.constheight = c.$elem.height()), "inner" == c.options.zoomType && (c.zoomWrap.parent().css("height", c.constheight), c.zoomWrap.parent().css("width", c.options.constrainSize), c.zoomWindow.css("height",
                    c.constheight), c.zoomWindow.css("width", c.options.constrainSize)), c.options.tint && (c.tintContainer.css("height", c.constheight), c.tintContainer.css("width", c.options.constrainSize), c.zoomTint.css("height", c.constheight), c.zoomTint.css("width", c.options.constrainSize), c.zoomTintImage.css("height", c.constheight), c.zoomTintImage.css("width", c.options.constrainSize))))
        },
        doneCallback: function() {
            this.options.loadingIcon && this.spinner.hide();
            this.nzOffset = this.$elem.offset();
            this.nzWidth = this.$elem.width();
            this.nzHeight = this.$elem.height();
            this.currentZoomLevel = this.options.zoomLevel;
            this.widthRatio = this.largeWidth / this.nzWidth;
            this.heightRatio = this.largeHeight / this.nzHeight;
            "window" == this.options.zoomType && (lensHeight = this.nzHeight < this.options.zoomWindowWidth / this.widthRatio ? this.nzHeight : String(this.options.zoomWindowHeight / this.heightRatio), lensWidth = this.options.zoomWindowWidth < this.options.zoomWindowWidth ? this.nzWidth : this.options.zoomWindowWidth / this.widthRatio, this.zoomLens && (this.zoomLens.css("width",
                lensWidth), this.zoomLens.css("height", lensHeight)))
        },
        getCurrentImage: function() {
            return this.zoomImage
        },
        getGalleryList: function() {
            var b = this;
            b.gallerylist = [];
            b.options.gallery ? d("#" + b.options.gallery + " a").each(function() {
                    var a = "";
                    d(this).data("zoom-image") ? a = d(this).data("zoom-image") : d(this).data("image") && (a = d(this).data("image"));
                    a == b.zoomImage ? b.gallerylist.unshift({
                        href: "" + a + "",
                        title: d(this).find("img").attr("title")
                    }) : b.gallerylist.push({
                        href: "" + a + "",
                        title: d(this).find("img").attr("title")
                    })
                }) :
                b.gallerylist.push({
                    href: "" + b.zoomImage + "",
                    title: d(this).find("img").attr("title")
                });
            return b.gallerylist
        },
        changeZoomLevel: function(b) {
            this.scrollingLock = !0;
            this.newvalue = parseFloat(b).toFixed(2);
            newvalue = parseFloat(b).toFixed(2);
            maxheightnewvalue = this.largeHeight / (this.options.zoomWindowHeight / this.nzHeight * this.nzHeight);
            maxwidthtnewvalue = this.largeWidth / (this.options.zoomWindowWidth / this.nzWidth * this.nzWidth);
            "inner" != this.options.zoomType && (maxheightnewvalue <= newvalue ? (this.heightRatio = this.largeHeight /
                maxheightnewvalue / this.nzHeight, this.newvalueheight = maxheightnewvalue, this.fullheight = !0) : (this.heightRatio = this.largeHeight / newvalue / this.nzHeight, this.newvalueheight = newvalue, this.fullheight = !1), maxwidthtnewvalue <= newvalue ? (this.widthRatio = this.largeWidth / maxwidthtnewvalue / this.nzWidth, this.newvaluewidth = maxwidthtnewvalue, this.fullwidth = !0) : (this.widthRatio = this.largeWidth / newvalue / this.nzWidth, this.newvaluewidth = newvalue, this.fullwidth = !1), "lens" == this.options.zoomType && (maxheightnewvalue <= newvalue ?
                (this.fullwidth = !0, this.newvaluewidth = maxheightnewvalue) : (this.widthRatio = this.largeWidth / newvalue / this.nzWidth, this.newvaluewidth = newvalue, this.fullwidth = !1)));
            "inner" == this.options.zoomType && (maxheightnewvalue = parseFloat(this.largeHeight / this.nzHeight).toFixed(2), maxwidthtnewvalue = parseFloat(this.largeWidth / this.nzWidth).toFixed(2), newvalue > maxheightnewvalue && (newvalue = maxheightnewvalue), newvalue > maxwidthtnewvalue && (newvalue = maxwidthtnewvalue), maxheightnewvalue <= newvalue ? (this.heightRatio = this.largeHeight /
                newvalue / this.nzHeight, this.newvalueheight = newvalue > maxheightnewvalue ? maxheightnewvalue : newvalue, this.fullheight = !0) : (this.heightRatio = this.largeHeight / newvalue / this.nzHeight, this.newvalueheight = newvalue > maxheightnewvalue ? maxheightnewvalue : newvalue, this.fullheight = !1), maxwidthtnewvalue <= newvalue ? (this.widthRatio = this.largeWidth / newvalue / this.nzWidth, this.newvaluewidth = newvalue > maxwidthtnewvalue ? maxwidthtnewvalue : newvalue, this.fullwidth = !0) : (this.widthRatio = this.largeWidth / newvalue / this.nzWidth, this.newvaluewidth =
                newvalue, this.fullwidth = !1));
            scrcontinue = !1;
            "inner" == this.options.zoomType && (this.nzWidth > this.nzHeight && (this.newvaluewidth <= maxwidthtnewvalue ? scrcontinue = !0 : (scrcontinue = !1, this.fullwidth = this.fullheight = !0)), this.nzHeight > this.nzWidth && (this.newvaluewidth <= maxwidthtnewvalue ? scrcontinue = !0 : (scrcontinue = !1, this.fullwidth = this.fullheight = !0)));
            "inner" != this.options.zoomType && (scrcontinue = !0);
            scrcontinue && (this.zoomLock = 0, this.changeZoom = !0, this.options.zoomWindowHeight / this.heightRatio <= this.nzHeight &&
                (this.currentZoomLevel = this.newvalueheight, "lens" != this.options.zoomType && "inner" != this.options.zoomType && (this.changeBgSize = !0, this.zoomLens.css({
                    height: String(this.options.zoomWindowHeight / this.heightRatio) + "px"
                })), "lens" == this.options.zoomType || "inner" == this.options.zoomType) && (this.changeBgSize = !0), this.options.zoomWindowWidth / this.widthRatio <= this.nzWidth && ("inner" != this.options.zoomType && this.newvaluewidth > this.newvalueheight && (this.currentZoomLevel = this.newvaluewidth), "lens" != this.options.zoomType &&
                    "inner" != this.options.zoomType && (this.changeBgSize = !0, this.zoomLens.css({
                        width: String(this.options.zoomWindowWidth / this.widthRatio) + "px"
                    })), "lens" == this.options.zoomType || "inner" == this.options.zoomType) && (this.changeBgSize = !0), "inner" == this.options.zoomType && (this.changeBgSize = !0, this.nzWidth > this.nzHeight && (this.currentZoomLevel = this.newvaluewidth), this.nzHeight > this.nzWidth && (this.currentZoomLevel = this.newvaluewidth)));
            this.setPosition(this.currentLoc)
        },
        closeAll: function() {
            self.zoomWindow && self.zoomWindow.hide();
            self.zoomLens && self.zoomLens.hide();
            self.zoomTint && self.zoomTint.hide()
        },
        changeState: function(b) {
            "enable" == b && (this.options.zoomEnabled = !0);
            "disable" == b && (this.options.zoomEnabled = !1)
        }
    };
    d.fn.elevateZoom = function(b) {
        return this.each(function() {
            var a = Object.create(k);
            a.init(b, this);
            d.data(this, "elevateZoom", a)
        })
    };
    d.fn.elevateZoom.options = {
        zoomActivation: "hover",
        zoomEnabled: !0,
        preloading: 1,
        zoomLevel: 1,
        scrollZoom: !1,
        scrollZoomIncrement: 0.1,
        minZoomLevel: !1,
        maxZoomLevel: !1,
        easing: !1,
        easingAmount: 12,
        lensSize: 200,
        zoomWindowWidth: 400,
        zoomWindowHeight: 400,
        zoomWindowOffetx: 0,
        zoomWindowOffety: 0,
        zoomWindowPosition: 1,
        zoomWindowBgColour: "#fff",
        lensFadeIn: !1,
        lensFadeOut: !1,
        debug: !1,
        zoomWindowFadeIn: !1,
        zoomWindowFadeOut: !1,
        zoomWindowAlwaysShow: !1,
        zoomTintFadeIn: !1,
        zoomTintFadeOut: !1,
        borderSize: 4,
        showLens: !0,
        borderColour: "#888",
        lensBorderSize: 1,
        lensBorderColour: "#000",
        lensShape: "square",
        zoomType: "window",
        containLensZoom: !1,
        lensColour: "white",
        lensOpacity: 0.4,
        lenszoom: !1,
        tint: !1,
        tintColour: "#333",
        tintOpacity: 0.4,
        gallery: !1,
        galleryActiveClass: "zoomGalleryActive",
        imageCrossfade: !1,
        constrainType: !1,
        constrainSize: !1,
        loadingIcon: !1,
        cursor: "default",
        responsive: !0,
        onComplete: d.noop,
        onZoomedImageLoaded: function() {},
        onImageSwap: d.noop,
        onImageSwapComplete: d.noop
    }
})(jQuery, window, document);

/*!
 * fullPage 2.7.2
 * https://github.com/alvarotrigo/fullPage.js
 * @license MIT licensed
 *
 * Copyright (C) 2015 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(c, l) {
    "function" === typeof define && define.amd ? define(["jquery"], function(m) {
        return l(m, c, c.document, c.Math)
    }) : "undefined" !== typeof exports ? module.exports = l(require("jquery"), c, c.document, c.Math) : l(jQuery, c, c.document, c.Math)
})("undefined" !== typeof window ? window : this, function(c, l, m, p, D) {
    var n = c(l),
        t = c(m);
    c.fn.fullpage = function(d) {
        function La() {
            d.css3 && (d.css3 = Ma());
            d.anchors.length || (d.anchors = c("[data-anchor]").map(function() {
                return c(this).data("anchor").toString()
            }).get());
            e.setAllowScrolling(!0);
            Na();
            q = n.height();
            e.setAutoScrolling(d.autoScrolling, "internal");
            var a = c(".fp-section.active").find(".fp-slide.active");
            a.length && (0 !== c(".fp-section.active").index(".fp-section") || 0 === c(".fp-section.active").index(".fp-section") && 0 !== a.index()) && T(a);
            ja();
            ka();
            n.on("load", function() {
                var a = l.location.hash.replace("#", "").split("/"),
                    c = a[0],
                    a = a[1];
                c && (d.animateAnchor ? U(c, a) : e.silentMoveTo(c, a))
            })
        }

        function Na() {
            h.css({
                height: "100%",
                position: "relative"
            });
            h.addClass("fullpage-wrapper");
            c("html").addClass("fp-enabled");
            h.removeClass("fp-destroyed");
            Oa();
            c(".fp-section").each(function(a) {
                var b = c(this),
                    g = b.find(".fp-slide"),
                    f = g.length;
                a || 0 !== c(".fp-section.active").length || b.addClass("active");
                b.css("height", q + "px");
                d.paddingTop && b.css("padding-top", d.paddingTop);
                d.paddingBottom && b.css("padding-bottom", d.paddingBottom);
                "undefined" !== typeof d.sectionsColor[a] && b.css("background-color", d.sectionsColor[a]);
                "undefined" !== typeof d.anchors[a] && b.attr("data-anchor", d.anchors[a]);
                "undefined" !== typeof d.anchors[a] && b.hasClass("active") &&
                    V(d.anchors[a], a);
                d.menu && d.css3 && c(d.menu).closest(".fullpage-wrapper").length && c(d.menu).appendTo(r);
                0 < f ? Pa(b, g, f) : d.verticalCentered && la(b)
            });
            d.fixedElements && d.css3 && c(d.fixedElements).appendTo(r);
            d.navigation && Qa();
            d.scrollOverflow ? ("complete" === m.readyState && ma(), n.on("load", ma)) : na()
        }

        function Pa(a, b, g) {
            var f = 100 * g,
                e = 100 / g;
            b.wrapAll('<div class="fp-slidesContainer" />');
            b.parent().wrap('<div class="fp-slides" />');
            a.find(".fp-slidesContainer").css("width", f + "%");
            1 < g && (d.controlArrows && Ra(a),
                d.slidesNavigation && Sa(a, g));
            b.each(function(a) {
                c(this).css("width", e + "%");
                d.verticalCentered && la(c(this))
            });
            a = a.find(".fp-slide.active");
            a.length && (0 !== c(".fp-section.active").index(".fp-section") || 0 === c(".fp-section.active").index(".fp-section") && 0 !== a.index()) ? T(a) : b.eq(0).addClass("active")
        }

        function Oa() {
            c(d.sectionSelector).each(function() {
                c(this).addClass("fp-section")
            });
            c(d.slideSelector).each(function() {
                c(this).addClass("fp-slide")
            })
        }

        function Ra(a) {
            a.find(".fp-slides").after('<div class="fp-controlArrow fp-prev"></div><div class="fp-controlArrow fp-next"></div>');
            "#fff" != d.controlArrowColor && (a.find(".fp-controlArrow.fp-next").css("border-color", "transparent transparent transparent " + d.controlArrowColor), a.find(".fp-controlArrow.fp-prev").css("border-color", "transparent " + d.controlArrowColor + " transparent transparent"));
            d.loopHorizontal || a.find(".fp-controlArrow.fp-prev").hide()
        }

        function Qa() {
            r.append('<div id="fp-nav"><ul></ul></div>');
            var a = c("#fp-nav");
            a.addClass(function() {
                return d.showActiveTooltip ? "fp-show-active " + d.navigationPosition : d.navigationPosition
            });
            for (var b = 0; b < c(".fp-section").length; b++) {
                var g = "";
                d.anchors.length && (g = d.anchors[b]);
                var g = '<li><a href="#' + g + '"><span></span></a>',
                    f = d.navigationTooltips[b];
                "undefined" !== typeof f && "" !== f && (g += '<div class="fp-tooltip ' + d.navigationPosition + '">' + f + "</div>");
                g += "</li>";
                a.find("ul").append(g)
            }
            c("#fp-nav").css("margin-top", "-" + c("#fp-nav").height() / 2 + "px");
            c("#fp-nav").find("li").eq(c(".fp-section.active").index(".fp-section")).find("a").addClass("active")
        }

        function ma() {
            c(".fp-section").each(function() {
                var a =
                    c(this).find(".fp-slide");
                a.length ? a.each(function() {
                    I(c(this))
                }) : I(c(this))
            });
            na()
        }

        function na() {
            var a = c(".fp-section.active"),
                b = a.find("SLIDES_WRAPPER"),
                g = a.find(".fp-scrollable");
            b.length && (g = b.find(".fp-slide.active"));
            g.mouseover();
            J(a);
            oa(a);
            c.isFunction(d.afterLoad) && d.afterLoad.call(a, a.data("anchor"), a.index(".fp-section") + 1);
            c.isFunction(d.afterRender) && d.afterRender.call(h)
        }

        function pa() {
            var a;
            if (!d.autoScrolling || d.scrollBar) {
                for (var b = n.scrollTop(), g = 0, f = p.abs(b - m.querySelectorAll(".fp-section")[0].offsetTop),
                        e = m.querySelectorAll(".fp-section"), h = 0; h < e.length; ++h) {
                    var k = p.abs(b - e[h].offsetTop);
                    k < f && (g = h, f = k)
                }
                a = c(e).eq(g);
                if (!a.hasClass("active") && !a.hasClass("fp-auto-height")) {
                    W = !0;
                    b = c(".fp-section.active");
                    g = b.index(".fp-section") + 1;
                    f = X(a);
                    e = a.data("anchor");
                    h = a.index(".fp-section") + 1;
                    k = a.find(".fp-slide.active");
                    if (k.length) var l = k.data("anchor"),
                        q = k.index();
                    u && (a.addClass("active").siblings().removeClass("active"), c.isFunction(d.onLeave) && d.onLeave.call(b, g, h, f), c.isFunction(d.afterLoad) && d.afterLoad.call(a,
                        e, h), J(a), V(e, h - 1), d.anchors.length && (y = e, Y(q, l, e, h)));
                    clearTimeout(Z);
                    Z = setTimeout(function() {
                        W = !1
                    }, 100)
                }
                d.fitToSection && (clearTimeout(aa), aa = setTimeout(function() {
                    u && d.fitToSection && (c(".fp-section.active").is(a) && requestAnimFrame(function() {
                        v = !0
                    }), z(a), v = !1)
                }, d.fitToSectionDelay))
            }
        }

        function qa(a) {
            return a.find(".fp-slides").length ? a.find(".fp-slide.active").find(".fp-scrollable") : a.find(".fp-scrollable")
        }

        function K(a, b) {
            if (k.m[a]) {
                var d, c;
                "down" == a ? (d = "bottom", c = e.moveSectionDown) : (d = "top", c = e.moveSectionUp);
                if (0 < b.length)
                    if (d = "top" === d ? !b.scrollTop() : "bottom" === d ? b.scrollTop() + 1 + b.innerHeight() >= b[0].scrollHeight : void 0, d) c();
                    else return !0;
                else c()
            }
        }

        function Ta(a) {
            var b = a.originalEvent;
            if (!ra(a.target) && ba(b)) {
                d.autoScrolling && a.preventDefault();
                a = c(".fp-section.active");
                var g = qa(a);
                u && !w && (b = sa(b), E = b.y, L = b.x, a.find(".fp-slides").length && p.abs(M - L) > p.abs(F - E) ? p.abs(M - L) > n.width() / 100 * d.touchSensitivity && (M > L ? k.m.right && e.moveSlideRight() : k.m.left && e.moveSlideLeft()) : d.autoScrolling && p.abs(F - E) > n.height() /
                    100 * d.touchSensitivity && (F > E ? K("down", g) : E > F && K("up", g)))
            }
        }

        function ra(a, b) {
            b = b || 0;
            var g = c(a).parent();
            return b < d.normalScrollElementTouchThreshold && g.is(d.normalScrollElements) ? !0 : b == d.normalScrollElementTouchThreshold ? !1 : ra(g, ++b)
        }

        function ba(a) {
            return "undefined" === typeof a.pointerType || "mouse" != a.pointerType
        }

        function Ua(a) {
            a = a.originalEvent;
            d.fitToSection && x.stop();
            ba(a) && (a = sa(a), F = a.y, M = a.x)
        }

        function ta(a, b) {
            for (var d = 0, c = a.slice(p.max(a.length - b, 1)), e = 0; e < c.length; e++) d += c[e];
            return p.ceil(d /
                b)
        }

        function A(a) {
            var b = (new Date).getTime();
            if (d.autoScrolling && !N) {
                a = a || l.event;
                var g = a.wheelDelta || -a.deltaY || -a.detail,
                    f = p.max(-1, p.min(1, g)),
                    e = "undefined" !== typeof a.wheelDeltaX || "undefined" !== typeof a.deltaX,
                    e = p.abs(a.wheelDeltaX) < p.abs(a.wheelDelta) || p.abs(a.deltaX) < p.abs(a.deltaY) || !e;
                149 < B.length && B.shift();
                B.push(p.abs(g));
                d.scrollBar && (a.preventDefault ? a.preventDefault() : a.returnValue = !1);
                a = c(".fp-section.active");
                a = qa(a);
                g = b - ua;
                ua = b;
                200 < g && (B = []);
                u && (b = ta(B, 10), g = ta(B, 70), b >= g && e && (0 > f ?
                    K("down", a) : K("up", a)));
                return !1
            }
            d.fitToSection && x.stop()
        }

        function va(a) {
            var b = c(".fp-section.active").find(".fp-slides"),
                g = b.find(".fp-slide").length;
            if (!(!b.length || w || 2 > g)) {
                var g = b.find(".fp-slide.active"),
                    f = null,
                    f = "prev" === a ? g.prev(".fp-slide") : g.next(".fp-slide");
                if (!f.length) {
                    if (!d.loopHorizontal) return;
                    f = "prev" === a ? g.siblings(":last") : g.siblings(":first")
                }
                w = !0;
                G(b, f)
            }
        }

        function wa() {
            c(".fp-slide.active").each(function() {
                T(c(this), "internal")
            })
        }

        function z(a, b, g) {
            requestAnimFrame(function() {
                var f =
                    a.position();
                if ("undefined" !== typeof f) {
                    var e = a.hasClass("fp-auto-height") ? f.top - q + a.height() : f.top,
                        f = {
                            element: a,
                            callback: b,
                            isMovementUp: g,
                            dest: f,
                            dtop: e,
                            yMovement: X(a),
                            anchorLink: a.data("anchor"),
                            sectionIndex: a.index(".fp-section"),
                            activeSlide: a.find(".fp-slide.active"),
                            activeSection: c(".fp-section.active"),
                            leavingSection: c(".fp-section.active").index(".fp-section") + 1,
                            localIsResizing: v
                        };
                    if (!(f.activeSection.is(a) && !v || d.scrollBar && n.scrollTop() === f.dtop && !a.hasClass("fp-auto-height"))) {
                        if (f.activeSlide.length) var h =
                            f.activeSlide.data("anchor"),
                            k = f.activeSlide.index();
                        d.autoScrolling && d.continuousVertical && "undefined" !== typeof f.isMovementUp && (!f.isMovementUp && "up" == f.yMovement || f.isMovementUp && "down" == f.yMovement) && (f.isMovementUp ? c(".fp-section.active").before(f.activeSection.nextAll(".fp-section")) : c(".fp-section.active").after(f.activeSection.prevAll(".fp-section").get().reverse()), H(c(".fp-section.active").position().top), wa(), f.wrapAroundElements = f.activeSection, f.dest = f.element.position(), f.dtop = f.dest.top,
                            f.yMovement = X(f.element));
                        if (c.isFunction(d.onLeave) && !f.localIsResizing) {
                            if (!1 === d.onLeave.call(f.activeSection, f.leavingSection, f.sectionIndex + 1, f.yMovement)) return;
                            Va(f.activeSection)
                        }
                        a.addClass("active").siblings().removeClass("active");
                        J(a);
                        u = !1;
                        Y(k, h, f.anchorLink, f.sectionIndex);
                        Wa(f);
                        y = f.anchorLink;
                        V(f.anchorLink, f.sectionIndex)
                    }
                }
            })
        }

        function Wa(a) {
            if (d.css3 && d.autoScrolling && !d.scrollBar) xa("translate3d(0px, -" + a.dtop + "px, 0px)", !0), d.scrollingSpeed ? ca = setTimeout(function() {
                    da(a)
                }, d.scrollingSpeed) :
                da(a);
            else {
                var b = Xa(a);
                c(b.element).animate(b.options, d.scrollingSpeed, d.easing).promise().done(function() {
                    da(a)
                })
            }
        }

        function Xa(a) {
            var b = {};
            d.autoScrolling && !d.scrollBar ? (b.options = {
                top: -a.dtop
            }, b.element = ".fullpage-wrapper") : (b.options = {
                scrollTop: a.dtop
            }, b.element = "html, body");
            return b
        }

        function da(a) {
            a.wrapAroundElements && a.wrapAroundElements.length && (a.isMovementUp ? c(".fp-section:first").before(a.wrapAroundElements) : c(".fp-section:last").after(a.wrapAroundElements), H(c(".fp-section.active").position().top),
                wa());
            a.element.find(".fp-scrollable").mouseover();
            e.setFitToSection(!a.element.hasClass("fp-auto-height"));
            c.isFunction(d.afterLoad) && !a.localIsResizing && d.afterLoad.call(a.element, a.anchorLink, a.sectionIndex + 1);
            oa(a.element);
            u = !0;
            c.isFunction(a.callback) && a.callback.call(this)
        }

        function J(a) {
            var b = a.find(".fp-slide.active");
            b.length && (a = c(b));
            a.find("img[data-src], source[data-src], audio[data-src]").each(function() {
                c(this).attr("src", c(this).data("src"));
                c(this).removeAttr("data-src");
                c(this).is("source") &&
                    c(this).closest("video").get(0).load()
            })
        }

        function oa(a) {
            a.find("video, audio").each(function() {
                var a = c(this).get(0);
                a.hasAttribute("autoplay") && "function" === typeof a.play && a.play()
            })
        }

        function Va(a) {
            a.find("video, audio").each(function() {
                var a = c(this).get(0);
                a.hasAttribute("data-ignore") || "function" !== typeof a.pause || a.pause()
            })
        }

        function ya() {
            if (!W && !d.lockAnchors) {
                var a = l.location.hash.replace("#", "").split("/"),
                    b = a[0],
                    a = a[1],
                    c = "undefined" === typeof y,
                    f = "undefined" === typeof y && "undefined" === typeof a &&
                    !w;
                b.length && (b && b !== y && !c || f || !w && ea != a) && U(b, a)
            }
        }

        function Ya(a) {
            u && (a.pageY < O ? e.moveSectionUp() : a.pageY > O && e.moveSectionDown());
            O = a.pageY
        }

        function G(a, b) {
            var g = b.position(),
                f = b.index(),
                e = a.closest(".fp-section"),
                h = e.index(".fp-section"),
                k = e.data("anchor"),
                l = e.find(".fp-slidesNav"),
                m = fa(b),
                n = v;
            if (d.onSlideLeave) {
                var q = e.find(".fp-slide.active"),
                    r = q.index(),
                    t;
                t = r == f ? "none" : r > f ? "left" : "right";
                if (!n && "none" !== t && c.isFunction(d.onSlideLeave) && !1 === d.onSlideLeave.call(q, k, h + 1, r, t, f)) {
                    w = !1;
                    return
                }
            }
            b.addClass("active").siblings().removeClass("active");
            n || J(b);
            !d.loopHorizontal && d.controlArrows && (e.find(".fp-controlArrow.fp-prev").toggle(0 !== f), e.find(".fp-controlArrow.fp-next").toggle(!b.is(":last-child")));
            e.hasClass("active") && Y(f, m, k, h);
            var u = function() {
                n || c.isFunction(d.afterSlideLoad) && d.afterSlideLoad.call(b, k, h + 1, m, f);
                w = !1
            };
            d.css3 ? (g = "translate3d(-" + p.round(g.left) + "px, 0px, 0px)", za(a.find(".fp-slidesContainer"), 0 < d.scrollingSpeed).css(Aa(g)), ga = setTimeout(function() {
                u()
            }, d.scrollingSpeed, d.easing)) : a.animate({
                    scrollLeft: p.round(g.left)
                },
                d.scrollingSpeed, d.easing,
                function() {
                    u()
                });
            l.find(".active").removeClass("active");
            l.find("li").eq(f).find("a").addClass("active")
        }

        function Ba() {
            ja();
            if (P) {
                var a = c(m.activeElement);
                a.is("textarea") || a.is("input") || a.is("select") || (a = n.height(), p.abs(a - ha) > 20 * p.max(ha, a) / 100 && (e.reBuild(!0), ha = a))
            } else clearTimeout(ia), ia = setTimeout(function() {
                e.reBuild(!0)
            }, 350)
        }

        function ja() {
            var a = d.responsive || d.responsiveWidth,
                b = d.responsiveHeight;
            a && e.setResponsive(n.width() < a);
            b && (h.hasClass("fp-responsive") ||
                e.setResponsive(n.height() < b))
        }

        function za(a) {
            var b = "all " + d.scrollingSpeed + "ms " + d.easingcss3;
            a.removeClass("fp-notransition");
            return a.css({
                "-webkit-transition": b,
                transition: b
            })
        }

        function Za(a, b) {
            if (825 > a || 900 > b) {
                var d = p.min(100 * a / 825, 100 * b / 900).toFixed(2);
                r.css("font-size", d + "%")
            } else r.css("font-size", "100%")
        }

        function V(a, b) {
            d.menu && (c(d.menu).find(".active").removeClass("active"), c(d.menu).find('[data-menuanchor="' + a + '"]').addClass("active"));
            d.navigation && (c("#fp-nav").find(".active").removeClass("active"),
                a ? c("#fp-nav").find('a[href="#' + a + '"]').addClass("active") : c("#fp-nav").find("li").eq(b).find("a").addClass("active"))
        }

        function X(a) {
            var b = c(".fp-section.active").index(".fp-section");
            a = a.index(".fp-section");
            return b == a ? "none" : b > a ? "up" : "down"
        }

        function I(a) {
            a.css("overflow", "hidden");
            var b = a.closest(".fp-section"),
                c = a.find(".fp-scrollable"),
                f;
            c.length ? f = c.get(0).scrollHeight : (f = a.get(0).scrollHeight, d.verticalCentered && (f = a.find(".fp-tableCell").get(0).scrollHeight));
            b = q - parseInt(b.css("padding-bottom")) -
                parseInt(b.css("padding-top"));
            f > b ? c.length ? c.css("height", b + "px").parent().css("height", b + "px") : (d.verticalCentered ? a.find(".fp-tableCell").wrapInner('<div class="fp-scrollable" />') : a.wrapInner('<div class="fp-scrollable" />'), a.find(".fp-scrollable").slimScroll({
                allowPageScroll: !0,
                height: b + "px",
                size: "10px",
                alwaysVisible: !0
            })) : Ca(a);
            a.css("overflow", "")
        }

        function Ca(a) {
            a.find(".fp-scrollable").children().first().unwrap().unwrap();
            a.find(".slimScrollBar").remove();
            a.find(".slimScrollRail").remove()
        }

        function la(a) {
            a.addClass("fp-table").wrapInner('<div class="fp-tableCell" style="height:' + Da(a) + 'px;" />')
        }

        function Da(a) {
            var b = q;
            if (d.paddingTop || d.paddingBottom) b = a, b.hasClass("fp-section") || (b = a.closest(".fp-section")), a = parseInt(b.css("padding-top")) + parseInt(b.css("padding-bottom")), b = q - a;
            return b
        }

        function xa(a, b) {
            b ? za(h) : h.addClass("fp-notransition");
            h.css(Aa(a));
            setTimeout(function() {
                h.removeClass("fp-notransition")
            }, 10)
        }

        function Ea(a) {
            var b = c('.fp-section[data-anchor="' + a + '"]');
            b.length ||
                (b = c(".fp-section").eq(a - 1));
            return b
        }

        function U(a, b) {
            var c = Ea(a);
            "undefined" === typeof b && (b = 0);
            a === y || c.hasClass("active") ? Fa(c, b) : z(c, function() {
                Fa(c, b)
            })
        }

        function Fa(a, b) {
            if ("undefined" !== typeof b) {
                var c = a.find(".fp-slides"),
                    d;
                d = a.find(".fp-slides");
                var e = d.find('.fp-slide[data-anchor="' + b + '"]');
                e.length || (e = d.find(".fp-slide").eq(b));
                d = e;
                d.length && G(c, d)
            }
        }

        function Sa(a, b) {
            a.append('<div class="fp-slidesNav"><ul></ul></div>');
            var c = a.find(".fp-slidesNav");
            c.addClass(d.slidesNavPosition);
            for (var f =
                    0; f < b; f++) c.find("ul").append('<li><a href="#"><span></span></a></li>');
            c.css("margin-left", "-" + c.width() / 2 + "px");
            c.find("li").first().find("a").addClass("active")
        }

        function Y(a, b, c, f) {
            f = "";
            d.anchors.length && !d.lockAnchors && (a ? ("undefined" !== typeof c && (f = c), "undefined" === typeof b && (b = a), ea = b, Ga(f + "/" + b)) : ("undefined" !== typeof a && (ea = b), Ga(c)));
            ka()
        }

        function Ga(a) {
            if (d.recordHistory) location.hash = a;
            else if (P || Q) history.replaceState(D, D, "#" + a);
            else {
                var b = l.location.href.split("#")[0];
                l.location.replace(b +
                    "#" + a)
            }
        }

        function fa(a) {
            var b = a.data("anchor");
            a = a.index();
            "undefined" === typeof b && (b = a);
            return b
        }

        function ka() {
            var a = c(".fp-section.active"),
                b = a.find(".fp-slide.active"),
                d = fa(a),
                f = fa(b);
            a.index(".fp-section");
            a = String(d);
            b.length && (a = a + "-" + f);
            a = a.replace("/", "-").replace("#", "");
            r[0].className = r[0].className.replace(RegExp("\\b\\s?fp-viewing-[^\\s]+\\b", "g"), "");
            r.addClass("fp-viewing-" + a)
        }

        function Ma() {
            var a = m.createElement("p"),
                b, c = {
                    webkitTransform: "-webkit-transform",
                    OTransform: "-o-transform",
                    msTransform: "-ms-transform",
                    MozTransform: "-moz-transform",
                    transform: "transform"
                };
            m.body.insertBefore(a, null);
            for (var d in c) a.style[d] !== D && (a.style[d] = "translate3d(1px,1px,1px)", b = l.getComputedStyle(a).getPropertyValue(c[d]));
            m.body.removeChild(a);
            return b !== D && 0 < b.length && "none" !== b
        }

        function $a() {
            if (P || Q) {
                var a = Ha();
                c(".fullpage-wrapper").off("touchstart " + a.down).on("touchstart " + a.down, Ua);
                c(".fullpage-wrapper").off("touchmove " + a.move).on("touchmove " + a.move, Ta)
            }
        }

        function ab() {
            if (P || Q) {
                var a =
                    Ha();
                c(".fullpage-wrapper").off("touchstart " + a.down);
                c(".fullpage-wrapper").off("touchmove " + a.move)
            }
        }

        function Ha() {
            return l.PointerEvent ? {
                down: "pointerdown",
                move: "pointermove"
            } : {
                down: "MSPointerDown",
                move: "MSPointerMove"
            }
        }

        function sa(a) {
            var b = [];
            b.y = "undefined" !== typeof a.pageY && (a.pageY || a.pageX) ? a.pageY : a.touches[0].pageY;
            b.x = "undefined" !== typeof a.pageX && (a.pageY || a.pageX) ? a.pageX : a.touches[0].pageX;
            Q && ba(a) && d.scrollBar && (b.y = a.touches[0].pageY, b.x = a.touches[0].pageX);
            return b
        }

        function T(a, b) {
            e.setScrollingSpeed(0,
                "internal");
            "undefined" !== typeof b && (v = !0);
            G(a.closest(".fp-slides"), a);
            "undefined" !== typeof b && (v = !1);
            e.setScrollingSpeed(C.scrollingSpeed, "internal")
        }

        function H(a) {
            d.scrollBar ? h.scrollTop(a) : d.css3 ? xa("translate3d(0px, -" + a + "px, 0px)", !1) : h.css("top", -a)
        }

        function Aa(a) {
            return {
                "-webkit-transform": a,
                "-moz-transform": a,
                "-ms-transform": a,
                transform: a
            }
        }

        function Ia(a, b, c) {
            switch (b) {
                case "up":
                    k[c].up = a;
                    break;
                case "down":
                    k[c].down = a;
                    break;
                case "left":
                    k[c].left = a;
                    break;
                case "right":
                    k[c].right = a;
                    break;
                case "all":
                    "m" ==
                    c ? e.setAllowScrolling(a) : e.setKeyboardScrolling(a)
            }
        }

        function bb() {
            H(0);
            c("#fp-nav, .fp-slidesNav, .fp-controlArrow").remove();
            c(".fp-section").css({
                height: "",
                "background-color": "",
                padding: ""
            });
            c(".fp-slide").css({
                width: ""
            });
            h.css({
                height: "",
                position: "",
                "-ms-touch-action": "",
                "touch-action": ""
            });
            x.css({
                overflow: "",
                height: ""
            });
            c("html").removeClass("fp-enabled");
            c.each(r.get(0).className.split(/\s+/), function(a, b) {
                0 === b.indexOf("fp-viewing") && r.removeClass(b)
            });
            c(".fp-section, .fp-slide").each(function() {
                Ca(c(this));
                c(this).removeClass("fp-table active")
            });
            h.addClass("fp-notransition");
            h.find(".fp-tableCell, .fp-slidesContainer, .fp-slides").each(function() {
                c(this).replaceWith(this.childNodes)
            });
            x.scrollTop(0)
        }

        function R(a, b, c) {
            d[a] = b;
            "internal" !== c && (C[a] = b)
        }

        function S(a, b) {
            console && console[a] && console[a]("fullPage: " + b)
        }
        var x = c("html, body"),
            r = c("body"),
            e = c.fn.fullpage;
        d = c.extend({
            menu: !1,
            anchors: [],
            lockAnchors: !1,
            navigation: !1,
            navigationPosition: "right",
            navigationTooltips: [],
            showActiveTooltip: !1,
            slidesNavigation: !1,
            slidesNavPosition: "bottom",
            scrollBar: !1,
            css3: !0,
            scrollingSpeed: 700,
            autoScrolling: !0,
            fitToSection: !0,
            fitToSectionDelay: 1E3,
            easing: "easeInOutCubic",
            easingcss3: "ease",
            loopBottom: !1,
            loopTop: !1,
            loopHorizontal: !0,
            continuousVertical: !1,
            normalScrollElements: null,
            scrollOverflow: !1,
            touchSensitivity: 5,
            normalScrollElementTouchThreshold: 5,
            keyboardScrolling: !0,
            animateAnchor: !0,
            recordHistory: !0,
            controlArrows: !0,
            controlArrowColor: "#fff",
            verticalCentered: !0,
            resize: !1,
            sectionsColor: [],
            paddingTop: 0,
            paddingBottom: 0,
            fixedElements: null,
            responsive: 0,
            responsiveWidth: 0,
            responsiveHeight: 0,
            sectionSelector: ".section",
            slideSelector: ".slide",
            afterLoad: null,
            onLeave: null,
            afterRender: null,
            afterResize: null,
            afterReBuild: null,
            afterSlideLoad: null,
            onSlideLeave: null
        }, d);
        (function() {
            d.continuousVertical && (d.loopTop || d.loopBottom) && (d.continuousVertical = !1, S("warn", "Option `loopTop/loopBottom` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled"));
            d.scrollBar && d.scrollOverflow && S("warn", "Option `scrollBar` is mutually exclusive with `scrollOverflow`. Sections with scrollOverflow might not work well in Firefox");
            d.continuousVertical && d.scrollBar && (d.continuousVertical = !1, S("warn", "Option `scrollBar` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled"));
            c.each(d.anchors, function(a, b) {
                (c("#" + b).length || c('[name="' + b + '"]').length) && S("error", "data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE).")
            })
        })();
        c.extend(c.easing, {
            easeInOutCubic: function(a, b, c, d, e) {
                return 1 > (b /= e / 2) ? d / 2 * b * b * b + c : d / 2 * ((b -= 2) * b * b + 2) + c
            }
        });
        c.extend(c.easing, {
            easeInQuart: function(a,
                b, c, d, e) {
                return d * (b /= e) * b * b * b + c
            }
        });
        e.setAutoScrolling = function(a, b) {
            R("autoScrolling", a, b);
            var g = c(".fp-section.active");
            d.autoScrolling && !d.scrollBar ? (x.css({
                overflow: "hidden",
                height: "100%"
            }), e.setRecordHistory(C.recordHistory, "internal"), h.css({
                "-ms-touch-action": "none",
                "touch-action": "none"
            }), g.length && H(g.position().top)) : (x.css({
                overflow: "visible",
                height: "initial"
            }), e.setRecordHistory(!1, "internal"), h.css({
                "-ms-touch-action": "",
                "touch-action": ""
            }), H(0), g.length && x.scrollTop(g.position().top))
        };
        e.setRecordHistory = function(a, b) {
            R("recordHistory", a, b)
        };
        e.setScrollingSpeed = function(a, b) {
            R("scrollingSpeed", a, b)
        };
        e.setFitToSection = function(a, b) {
            R("fitToSection", a, b)
        };
        e.setLockAnchors = function(a) {
            d.lockAnchors = a
        };
        e.setMouseWheelScrolling = function(a) {
            if (a) {
                a = "";
                var b;
                l.addEventListener ? b = "addEventListener" : (b = "attachEvent", a = "on");
                var c = "onwheel" in m.createElement("div") ? "wheel" : m.onmousewheel !== D ? "mousewheel" : "DOMMouseScroll";
                if ("DOMMouseScroll" == c) m[b](a + "MozMousePixelScroll", A, !1);
                else m[b](a +
                    c, A, !1)
            } else m.addEventListener ? (m.removeEventListener("mousewheel", A, !1), m.removeEventListener("wheel", A, !1), m.removeEventListener("MozMousePixelScroll", A, !1)) : m.detachEvent("onmousewheel", A)
        };
        e.setAllowScrolling = function(a, b) {
            "undefined" !== typeof b ? (b = b.replace(/ /g, "").split(","), c.each(b, function(b, c) {
                Ia(a, c, "m")
            })) : a ? (e.setMouseWheelScrolling(!0), $a()) : (e.setMouseWheelScrolling(!1), ab())
        };
        e.setKeyboardScrolling = function(a, b) {
            "undefined" !== typeof b ? (b = b.replace(/ /g, "").split(","), c.each(b, function(b,
                c) {
                Ia(a, c, "k")
            })) : d.keyboardScrolling = a
        };
        e.moveSectionUp = function() {
            var a = c(".fp-section.active").prev(".fp-section");
            a.length || !d.loopTop && !d.continuousVertical || (a = c(".fp-section").last());
            a.length && z(a, null, !0)
        };
        e.moveSectionDown = function() {
            var a = c(".fp-section.active").next(".fp-section");
            a.length || !d.loopBottom && !d.continuousVertical || (a = c(".fp-section").first());
            a.length && z(a, null, !1)
        };
        e.silentMoveTo = function(a, b) {
            requestAnimFrame(function() {
                e.setScrollingSpeed(0, "internal")
            });
            e.moveTo(a, b);
            requestAnimFrame(function() {
                e.setScrollingSpeed(C.scrollingSpeed, "internal")
            })
        };
        e.moveTo = function(a, b) {
            var c = Ea(a);
            "undefined" !== typeof b ? U(a, b) : 0 < c.length && z(c)
        };
        e.moveSlideRight = function() {
            va("next")
        };
        e.moveSlideLeft = function() {
            va("prev")
        };
        e.reBuild = function(a) {
            if (!h.hasClass("fp-destroyed")) {
                requestAnimFrame(function() {
                    v = !0
                });
                var b = n.width();
                q = n.height();
                d.resize && Za(q, b);
                c(".fp-section").each(function() {
                    var a = c(this).find(".fp-slides"),
                        b = c(this).find(".fp-slide");
                    d.verticalCentered && c(this).find(".fp-tableCell").css("height",
                        Da(c(this)) + "px");
                    c(this).css("height", q + "px");
                    d.scrollOverflow && (b.length ? b.each(function() {
                        I(c(this))
                    }) : I(c(this)));
                    1 < b.length && G(a, a.find(".fp-slide.active"))
                });
                (b = c(".fp-section.active").index(".fp-section")) && e.silentMoveTo(b + 1);
                requestAnimFrame(function() {
                    v = !1
                });
                c.isFunction(d.afterResize) && a && d.afterResize.call(h);
                c.isFunction(d.afterReBuild) && !a && d.afterReBuild.call(h)
            }
        };
        e.setResponsive = function(a) {
            var b = h.hasClass("fp-responsive");
            a ? b || (e.setAutoScrolling(!1, "internal"), e.setFitToSection(!1,
                "internal"), c("#fp-nav").hide(), h.addClass("fp-responsive")) : b && (e.setAutoScrolling(C.autoScrolling, "internal"), e.setFitToSection(C.autoScrolling, "internal"), c("#fp-nav").show(), h.removeClass("fp-responsive"))
        };
        var w = !1,
            P = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),
            Q = "ontouchstart" in l || 0 < navigator.msMaxTouchPoints || navigator.maxTouchPoints,
            h = c(this),
            q = n.height(),
            v = !1,
            Ja = !0,
            y, ea, u = !0,
            B = [],
            N, k = {
                m: {
                    up: !0,
                    down: !0,
                    left: !0,
                    right: !0
                }
            };
        k.k = c.extend(!0, {}, k.m);
        var C = c.extend(!0, {}, d),
            ia, ca, ga, Z, aa, Ka;
        c(this).length && La();
        var W = !1;
        n.on("scroll", pa);
        var F = 0,
            M = 0,
            E = 0,
            L = 0,
            ua = (new Date).getTime();
        l.requestAnimFrame = function() {
            return l.requestAnimationFrame || function(a) {
                a()
            }
        }();
        n.on("hashchange", ya);
        t.keydown(function(a) {
            clearTimeout(Ka);
            var b = c(":focus");
            b.is("textarea") || b.is("input") || b.is("select") || !d.keyboardScrolling || !d.autoScrolling || (-1 < c.inArray(a.which, [40, 38, 32, 33, 34]) && a.preventDefault(), N = a.ctrlKey, Ka =
                setTimeout(function() {
                    var b = a.shiftKey;
                    switch (a.which) {
                        case 38:
                        case 33:
                            k.k.up && e.moveSectionUp();
                            break;
                        case 32:
                            if (b && k.k.up) {
                                e.moveSectionUp();
                                break
                            }
                            case 40:
                            case 34:
                                k.k.down && e.moveSectionDown();
                                break;
                            case 36:
                                k.k.up && e.moveTo(1);
                                break;
                            case 35:
                                k.k.down && e.moveTo(c(".fp-section").length);
                                break;
                            case 37:
                                k.k.left && e.moveSlideLeft();
                                break;
                            case 39:
                                k.k.right && e.moveSlideRight()
                    }
                }, 150))
        });
        t.keyup(function(a) {
            Ja && (N = a.ctrlKey)
        });
        c(l).blur(function() {
            N = Ja = !1
        });
        h.mousedown(function(a) {
            2 == a.which && (O = a.pageY,
                h.on("mousemove", Ya))
        });
        h.mouseup(function(a) {
            2 == a.which && h.off("mousemove")
        });
        var O = 0;
        t.on("click touchstart", "#fp-nav a", function(a) {
            a.preventDefault();
            a = c(this).parent().index();
            z(c(".fp-section").eq(a))
        });
        t.on("click touchstart", ".fp-slidesNav a", function(a) {
            a.preventDefault();
            a = c(this).closest(".fp-section").find(".fp-slides");
            var b = a.find(".fp-slide").eq(c(this).closest("li").index());
            G(a, b)
        });
        d.normalScrollElements && (t.on("mouseenter", d.normalScrollElements, function() {
                e.setMouseWheelScrolling(!1)
            }),
            t.on("mouseleave", d.normalScrollElements, function() {
                e.setMouseWheelScrolling(!0)
            }));
        c(".fp-section").on("click touchstart", ".fp-controlArrow", function() {
            c(this).hasClass("fp-prev") ? k.m.left && e.moveSlideLeft() : k.m.right && e.moveSlideRight()
        });
        n.resize(Ba);
        var ha = q;
        e.destroy = function(a) {
            e.setAutoScrolling(!1, "internal");
            e.setAllowScrolling(!1);
            e.setKeyboardScrolling(!1);
            h.addClass("fp-destroyed");
            clearTimeout(ga);
            clearTimeout(ca);
            clearTimeout(ia);
            clearTimeout(Z);
            clearTimeout(aa);
            n.off("scroll", pa).off("hashchange",
                ya).off("resize", Ba);
            t.off("click", "#fp-nav a").off("mouseenter", "#fp-nav li").off("mouseleave", "#fp-nav li").off("click", ".fp-slidesNav a").off("mouseover", d.normalScrollElements).off("mouseout", d.normalScrollElements);
            c(".fp-section").off("click", ".fp-controlArrow");
            clearTimeout(ga);
            clearTimeout(ca);
            a && bb()
        }
    }
});

/**
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

(function(window, document) {
    'use strict';


    // Exits early if all IntersectionObserver and IntersectionObserverEntry
    // features are natively supported.
    if ('IntersectionObserver' in window &&
        'IntersectionObserverEntry' in window &&
        'intersectionRatio' in window.IntersectionObserverEntry.prototype) {

        // Minimal polyfill for Edge 15's lack of `isIntersecting`
        // See: https://github.com/WICG/IntersectionObserver/issues/211
        if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {
            Object.defineProperty(window.IntersectionObserverEntry.prototype,
                'isIntersecting', {
                    get: function() {
                        return this.intersectionRatio > 0;
                    }
                });
        }
        return;
    }


    /**
     * An IntersectionObserver registry. This registry exists to hold a strong
     * reference to IntersectionObserver instances currently observering a target
     * element. Without this registry, instances without another reference may be
     * garbage collected.
     */
    var registry = [];


    /**
     * Creates the global IntersectionObserverEntry constructor.
     * https://wicg.github.io/IntersectionObserver/#intersection-observer-entry
     * @param {Object} entry A dictionary of instance properties.
     * @constructor
     */
    function IntersectionObserverEntry(entry) {
        this.time = entry.time;
        this.target = entry.target;
        this.rootBounds = entry.rootBounds;
        this.boundingClientRect = entry.boundingClientRect;
        this.intersectionRect = entry.intersectionRect || getEmptyRect();
        this.isIntersecting = !!entry.intersectionRect;

        // Calculates the intersection ratio.
        var targetRect = this.boundingClientRect;
        var targetArea = targetRect.width * targetRect.height;
        var intersectionRect = this.intersectionRect;
        var intersectionArea = intersectionRect.width * intersectionRect.height;

        // Sets intersection ratio.
        if (targetArea) {
            this.intersectionRatio = intersectionArea / targetArea;
        } else {
            // If area is zero and is intersecting, sets to 1, otherwise to 0
            this.intersectionRatio = this.isIntersecting ? 1 : 0;
        }
    }


    /**
     * Creates the global IntersectionObserver constructor.
     * https://wicg.github.io/IntersectionObserver/#intersection-observer-interface
     * @param {Function} callback The function to be invoked after intersection
     *     changes have queued. The function is not invoked if the queue has
     *     been emptied by calling the `takeRecords` method.
     * @param {Object=} opt_options Optional configuration options.
     * @constructor
     */
    function IntersectionObserver(callback, opt_options) {

        var options = opt_options || {};

        if (typeof callback != 'function') {
            throw new Error('callback must be a function');
        }

        if (options.root && options.root.nodeType != 1) {
            throw new Error('root must be an Element');
        }

        // Binds and throttles `this._checkForIntersections`.
        this._checkForIntersections = throttle(
            this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);

        // Private properties.
        this._callback = callback;
        this._observationTargets = [];
        this._queuedEntries = [];
        this._rootMarginValues = this._parseRootMargin(options.rootMargin);

        // Public properties.
        this.thresholds = this._initThresholds(options.threshold);
        this.root = options.root || null;
        this.rootMargin = this._rootMarginValues.map(function(margin) {
            return margin.value + margin.unit;
        }).join(' ');
    }


    /**
     * The minimum interval within which the document will be checked for
     * intersection changes.
     */
    IntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;


    /**
     * The frequency in which the polyfill polls for intersection changes.
     * this can be updated on a per instance basis and must be set prior to
     * calling `observe` on the first target.
     */
    IntersectionObserver.prototype.POLL_INTERVAL = null;


    /**
     * Starts observing a target element for intersection changes based on
     * the thresholds values.
     * @param {Element} target The DOM element to observe.
     */
    IntersectionObserver.prototype.observe = function(target) {
        // If the target is already being observed, do nothing.
        if (this._observationTargets.some(function(item) {
                return item.element == target;
            })) {
            return;
        }

        if (!(target && target.nodeType == 1)) {
            throw new Error('target must be an Element');
        }

        this._registerInstance();
        this._observationTargets.push({
            element: target,
            entry: null
        });
        this._monitorIntersections();
    };


    /**
     * Stops observing a target element for intersection changes.
     * @param {Element} target The DOM element to observe.
     */
    IntersectionObserver.prototype.unobserve = function(target) {
        this._observationTargets =
            this._observationTargets.filter(function(item) {

                return item.element != target;
            });
        if (!this._observationTargets.length) {
            this._unmonitorIntersections();
            this._unregisterInstance();
        }
    };


    /**
     * Stops observing all target elements for intersection changes.
     */
    IntersectionObserver.prototype.disconnect = function() {
        this._observationTargets = [];
        this._unmonitorIntersections();
        this._unregisterInstance();
    };


    /**
     * Returns any queue entries that have not yet been reported to the
     * callback and clears the queue. This can be used in conjunction with the
     * callback to obtain the absolute most up-to-date intersection information.
     * @return {Array} The currently queued entries.
     */
    IntersectionObserver.prototype.takeRecords = function() {
        var records = this._queuedEntries.slice();
        this._queuedEntries = [];
        return records;
    };


    /**
     * Accepts the threshold value from the user configuration object and
     * returns a sorted array of unique threshold values. If a value is not
     * between 0 and 1 and error is thrown.
     * @private
     * @param {Array|number=} opt_threshold An optional threshold value or
     *     a list of threshold values, defaulting to [0].
     * @return {Array} A sorted list of unique and valid threshold values.
     */
    IntersectionObserver.prototype._initThresholds = function(opt_threshold) {
        var threshold = opt_threshold || [0];
        if (!Array.isArray(threshold)) threshold = [threshold];

        return threshold.sort().filter(function(t, i, a) {
            if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {
                throw new Error('threshold must be a number between 0 and 1 inclusively');
            }
            return t !== a[i - 1];
        });
    };


    /**
     * Accepts the rootMargin value from the user configuration object
     * and returns an array of the four margin values as an object containing
     * the value and unit properties. If any of the values are not properly
     * formatted or use a unit other than px or %, and error is thrown.
     * @private
     * @param {string=} opt_rootMargin An optional rootMargin value,
     *     defaulting to '0px'.
     * @return {Array<Object>} An array of margin objects with the keys
     *     value and unit.
     */
    IntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {
        var marginString = opt_rootMargin || '0px';
        var margins = marginString.split(/\s+/).map(function(margin) {
            var parts = /^(-?\d*\.?\d+)(px|%)$/.exec(margin);
            if (!parts) {
                throw new Error('rootMargin must be specified in pixels or percent');
            }
            return {
                value: parseFloat(parts[1]),
                unit: parts[2]
            };
        });

        // Handles shorthand.
        margins[1] = margins[1] || margins[0];
        margins[2] = margins[2] || margins[0];
        margins[3] = margins[3] || margins[1];

        return margins;
    };


    /**
     * Starts polling for intersection changes if the polling is not already
     * happening, and if the page's visibilty state is visible.
     * @private
     */
    IntersectionObserver.prototype._monitorIntersections = function() {
        if (!this._monitoringIntersections) {
            this._monitoringIntersections = true;

            this._checkForIntersections();

            // If a poll interval is set, use polling instead of listening to
            // resize and scroll events or DOM mutations.
            if (this.POLL_INTERVAL) {
                this._monitoringInterval = setInterval(
                    this._checkForIntersections, this.POLL_INTERVAL);
            } else {
                addEvent(window, 'resize', this._checkForIntersections, true);
                addEvent(document, 'scroll', this._checkForIntersections, true);

                if ('MutationObserver' in window) {
                    this._domObserver = new MutationObserver(this._checkForIntersections);
                    this._domObserver.observe(document, {
                        attributes: true,
                        childList: true,
                        characterData: true,
                        subtree: true
                    });
                }
            }
        }
    };


    /**
     * Stops polling for intersection changes.
     * @private
     */
    IntersectionObserver.prototype._unmonitorIntersections = function() {
        if (this._monitoringIntersections) {
            this._monitoringIntersections = false;

            clearInterval(this._monitoringInterval);
            this._monitoringInterval = null;

            removeEvent(window, 'resize', this._checkForIntersections, true);
            removeEvent(document, 'scroll', this._checkForIntersections, true);

            if (this._domObserver) {
                this._domObserver.disconnect();
                this._domObserver = null;
            }
        }
    };


    /**
     * Scans each observation target for intersection changes and adds them
     * to the internal entries queue. If new entries are found, it
     * schedules the callback to be invoked.
     * @private
     */
    IntersectionObserver.prototype._checkForIntersections = function() {
        var rootIsInDom = this._rootIsInDom();
        var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();

        this._observationTargets.forEach(function(item) {
            var target = item.element;
            var targetRect = getBoundingClientRect(target);
            var rootContainsTarget = this._rootContainsTarget(target);
            var oldEntry = item.entry;
            var intersectionRect = rootIsInDom && rootContainsTarget &&
                this._computeTargetAndRootIntersection(target, rootRect);

            var newEntry = item.entry = new IntersectionObserverEntry({
                time: now(),
                target: target,
                boundingClientRect: targetRect,
                rootBounds: rootRect,
                intersectionRect: intersectionRect
            });

            if (!oldEntry) {
                this._queuedEntries.push(newEntry);
            } else if (rootIsInDom && rootContainsTarget) {
                // If the new entry intersection ratio has crossed any of the
                // thresholds, add a new entry.
                if (this._hasCrossedThreshold(oldEntry, newEntry)) {
                    this._queuedEntries.push(newEntry);
                }
            } else {
                // If the root is not in the DOM or target is not contained within
                // root but the previous entry for this target had an intersection,
                // add a new record indicating removal.
                if (oldEntry && oldEntry.isIntersecting) {
                    this._queuedEntries.push(newEntry);
                }
            }
        }, this);

        if (this._queuedEntries.length) {
            this._callback(this.takeRecords(), this);
        }
    };


    /**
     * Accepts a target and root rect computes the intersection between then
     * following the algorithm in the spec.
     * TODO(philipwalton): at this time clip-path is not considered.
     * https://wicg.github.io/IntersectionObserver/#calculate-intersection-rect-algo
     * @param {Element} target The target DOM element
     * @param {Object} rootRect The bounding rect of the root after being
     *     expanded by the rootMargin value.
     * @return {?Object} The final intersection rect object or undefined if no
     *     intersection is found.
     * @private
     */
    IntersectionObserver.prototype._computeTargetAndRootIntersection =
        function(target, rootRect) {

            // If the element isn't displayed, an intersection can't happen.
            if (window.getComputedStyle(target).display == 'none') return;

            var targetRect = getBoundingClientRect(target);
            var intersectionRect = targetRect;
            var parent = getParentNode(target);
            var atRoot = false;

            while (!atRoot) {
                var parentRect = null;
                var parentComputedStyle = parent.nodeType == 1 ?
                    window.getComputedStyle(parent) : {};

                // If the parent isn't displayed, an intersection can't happen.
                if (parentComputedStyle.display == 'none') return;

                if (parent == this.root || parent == document) {
                    atRoot = true;
                    parentRect = rootRect;
                } else {
                    // If the element has a non-visible overflow, and it's not the <body>
                    // or <html> element, update the intersection rect.
                    // Note: <body> and <html> cannot be clipped to a rect that's not also
                    // the document rect, so no need to compute a new intersection.
                    if (parent != document.body &&
                        parent != document.documentElement &&
                        parentComputedStyle.overflow != 'visible') {
                        parentRect = getBoundingClientRect(parent);
                    }
                }

                // If either of the above conditionals set a new parentRect,
                // calculate new intersection data.
                if (parentRect) {
                    intersectionRect = computeRectIntersection(parentRect, intersectionRect);

                    if (!intersectionRect) break;
                }
                parent = getParentNode(parent);
            }
            return intersectionRect;
        };


    /**
     * Returns the root rect after being expanded by the rootMargin value.
     * @return {Object} The expanded root rect.
     * @private
     */
    IntersectionObserver.prototype._getRootRect = function() {
        var rootRect;
        if (this.root) {
            rootRect = getBoundingClientRect(this.root);
        } else {
            // Use <html>/<body> instead of window since scroll bars affect size.
            var html = document.documentElement;
            var body = document.body;
            rootRect = {
                top: 0,
                left: 0,
                right: html.clientWidth || body.clientWidth,
                width: html.clientWidth || body.clientWidth,
                bottom: html.clientHeight || body.clientHeight,
                height: html.clientHeight || body.clientHeight
            };
        }
        return this._expandRectByRootMargin(rootRect);
    };


    /**
     * Accepts a rect and expands it by the rootMargin value.
     * @param {Object} rect The rect object to expand.
     * @return {Object} The expanded rect.
     * @private
     */
    IntersectionObserver.prototype._expandRectByRootMargin = function(rect) {
        var margins = this._rootMarginValues.map(function(margin, i) {
            return margin.unit == 'px' ? margin.value :
                margin.value * (i % 2 ? rect.width : rect.height) / 100;
        });
        var newRect = {
            top: rect.top - margins[0],
            right: rect.right + margins[1],
            bottom: rect.bottom + margins[2],
            left: rect.left - margins[3]
        };
        newRect.width = newRect.right - newRect.left;
        newRect.height = newRect.bottom - newRect.top;

        return newRect;
    };


    /**
     * Accepts an old and new entry and returns true if at least one of the
     * threshold values has been crossed.
     * @param {?IntersectionObserverEntry} oldEntry The previous entry for a
     *    particular target element or null if no previous entry exists.
     * @param {IntersectionObserverEntry} newEntry The current entry for a
     *    particular target element.
     * @return {boolean} Returns true if a any threshold has been crossed.
     * @private
     */
    IntersectionObserver.prototype._hasCrossedThreshold =
        function(oldEntry, newEntry) {

            // To make comparing easier, an entry that has a ratio of 0
            // but does not actually intersect is given a value of -1
            var oldRatio = oldEntry && oldEntry.isIntersecting ?
                oldEntry.intersectionRatio || 0 : -1;
            var newRatio = newEntry.isIntersecting ?
                newEntry.intersectionRatio || 0 : -1;

            // Ignore unchanged ratios
            if (oldRatio === newRatio) return;

            for (var i = 0; i < this.thresholds.length; i++) {
                var threshold = this.thresholds[i];

                // Return true if an entry matches a threshold or if the new ratio
                // and the old ratio are on the opposite sides of a threshold.
                if (threshold == oldRatio || threshold == newRatio ||
                    threshold < oldRatio !== threshold < newRatio) {
                    return true;
                }
            }
        };


    /**
     * Returns whether or not the root element is an element and is in the DOM.
     * @return {boolean} True if the root element is an element and is in the DOM.
     * @private
     */
    IntersectionObserver.prototype._rootIsInDom = function() {
        return !this.root || containsDeep(document, this.root);
    };


    /**
     * Returns whether or not the target element is a child of root.
     * @param {Element} target The target element to check.
     * @return {boolean} True if the target element is a child of root.
     * @private
     */
    IntersectionObserver.prototype._rootContainsTarget = function(target) {
        return containsDeep(this.root || document, target);
    };


    /**
     * Adds the instance to the global IntersectionObserver registry if it isn't
     * already present.
     * @private
     */
    IntersectionObserver.prototype._registerInstance = function() {
        if (registry.indexOf(this) < 0) {
            registry.push(this);
        }
    };


    /**
     * Removes the instance from the global IntersectionObserver registry.
     * @private
     */
    IntersectionObserver.prototype._unregisterInstance = function() {
        var index = registry.indexOf(this);
        if (index != -1) registry.splice(index, 1);
    };


    /**
     * Returns the result of the performance.now() method or null in browsers
     * that don't support the API.
     * @return {number} The elapsed time since the page was requested.
     */
    function now() {
        return window.performance && performance.now && performance.now();
    }


    /**
     * Throttles a function and delays its executiong, so it's only called at most
     * once within a given time period.
     * @param {Function} fn The function to throttle.
     * @param {number} timeout The amount of time that must pass before the
     *     function can be called again.
     * @return {Function} The throttled function.
     */
    function throttle(fn, timeout) {
        var timer = null;
        return function() {
            if (!timer) {
                timer = setTimeout(function() {
                    fn();
                    timer = null;
                }, timeout);
            }
        };
    }


    /**
     * Adds an event handler to a DOM node ensuring cross-browser compatibility.
     * @param {Node} node The DOM node to add the event handler to.
     * @param {string} event The event name.
     * @param {Function} fn The event handler to add.
     * @param {boolean} opt_useCapture Optionally adds the even to the capture
     *     phase. Note: this only works in modern browsers.
     */
    function addEvent(node, event, fn, opt_useCapture) {
        if (typeof node.addEventListener == 'function') {
            node.addEventListener(event, fn, opt_useCapture || false);
        } else if (typeof node.attachEvent == 'function') {
            node.attachEvent('on' + event, fn);
        }
    }


    /**
     * Removes a previously added event handler from a DOM node.
     * @param {Node} node The DOM node to remove the event handler from.
     * @param {string} event The event name.
     * @param {Function} fn The event handler to remove.
     * @param {boolean} opt_useCapture If the event handler was added with this
     *     flag set to true, it should be set to true here in order to remove it.
     */
    function removeEvent(node, event, fn, opt_useCapture) {
        if (typeof node.removeEventListener == 'function') {
            node.removeEventListener(event, fn, opt_useCapture || false);
        } else if (typeof node.detatchEvent == 'function') {
            node.detatchEvent('on' + event, fn);
        }
    }


    /**
     * Returns the intersection between two rect objects.
     * @param {Object} rect1 The first rect.
     * @param {Object} rect2 The second rect.
     * @return {?Object} The intersection rect or undefined if no intersection
     *     is found.
     */
    function computeRectIntersection(rect1, rect2) {
        var top = Math.max(rect1.top, rect2.top);
        var bottom = Math.min(rect1.bottom, rect2.bottom);
        var left = Math.max(rect1.left, rect2.left);
        var right = Math.min(rect1.right, rect2.right);
        var width = right - left;
        var height = bottom - top;

        return (width >= 0 && height >= 0) && {
            top: top,
            bottom: bottom,
            left: left,
            right: right,
            width: width,
            height: height
        };
    }


    /**
     * Shims the native getBoundingClientRect for compatibility with older IE.
     * @param {Element} el The element whose bounding rect to get.
     * @return {Object} The (possibly shimmed) rect of the element.
     */
    function getBoundingClientRect(el) {
        var rect;

        try {
            rect = el.getBoundingClientRect();
        } catch (err) {
            // Ignore Windows 7 IE11 "Unspecified error"
            // https://github.com/WICG/IntersectionObserver/pull/205
        }

        if (!rect) return getEmptyRect();

        // Older IE
        if (!(rect.width && rect.height)) {
            rect = {
                top: rect.top,
                right: rect.right,
                bottom: rect.bottom,
                left: rect.left,
                width: rect.right - rect.left,
                height: rect.bottom - rect.top
            };
        }
        return rect;
    }


    /**
     * Returns an empty rect object. An empty rect is returned when an element
     * is not in the DOM.
     * @return {Object} The empty rect.
     */
    function getEmptyRect() {
        return {
            top: 0,
            bottom: 0,
            left: 0,
            right: 0,
            width: 0,
            height: 0
        };
    }

    /**
     * Checks to see if a parent element contains a child elemnt (including inside
     * shadow DOM).
     * @param {Node} parent The parent element.
     * @param {Node} child The child element.
     * @return {boolean} True if the parent node contains the child node.
     */
    function containsDeep(parent, child) {
        var node = child;
        while (node) {
            if (node == parent) return true;

            node = getParentNode(node);
        }
        return false;
    }


    /**
     * Gets the parent node of an element or its host element if the parent node
     * is a shadow root.
     * @param {Node} node The node whose parent to get.
     * @return {Node|null} The parent node or null if no parent exists.
     */
    function getParentNode(node) {
        var parent = node.parentNode;

        if (parent && parent.nodeType == 11 && parent.host) {
            // If the parent is a shadow root, return the host element.
            return parent.host;
        }
        return parent;
    }


    // Exposes the constructors globally.
    window.IntersectionObserver = IntersectionObserver;
    window.IntersectionObserverEntry = IntersectionObserverEntry;

}(window, document));


// ----------------------------------------------------------------------------
// markItUp! Universal MarkUp Engine, JQuery plugin
// v 1.1.x
// Dual licensed under the MIT and GPL licenses.
// ----------------------------------------------------------------------------
// Copyright (C) 2007-2012 Jay Salvat
// http://markitup.jaysalvat.com/
// ----------------------------------------------------------------------------
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
// 
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
// ----------------------------------------------------------------------------
(function($) {
    $.fn.markItUp = function(settings, extraSettings) {
        var method, params, options, ctrlKey, shiftKey, altKey;
        ctrlKey = shiftKey = altKey = false;

        if (typeof settings == 'string') {
            method = settings;
            params = extraSettings;
        }

        options = {
            id: '',
            nameSpace: '',
            root: '',
            previewHandler: false,
            previewInWindow: '', // 'width=800, height=600, resizable=yes, scrollbars=yes'
            previewInElement: '',
            previewAutoRefresh: true,
            previewPosition: 'after',
            previewTemplatePath: '~/templates/preview.html',
            previewParser: false,
            previewParserPath: '',
            previewParserVar: 'data',
            resizeHandle: true,
            beforeInsert: '',
            afterInsert: '',
            onEnter: {},
            onShiftEnter: {},
            onCtrlEnter: {},
            onTab: {},
            markupSet: [{
                /* set */ }]
        };
        $.extend(options, settings, extraSettings);

        // compute markItUp! path
        if (!options.root) {
            $('script').each(function(a, tag) {
                miuScript = $(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);
                if (miuScript !== null) {
                    options.root = miuScript[1];
                }
            });
        }

        // Quick patch to keep compatibility with jQuery 1.9
        var uaMatch = function(ua) {
            ua = ua.toLowerCase();

            var match = /(chrome)[ \/]([\w.]+)/.exec(ua) ||
                /(webkit)[ \/]([\w.]+)/.exec(ua) ||
                /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua) ||
                /(msie) ([\w.]+)/.exec(ua) ||
                ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua) || [];

            return {
                browser: match[1] || "",
                version: match[2] || "0"
            };
        };
        var matched = uaMatch(navigator.userAgent);
        var browser = {};

        if (matched.browser) {
            browser[matched.browser] = true;
            browser.version = matched.version;
        }
        if (browser.chrome) {
            browser.webkit = true;
        } else if (browser.webkit) {
            browser.safari = true;
        }

        return this.each(function() {
            var $$, textarea, levels, scrollPosition, caretPosition, caretOffset,
                clicked, hash, header, footer, previewWindow, template, iFrame, abort;
            $$ = $(this);
            textarea = this;
            levels = [];
            abort = false;
            scrollPosition = caretPosition = 0;
            caretOffset = -1;

            options.previewParserPath = localize(options.previewParserPath);
            options.previewTemplatePath = localize(options.previewTemplatePath);

            if (method) {
                switch (method) {
                    case 'remove':
                        remove();
                        break;
                    case 'insert':
                        markup(params);
                        break;
                    default:
                        $.error('Method ' + method + ' does not exist on jQuery.markItUp');
                }
                return;
            }

            // apply the computed path to ~/
            function localize(data, inText) {
                if (inText) {
                    return data.replace(/("|')~\//g, "$1" + options.root);
                }
                return data.replace(/^~\//, options.root);
            }

            // init and build editor
            function init() {
                id = '';
                nameSpace = '';
                if (options.id) {
                    id = 'id="' + options.id + '"';
                } else if ($$.attr("id")) {
                    id = 'id="markItUp' + ($$.attr("id").substr(0, 1).toUpperCase()) + ($$.attr("id").substr(1)) + '"';

                }
                if (options.nameSpace) {
                    nameSpace = 'class="' + options.nameSpace + '"';
                }
                $$.wrap('<div ' + nameSpace + '></div>');
                $$.wrap('<div ' + id + ' class="markItUp"></div>');
                $$.wrap('<div class="markItUpContainer"></div>');
                $$.addClass("markItUpEditor");

                // add the header before the textarea
                header = $('<div class="markItUpHeader"></div>').insertBefore($$);
                $(dropMenus(options.markupSet)).appendTo(header);

                // add the footer after the textarea
                footer = $('<div class="markItUpFooter"></div>').insertAfter($$);

                // add the resize handle after textarea
                if (options.resizeHandle === true && browser.safari !== true) {
                    resizeHandle = $('<div class="markItUpResizeHandle"></div>')
                        .insertAfter($$)
                        .bind("mousedown.markItUp", function(e) {
                            var h = $$.height(),
                                y = e.clientY,
                                mouseMove, mouseUp;
                            mouseMove = function(e) {
                                $$.css("height", Math.max(20, e.clientY + h - y) + "px");
                                return false;
                            };
                            mouseUp = function(e) {
                                $("html").unbind("mousemove.markItUp", mouseMove).unbind("mouseup.markItUp", mouseUp);
                                return false;
                            };
                            $("html").bind("mousemove.markItUp", mouseMove).bind("mouseup.markItUp", mouseUp);
                        });
                    footer.append(resizeHandle);
                }

                // listen key events
                $$.bind('keydown.markItUp', keyPressed).bind('keyup', keyPressed);

                // bind an event to catch external calls
                $$.bind("insertion.markItUp", function(e, settings) {
                    if (settings.target !== false) {
                        get();
                    }
                    if (textarea === $.markItUp.focused) {
                        markup(settings);
                    }
                });

                // remember the last focus
                $$.bind('focus.markItUp', function() {
                    $.markItUp.focused = this;
                });

                if (options.previewInElement) {
                    refreshPreview();
                }
            }

            // recursively build header with dropMenus from markupset
            function dropMenus(markupSet) {
                var ul = $('<ul></ul>'),
                    i = 0;
                $('li:hover > ul', ul).css('display', 'block');
                $.each(markupSet, function() {
                    var button = this,
                        t = '',
                        title, li, j;
                    title = (button.key) ? (button.name || '') + ' [Ctrl+' + button.key + ']' : (button.name || '');
                    key = (button.key) ? 'accesskey="' + button.key + '"' : '';
                    if (button.separator) {
                        li = $('<li class="markItUpSeparator">' + (button.separator || '') + '</li>').appendTo(ul);
                    } else {
                        i++;
                        for (j = levels.length - 1; j >= 0; j--) {
                            t += levels[j] + "-";
                        }
                        li = $('<li class="markItUpButton markItUpButton' + t + (i) + ' ' + (button.className || '') + '"><a href="" ' + key + ' title="' + title + '">' + (button.name || '') + '</a></li>')
                            .bind("contextmenu.markItUp", function() { // prevent contextmenu on mac and allow ctrl+click
                                return false;
                            }).bind('click.markItUp', function(e) {
                                e.preventDefault();
                            }).bind("focusin.markItUp", function() {
                                $$.focus();
                            }).bind('mouseup', function() {
                                if (button.call) {
                                    eval(button.call)();
                                }
                                setTimeout(function() {
                                    markup(button)
                                }, 1);
                                return false;
                            }).bind('mouseenter.markItUp', function() {
                                $('> ul', this).show();
                                $(document).one('click', function() { // close dropmenu if click outside
                                    $('ul ul', header).hide();
                                });
                            }).bind('mouseleave.markItUp', function() {
                                $('> ul', this).hide();
                            }).appendTo(ul);
                        if (button.dropMenu) {
                            levels.push(i);
                            $(li).addClass('markItUpDropMenu').append(dropMenus(button.dropMenu));
                        }
                    }
                });
                levels.pop();
                return ul;
            }

            // markItUp! markups
            function magicMarkups(string) {
                if (string) {
                    string = string.toString();
                    string = string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,
                        function(x, a) {
                            var b = a.split('|!|');
                            if (altKey === true) {
                                return (b[1] !== undefined) ? b[1] : b[0];
                            } else {
                                return (b[1] === undefined) ? "" : b[0];
                            }
                        }
                    );
                    // [![prompt]!], [![prompt:!:value]!]
                    string = string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,
                        function(x, a) {
                            var b = a.split(':!:');
                            if (abort === true) {
                                return false;
                            }
                            value = prompt(b[0], (b[1]) ? b[1] : '');
                            if (value === null) {
                                abort = true;
                            }
                            return value;
                        }
                    );
                    return string;
                }
                return "";
            }

            // prepare action
            function prepare(action) {
                if ($.isFunction(action)) {
                    action = action(hash);
                }
                return magicMarkups(action);
            }

            // build block to insert
            function build(string) {
                var openWith = prepare(clicked.openWith);
                var placeHolder = prepare(clicked.placeHolder);
                var replaceWith = prepare(clicked.replaceWith);
                var closeWith = prepare(clicked.closeWith);
                var openBlockWith = prepare(clicked.openBlockWith);
                var closeBlockWith = prepare(clicked.closeBlockWith);
                var multiline = clicked.multiline;

                if (replaceWith !== "") {
                    block = openWith + replaceWith + closeWith;
                } else if (selection === '' && placeHolder !== '') {
                    block = openWith + placeHolder + closeWith;
                } else {
                    string = string || selection;

                    var lines = [string],
                        blocks = [];

                    if (multiline === true) {
                        lines = string.split(/\r?\n/);
                    }

                    for (var l = 0; l < lines.length; l++) {
                        line = lines[l];
                        var trailingSpaces;
                        if (trailingSpaces = line.match(/ *$/)) {
                            blocks.push(openWith + line.replace(/ *$/g, '') + closeWith + trailingSpaces);
                        } else {
                            blocks.push(openWith + line + closeWith);
                        }
                    }

                    block = blocks.join("\n");
                }

                block = openBlockWith + block + closeBlockWith;

                return {
                    block: block,
                    openBlockWith: openBlockWith,
                    openWith: openWith,
                    replaceWith: replaceWith,
                    placeHolder: placeHolder,
                    closeWith: closeWith,
                    closeBlockWith: closeBlockWith
                };
            }

            // define markup to insert
            function markup(button) {
                var len, j, n, i;
                hash = clicked = button;
                get();
                $.extend(hash, {
                    line: "",
                    root: options.root,
                    textarea: textarea,
                    selection: (selection || ''),
                    caretPosition: caretPosition,
                    ctrlKey: ctrlKey,
                    shiftKey: shiftKey,
                    altKey: altKey
                });
                // callbacks before insertion
                prepare(options.beforeInsert);
                prepare(clicked.beforeInsert);
                if ((ctrlKey === true && shiftKey === true) || button.multiline === true) {
                    prepare(clicked.beforeMultiInsert);
                }
                $.extend(hash, {
                    line: 1
                });

                if ((ctrlKey === true && shiftKey === true)) {
                    lines = selection.split(/\r?\n/);
                    for (j = 0, n = lines.length, i = 0; i < n; i++) {
                        if ($.trim(lines[i]) !== '') {
                            $.extend(hash, {
                                line: ++j,
                                selection: lines[i]
                            });
                            lines[i] = build(lines[i]).block;
                        } else {
                            lines[i] = "";
                        }
                    }

                    string = {
                        block: lines.join('\n')
                    };
                    start = caretPosition;
                    len = string.block.length + ((browser.opera) ? n - 1 : 0);
                } else if (ctrlKey === true) {
                    string = build(selection);
                    start = caretPosition + string.openWith.length;
                    len = string.block.length - string.openWith.length - string.closeWith.length;
                    len = len - (string.block.match(/ $/) ? 1 : 0);
                    len -= fixIeBug(string.block);
                } else if (shiftKey === true) {
                    string = build(selection);
                    start = caretPosition;
                    len = string.block.length;
                    len -= fixIeBug(string.block);
                } else {
                    string = build(selection);
                    start = caretPosition + string.block.length;
                    len = 0;
                    start -= fixIeBug(string.block);
                }
                if ((selection === '' && string.replaceWith === '')) {
                    caretOffset += fixOperaBug(string.block);

                    start = caretPosition + string.openBlockWith.length + string.openWith.length;
                    len = string.block.length - string.openBlockWith.length - string.openWith.length - string.closeWith.length - string.closeBlockWith.length;

                    caretOffset = $$.val().substring(caretPosition, $$.val().length).length;
                    caretOffset -= fixOperaBug($$.val().substring(0, caretPosition));
                }
                $.extend(hash, {
                    caretPosition: caretPosition,
                    scrollPosition: scrollPosition
                });

                if (string.block !== selection && abort === false) {
                    insert(string.block);
                    set(start, len);
                } else {
                    caretOffset = -1;
                }
                get();

                $.extend(hash, {
                    line: '',
                    selection: selection
                });

                // callbacks after insertion
                if ((ctrlKey === true && shiftKey === true) || button.multiline === true) {
                    prepare(clicked.afterMultiInsert);
                }
                prepare(clicked.afterInsert);
                prepare(options.afterInsert);

                // refresh preview if opened
                if (previewWindow && options.previewAutoRefresh) {
                    refreshPreview();
                }

                // reinit keyevent
                shiftKey = altKey = ctrlKey = abort = false;
            }

            // Substract linefeed in Opera
            function fixOperaBug(string) {
                if (browser.opera) {
                    return string.length - string.replace(/\n*/g, '').length;
                }
                return 0;
            }
            // Substract linefeed in IE
            function fixIeBug(string) {
                if (browser.msie) {
                    return string.length - string.replace(/\r*/g, '').length;
                }
                return 0;
            }

            // add markup
            function insert(block) {
                if (document.selection) {
                    var newSelection = document.selection.createRange();
                    newSelection.text = block;
                } else {
                    textarea.value = textarea.value.substring(0, caretPosition) + block + textarea.value.substring(caretPosition + selection.length, textarea.value.length);
                }
            }

            // set a selection
            function set(start, len) {
                if (textarea.createTextRange) {
                    // quick fix to make it work on Opera 9.5
                    if (browser.opera && browser.version >= 9.5 && len == 0) {
                        return false;
                    }
                    range = textarea.createTextRange();
                    range.collapse(true);
                    range.moveStart('character', start);
                    range.moveEnd('character', len);
                    range.select();
                } else if (textarea.setSelectionRange) {
                    textarea.setSelectionRange(start, start + len);
                }
                textarea.scrollTop = scrollPosition;
                textarea.focus();
            }

            // get the selection
            function get() {
                textarea.focus();

                scrollPosition = textarea.scrollTop;
                if (document.selection) {
                    selection = document.selection.createRange().text;
                    if (browser.msie) { // ie
                        var range = document.selection.createRange(),
                            rangeCopy = range.duplicate();
                        rangeCopy.moveToElementText(textarea);
                        caretPosition = -1;
                        while (rangeCopy.inRange(range)) {
                            rangeCopy.moveStart('character');
                            caretPosition++;
                        }
                    } else { // opera
                        caretPosition = textarea.selectionStart;
                    }
                } else { // gecko & webkit
                    caretPosition = textarea.selectionStart;

                    selection = textarea.value.substring(caretPosition, textarea.selectionEnd);
                }
                return selection;
            }

            // open preview window
            function preview() {
                if (typeof options.previewHandler === 'function') {
                    previewWindow = true;
                } else if (options.previewInElement) {
                    previewWindow = $(options.previewInElement);
                } else if (!previewWindow || previewWindow.closed) {
                    if (options.previewInWindow) {
                        previewWindow = window.open('', 'preview', options.previewInWindow);
                        $(window).unload(function() {
                            previewWindow.close();
                        });
                    } else {
                        iFrame = $('<iframe class="markItUpPreviewFrame"></iframe>');
                        if (options.previewPosition == 'after') {
                            iFrame.insertAfter(footer);
                        } else {
                            iFrame.insertBefore(header);
                        }
                        previewWindow = iFrame[iFrame.length - 1].contentWindow || frame[iFrame.length - 1];
                    }
                } else if (altKey === true) {
                    if (iFrame) {
                        iFrame.remove();
                    } else {
                        previewWindow.close();
                    }
                    previewWindow = iFrame = false;
                }
                if (!options.previewAutoRefresh) {
                    refreshPreview();
                }
                if (options.previewInWindow) {
                    previewWindow.focus();
                }
            }

            // refresh Preview window
            function refreshPreview() {
                renderPreview();
            }

            function renderPreview() {
                var phtml;
                if (options.previewHandler && typeof options.previewHandler === 'function') {
                    options.previewHandler($$.val());
                } else if (options.previewParser && typeof options.previewParser === 'function') {
                    var data = options.previewParser($$.val());
                    writeInPreview(localize(data, 1));
                } else if (options.previewParserPath !== '') {
                    $.ajax({
                        type: 'POST',
                        dataType: 'text',
                        global: false,
                        url: options.previewParserPath,
                        data: options.previewParserVar + '=' + encodeURIComponent($$.val()),
                        success: function(data) {
                            writeInPreview(localize(data, 1));
                        }
                    });
                } else {
                    if (!template) {
                        $.ajax({
                            url: options.previewTemplatePath,
                            dataType: 'text',
                            global: false,
                            success: function(data) {
                                writeInPreview(localize(data, 1).replace(/<!-- content -->/g, $$.val()));
                            }
                        });
                    }
                }
                return false;
            }

            function writeInPreview(data) {
                if (options.previewInElement) {
                    $(options.previewInElement).html(data);
                } else if (previewWindow && previewWindow.document) {
                    try {
                        sp = previewWindow.document.documentElement.scrollTop
                    } catch (e) {
                        sp = 0;
                    }
                    previewWindow.document.open();
                    previewWindow.document.write(data);
                    previewWindow.document.close();
                    previewWindow.document.documentElement.scrollTop = sp;
                }
            }

            // set keys pressed
            function keyPressed(e) {
                shiftKey = e.shiftKey;
                altKey = e.altKey;
                ctrlKey = (!(e.altKey && e.ctrlKey)) ? (e.ctrlKey || e.metaKey) : false;

                if (e.type === 'keydown') {
                    if (ctrlKey === true) {
                        li = $('a[accesskey="' + ((e.keyCode == 13) ? '\\n' : String.fromCharCode(e.keyCode)) + '"]', header).parent('li');
                        if (li.length !== 0) {
                            ctrlKey = false;
                            setTimeout(function() {
                                li.triggerHandler('mouseup');
                            }, 1);
                            return false;
                        }
                    }
                    if (e.keyCode === 13 || e.keyCode === 10) { // Enter key
                        if (ctrlKey === true) { // Enter + Ctrl
                            ctrlKey = false;
                            markup(options.onCtrlEnter);
                            return options.onCtrlEnter.keepDefault;
                        } else if (shiftKey === true) { // Enter + Shift
                            shiftKey = false;
                            markup(options.onShiftEnter);
                            return options.onShiftEnter.keepDefault;
                        } else { // only Enter
                            markup(options.onEnter);
                            return options.onEnter.keepDefault;
                        }
                    }
                    if (e.keyCode === 9) { // Tab key
                        if (shiftKey == true || ctrlKey == true || altKey == true) {
                            return false;
                        }
                        if (caretOffset !== -1) {
                            get();
                            caretOffset = $$.val().length - caretOffset;
                            set(caretOffset, 0);
                            caretOffset = -1;
                            return false;
                        } else {
                            markup(options.onTab);
                            return options.onTab.keepDefault;
                        }
                    }
                }
            }

            function remove() {
                $$.unbind(".markItUp").removeClass('markItUpEditor');
                $$.parent('div').parent('div.markItUp').parent('div').replaceWith($$);
                $$.data('markItUp', null);
            }

            init();
        });
    };

    $.fn.markItUpRemove = function() {
        return this.each(function() {
            $(this).markItUp('remove');
        });
    };

    $.markItUp = function(settings) {
        var options = {
            target: false
        };
        $.extend(options, settings);
        if (options.target) {
            return $(options.target).each(function() {
                $(this).focus();
                $(this).trigger('insertion', [options]);
            });
        } else {
            $('textarea').trigger('insertion', [options]);
        }
    };
})(jQuery);


/*! Picturefill - v2.3.1 - 2015-04-09
 * http://scottjehl.github.io/picturefill
 * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */
window.matchMedia || (window.matchMedia = function() {
        "use strict";
        var a = window.styleMedia || window.media;
        if (!a) {
            var b = document.createElement("style"),
                c = document.getElementsByTagName("script")[0],
                d = null;
            b.type = "text/css", b.id = "matchmediajs-test", c.parentNode.insertBefore(b, c), d = "getComputedStyle" in window && window.getComputedStyle(b, null) || b.currentStyle, a = {
                matchMedium: function(a) {
                    var c = "@media " + a + "{ #matchmediajs-test { width: 1px; } }";
                    return b.styleSheet ? b.styleSheet.cssText = c : b.textContent = c, "1px" === d.width
                }
            }
        }
        return function(b) {
            return {
                matches: a.matchMedium(b || "all"),
                media: b || "all"
            }
        }
    }()),
    function(a, b, c) {
        "use strict";

        function d(b) {
            "object" == typeof module && "object" == typeof module.exports ? module.exports = b : "function" == typeof define && define.amd && define("picturefill", function() {
                return b
            }), "object" == typeof a && (a.picturefill = b)
        }

        function e(a) {
            var b, c, d, e, f, i = a || {};
            b = i.elements || g.getAllElements();
            for (var j = 0, k = b.length; k > j; j++)
                if (c = b[j], d = c.parentNode, e = void 0, f = void 0, "IMG" === c.nodeName.toUpperCase() && (c[g.ns] || (c[g.ns] = {}), i.reevaluate || !c[g.ns].evaluated)) {
                    if (d && "PICTURE" === d.nodeName.toUpperCase()) {
                        if (g.removeVideoShim(d), e = g.getMatch(c, d), e === !1) continue
                    } else e = void 0;
                    (d && "PICTURE" === d.nodeName.toUpperCase() || !g.sizesSupported && c.srcset && h.test(c.srcset)) && g.dodgeSrcset(c), e ? (f = g.processSourceSet(e), g.applyBestCandidate(f, c)) : (f = g.processSourceSet(c), (void 0 === c.srcset || c[g.ns].srcset) && g.applyBestCandidate(f, c)), c[g.ns].evaluated = !0
                }
        }

        function f() {
            function c() {
                clearTimeout(d), d = setTimeout(h, 60)
            }
            g.initTypeDetects(), e();
            var d, f = setInterval(function() {
                    return e(), /^loaded|^i|^c/.test(b.readyState) ? void clearInterval(f) : void 0
                }, 250),
                h = function() {
                    e({
                        reevaluate: !0
                    })
                };
            a.addEventListener ? a.addEventListener("resize", c, !1) : a.attachEvent && a.attachEvent("onresize", c)
        }
        if (a.HTMLPictureElement) return void d(function() {});
        b.createElement("picture");
        var g = a.picturefill || {},
            h = /\s+\+?\d+(e\d+)?w/;
        g.ns = "picturefill",
            function() {
                g.srcsetSupported = "srcset" in c, g.sizesSupported = "sizes" in c, g.curSrcSupported = "currentSrc" in c
            }(), g.trim = function(a) {
                return a.trim ? a.trim() : a.replace(/^\s+|\s+$/g, "")
            }, g.makeUrl = function() {
                var a = b.createElement("a");
                return function(b) {
                    return a.href = b, a.href
                }
            }(), g.restrictsMixedContent = function() {
                return "https:" === a.location.protocol
            }, g.matchesMedia = function(b) {
                return a.matchMedia && a.matchMedia(b).matches
            }, g.getDpr = function() {
                return a.devicePixelRatio || 1
            }, g.getWidthFromLength = function(a) {
                var c;
                if (!a || a.indexOf("%") > -1 != !1 || !(parseFloat(a) > 0 || a.indexOf("calc(") > -1)) return !1;
                a = a.replace("vw", "%"), g.lengthEl || (g.lengthEl = b.createElement("div"), g.lengthEl.style.cssText = "border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden", g.lengthEl.className = "helper-from-picturefill-js"), g.lengthEl.style.width = "0px";
                try {
                    g.lengthEl.style.width = a
                } catch (d) {}
                return b.body.appendChild(g.lengthEl), c = g.lengthEl.offsetWidth, 0 >= c && (c = !1), b.body.removeChild(g.lengthEl), c
            }, g.detectTypeSupport = function(b, c) {
                var d = new a.Image;
                return d.onerror = function() {
                    g.types[b] = !1, e()
                }, d.onload = function() {
                    g.types[b] = 1 === d.width, e()
                }, d.src = c, "pending"
            }, g.types = g.types || {}, g.initTypeDetects = function() {
                g.types["image/jpeg"] = !0, g.types["image/gif"] = !0, g.types["image/png"] = !0, g.types["image/svg+xml"] = b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image", "1.1"), g.types["image/webp"] = g.detectTypeSupport("image/webp", "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")
            }, g.verifyTypeSupport = function(a) {
                var b = a.getAttribute("type");
                if (null === b || "" === b) return !0;
                var c = g.types[b];
                return "string" == typeof c && "pending" !== c ? (g.types[b] = g.detectTypeSupport(b, c), "pending") : "function" == typeof c ? (c(), "pending") : c
            }, g.parseSize = function(a) {
                var b = /(\([^)]+\))?\s*(.+)/g.exec(a);
                return {
                    media: b && b[1],
                    length: b && b[2]
                }
            }, g.findWidthFromSourceSize = function(c) {
                for (var d, e = g.trim(c).split(/\s*,\s*/), f = 0, h = e.length; h > f; f++) {
                    var i = e[f],
                        j = g.parseSize(i),
                        k = j.length,
                        l = j.media;
                    if (k && (!l || g.matchesMedia(l)) && (d = g.getWidthFromLength(k))) break
                }
                return d || Math.max(a.innerWidth || 0, b.documentElement.clientWidth)
            }, g.parseSrcset = function(a) {
                for (var b = [];
                    "" !== a;) {
                    a = a.replace(/^\s+/g, "");
                    var c, d = a.search(/\s/g),
                        e = null;
                    if (-1 !== d) {
                        c = a.slice(0, d);
                        var f = c.slice(-1);
                        if (("," === f || "" === c) && (c = c.replace(/,+$/, ""), e = ""), a = a.slice(d + 1), null === e) {
                            var g = a.indexOf(","); - 1 !== g ? (e = a.slice(0, g), a = a.slice(g + 1)) : (e = a, a = "")
                        }
                    } else c = a, a = "";
                    (c || e) && b.push({
                        url: c,
                        descriptor: e
                    })
                }
                return b
            }, g.parseDescriptor = function(a, b) {
                var c, d = b || "100vw",
                    e = a && a.replace(/(^\s+|\s+$)/g, ""),
                    f = g.findWidthFromSourceSize(d);
                if (e)
                    for (var h = e.split(" "), i = h.length - 1; i >= 0; i--) {
                        var j = h[i],
                            k = j && j.slice(j.length - 1);
                        if ("h" !== k && "w" !== k || g.sizesSupported) {
                            if ("x" === k) {
                                var l = j && parseFloat(j, 10);
                                c = l && !isNaN(l) ? l : 1
                            }
                        } else c = parseFloat(parseInt(j, 10) / f)
                    }
                return c || 1
            }, g.getCandidatesFromSourceSet = function(a, b) {
                for (var c = g.parseSrcset(a), d = [], e = 0, f = c.length; f > e; e++) {
                    var h = c[e];
                    d.push({
                        url: h.url,
                        resolution: g.parseDescriptor(h.descriptor, b)
                    })
                }
                return d
            }, g.dodgeSrcset = function(a) {
                a.srcset && (a[g.ns].srcset = a.srcset, a.srcset = "", a.setAttribute("data-pfsrcset", a[g.ns].srcset))
            }, g.processSourceSet = function(a) {
                var b = a.getAttribute("srcset"),
                    c = a.getAttribute("sizes"),
                    d = [];
                return "IMG" === a.nodeName.toUpperCase() && a[g.ns] && a[g.ns].srcset && (b = a[g.ns].srcset), b && (d = g.getCandidatesFromSourceSet(b, c)), d
            }, g.backfaceVisibilityFix = function(a) {
                var b = a.style || {},
                    c = "webkitBackfaceVisibility" in b,
                    d = b.zoom;
                c && (b.zoom = ".999", c = a.offsetWidth, b.zoom = d)
            }, g.setIntrinsicSize = function() {
                var c = {},
                    d = function(a, b, c) {
                        b && a.setAttribute("width", parseInt(b / c, 10))
                    };
                return function(e, f) {
                    var h;
                    e[g.ns] && !a.pfStopIntrinsicSize && (void 0 === e[g.ns].dims && (e[g.ns].dims = e.getAttribute("width") || e.getAttribute("height")), e[g.ns].dims || (f.url in c ? d(e, c[f.url], f.resolution) : (h = b.createElement("img"), h.onload = function() {
                        if (c[f.url] = h.width, !c[f.url]) try {
                            b.body.appendChild(h), c[f.url] = h.width || h.offsetWidth, b.body.removeChild(h)
                        } catch (a) {}
                        e.src === f.url && d(e, c[f.url], f.resolution), e = null, h.onload = null, h = null
                    }, h.src = f.url)))
                }
            }(), g.applyBestCandidate = function(a, b) {
                var c, d, e;
                a.sort(g.ascendingSort), d = a.length, e = a[d - 1];
                for (var f = 0; d > f; f++)
                    if (c = a[f], c.resolution >= g.getDpr()) {
                        e = c;
                        break
                    } e && (e.url = g.makeUrl(e.url), b.src !== e.url && (g.restrictsMixedContent() && "http:" === e.url.substr(0, "http:".length).toLowerCase() ? void 0 !== window.console && console.warn("Blocked mixed content image " + e.url) : (b.src = e.url, g.curSrcSupported || (b.currentSrc = b.src), g.backfaceVisibilityFix(b))), g.setIntrinsicSize(b, e))
            }, g.ascendingSort = function(a, b) {
                return a.resolution - b.resolution
            }, g.removeVideoShim = function(a) {
                var b = a.getElementsByTagName("video");
                if (b.length) {
                    for (var c = b[0], d = c.getElementsByTagName("source"); d.length;) a.insertBefore(d[0], c);
                    c.parentNode.removeChild(c)
                }
            }, g.getAllElements = function() {
                for (var a = [], c = b.getElementsByTagName("img"), d = 0, e = c.length; e > d; d++) {
                    var f = c[d];
                    ("PICTURE" === f.parentNode.nodeName.toUpperCase() || null !== f.getAttribute("srcset") || f[g.ns] && null !== f[g.ns].srcset) && a.push(f)
                }
                return a
            }, g.getMatch = function(a, b) {
                for (var c, d = b.childNodes, e = 0, f = d.length; f > e; e++) {
                    var h = d[e];
                    if (1 === h.nodeType) {
                        if (h === a) return c;
                        if ("SOURCE" === h.nodeName.toUpperCase()) {
                            null !== h.getAttribute("src") && void 0 !== typeof console && console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");
                            var i = h.getAttribute("media");
                            if (h.getAttribute("srcset") && (!i || g.matchesMedia(i))) {
                                var j = g.verifyTypeSupport(h);
                                if (j === !0) {
                                    c = h;
                                    break
                                }
                                if ("pending" === j) return !1
                            }
                        }
                    }
                }
                return c
            }, f(), e._ = g, d(e)
    }(window, window.document, new window.Image);

/*! jQuery UI - v1.12.1 - 2020-02-11
 * http://jqueryui.com
 * Includes: widget.js, data.js, scroll-parent.js, widgets/draggable.js, widgets/mouse.js
 * Copyright jQuery Foundation and other contributors; Licensed MIT */

(function(t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery)
})(function(t) {
    t.ui = t.ui || {}, t.ui.version = "1.12.1";
    var e = 0,
        i = Array.prototype.slice;
    t.cleanData = function(e) {
        return function(i) {
            var s, n, o;
            for (o = 0; null != (n = i[o]); o++) try {
                s = t._data(n, "events"), s && s.remove && t(n).triggerHandler("remove")
            } catch (a) {}
            e(i)
        }
    }(t.cleanData), t.widget = function(e, i, s) {
        var n, o, a, r = {},
            l = e.split(".")[0];
        e = e.split(".")[1];
        var h = l + "-" + e;
        return s || (s = i, i = t.Widget), t.isArray(s) && (s = t.extend.apply(null, [{}].concat(s))), t.expr[":"][h.toLowerCase()] = function(e) {
            return !!t.data(e, h)
        }, t[l] = t[l] || {}, n = t[l][e], o = t[l][e] = function(t, e) {
            return this._createWidget ? (arguments.length && this._createWidget(t, e), void 0) : new o(t, e)
        }, t.extend(o, n, {
            version: s.version,
            _proto: t.extend({}, s),
            _childConstructors: []
        }), a = new i, a.options = t.widget.extend({}, a.options), t.each(s, function(e, s) {
            return t.isFunction(s) ? (r[e] = function() {
                function t() {
                    return i.prototype[e].apply(this, arguments)
                }

                function n(t) {
                    return i.prototype[e].apply(this, t)
                }
                return function() {
                    var e, i = this._super,
                        o = this._superApply;
                    return this._super = t, this._superApply = n, e = s.apply(this, arguments), this._super = i, this._superApply = o, e
                }
            }(), void 0) : (r[e] = s, void 0)
        }), o.prototype = t.widget.extend(a, {
            widgetEventPrefix: n ? a.widgetEventPrefix || e : e
        }, r, {
            constructor: o,
            namespace: l,
            widgetName: e,
            widgetFullName: h
        }), n ? (t.each(n._childConstructors, function(e, i) {
            var s = i.prototype;
            t.widget(s.namespace + "." + s.widgetName, o, i._proto)
        }), delete n._childConstructors) : i._childConstructors.push(o), t.widget.bridge(e, o), o
    }, t.widget.extend = function(e) {
        for (var s, n, o = i.call(arguments, 1), a = 0, r = o.length; r > a; a++)
            for (s in o[a]) n = o[a][s], o[a].hasOwnProperty(s) && void 0 !== n && (e[s] = t.isPlainObject(n) ? t.isPlainObject(e[s]) ? t.widget.extend({}, e[s], n) : t.widget.extend({}, n) : n);
        return e
    }, t.widget.bridge = function(e, s) {
        var n = s.prototype.widgetFullName || e;
        t.fn[e] = function(o) {
            var a = "string" == typeof o,
                r = i.call(arguments, 1),
                l = this;
            return a ? this.length || "instance" !== o ? this.each(function() {
                var i, s = t.data(this, n);
                return "instance" === o ? (l = s, !1) : s ? t.isFunction(s[o]) && "_" !== o.charAt(0) ? (i = s[o].apply(s, r), i !== s && void 0 !== i ? (l = i && i.jquery ? l.pushStack(i.get()) : i, !1) : void 0) : t.error("no such method '" + o + "' for " + e + " widget instance") : t.error("cannot call methods on " + e + " prior to initialization; " + "attempted to call method '" + o + "'")
            }) : l = void 0 : (r.length && (o = t.widget.extend.apply(null, [o].concat(r))), this.each(function() {
                var e = t.data(this, n);
                e ? (e.option(o || {}), e._init && e._init()) : t.data(this, n, new s(o, this))
            })), l
        }
    }, t.Widget = function() {}, t.Widget._childConstructors = [], t.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            classes: {},
            disabled: !1,
            create: null
        },
        _createWidget: function(i, s) {
            s = t(s || this.defaultElement || this)[0], this.element = t(s), this.uuid = e++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = t(), this.hoverable = t(), this.focusable = t(), this.classesElementLookup = {}, s !== this && (t.data(s, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(t) {
                    t.target === s && this.destroy()
                }
            }), this.document = t(s.style ? s.ownerDocument : s.document || s), this.window = t(this.document[0].defaultView || this.document[0].parentWindow)), this.options = t.widget.extend({}, this.options, this._getCreateOptions(), i), this._create(), this.options.disabled && this._setOptionDisabled(this.options.disabled), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: function() {
            return {}
        },
        _getCreateEventData: t.noop,
        _create: t.noop,
        _init: t.noop,
        destroy: function() {
            var e = this;
            this._destroy(), t.each(this.classesElementLookup, function(t, i) {
                e._removeClass(i, t)
            }), this.element.off(this.eventNamespace).removeData(this.widgetFullName), this.widget().off(this.eventNamespace).removeAttr("aria-disabled"), this.bindings.off(this.eventNamespace)
        },
        _destroy: t.noop,
        widget: function() {
            return this.element
        },
        option: function(e, i) {
            var s, n, o, a = e;
            if (0 === arguments.length) return t.widget.extend({}, this.options);
            if ("string" == typeof e)
                if (a = {}, s = e.split("."), e = s.shift(), s.length) {
                    for (n = a[e] = t.widget.extend({}, this.options[e]), o = 0; s.length - 1 > o; o++) n[s[o]] = n[s[o]] || {}, n = n[s[o]];
                    if (e = s.pop(), 1 === arguments.length) return void 0 === n[e] ? null : n[e];
                    n[e] = i
                } else {
                    if (1 === arguments.length) return void 0 === this.options[e] ? null : this.options[e];
                    a[e] = i
                } return this._setOptions(a), this
        },
        _setOptions: function(t) {
            var e;
            for (e in t) this._setOption(e, t[e]);
            return this
        },
        _setOption: function(t, e) {
            return "classes" === t && this._setOptionClasses(e), this.options[t] = e, "disabled" === t && this._setOptionDisabled(e), this
        },
        _setOptionClasses: function(e) {
            var i, s, n;
            for (i in e) n = this.classesElementLookup[i], e[i] !== this.options.classes[i] && n && n.length && (s = t(n.get()), this._removeClass(n, i), s.addClass(this._classes({
                element: s,
                keys: i,
                classes: e,
                add: !0
            })))
        },
        _setOptionDisabled: function(t) {
            this._toggleClass(this.widget(), this.widgetFullName + "-disabled", null, !!t), t && (this._removeClass(this.hoverable, null, "ui-state-hover"), this._removeClass(this.focusable, null, "ui-state-focus"))
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            })
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            })
        },
        _classes: function(e) {
            function i(i, o) {
                var a, r;
                for (r = 0; i.length > r; r++) a = n.classesElementLookup[i[r]] || t(), a = e.add ? t(t.unique(a.get().concat(e.element.get()))) : t(a.not(e.element).get()), n.classesElementLookup[i[r]] = a, s.push(i[r]), o && e.classes[i[r]] && s.push(e.classes[i[r]])
            }
            var s = [],
                n = this;
            return e = t.extend({
                element: this.element,
                classes: this.options.classes || {}
            }, e), this._on(e.element, {
                remove: "_untrackClassesElement"
            }), e.keys && i(e.keys.match(/\S+/g) || [], !0), e.extra && i(e.extra.match(/\S+/g) || []), s.join(" ")
        },
        _untrackClassesElement: function(e) {
            var i = this;
            t.each(i.classesElementLookup, function(s, n) {
                -1 !== t.inArray(e.target, n) && (i.classesElementLookup[s] = t(n.not(e.target).get()))
            })
        },
        _removeClass: function(t, e, i) {
            return this._toggleClass(t, e, i, !1)
        },
        _addClass: function(t, e, i) {
            return this._toggleClass(t, e, i, !0)
        },
        _toggleClass: function(t, e, i, s) {
            s = "boolean" == typeof s ? s : i;
            var n = "string" == typeof t || null === t,
                o = {
                    extra: n ? e : i,
                    keys: n ? t : e,
                    element: n ? this.element : t,
                    add: s
                };
            return o.element.toggleClass(this._classes(o), s), this
        },
        _on: function(e, i, s) {
            var n, o = this;
            "boolean" != typeof e && (s = i, i = e, e = !1), s ? (i = n = t(i), this.bindings = this.bindings.add(i)) : (s = i, i = this.element, n = this.widget()), t.each(s, function(s, a) {
                function r() {
                    return e || o.options.disabled !== !0 && !t(this).hasClass("ui-state-disabled") ? ("string" == typeof a ? o[a] : a).apply(o, arguments) : void 0
                }
                "string" != typeof a && (r.guid = a.guid = a.guid || r.guid || t.guid++);
                var l = s.match(/^([\w:-]*)\s*(.*)$/),
                    h = l[1] + o.eventNamespace,
                    u = l[2];
                u ? n.on(h, u, r) : i.on(h, r)
            })
        },
        _off: function(e, i) {
            i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.off(i).off(i), this.bindings = t(this.bindings.not(e).get()), this.focusable = t(this.focusable.not(e).get()), this.hoverable = t(this.hoverable.not(e).get())
        },
        _delay: function(t, e) {
            function i() {
                return ("string" == typeof t ? s[t] : t).apply(s, arguments)
            }
            var s = this;
            return setTimeout(i, e || 0)
        },
        _hoverable: function(e) {
            this.hoverable = this.hoverable.add(e), this._on(e, {
                mouseenter: function(e) {
                    this._addClass(t(e.currentTarget), null, "ui-state-hover")
                },
                mouseleave: function(e) {
                    this._removeClass(t(e.currentTarget), null, "ui-state-hover")
                }
            })
        },
        _focusable: function(e) {
            this.focusable = this.focusable.add(e), this._on(e, {
                focusin: function(e) {
                    this._addClass(t(e.currentTarget), null, "ui-state-focus")
                },
                focusout: function(e) {
                    this._removeClass(t(e.currentTarget), null, "ui-state-focus")
                }
            })
        },
        _trigger: function(e, i, s) {
            var n, o, a = this.options[e];
            if (s = s || {}, i = t.Event(i), i.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(), i.target = this.element[0], o = i.originalEvent)
                for (n in o) n in i || (i[n] = o[n]);
            return this.element.trigger(i, s), !(t.isFunction(a) && a.apply(this.element[0], [i].concat(s)) === !1 || i.isDefaultPrevented())
        }
    }, t.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(e, i) {
        t.Widget.prototype["_" + e] = function(s, n, o) {
            "string" == typeof n && (n = {
                effect: n
            });
            var a, r = n ? n === !0 || "number" == typeof n ? i : n.effect || i : e;
            n = n || {}, "number" == typeof n && (n = {
                duration: n
            }), a = !t.isEmptyObject(n), n.complete = o, n.delay && s.delay(n.delay), a && t.effects && t.effects.effect[r] ? s[e](n) : r !== e && s[r] ? s[r](n.duration, n.easing, o) : s.queue(function(i) {
                t(this)[e](), o && o.call(s[0]), i()
            })
        }
    }), t.widget, t.extend(t.expr[":"], {
        data: t.expr.createPseudo ? t.expr.createPseudo(function(e) {
            return function(i) {
                return !!t.data(i, e)
            }
        }) : function(e, i, s) {
            return !!t.data(e, s[3])
        }
    }), t.fn.scrollParent = function(e) {
        var i = this.css("position"),
            s = "absolute" === i,
            n = e ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
            o = this.parents().filter(function() {
                var e = t(this);
                return s && "static" === e.css("position") ? !1 : n.test(e.css("overflow") + e.css("overflow-y") + e.css("overflow-x"))
            }).eq(0);
        return "fixed" !== i && o.length ? o : t(this[0].ownerDocument || document)
    }, t.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
    var s = !1;
    t(document).on("mouseup", function() {
        s = !1
    }), t.widget("ui.mouse", {
        version: "1.12.1",
        options: {
            cancel: "input, textarea, button, select, option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var e = this;
            this.element.on("mousedown." + this.widgetName, function(t) {
                return e._mouseDown(t)
            }).on("click." + this.widgetName, function(i) {
                return !0 === t.data(i.target, e.widgetName + ".preventClickEvent") ? (t.removeData(i.target, e.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1) : void 0
            }), this.started = !1
        },
        _mouseDestroy: function() {
            this.element.off("." + this.widgetName), this._mouseMoveDelegate && this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(e) {
            if (!s) {
                this._mouseMoved = !1, this._mouseStarted && this._mouseUp(e), this._mouseDownEvent = e;
                var i = this,
                    n = 1 === e.which,
                    o = "string" == typeof this.options.cancel && e.target.nodeName ? t(e.target).closest(this.options.cancel).length : !1;
                return n && !o && this._mouseCapture(e) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    i.mouseDelayMet = !0
                }, this.options.delay)), this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(e) !== !1, !this._mouseStarted) ? (e.preventDefault(), !0) : (!0 === t.data(e.target, this.widgetName + ".preventClickEvent") && t.removeData(e.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(t) {
                    return i._mouseMove(t)
                }, this._mouseUpDelegate = function(t) {
                    return i._mouseUp(t)
                }, this.document.on("mousemove." + this.widgetName, this._mouseMoveDelegate).on("mouseup." + this.widgetName, this._mouseUpDelegate), e.preventDefault(), s = !0, !0)) : !0
            }
        },
        _mouseMove: function(e) {
            if (this._mouseMoved) {
                if (t.ui.ie && (!document.documentMode || 9 > document.documentMode) && !e.button) return this._mouseUp(e);
                if (!e.which)
                    if (e.originalEvent.altKey || e.originalEvent.ctrlKey || e.originalEvent.metaKey || e.originalEvent.shiftKey) this.ignoreMissingWhich = !0;
                    else if (!this.ignoreMissingWhich) return this._mouseUp(e)
            }
            return (e.which || e.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(e), e.preventDefault()) : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1, this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)), !this._mouseStarted)
        },
        _mouseUp: function(e) {
            this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(e)), this._mouseDelayTimer && (clearTimeout(this._mouseDelayTimer), delete this._mouseDelayTimer), this.ignoreMissingWhich = !1, s = !1, e.preventDefault()
        },
        _mouseDistanceMet: function(t) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    }), t.ui.plugin = {
        add: function(e, i, s) {
            var n, o = t.ui[e].prototype;
            for (n in s) o.plugins[n] = o.plugins[n] || [], o.plugins[n].push([i, s[n]])
        },
        call: function(t, e, i, s) {
            var n, o = t.plugins[e];
            if (o && (s || t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType))
                for (n = 0; o.length > n; n++) t.options[o[n][0]] && o[n][1].apply(t.element, i)
        }
    }, t.ui.safeActiveElement = function(t) {
        var e;
        try {
            e = t.activeElement
        } catch (i) {
            e = t.body
        }
        return e || (e = t.body), e.nodeName || (e = t.body), e
    }, t.ui.safeBlur = function(e) {
        e && "body" !== e.nodeName.toLowerCase() && t(e).trigger("blur")
    }, t.widget("ui.draggable", t.ui.mouse, {
        version: "1.12.1",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function() {
            "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this._addClass("ui-draggable"), this._setHandleClassName(), this._mouseInit()
        },
        _setOption: function(t, e) {
            this._super(t, e), "handle" === t && (this._removeHandleClassName(), this._setHandleClassName())
        },
        _destroy: function() {
            return (this.helper || this.element).is(".ui-draggable-dragging") ? (this.destroyOnClear = !0, void 0) : (this._removeHandleClassName(), this._mouseDestroy(), void 0)
        },
        _mouseCapture: function(e) {
            var i = this.options;
            return this.helper || i.disabled || t(e.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(e), this.handle ? (this._blurActiveElement(e), this._blockFrames(i.iframeFix === !0 ? "iframe" : i.iframeFix), !0) : !1)
        },
        _blockFrames: function(e) {
            this.iframeBlocks = this.document.find(e).map(function() {
                var e = t(this);
                return t("<div>").css("position", "absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]
            })
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
        },
        _blurActiveElement: function(e) {
            var i = t.ui.safeActiveElement(this.document[0]),
                s = t(e.target);
            s.closest(i).length || t.ui.safeBlur(i)
        },
        _mouseStart: function(e) {
            var i = this.options;
            return this.helper = this._createHelper(e), this._addClass(this.helper, "ui-draggable-dragging"), this._cacheHelperProportions(), t.ui.ddmanager && (t.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function() {
                return "fixed" === t(this).css("position")
            }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(e), this.originalPosition = this.position = this._generatePosition(e, !1), this.originalPageX = e.pageX, this.originalPageY = e.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", e) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this._mouseDrag(e, !0), t.ui.ddmanager && t.ui.ddmanager.dragStart(this, e), !0)
        },
        _refreshOffsets: function(t) {
            this.offset = {
                top: this.positionAbs.top - this.margins.top,
                left: this.positionAbs.left - this.margins.left,
                scroll: !1,
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }, this.offset.click = {
                left: t.pageX - this.offset.left,
                top: t.pageY - this.offset.top
            }
        },
        _mouseDrag: function(e, i) {
            if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(e, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) {
                var s = this._uiHash();
                if (this._trigger("drag", e, s) === !1) return this._mouseUp(new t.Event("mouseup", e)), !1;
                this.position = s.position
            }
            return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", t.ui.ddmanager && t.ui.ddmanager.drag(this, e), !1
        },
        _mouseStop: function(e) {
            var i = this,
                s = !1;
            return t.ui.ddmanager && !this.options.dropBehaviour && (s = t.ui.ddmanager.drop(this, e)), this.dropped && (s = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !s || "valid" === this.options.revert && s || this.options.revert === !0 || t.isFunction(this.options.revert) && this.options.revert.call(this.element, s) ? t(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                i._trigger("stop", e) !== !1 && i._clear()
            }) : this._trigger("stop", e) !== !1 && this._clear(), !1
        },
        _mouseUp: function(e) {
            return this._unblockFrames(), t.ui.ddmanager && t.ui.ddmanager.dragStop(this, e), this.handleElement.is(e.target) && this.element.trigger("focus"), t.ui.mouse.prototype._mouseUp.call(this, e)
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp(new t.Event("mouseup", {
                target: this.element[0]
            })) : this._clear(), this
        },
        _getHandle: function(e) {
            return this.options.handle ? !!t(e.target).closest(this.element.find(this.options.handle)).length : !0
        },
        _setHandleClassName: function() {
            this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this._addClass(this.handleElement, "ui-draggable-handle")
        },
        _removeHandleClassName: function() {
            this._removeClass(this.handleElement, "ui-draggable-handle")
        },
        _createHelper: function(e) {
            var i = this.options,
                s = t.isFunction(i.helper),
                n = s ? t(i.helper.apply(this.element[0], [e])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), s && n[0] === this.element[0] && this._setPositionRelative(), n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), n
        },
        _setPositionRelative: function() {
            /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
        },
        _adjustOffsetFromHelper: function(e) {
            "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = {
                left: +e[0],
                top: +e[1] || 0
            }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
        },
        _isRootNode: function(t) {
            return /(html|body)/i.test(t.tagName) || t === this.document[0]
        },
        _getParentOffset: function() {
            var e = this.offsetParent.offset(),
                i = this.document[0];
            return "absolute" === this.cssPosition && this.scrollParent[0] !== i && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (e = {
                top: 0,
                left: 0
            }), {
                top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" !== this.cssPosition) return {
                top: 0,
                left: 0
            };
            var t = this.element.position(),
                e = this._isRootNode(this.scrollParent[0]);
            return {
                top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + (e ? 0 : this.scrollParent.scrollTop()),
                left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + (e ? 0 : this.scrollParent.scrollLeft())
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var e, i, s, n = this.options,
                o = this.document[0];
            return this.relativeContainer = null, n.containment ? "window" === n.containment ? (this.containment = [t(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, t(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, t(window).scrollLeft() + t(window).width() - this.helperProportions.width - this.margins.left, t(window).scrollTop() + (t(window).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], void 0) : "document" === n.containment ? (this.containment = [0, 0, t(o).width() - this.helperProportions.width - this.margins.left, (t(o).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], void 0) : n.containment.constructor === Array ? (this.containment = n.containment, void 0) : ("parent" === n.containment && (n.containment = this.helper[0].parentNode), i = t(n.containment), s = i[0], s && (e = /(scroll|auto)/.test(i.css("overflow")), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (e ? Math.max(s.scrollWidth, s.offsetWidth) : s.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (e ? Math.max(s.scrollHeight, s.offsetHeight) : s.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = i), void 0) : (this.containment = null, void 0)
        },
        _convertPositionTo: function(t, e) {
            e || (e = this.position);
            var i = "absolute" === t ? 1 : -1,
                s = this._isRootNode(this.scrollParent[0]);
            return {
                top: e.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : s ? 0 : this.offset.scroll.top) * i,
                left: e.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : s ? 0 : this.offset.scroll.left) * i
            }
        },
        _generatePosition: function(t, e) {
            var i, s, n, o, a = this.options,
                r = this._isRootNode(this.scrollParent[0]),
                l = t.pageX,
                h = t.pageY;
            return r && this.offset.scroll || (this.offset.scroll = {
                top: this.scrollParent.scrollTop(),
                left: this.scrollParent.scrollLeft()
            }), e && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), i = [this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top]) : i = this.containment, t.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), t.pageY - this.offset.click.top < i[1] && (h = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), t.pageY - this.offset.click.top > i[3] && (h = i[3] + this.offset.click.top)), a.grid && (n = a.grid[1] ? this.originalPageY + Math.round((h - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY, h = i ? n - this.offset.click.top >= i[1] || n - this.offset.click.top > i[3] ? n : n - this.offset.click.top >= i[1] ? n - a.grid[1] : n + a.grid[1] : n, o = a.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX, l = i ? o - this.offset.click.left >= i[0] || o - this.offset.click.left > i[2] ? o : o - this.offset.click.left >= i[0] ? o - a.grid[0] : o + a.grid[0] : o), "y" === a.axis && (l = this.originalPageX), "x" === a.axis && (h = this.originalPageY)), {
                top: h - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top),
                left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left)
            }
        },
        _clear: function() {
            this._removeClass(this.helper, "ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy()
        },
        _trigger: function(e, i, s) {
            return s = s || this._uiHash(), t.ui.plugin.call(this, e, [i, s, this], !0), /^(drag|start|stop)/.test(e) && (this.positionAbs = this._convertPositionTo("absolute"), s.offset = this.positionAbs), t.Widget.prototype._trigger.call(this, e, i, s)
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    }), t.ui.plugin.add("draggable", "connectToSortable", {
        start: function(e, i, s) {
            var n = t.extend({}, i, {
                item: s.element
            });
            s.sortables = [], t(s.options.connectToSortable).each(function() {
                var i = t(this).sortable("instance");
                i && !i.options.disabled && (s.sortables.push(i), i.refreshPositions(), i._trigger("activate", e, n))
            })
        },
        stop: function(e, i, s) {
            var n = t.extend({}, i, {
                item: s.element
            });
            s.cancelHelperRemoval = !1, t.each(s.sortables, function() {
                var t = this;
                t.isOver ? (t.isOver = 0, s.cancelHelperRemoval = !0, t.cancelHelperRemoval = !1, t._storedCSS = {
                    position: t.placeholder.css("position"),
                    top: t.placeholder.css("top"),
                    left: t.placeholder.css("left")
                }, t._mouseStop(e), t.options.helper = t.options._helper) : (t.cancelHelperRemoval = !0, t._trigger("deactivate", e, n))
            })
        },
        drag: function(e, i, s) {
            t.each(s.sortables, function() {
                var n = !1,
                    o = this;
                o.positionAbs = s.positionAbs, o.helperProportions = s.helperProportions, o.offset.click = s.offset.click, o._intersectsWith(o.containerCache) && (n = !0, t.each(s.sortables, function() {
                    return this.positionAbs = s.positionAbs, this.helperProportions = s.helperProportions, this.offset.click = s.offset.click, this !== o && this._intersectsWith(this.containerCache) && t.contains(o.element[0], this.element[0]) && (n = !1), n
                })), n ? (o.isOver || (o.isOver = 1, s._parent = i.helper.parent(), o.currentItem = i.helper.appendTo(o.element).data("ui-sortable-item", !0), o.options._helper = o.options.helper, o.options.helper = function() {
                    return i.helper[0]
                }, e.target = o.currentItem[0], o._mouseCapture(e, !0), o._mouseStart(e, !0, !0), o.offset.click.top = s.offset.click.top, o.offset.click.left = s.offset.click.left, o.offset.parent.left -= s.offset.parent.left - o.offset.parent.left, o.offset.parent.top -= s.offset.parent.top - o.offset.parent.top, s._trigger("toSortable", e), s.dropped = o.element, t.each(s.sortables, function() {
                    this.refreshPositions()
                }), s.currentItem = s.element, o.fromOutside = s), o.currentItem && (o._mouseDrag(e), i.position = o.position)) : o.isOver && (o.isOver = 0, o.cancelHelperRemoval = !0, o.options._revert = o.options.revert, o.options.revert = !1, o._trigger("out", e, o._uiHash(o)), o._mouseStop(e, !0), o.options.revert = o.options._revert, o.options.helper = o.options._helper, o.placeholder && o.placeholder.remove(), i.helper.appendTo(s._parent), s._refreshOffsets(e), i.position = s._generatePosition(e, !0), s._trigger("fromSortable", e), s.dropped = !1, t.each(s.sortables, function() {
                    this.refreshPositions()
                }))
            })
        }
    }), t.ui.plugin.add("draggable", "cursor", {
        start: function(e, i, s) {
            var n = t("body"),
                o = s.options;
            n.css("cursor") && (o._cursor = n.css("cursor")), n.css("cursor", o.cursor)
        },
        stop: function(e, i, s) {
            var n = s.options;
            n._cursor && t("body").css("cursor", n._cursor)
        }
    }), t.ui.plugin.add("draggable", "opacity", {
        start: function(e, i, s) {
            var n = t(i.helper),
                o = s.options;
            n.css("opacity") && (o._opacity = n.css("opacity")), n.css("opacity", o.opacity)
        },
        stop: function(e, i, s) {
            var n = s.options;
            n._opacity && t(i.helper).css("opacity", n._opacity)
        }
    }), t.ui.plugin.add("draggable", "scroll", {
        start: function(t, e, i) {
            i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset())
        },
        drag: function(e, i, s) {
            var n = s.options,
                o = !1,
                a = s.scrollParentNotHidden[0],
                r = s.document[0];
            a !== r && "HTML" !== a.tagName ? (n.axis && "x" === n.axis || (s.overflowOffset.top + a.offsetHeight - e.pageY < n.scrollSensitivity ? a.scrollTop = o = a.scrollTop + n.scrollSpeed : e.pageY - s.overflowOffset.top < n.scrollSensitivity && (a.scrollTop = o = a.scrollTop - n.scrollSpeed)), n.axis && "y" === n.axis || (s.overflowOffset.left + a.offsetWidth - e.pageX < n.scrollSensitivity ? a.scrollLeft = o = a.scrollLeft + n.scrollSpeed : e.pageX - s.overflowOffset.left < n.scrollSensitivity && (a.scrollLeft = o = a.scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (e.pageY - t(r).scrollTop() < n.scrollSensitivity ? o = t(r).scrollTop(t(r).scrollTop() - n.scrollSpeed) : t(window).height() - (e.pageY - t(r).scrollTop()) < n.scrollSensitivity && (o = t(r).scrollTop(t(r).scrollTop() + n.scrollSpeed))), n.axis && "y" === n.axis || (e.pageX - t(r).scrollLeft() < n.scrollSensitivity ? o = t(r).scrollLeft(t(r).scrollLeft() - n.scrollSpeed) : t(window).width() - (e.pageX - t(r).scrollLeft()) < n.scrollSensitivity && (o = t(r).scrollLeft(t(r).scrollLeft() + n.scrollSpeed)))), o !== !1 && t.ui.ddmanager && !n.dropBehaviour && t.ui.ddmanager.prepareOffsets(s, e)
        }
    }), t.ui.plugin.add("draggable", "snap", {
        start: function(e, i, s) {
            var n = s.options;
            s.snapElements = [], t(n.snap.constructor !== String ? n.snap.items || ":data(ui-draggable)" : n.snap).each(function() {
                var e = t(this),
                    i = e.offset();
                this !== s.element[0] && s.snapElements.push({
                    item: this,
                    width: e.outerWidth(),
                    height: e.outerHeight(),
                    top: i.top,
                    left: i.left
                })
            })
        },
        drag: function(e, i, s) {
            var n, o, a, r, l, h, u, c, d, p, f = s.options,
                g = f.snapTolerance,
                m = i.offset.left,
                _ = m + s.helperProportions.width,
                v = i.offset.top,
                b = v + s.helperProportions.height;
            for (d = s.snapElements.length - 1; d >= 0; d--) l = s.snapElements[d].left - s.margins.left, h = l + s.snapElements[d].width, u = s.snapElements[d].top - s.margins.top, c = u + s.snapElements[d].height, l - g > _ || m > h + g || u - g > b || v > c + g || !t.contains(s.snapElements[d].item.ownerDocument, s.snapElements[d].item) ? (s.snapElements[d].snapping && s.options.snap.release && s.options.snap.release.call(s.element, e, t.extend(s._uiHash(), {
                snapItem: s.snapElements[d].item
            })), s.snapElements[d].snapping = !1) : ("inner" !== f.snapMode && (n = g >= Math.abs(u - b), o = g >= Math.abs(c - v), a = g >= Math.abs(l - _), r = g >= Math.abs(h - m), n && (i.position.top = s._convertPositionTo("relative", {
                top: u - s.helperProportions.height,
                left: 0
            }).top), o && (i.position.top = s._convertPositionTo("relative", {
                top: c,
                left: 0
            }).top), a && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: l - s.helperProportions.width
            }).left), r && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: h
            }).left)), p = n || o || a || r, "outer" !== f.snapMode && (n = g >= Math.abs(u - v), o = g >= Math.abs(c - b), a = g >= Math.abs(l - m), r = g >= Math.abs(h - _), n && (i.position.top = s._convertPositionTo("relative", {
                top: u,
                left: 0
            }).top), o && (i.position.top = s._convertPositionTo("relative", {
                top: c - s.helperProportions.height,
                left: 0
            }).top), a && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: l
            }).left), r && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: h - s.helperProportions.width
            }).left)), !s.snapElements[d].snapping && (n || o || a || r || p) && s.options.snap.snap && s.options.snap.snap.call(s.element, e, t.extend(s._uiHash(), {
                snapItem: s.snapElements[d].item
            })), s.snapElements[d].snapping = n || o || a || r || p)
        }
    }), t.ui.plugin.add("draggable", "stack", {
        start: function(e, i, s) {
            var n, o = s.options,
                a = t.makeArray(t(o.stack)).sort(function(e, i) {
                    return (parseInt(t(e).css("zIndex"), 10) || 0) - (parseInt(t(i).css("zIndex"), 10) || 0)
                });
            a.length && (n = parseInt(t(a[0]).css("zIndex"), 10) || 0, t(a).each(function(e) {
                t(this).css("zIndex", n + e)
            }), this.css("zIndex", n + a.length))
        }
    }), t.ui.plugin.add("draggable", "zIndex", {
        start: function(e, i, s) {
            var n = t(i.helper),
                o = s.options;
            n.css("zIndex") && (o._zIndex = n.css("zIndex")), n.css("zIndex", o.zIndex)
        },
        stop: function(e, i, s) {
            var n = s.options;
            n._zIndex && t(i.helper).css("zIndex", n._zIndex)
        }
    }), t.ui.draggable
});

(function(t, i, e) {
    var h, r = [],
        o = function() {
            var t = e.createElement("modernizr").style,
                i = "objectFit",
                h = "Webkit Moz O ms",
                r = h.split(" "),
                o = i.charAt(0).toUpperCase() + i.slice(1),
                n = (i + " " + r.join(o + " ") + o).split(" ");
            for (var a in n) {
                var i = n[a];
                if (~("" + i).indexOf("-") && void 0 !== t[i]) return "pfx" == prefixed ? i : !0
            }
            return !1
        },
        n = function(i) {
            var i = i || "contain",
                e = o();
            return this.each(function() {
                e ? t(this).css("object-fit", i) : a(this, i)
            })
        },
        a = function(i, e) {
            function h(t) {
                var i = t.parent(),
                    e = i.css("display");
                return "block" == e || "-webkit-box" == e && i.width() > 0 ? {
                    obj: i,
                    width: i.width(),
                    height: i.height(),
                    ratio: i.width() / i.height()
                } : h(i)
            }
            var o = "string" == typeof e ? e : e.type,
                n = void 0 === e.hideOverflow ? !0 : e.hideOverflow;
            r.push({
                elem: i,
                params: {
                    type: o,
                    hideOverflow: n
                }
            });
            var a, d, c = t(i),
                s = c.data("ratio"),
                f = h(c),
                w = t("<img/>").load(function() {
                    a = this.width, d = this.height, void 0 === s && (s = a / d, c.data("ratio", s)), "contain" === o ? f.ratio > s ? c.width(f.height * s) : c.height(f.width / s).width("100%") : "cover" === o && ((f.width > a || f.height > d) && (f.ratio > s ? c.width(f.width).height(f.height * s) : c.height(f.height).width(f.width * s)), n && f.obj.css("overflow", "hidden"))
                });
            w.attr("src", c.attr("src"))
        };
    t.fn.objectFit = n, t(i).resize(function() {
        clearTimeout(h);
        for (var t = 0, i = r.length; i > t; t++) {
            var e = r[t];
            h = setTimeout(function() {
                a(e.elem, e.params)
            }, 100)
        }
    })
})(jQuery, window, document);

/*
    jQuery Masked Input Plugin
    Copyright (c) 2007 - 2015 Josh Bush (digitalbush.com)
    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
    Version: 1.4.1
*/
! function(a) {
    "function" == typeof define && define.amd ? define(["jquery"], a) : a("object" == typeof exports ? require("jquery") : jQuery)
}(function(a) {
    var b, c = navigator.userAgent,
        d = /iphone/i.test(c),
        e = /chrome/i.test(c),
        f = /android/i.test(c);
    a.mask = {
        definitions: {
            9: "[0-9]",
            a: "[A-Za-z]",
            "*": "[A-Za-z0-9]"
        },
        autoclear: !0,
        dataName: "rawMaskFn",
        placeholder: "_"
    }, a.fn.extend({
        caret: function(a, b) {
            var c;
            if (0 !== this.length && !this.is(":hidden")) return "number" == typeof a ? (b = "number" == typeof b ? b : a, this.each(function() {
                this.setSelectionRange ? this.setSelectionRange(a, b) : this.createTextRange && (c = this.createTextRange(), c.collapse(!0), c.moveEnd("character", b), c.moveStart("character", a), c.select())
            })) : (this[0].setSelectionRange ? (a = this[0].selectionStart, b = this[0].selectionEnd) : document.selection && document.selection.createRange && (c = document.selection.createRange(), a = 0 - c.duplicate().moveStart("character", -1e5), b = a + c.text.length), {
                begin: a,
                end: b
            })
        },
        unmask: function() {
            return this.trigger("unmask")
        },
        mask: function(c, g) {
            var h, i, j, k, l, m, n, o;
            if (!c && this.length > 0) {
                h = a(this[0]);
                var p = h.data(a.mask.dataName);
                return p ? p() : void 0
            }
            return g = a.extend({
                autoclear: a.mask.autoclear,
                placeholder: a.mask.placeholder,
                completed: null
            }, g), i = a.mask.definitions, j = [], k = n = c.length, l = null, a.each(c.split(""), function(a, b) {
                "?" == b ? (n--, k = a) : i[b] ? (j.push(new RegExp(i[b])), null === l && (l = j.length - 1), k > a && (m = j.length - 1)) : j.push(null)
            }), this.trigger("unmask").each(function() {
                function h() {
                    if (g.completed) {
                        for (var a = l; m >= a; a++)
                            if (j[a] && C[a] === p(a)) return;
                        g.completed.call(B)
                    }
                }

                function p(a) {
                    return g.placeholder.charAt(a < g.placeholder.length ? a : 0)
                }

                function q(a) {
                    for (; ++a < n && !j[a];);
                    return a
                }

                function r(a) {
                    for (; --a >= 0 && !j[a];);
                    return a
                }

                function s(a, b) {
                    var c, d;
                    if (!(0 > a)) {
                        for (c = a, d = q(b); n > c; c++)
                            if (j[c]) {
                                if (!(n > d && j[c].test(C[d]))) break;
                                C[c] = C[d], C[d] = p(d), d = q(d)
                            } z(), B.caret(Math.max(l, a))
                    }
                }

                function t(a) {
                    var b, c, d, e;
                    for (b = a, c = p(a); n > b; b++)
                        if (j[b]) {
                            if (d = q(b), e = C[b], C[b] = c, !(n > d && j[d].test(e))) break;
                            c = e
                        }
                }

                function u() {
                    var a = B.val(),
                        b = B.caret();
                    if (o && o.length && o.length > a.length) {
                        for (A(!0); b.begin > 0 && !j[b.begin - 1];) b.begin--;
                        if (0 === b.begin)
                            for (; b.begin < l && !j[b.begin];) b.begin++;
                        B.caret(b.begin, b.begin)
                    } else {
                        for (A(!0); b.begin < n && !j[b.begin];) b.begin++;
                        B.caret(b.begin, b.begin)
                    }
                    h()
                }

                function v() {
                    A(), B.val() != E && B.change()
                }

                function w(a) {
                    if (!B.prop("readonly")) {
                        var b, c, e, f = a.which || a.keyCode;
                        o = B.val(), 8 === f || 46 === f || d && 127 === f ? (b = B.caret(), c = b.begin, e = b.end, e - c === 0 && (c = 46 !== f ? r(c) : e = q(c - 1), e = 46 === f ? q(e) : e), y(c, e), s(c, e - 1), a.preventDefault()) : 13 === f ? v.call(this, a) : 27 === f && (B.val(E), B.caret(0, A()), a.preventDefault())
                    }
                }

                function x(b) {
                    if (!B.prop("readonly")) {
                        var c, d, e, g = b.which || b.keyCode,
                            i = B.caret();
                        if (!(b.ctrlKey || b.altKey || b.metaKey || 32 > g) && g && 13 !== g) {
                            if (i.end - i.begin !== 0 && (y(i.begin, i.end), s(i.begin, i.end - 1)), c = q(i.begin - 1), n > c && (d = String.fromCharCode(g), j[c].test(d))) {
                                if (t(c), C[c] = d, z(), e = q(c), f) {
                                    var k = function() {
                                        a.proxy(a.fn.caret, B, e)()
                                    };
                                    setTimeout(k, 0)
                                } else B.caret(e);
                                i.begin <= m && h()
                            }
                            b.preventDefault()
                        }
                    }
                }

                function y(a, b) {
                    var c;
                    for (c = a; b > c && n > c; c++) j[c] && (C[c] = p(c))
                }

                function z() {
                    B.val(C.join(""))
                }

                function A(a) {
                    var b, c, d, e = B.val(),
                        f = -1;
                    for (b = 0, d = 0; n > b; b++)
                        if (j[b]) {
                            for (C[b] = p(b); d++ < e.length;)
                                if (c = e.charAt(d - 1), j[b].test(c)) {
                                    C[b] = c, f = b;
                                    break
                                } if (d > e.length) {
                                y(b + 1, n);
                                break
                            }
                        } else C[b] === e.charAt(d) && d++, k > b && (f = b);
                    return a ? z() : k > f + 1 ? g.autoclear || C.join("") === D ? (B.val() && B.val(""), y(0, n)) : z() : (z(), B.val(B.val().substring(0, f + 1))), k ? b : l
                }
                var B = a(this),
                    C = a.map(c.split(""), function(a, b) {
                        return "?" != a ? i[a] ? p(b) : a : void 0
                    }),
                    D = C.join(""),
                    E = B.val();
                B.data(a.mask.dataName, function() {
                    return a.map(C, function(a, b) {
                        return j[b] && a != p(b) ? a : null
                    }).join("")
                }), B.one("unmask", function() {
                    B.off(".mask").removeData(a.mask.dataName)
                }).on("focus.mask", function() {
                    if (!B.prop("readonly")) {
                        clearTimeout(b);
                        var a;
                        E = B.val(), a = A(), b = setTimeout(function() {
                            B.get(0) === document.activeElement && (z(), a == c.replace("?", "").length ? B.caret(0, a) : B.caret(a))
                        }, 10)
                    }
                }).on("blur.mask", v).on("keydown.mask", w).on("keypress.mask", x).on("input.mask paste.mask", function() {
                    B.prop("readonly") || setTimeout(function() {
                        var a = A(!0);
                        B.caret(a), h()
                    }, 0)
                }), e && f && B.off("input.mask").on("input.mask", u), A()
            })
        }
    })
});

/*
 *  jQuery dotdotdot 1.7.4
 *
 *  Copyright (c) Fred Heusschen
 *  www.frebsite.nl
 *
 *  Plugin website:
 *  dotdotdot.frebsite.nl
 *
 *  Licensed under the MIT license.
 *  http://en.wikipedia.org/wiki/MIT_License
 */

! function(t, e) {
    function n(t, e, n) {
        var r = t.children(),
            o = !1;
        t.empty();
        for (var i = 0, d = r.length; d > i; i++) {
            var l = r.eq(i);
            if (t.append(l), n && t.append(n), a(t, e)) {
                l.remove(), o = !0;
                break
            }
            n && n.detach()
        }
        return o
    }

    function r(e, n, i, d, l) {
        var s = !1,
            c = "a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",
            u = "script, .dotdotdot-keep";
        return e.contents().detach().each(function() {
            var h = this,
                f = t(h);
            if ("undefined" == typeof h) return !0;
            if (f.is(u)) e.append(f);
            else {
                if (s) return !0;
                e.append(f), !l || f.is(d.after) || f.find(d.after).length || e[e.is(c) ? "after" : "append"](l), a(i, d) && (s = 3 == h.nodeType ? o(f, n, i, d, l) : r(f, n, i, d, l), s || (f.detach(), s = !0)), s || l && l.detach()
            }
        }), n.addClass("is-truncated"), s
    }

    function o(e, n, r, o, d) {
        var c = e[0];
        if (!c) return !1;
        var h = s(c),
            f = -1 !== h.indexOf(" ") ? " " : "",
            p = "letter" == o.wrap ? "" : f,
            g = h.split(p),
            v = -1,
            w = -1,
            b = 0,
            y = g.length - 1;
        for (o.fallbackToLetter && 0 == b && 0 == y && (p = "", g = h.split(p), y = g.length - 1); y >= b && (0 != b || 0 != y);) {
            var m = Math.floor((b + y) / 2);
            if (m == w) break;
            w = m, l(c, g.slice(0, w + 1).join(p) + o.ellipsis), r.children().each(function() {
                t(this).toggle().toggle()
            }), a(r, o) ? (y = w, o.fallbackToLetter && 0 == b && 0 == y && (p = "", g = g[0].split(p), v = -1, w = -1, b = 0, y = g.length - 1)) : (v = w, b = w)
        }
        if (-1 == v || 1 == g.length && 0 == g[0].length) {
            var x = e.parent();
            e.detach();
            var T = d && d.closest(x).length ? d.length : 0;
            x.contents().length > T ? c = u(x.contents().eq(-1 - T), n) : (c = u(x, n, !0), T || x.detach()), c && (h = i(s(c), o), l(c, h), T && d && t(c).parent().append(d))
        } else h = i(g.slice(0, v + 1).join(p), o), l(c, h);
        return !0
    }

    function a(t, e) {
        return t.innerHeight() > e.maxHeight
    }

    function i(e, n) {
        for (; t.inArray(e.slice(-1), n.lastCharacter.remove) > -1;) e = e.slice(0, -1);
        return t.inArray(e.slice(-1), n.lastCharacter.noEllipsis) < 0 && (e += n.ellipsis), e
    }

    function d(t) {
        return {
            width: t.innerWidth(),
            height: t.innerHeight()
        }
    }

    function l(t, e) {
        t.innerText ? t.innerText = e : t.nodeValue ? t.nodeValue = e : t.textContent && (t.textContent = e)
    }

    function s(t) {
        return t.innerText ? t.innerText : t.nodeValue ? t.nodeValue : t.textContent ? t.textContent : ""
    }

    function c(t) {
        do t = t.previousSibling; while (t && 1 !== t.nodeType && 3 !== t.nodeType);
        return t
    }

    function u(e, n, r) {
        var o, a = e && e[0];
        if (a) {
            if (!r) {
                if (3 === a.nodeType) return a;
                if (t.trim(e.text())) return u(e.contents().last(), n)
            }
            for (o = c(a); !o;) {
                if (e = e.parent(), e.is(n) || !e.length) return !1;
                o = c(e[0])
            }
            if (o) return u(t(o), n)
        }
        return !1
    }

    function h(e, n) {
        return e ? "string" == typeof e ? (e = t(e, n), e.length ? e : !1) : e.jquery ? e : !1 : !1
    }

    function f(t) {
        for (var e = t.innerHeight(), n = ["paddingTop", "paddingBottom"], r = 0, o = n.length; o > r; r++) {
            var a = parseInt(t.css(n[r]), 10);
            isNaN(a) && (a = 0), e -= a
        }
        return e
    }
    if (!t.fn.dotdotdot) {
        t.fn.dotdotdot = function(e) {
            if (0 == this.length) return t.fn.dotdotdot.debug('No element found for "' + this.selector + '".'), this;
            if (this.length > 1) return this.each(function() {
                t(this).dotdotdot(e)
            });
            var o = this;
            o.data("dotdotdot") && o.trigger("destroy.dot"), o.data("dotdotdot-style", o.attr("style") || ""), o.css("word-wrap", "break-word"), "nowrap" === o.css("white-space") && o.css("white-space", "normal"), o.bind_events = function() {
                return o.bind("update.dot", function(e, d) {
                    switch (o.removeClass("is-truncated"), e.preventDefault(), e.stopPropagation(), typeof l.height) {
                        case "number":
                            l.maxHeight = l.height;
                            break;
                        case "function":
                            l.maxHeight = l.height.call(o[0]);
                            break;
                        default:
                            l.maxHeight = f(o)
                    }
                    l.maxHeight += l.tolerance, "undefined" != typeof d && (("string" == typeof d || "nodeType" in d && 1 === d.nodeType) && (d = t("<div />").append(d).contents()), d instanceof t && (i = d)), g = o.wrapInner('<div class="dotdotdot" />').children(), g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({
                        height: "auto",
                        width: "auto",
                        border: "none",
                        padding: 0,
                        margin: 0
                    });
                    var c = !1,
                        u = !1;
                    return s.afterElement && (c = s.afterElement.clone(!0), c.show(), s.afterElement.detach()), a(g, l) && (u = "children" == l.wrap ? n(g, l, c) : r(g, o, g, l, c)), g.replaceWith(g.contents()), g = null, t.isFunction(l.callback) && l.callback.call(o[0], u, i), s.isTruncated = u, u
                }).bind("isTruncated.dot", function(t, e) {
                    return t.preventDefault(), t.stopPropagation(), "function" == typeof e && e.call(o[0], s.isTruncated), s.isTruncated
                }).bind("originalContent.dot", function(t, e) {
                    return t.preventDefault(), t.stopPropagation(), "function" == typeof e && e.call(o[0], i), i
                }).bind("destroy.dot", function(t) {
                    t.preventDefault(), t.stopPropagation(), o.unwatch().unbind_events().contents().detach().end().append(i).attr("style", o.data("dotdotdot-style") || "").data("dotdotdot", !1)
                }), o
            }, o.unbind_events = function() {
                return o.unbind(".dot"), o
            }, o.watch = function() {
                if (o.unwatch(), "window" == l.watch) {
                    var e = t(window),
                        n = e.width(),
                        r = e.height();
                    e.bind("resize.dot" + s.dotId, function() {
                        n == e.width() && r == e.height() && l.windowResizeFix || (n = e.width(), r = e.height(), u && clearInterval(u), u = setTimeout(function() {
                            o.trigger("update.dot")
                        }, 100))
                    })
                } else c = d(o), u = setInterval(function() {
                    if (o.is(":visible")) {
                        var t = d(o);
                        (c.width != t.width || c.height != t.height) && (o.trigger("update.dot"), c = t)
                    }
                }, 500);
                return o
            }, o.unwatch = function() {
                return t(window).unbind("resize.dot" + s.dotId), u && clearInterval(u), o
            };
            var i = o.contents(),
                l = t.extend(!0, {}, t.fn.dotdotdot.defaults, e),
                s = {},
                c = {},
                u = null,
                g = null;
            return l.lastCharacter.remove instanceof Array || (l.lastCharacter.remove = t.fn.dotdotdot.defaultArrays.lastCharacter.remove), l.lastCharacter.noEllipsis instanceof Array || (l.lastCharacter.noEllipsis = t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis), s.afterElement = h(l.after, o), s.isTruncated = !1, s.dotId = p++, o.data("dotdotdot", !0).bind_events().trigger("update.dot"), l.watch && o.watch(), o
        }, t.fn.dotdotdot.defaults = {
            ellipsis: "... ",
            wrap: "word",
            fallbackToLetter: !0,
            lastCharacter: {},
            tolerance: 0,
            callback: null,
            after: null,
            height: null,
            watch: !1,
            windowResizeFix: !0
        }, t.fn.dotdotdot.defaultArrays = {
            lastCharacter: {
                remove: [" ", "", ",", ";", ".", "!", "?"],
                noEllipsis: []
            }
        }, t.fn.dotdotdot.debug = function() {};
        var p = 1,
            g = t.fn.html;
        t.fn.html = function(n) {
            return n != e && !t.isFunction(n) && this.data("dotdotdot") ? this.trigger("update", [n]) : g.apply(this, arguments)
        };
        var v = t.fn.text;
        t.fn.text = function(n) {
            return n != e && !t.isFunction(n) && this.data("dotdotdot") ? (n = t("<div />").text(n).html(), this.trigger("update", [n])) : v.apply(this, arguments)
        }
    }
}(jQuery);

/*! seethru 3.0.1 24-09-2016 see https://github.com/m90/seeThru for details */
! function(a, b) {
    "function" == typeof define && define.amd ? define(b) : "object" == typeof exports ? module.exports = b() : a.seeThru = b()
}(this, function() {
    function a(a, b) {
        var c, d = document.createElement("canvas"),
            e = d.getContext("2d");
        d.width = b.width, d.height = b.height, e.drawImage(a, 0, 0, b.width, b.height), c = e.getImageData(0, 0, b.width, b.height);
        for (var f = 3, g = c.data.length; g > f; f += 4) c.data[f - 1] = c.data[f - 2] = c.data[f - 3] = c.data[f], c.data[f] = 255;
        return c
    }

    function b(a, b) {
        for (var c = 3, d = a.data.length; d > c; c += 4) a.data[c] = b[c - 1], a.data[c - 3] = a.data[c - 3] / (b[c - 1] ? b[c - 1] / 255 : 1), a.data[c - 2] = a.data[c - 2] / (b[c - 1] ? b[c - 1] / 255 : 1), a.data[c - 1] = a.data[c - 1] / (b[c - 1] ? b[c - 1] / 255 : 1);
        return a
    }

    function c() {
        for (var a = 0, b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length; c++)
            if (window[b[c] + "RequestAnimationFrame"]) return window[b[c] + "RequestAnimationFrame"];
        return function(b) {
            var c = (new Date).getTime(),
                d = Math.max(0, 16 - (c - a)),
                e = window.setTimeout(function() {
                    b(c + d)
                }, d);
            return a = c + d, e
        }
    }

    function d() {
        for (var a = ["ms", "moz", "webkit", "o"], b = 0; b < a.length; b++) {
            if (window[a[b] + "CancelAnimationFrame"]) return window[a[b] + "CancelAnimationFrame"];
            if (window[a[b] + "CancelRequestAnimationFrame"]) return window[a[b] + "CancelRequestAnimationFrame"]
        }
        return function(a) {
            clearTimeout(a)
        }
    }

    function e(a) {
        return [].slice.call(a)
    }

    function f(a) {
        return Object.prototype.toString.call(a)
    }

    function g(a, b) {
        b.nextSibling ? b.parentNode.insertBefore(a, b.nextSibling) : b.parentNode.appendChild(a)
    }

    function h(a) {
        return a.tagName ? a : "[object String]" === f(a) ? document.querySelector(a) : a.length ? a[0] : null
    }

    function i(a) {
        var b = [];
        for (var c in a) a.hasOwnProperty(c) && b.push(c + ": " + a[c] + ";");
        return b.join("")
    }

    function j(a) {
        a.fn && !a.fn.seeThru && (a.fn.seeThru = function() {
            var b = e(arguments);
            return this.each(function() {
                var c = a(this);
                if (!b.length || 1 === b.length && "[object Object]" === f(b[0])) {
                    if (c.data("seeThru")) return;
                    c.data("seeThru", new m(this, b[0])._init())
                } else if (b.length && "[object String]" === f(b[0])) {
                    if (!c.data("seeThru")) return;
                    c.data("seeThru").ready(function() {
                        c.data("seeThru")[b[0]](b[1]), "revert" === b[0] && c.data("seeThru", null)
                    })
                }
            })
        })
    }

    function k() {
        var a = [];
        this.push = function(b) {
            return b ? (a.push(b), b) : null
        }, this.has = function(b) {
            return a.some(function(a) {
                return a === b
            })
        }, this.remove = function(b) {
            a = a.filter(function(a) {
                return a !== b
            })
        }
    }

    function l(e, f) {
        var j, k, l, m = f.mask ? 1 : 2,
            n = {
                width: parseInt(f.width, 10),
                height: parseInt(f.height, 10)
            },
            o = document.createElement("canvas"),
            p = o.getContext("2d"),
            q = document.createElement("canvas"),
            r = q.getContext("2d"),
            s = window.requestAnimationFrame || c(),
            t = window.cancelAnimationFrame || d(),
            u = function(a) {
                var c, d, g, h;
                for (p.drawImage(e, 0, 0, n.width, n.height * m), c = p.getImageData(0, 0, n.width, n.height), d = p.getImageData(0, n.height, n.width, n.height).data, f.unmult && b(c, d), g = 3, h = c.data.length; h > g; g += 4) c.data[g] = f.alphaMask ? d[g - 1] : Math.max(d[g - 1], d[g - 2], d[g - 3]);
                r.putImageData(c, 0, 0, 0, 0, n.width, n.height), a && (l = s(function() {
                    u(!0)
                }))
            },
            v = function(b) {
                if ("IMG" !== b.tagName) throw new Error("Cannot use non-image element as mask!");
                b.width = n.width, b.height = n.height, f.alphaMask ? p.putImageData(a(b, n), 0, n.height) : p.drawImage(b, 0, n.height, n.width, n.height), b.style.display = "none"
            };
        this.startRendering = function() {
            return u(!0), this
        }, this.stopRendering = function() {
            return t(l), this
        }, this.teardown = function() {
            return t(l), e.parentNode.removeChild(e.nextSibling), e.parentNode.removeChild(e.nextSibling), e.style.display = j, this
        }, this.updateMask = function(a) {
            return v(a), this
        }, this.getCanvas = function() {
            return q
        }, this.getPoster = function() {
            return k
        };
        var w = e.getBoundingClientRect();
        n.height && n.width || (e.width || e.height ? e.height ? e.width ? (n.width = n.width || w.width, n.height = n.height || w.height / m) : (n.width = n.width || w.height * (e.videoWidth / Math.floor(e.videoHeight / m)), n.height = n.height || w.height) : (n.width = n.width || w.width, n.height = n.height || w.width / (e.videoWidth / Math.floor(e.videoHeight / m))) : (n.width = n.width || e.videoWidth, n.height = n.height || e.videoHeight / m)), o.width = n.width, o.height = 2 * n.height, o.style.display = "none", o.className = "seeThru-buffer", q.width = n.width, q.height = n.height, q.className = "seeThru-display", g(o, e), g(q, e), f.mask && v(h(f.mask)), f.poster && e.poster && (k = document.createElement("div"), k.className = "seeThru-poster", k.style.cssText = i({
            width: n.width + "px",
            height: n.height + "px",
            position: "absolute",
            top: 0,
            left: 0,
            backgroundSize: "cover",
            backgroundPosition: "center",
            backgroundImage: 'url("' + e.poster + '")'
        }), g(k, e)), j = window.getComputedStyle(e).display, e.style.display = "none", "autoplay" === f.start && e.play()
    }

    function m(a, b) {
        var c = this,
            d = !1,
            e = [],
            f = {
                start: "autoplay",
                end: "loop",
                mask: !1,
                alphaMask: !1,
                width: null,
                height: null,
                poster: !1,
                unmult: !1
            },
            g = function() {
                try {
                    return new Event("submit", {
                        bubbles: !1
                    }).bubbles !== !1 ? !1 : new Event("submit", {
                        bubbles: !0
                    }).bubbles !== !0 ? !1 : !0
                } catch (a) {
                    return !1
                }
            }(),
            i = ["mouseenter", "mouseleave", "click", "mousedown", "mouseup", "mousemove", "mouseover", "hover", "dblclick", "contextmenu", "focus", "blur"];
        if (b = b || {}, this._video = h(a), !this._video || "VIDEO" !== this._video.tagName) throw new Error("Could not use specified source");
        this._options = function(a) {
            for (var b in f) f.hasOwnProperty(b) && (b in a || (a[b] = f[b]));
            return a
        }(b), this._init = function() {
            var a = function() {
                function a() {
                    c._video.play(), c._options.poster ? c._seeThru.getPoster().removeEventListener("click", a) : c._seeThru.getCanvas().removeEventListener("click", a)
                }
                if (n.has(this._video)) throw new Error("seeThru already initialized on passed video element!");
                this._seeThru = new l(this._video, this._options), "clicktoplay" === this._options.start ? this._options.poster ? this._seeThru.getPoster().addEventListener("click", a) : this._seeThru.getCanvas().addEventListener("click", a) : "autoplay" === this._options.start && b.poster && (this._seeThru.getPoster().style.display = "none"), "rewind" === this._options.end ? this._video.addEventListener("ended", function() {
                    c._video.currentTime = 0, c._seeThru.getCanvas().addEventListener("click", a)
                }) : "stop" !== this._options.end && this._video.addEventListener("ended", function() {
                    c._video.currentTime = 0, c._video.play()
                }), this._options.poster && this._video.poster && (this._video.addEventListener("play", function() {
                    c._seeThru.getPoster().style.display = "none"
                }), this._video.addEventListener("pause", function() {
                    c._seeThru.getPoster().style.display = "block"
                })), i.forEach(function(a) {
                    c._seeThru.getCanvas().addEventListener(a, function() {
                        var b;
                        g ? b = new Event(a) : (b = document.createEvent("Event"), b.initEvent(a, !0, !0)), c._video.dispatchEvent(b)
                    })
                }), this._seeThru.startRendering(), d = !0, n.push(this._video), e.forEach(function(a) {
                    a(c, c._video, c.getCanvas())
                })
            }.bind(this);
            return this._video.readyState > 0 ? a() : this._video.addEventListener("loadedmetadata", function() {
                a()
            }), this
        }, this.getCanvas = function() {
            return this._seeThru.getCanvas()
        }, this.play = function() {
            return this._video.play(), this
        }, this.pause = function() {
            return this._video.pause(), this
        }, this.revert = function() {
            this._seeThru.teardown(), n.remove(this._video)
        }, this.updateMask = function(a) {
            return this._seeThru.updateMask(h(a)), this
        }, this.ready = function(a) {
            return d ? setTimeout(function() {
                a(c, c._video, c.getCanvas())
            }, 0) : e.push(a), this
        }
    }
    window.jQuery && j(window.jQuery);
    var n = new k;
    return {
        create: function(a, b) {
            return new m(a, b)._init()
        },
        attach: j
    }
});

// ## Core
(function($) {
    var REQUEST_TIMEOUT = 5e3,
        HTTP_CODES = {
            unauthorized: 401
        },
        Twitch = {
            $: $,
            baseUrl: "https://api.twitch.tv/kraken/",
            _config: {},
            extend: function(src) {
                $.extend(Twitch, src)
            }
        };
    Twitch.api = function(options, callback) {
        if (!Twitch._config.session) throw new Error("You must call init() before api()");
        var params = options.params || {};
        callback = callback || function() {};
        var authenticated = !!Twitch._config.session.token,
            url = Twitch.baseUrl + (options.method || "");
        authenticated && (params.oauth_token = Twitch._config.session.token), $.ajax({
            url: url + "?" + $.param(params),
            dataType: "jsonp",
            timeout: REQUEST_TIMEOUT
        }).done(function(data) {
            Twitch.log("Response Data:", data);
            if (!data.error) {
                callback(null, data);
                return
            }
            Twitch.log("API Error:", data.error + ";", data.message), authenticated && data.status === HTTP_CODES.unauthorized ? Twitch.logout(function() {
                callback(data, null)
            }) : callback(data, null)
        }).fail(function() {
            callback(new Error("Request Timeout"), null)
        })
    }, Twitch.log = function(message) {
        Array.prototype.unshift.call(arguments, "[Twitch]"), window.console && console.log.apply(console, arguments)
    }, window.Twitch = Twitch
})(window.jQuery || window.Zepto),
function() {
    var store = window.sessionStorage;
    store || function() {
        var Storage = function(type) {
            function createCookie(name, value, days) {
                var date, expires;
                days ? (date = new Date, date.setTime(date.getTime() + days * 24 * 60 * 60 * 1e3), expires = "; expires=" + date.toGMTString()) : expires = "", document.cookie = name + "=" + value + expires + "; path=/"
            }

            function readCookie(name) {
                var nameEQ = name + "=",
                    ca = document.cookie.split(";"),
                    i, c;
                for (i = 0; i < ca.length; i++) {
                    c = ca[i];
                    while (c.charAt(0) == " ") c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length)
                }
                return null
            }

            function setData(data) {
                data = JSON.stringify(data), type == "session" ? window.name = data : createCookie("localStorage", data, 365)
            }

            function clearData() {
                type == "session" ? window.name = "" : createCookie("localStorage", "", 365)
            }

            function getData() {
                var data = type == "session" ? window.name : readCookie("localStorage");
                return data ? JSON.parse(data) : {}
            }
            var data = getData();
            return {
                length: 0,
                clear: function() {
                    data = {}, this.length = 0, clearData()
                },
                getItem: function(key) {
                    return data[key] === undefined ? null : data[key]
                },
                key: function(i) {
                    var ctr = 0;
                    for (var k in data) {
                        if (ctr == i) return k;
                        ctr++
                    }
                    return null
                },
                removeItem: function(key) {
                    delete data[key], this.length--, setData(data)
                },
                setItem: function(key, value) {
                    data[key] = value + "", this.length++, setData(data)
                }
            }
        };
        store = new Storage("session")
    }(), Twitch.extend({
        _storage: store
    })
}(),
function() {
    var init = function(options, callback) {
        if (!options.clientId) throw new Error("client id not specified");
        Twitch._config.clientId = options.clientId, Twitch._initSession(), typeof callback == "function" && Twitch.getStatus(callback)
    };
    Twitch.extend({
        init: init
    })
}(),
function() {
    var SESSION_KEY = "twitch_oauth_session",
        $ = Twitch.$,
        parseFragment = function(hash) {
            var match, session;
            hash = hash || document.location.hash;
            var hashMatch = function(expr) {
                var match = hash.match(expr);
                return match ? match[1] : null
            };
            return session = {
                token: hashMatch(/access_token=(\w+)/),
                scope: hashMatch(/scope=([\w+]+)/) ? hashMatch(/scope=([\w+]+)/).split("+") : null,
                state: hashMatch(/state=(\w+)/),
                error: hashMatch(/error=(\w+)/),
                errorDescription: hashMatch(/error_description=(\w+)/)
            }, session
        },
        updateSession = function(callback) {
            Twitch.api({
                method: "/"
            }, function(err, response) {
                var session;
                if (err) {
                    Twitch.log("error encountered updating session:", err), callback && callback(err, null);
                    return
                }
                if (!response.token.valid) {
                    Twitch.logout(callback);
                    return
                }
                callback && callback(null, session)
            })
        },
        getToken = function() {
            return Twitch._config.session && Twitch._config.session.token
        },
        getStatus = function(options, callback) {
            typeof options == "function" && (callback = options), typeof callback != "function" && (callback = function() {});
            if (!Twitch._config.session) throw new Error("You must call init() before getStatus()");
            var makeSession = function(session) {
                return {
                    authenticated: !!session.token,
                    token: session.token,
                    scope: session.scope,
                    error: session.error,
                    errorDescription: session.errorDescription
                }
            };
            options && options.force ? updateSession(function(err, session) {
                callback(err, makeSession(session || Twitch._config.session))
            }) : callback(null, makeSession(Twitch._config.session))
        },
        login = function(options) {
            if (!options.scope) throw new Error("Must specify list of requested scopes");
            var params = {
                response_type: "token",
                client_id: Twitch._config.clientId,
                redirect_uri: options.redirect_uri || window.location.href.replace(/#.*$/, ""),
                scope: options.scope.join(" ")
            };
            if (!params.client_id) throw new Error("You must call init() before login()");
            var url = Twitch.baseUrl + "oauth2/authorize?" + $.param(params);
            options.popup ? Twitch._config.loginPopup = window.open(url, "Login with TwitchTV", "height=600,width=660,resizable=yes,status=yes") : window.location = url
        },
        logout = function(callback) {
            Twitch._config.session = {}, Twitch._storage.removeItem(SESSION_KEY), Twitch.events.emit("auth.logout"), typeof callback == "function" && callback(null)
        },
        initSession = function() {
            var storedSession;
            Twitch._config.session = {};
            if (window.JSON) {
                storedSession = Twitch._storage.getItem(SESSION_KEY);
                if (storedSession) try {
                    Twitch._config.session = JSON.parse(storedSession)
                } catch (e) {}
            }
            document.location.hash.match(/access_token=(\w+)/) && (Twitch._config.session = parseFragment(), window.JSON && Twitch._storage.setItem(SESSION_KEY, JSON.stringify(Twitch._config.session))), getStatus(function(err, status) {
                status.authenticated && Twitch.events.emit("auth.login")
            })
        };
    Twitch.extend({
        _initSession: initSession,
        _parseFragment: parseFragment,
        getToken: getToken,
        getStatus: getStatus,
        login: login,
        logout: logout
    })
}(),
function() {
    function EventEmitter() {
        this._events = {}, this._maxListeners = 10
    }

    function Event(type, listener, scope, once, instance) {
        this.type = type, this.listener = listener, this.scope = scope, this.once = once, this.instance = instance
    }
    Event.prototype.fire = function(args) {
        this.listener.apply(this.scope || this.instance, args);
        if (this.once) return this.instance.removeListener(this.type, this.listener, this.scope), !1
    }, EventEmitter.prototype.eachListener = function(type, callback) {
        var i = null,
            possibleListeners = null,
            result = null;
        if (this._events.hasOwnProperty(type)) {
            possibleListeners = this._events[type];
            for (i = 0; i < possibleListeners.length; i += 1) {
                result = callback.call(this, possibleListeners[i], i);
                if (result === !1) i -= 1;
                else if (result === !0) break
            }
        }
        return this
    }, EventEmitter.prototype.addListener = function(type, listener, scope, once) {
        return this._events.hasOwnProperty(type) || (this._events[type] = []), this._events[type].push(new Event(type, listener, scope, once, this)), this.emit("newListener", type, listener, scope, once), this._maxListeners && !this._events[type].warned && this._events[type].length > this._maxListeners && (Twitch.log("Possible EventEmitter memory leak detected. " + this._events[type].length + " listeners added. Use emitter.setMaxListeners() to increase limit."), this._events[type].warned = !0), this
    }, EventEmitter.prototype.on = EventEmitter.prototype.addListener, EventEmitter.prototype.once = function(type, listener, scope) {
        return this.addListener(type, listener, scope, !0)
    }, EventEmitter.prototype.removeListener = function(type, listener, scope) {
        return this.eachListener(type, function(currentListener, index) {
            currentListener.listener === listener && (!scope || currentListener.scope === scope) && this._events[type].splice(index, 1)
        }), this._events[type] && this._events[type].length === 0 && delete this._events[type], this
    }, EventEmitter.prototype.off = EventEmitter.prototype.removeListener, EventEmitter.prototype.removeAllListeners = function(type) {
        return type && this._events.hasOwnProperty(type) ? delete this._events[type] : type || (this._events = {}), this
    }, EventEmitter.prototype.listeners = function(type) {
        if (this._events.hasOwnProperty(type)) {
            var listeners = [];
            return this.eachListener(type, function(evt) {
                listeners.push(evt.listener)
            }), listeners
        }
        return []
    }, EventEmitter.prototype.emit = function(type) {
        var args = [],
            i = null;
        for (i = 1; i < arguments.length; i += 1) args.push(arguments[i]);
        return this.eachListener(type, function(currentListener) {
            return currentListener.fire(args)
        }), this
    }, EventEmitter.prototype.setMaxListeners = function(maxListeners) {
        return this._maxListeners = maxListeners, this
    }, Twitch.extend({
        events: new EventEmitter
    })
}();

/*!
 * Vue.js v2.5.9
 * (c) 2014-2017 Evan You
 * Released under the MIT License.
 */
! function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.Vue = t()
}(this, function() {
    "use strict";

    function e(e) {
        return void 0 === e || null === e
    }

    function t(e) {
        return void 0 !== e && null !== e
    }

    function n(e) {
        return !0 === e
    }

    function r(e) {
        return !1 === e
    }

    function i(e) {
        return "string" == typeof e || "number" == typeof e || "boolean" == typeof e
    }

    function o(e) {
        return null !== e && "object" == typeof e
    }

    function a(e) {
        return "[object Object]" === Si.call(e)
    }

    function s(e) {
        return "[object RegExp]" === Si.call(e)
    }

    function c(e) {
        var t = parseFloat(String(e));
        return t >= 0 && Math.floor(t) === t && isFinite(e)
    }

    function u(e) {
        return null == e ? "" : "object" == typeof e ? JSON.stringify(e, null, 2) : String(e)
    }

    function l(e) {
        var t = parseFloat(e);
        return isNaN(t) ? e : t
    }

    function f(e, t) {
        for (var n = Object.create(null), r = e.split(","), i = 0; i < r.length; i++) n[r[i]] = !0;
        return t ? function(e) {
            return n[e.toLowerCase()]
        } : function(e) {
            return n[e]
        }
    }

    function d(e, t) {
        if (e.length) {
            var n = e.indexOf(t);
            if (n > -1) return e.splice(n, 1)
        }
    }

    function p(e, t) {
        return ji.call(e, t)
    }

    function v(e) {
        var t = Object.create(null);
        return function(n) {
            return t[n] || (t[n] = e(n))
        }
    }

    function h(e, t) {
        function n(n) {
            var r = arguments.length;
            return r ? r > 1 ? e.apply(t, arguments) : e.call(t, n) : e.call(t)
        }
        return n._length = e.length, n
    }

    function m(e, t) {
        t = t || 0;
        for (var n = e.length - t, r = new Array(n); n--;) r[n] = e[n + t];
        return r
    }

    function y(e, t) {
        for (var n in t) e[n] = t[n];
        return e
    }

    function g(e) {
        for (var t = {}, n = 0; n < e.length; n++) e[n] && y(t, e[n]);
        return t
    }

    function _(e, t, n) {}

    function b(e, t) {
        if (e === t) return !0;
        var n = o(e),
            r = o(t);
        if (!n || !r) return !n && !r && String(e) === String(t);
        try {
            var i = Array.isArray(e),
                a = Array.isArray(t);
            if (i && a) return e.length === t.length && e.every(function(e, n) {
                return b(e, t[n])
            });
            if (i || a) return !1;
            var s = Object.keys(e),
                c = Object.keys(t);
            return s.length === c.length && s.every(function(n) {
                return b(e[n], t[n])
            })
        } catch (e) {
            return !1
        }
    }

    function $(e, t) {
        for (var n = 0; n < e.length; n++)
            if (b(e[n], t)) return n;
        return -1
    }

    function C(e) {
        var t = !1;
        return function() {
            t || (t = !0, e.apply(this, arguments))
        }
    }

    function w(e) {
        var t = (e + "").charCodeAt(0);
        return 36 === t || 95 === t
    }

    function x(e, t, n, r) {
        Object.defineProperty(e, t, {
            value: n,
            enumerable: !!r,
            writable: !0,
            configurable: !0
        })
    }

    function k(e) {
        if (!Vi.test(e)) {
            var t = e.split(".");
            return function(e) {
                for (var n = 0; n < t.length; n++) {
                    if (!e) return;
                    e = e[t[n]]
                }
                return e
            }
        }
    }

    function A(e) {
        return "function" == typeof e && /native code/.test(e.toString())
    }

    function O(e) {
        lo.target && fo.push(lo.target), lo.target = e
    }

    function S() {
        lo.target = fo.pop()
    }

    function T(e) {
        return new po(void 0, void 0, void 0, String(e))
    }

    function E(e, t) {
        var n = e.componentOptions,
            r = new po(e.tag, e.data, e.children, e.text, e.elm, e.context, n, e.asyncFactory);
        return r.ns = e.ns, r.isStatic = e.isStatic, r.key = e.key, r.isComment = e.isComment, r.fnContext = e.fnContext, r.fnOptions = e.fnOptions, r.fnScopeId = e.fnScopeId, r.isCloned = !0, t && (e.children && (r.children = j(e.children, !0)), n && n.children && (n.children = j(n.children, !0))), r
    }

    function j(e, t) {
        for (var n = e.length, r = new Array(n), i = 0; i < n; i++) r[i] = E(e[i], t);
        return r
    }

    function N(e, t, n) {
        e.__proto__ = t
    }

    function L(e, t, n) {
        for (var r = 0, i = n.length; r < i; r++) {
            var o = n[r];
            x(e, o, t[o])
        }
    }

    function I(e, t) {
        if (o(e) && !(e instanceof po)) {
            var n;
            return p(e, "__ob__") && e.__ob__ instanceof bo ? n = e.__ob__ : _o.shouldConvert && !oo() && (Array.isArray(e) || a(e)) && Object.isExtensible(e) && !e._isVue && (n = new bo(e)), t && n && n.vmCount++, n
        }
    }

    function M(e, t, n, r, i) {
        var o = new lo,
            a = Object.getOwnPropertyDescriptor(e, t);
        if (!a || !1 !== a.configurable) {
            var s = a && a.get,
                c = a && a.set,
                u = !i && I(n);
            Object.defineProperty(e, t, {
                enumerable: !0,
                configurable: !0,
                get: function() {
                    var t = s ? s.call(e) : n;
                    return lo.target && (o.depend(), u && (u.dep.depend(), Array.isArray(t) && F(t))), t
                },
                set: function(t) {
                    var r = s ? s.call(e) : n;
                    t === r || t !== t && r !== r || (c ? c.call(e, t) : n = t, u = !i && I(t), o.notify())
                }
            })
        }
    }

    function D(e, t, n) {
        if (Array.isArray(e) && c(t)) return e.length = Math.max(e.length, t), e.splice(t, 1, n), n;
        if (t in e && !(t in Object.prototype)) return e[t] = n, n;
        var r = e.__ob__;
        return e._isVue || r && r.vmCount ? n : r ? (M(r.value, t, n), r.dep.notify(), n) : (e[t] = n, n)
    }

    function P(e, t) {
        if (Array.isArray(e) && c(t)) e.splice(t, 1);
        else {
            var n = e.__ob__;
            e._isVue || n && n.vmCount || p(e, t) && (delete e[t], n && n.dep.notify())
        }
    }

    function F(e) {
        for (var t = void 0, n = 0, r = e.length; n < r; n++)(t = e[n]) && t.__ob__ && t.__ob__.dep.depend(), Array.isArray(t) && F(t)
    }

    function R(e, t) {
        if (!t) return e;
        for (var n, r, i, o = Object.keys(t), s = 0; s < o.length; s++) r = e[n = o[s]], i = t[n], p(e, n) ? a(r) && a(i) && R(r, i) : D(e, n, i);
        return e
    }

    function H(e, t, n) {
        return n ? function() {
            var r = "function" == typeof t ? t.call(n) : t,
                i = "function" == typeof e ? e.call(n) : e;
            return r ? R(r, i) : i
        } : t ? e ? function() {
            return R("function" == typeof t ? t.call(this) : t, "function" == typeof e ? e.call(this) : e)
        } : t : e
    }

    function B(e, t) {
        return t ? e ? e.concat(t) : Array.isArray(t) ? t : [t] : e
    }

    function U(e, t, n, r) {
        var i = Object.create(e || null);
        return t ? y(i, t) : i
    }

    function V(e, t) {
        var n = e.props;
        if (n) {
            var r, i, o = {};
            if (Array.isArray(n))
                for (r = n.length; r--;) "string" == typeof(i = n[r]) && (o[Li(i)] = {
                    type: null
                });
            else if (a(n))
                for (var s in n) i = n[s], o[Li(s)] = a(i) ? i : {
                    type: i
                };
            e.props = o
        }
    }

    function z(e, t) {
        var n = e.inject,
            r = e.inject = {};
        if (Array.isArray(n))
            for (var i = 0; i < n.length; i++) r[n[i]] = {
                from: n[i]
            };
        else if (a(n))
            for (var o in n) {
                var s = n[o];
                r[o] = a(s) ? y({
                    from: o
                }, s) : {
                    from: s
                }
            }
    }

    function K(e) {
        var t = e.directives;
        if (t)
            for (var n in t) {
                var r = t[n];
                "function" == typeof r && (t[n] = {
                    bind: r,
                    update: r
                })
            }
    }

    function J(e, t, n) {
        function r(r) {
            var i = $o[r] || xo;
            c[r] = i(e[r], t[r], n, r)
        }
        "function" == typeof t && (t = t.options), V(t, n), z(t, n), K(t);
        var i = t.extends;
        if (i && (e = J(e, i, n)), t.mixins)
            for (var o = 0, a = t.mixins.length; o < a; o++) e = J(e, t.mixins[o], n);
        var s, c = {};
        for (s in e) r(s);
        for (s in t) p(e, s) || r(s);
        return c
    }

    function q(e, t, n, r) {
        if ("string" == typeof n) {
            var i = e[t];
            if (p(i, n)) return i[n];
            var o = Li(n);
            if (p(i, o)) return i[o];
            var a = Ii(o);
            if (p(i, a)) return i[a];
            var s = i[n] || i[o] || i[a];
            return s
        }
    }

    function W(e, t, n, r) {
        var i = t[e],
            o = !p(n, e),
            a = n[e];
        if (X(Boolean, i.type) && (o && !p(i, "default") ? a = !1 : X(String, i.type) || "" !== a && a !== Di(e) || (a = !0)), void 0 === a) {
            a = G(r, i, e);
            var s = _o.shouldConvert;
            _o.shouldConvert = !0, I(a), _o.shouldConvert = s
        }
        return a
    }

    function G(e, t, n) {
        if (p(t, "default")) {
            var r = t.default;
            return e && e.$options.propsData && void 0 === e.$options.propsData[n] && void 0 !== e._props[n] ? e._props[n] : "function" == typeof r && "Function" !== Z(t.type) ? r.call(e) : r
        }
    }

    function Z(e) {
        var t = e && e.toString().match(/^\s*function (\w+)/);
        return t ? t[1] : ""
    }

    function X(e, t) {
        if (!Array.isArray(t)) return Z(t) === Z(e);
        for (var n = 0, r = t.length; n < r; n++)
            if (Z(t[n]) === Z(e)) return !0;
        return !1
    }

    function Y(e, t, n) {
        if (t)
            for (var r = t; r = r.$parent;) {
                var i = r.$options.errorCaptured;
                if (i)
                    for (var o = 0; o < i.length; o++) try {
                        if (!1 === i[o].call(r, e, t, n)) return
                    } catch (e) {
                        Q(e, r, "errorCaptured hook")
                    }
            }
        Q(e, t, n)
    }

    function Q(e, t, n) {
        if (Ui.errorHandler) try {
            return Ui.errorHandler.call(null, e, t, n)
        } catch (e) {
            ee(e, null, "config.errorHandler")
        }
        ee(e, t, n)
    }

    function ee(e, t, n) {
        if (!Ki && !Ji || "undefined" == typeof console) throw e;
        console.error(e)
    }

    function te() {
        Ao = !1;
        var e = ko.slice(0);
        ko.length = 0;
        for (var t = 0; t < e.length; t++) e[t]()
    }

    function ne(e) {
        return e._withTask || (e._withTask = function() {
            Oo = !0;
            var t = e.apply(null, arguments);
            return Oo = !1, t
        })
    }

    function re(e, t) {
        var n;
        if (ko.push(function() {
                if (e) try {
                    e.call(t)
                } catch (e) {
                    Y(e, t, "nextTick")
                } else n && n(t)
            }), Ao || (Ao = !0, Oo ? wo() : Co()), !e && "undefined" != typeof Promise) return new Promise(function(e) {
            n = e
        })
    }

    function ie(e) {
        oe(e, No), No.clear()
    }

    function oe(e, t) {
        var n, r, i = Array.isArray(e);
        if ((i || o(e)) && !Object.isFrozen(e)) {
            if (e.__ob__) {
                var a = e.__ob__.dep.id;
                if (t.has(a)) return;
                t.add(a)
            }
            if (i)
                for (n = e.length; n--;) oe(e[n], t);
            else
                for (n = (r = Object.keys(e)).length; n--;) oe(e[r[n]], t)
        }
    }

    function ae(e) {
        function t() {
            var e = arguments,
                n = t.fns;
            if (!Array.isArray(n)) return n.apply(null, arguments);
            for (var r = n.slice(), i = 0; i < r.length; i++) r[i].apply(null, e)
        }
        return t.fns = e, t
    }

    function se(t, n, r, i, o) {
        var a, s, c, u;
        for (a in t) s = t[a], c = n[a], u = Lo(a), e(s) || (e(c) ? (e(s.fns) && (s = t[a] = ae(s)), r(u.name, s, u.once, u.capture, u.passive)) : s !== c && (c.fns = s, t[a] = c));
        for (a in n) e(t[a]) && i((u = Lo(a)).name, n[a], u.capture)
    }

    function ce(r, i, o) {
        function a() {
            o.apply(this, arguments), d(s.fns, a)
        }
        r instanceof po && (r = r.data.hook || (r.data.hook = {}));
        var s, c = r[i];
        e(c) ? s = ae([a]) : t(c.fns) && n(c.merged) ? (s = c).fns.push(a) : s = ae([c, a]), s.merged = !0, r[i] = s
    }

    function ue(n, r, i) {
        var o = r.options.props;
        if (!e(o)) {
            var a = {},
                s = n.attrs,
                c = n.props;
            if (t(s) || t(c))
                for (var u in o) {
                    var l = Di(u);
                    le(a, c, u, l, !0) || le(a, s, u, l, !1)
                }
            return a
        }
    }

    function le(e, n, r, i, o) {
        if (t(n)) {
            if (p(n, r)) return e[r] = n[r], o || delete n[r], !0;
            if (p(n, i)) return e[r] = n[i], o || delete n[i], !0
        }
        return !1
    }

    function fe(e) {
        for (var t = 0; t < e.length; t++)
            if (Array.isArray(e[t])) return Array.prototype.concat.apply([], e);
        return e
    }

    function de(e) {
        return i(e) ? [T(e)] : Array.isArray(e) ? ve(e) : void 0
    }

    function pe(e) {
        return t(e) && t(e.text) && r(e.isComment)
    }

    function ve(r, o) {
        var a, s, c, u, l = [];
        for (a = 0; a < r.length; a++) e(s = r[a]) || "boolean" == typeof s || (u = l[c = l.length - 1], Array.isArray(s) ? s.length > 0 && (pe((s = ve(s, (o || "") + "_" + a))[0]) && pe(u) && (l[c] = T(u.text + s[0].text), s.shift()), l.push.apply(l, s)) : i(s) ? pe(u) ? l[c] = T(u.text + s) : "" !== s && l.push(T(s)) : pe(s) && pe(u) ? l[c] = T(u.text + s.text) : (n(r._isVList) && t(s.tag) && e(s.key) && t(o) && (s.key = "__vlist" + o + "_" + a + "__"), l.push(s)));
        return l
    }

    function he(e, t) {
        return (e.__esModule || so && "Module" === e[Symbol.toStringTag]) && (e = e.default), o(e) ? t.extend(e) : e
    }

    function me(e, t, n, r, i) {
        var o = ho();
        return o.asyncFactory = e, o.asyncMeta = {
            data: t,
            context: n,
            children: r,
            tag: i
        }, o
    }

    function ye(r, i, a) {
        if (n(r.error) && t(r.errorComp)) return r.errorComp;
        if (t(r.resolved)) return r.resolved;
        if (n(r.loading) && t(r.loadingComp)) return r.loadingComp;
        if (!t(r.contexts)) {
            var s = r.contexts = [a],
                c = !0,
                u = function() {
                    for (var e = 0, t = s.length; e < t; e++) s[e].$forceUpdate()
                },
                l = C(function(e) {
                    r.resolved = he(e, i), c || u()
                }),
                f = C(function(e) {
                    t(r.errorComp) && (r.error = !0, u())
                }),
                d = r(l, f);
            return o(d) && ("function" == typeof d.then ? e(r.resolved) && d.then(l, f) : t(d.component) && "function" == typeof d.component.then && (d.component.then(l, f), t(d.error) && (r.errorComp = he(d.error, i)), t(d.loading) && (r.loadingComp = he(d.loading, i), 0 === d.delay ? r.loading = !0 : setTimeout(function() {
                e(r.resolved) && e(r.error) && (r.loading = !0, u())
            }, d.delay || 200)), t(d.timeout) && setTimeout(function() {
                e(r.resolved) && f(null)
            }, d.timeout))), c = !1, r.loading ? r.loadingComp : r.resolved
        }
        r.contexts.push(a)
    }

    function ge(e) {
        return e.isComment && e.asyncFactory
    }

    function _e(e) {
        if (Array.isArray(e))
            for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (t(r) && (t(r.componentOptions) || ge(r))) return r
            }
    }

    function be(e) {
        e._events = Object.create(null), e._hasHookEvent = !1;
        var t = e.$options._parentListeners;
        t && we(e, t)
    }

    function $e(e, t, n) {
        n ? jo.$once(e, t) : jo.$on(e, t)
    }

    function Ce(e, t) {
        jo.$off(e, t)
    }

    function we(e, t, n) {
        jo = e, se(t, n || {}, $e, Ce, e), jo = void 0
    }

    function xe(e, t) {
        var n = {};
        if (!e) return n;
        for (var r = 0, i = e.length; r < i; r++) {
            var o = e[r],
                a = o.data;
            if (a && a.attrs && a.attrs.slot && delete a.attrs.slot, o.context !== t && o.fnContext !== t || !a || null == a.slot)(n.default || (n.default = [])).push(o);
            else {
                var s = o.data.slot,
                    c = n[s] || (n[s] = []);
                "template" === o.tag ? c.push.apply(c, o.children) : c.push(o)
            }
        }
        for (var u in n) n[u].every(ke) && delete n[u];
        return n
    }

    function ke(e) {
        return e.isComment && !e.asyncFactory || " " === e.text
    }

    function Ae(e, t) {
        t = t || {};
        for (var n = 0; n < e.length; n++) Array.isArray(e[n]) ? Ae(e[n], t) : t[e[n].key] = e[n].fn;
        return t
    }

    function Oe(e) {
        var t = e.$options,
            n = t.parent;
        if (n && !t.abstract) {
            for (; n.$options.abstract && n.$parent;) n = n.$parent;
            n.$children.push(e)
        }
        e.$parent = n, e.$root = n ? n.$root : e, e.$children = [], e.$refs = {}, e._watcher = null, e._inactive = null, e._directInactive = !1, e._isMounted = !1, e._isDestroyed = !1, e._isBeingDestroyed = !1
    }

    function Se(e, t, n) {
        e.$el = t, e.$options.render || (e.$options.render = ho), Le(e, "beforeMount");
        var r;
        return r = function() {
            e._update(e._render(), n)
        }, new Uo(e, r, _, null, !0), n = !1, null == e.$vnode && (e._isMounted = !0, Le(e, "mounted")), e
    }

    function Te(e, t, n, r, i) {
        var o = !!(i || e.$options._renderChildren || r.data.scopedSlots || e.$scopedSlots !== Oi);
        if (e.$options._parentVnode = r, e.$vnode = r, e._vnode && (e._vnode.parent = r), e.$options._renderChildren = i, e.$attrs = r.data && r.data.attrs || Oi, e.$listeners = n || Oi, t && e.$options.props) {
            _o.shouldConvert = !1;
            for (var a = e._props, s = e.$options._propKeys || [], c = 0; c < s.length; c++) {
                var u = s[c];
                a[u] = W(u, e.$options.props, t, e)
            }
            _o.shouldConvert = !0, e.$options.propsData = t
        }
        if (n) {
            var l = e.$options._parentListeners;
            e.$options._parentListeners = n, we(e, n, l)
        }
        o && (e.$slots = xe(i, r.context), e.$forceUpdate())
    }

    function Ee(e) {
        for (; e && (e = e.$parent);)
            if (e._inactive) return !0;
        return !1
    }

    function je(e, t) {
        if (t) {
            if (e._directInactive = !1, Ee(e)) return
        } else if (e._directInactive) return;
        if (e._inactive || null === e._inactive) {
            e._inactive = !1;
            for (var n = 0; n < e.$children.length; n++) je(e.$children[n]);
            Le(e, "activated")
        }
    }

    function Ne(e, t) {
        if (!(t && (e._directInactive = !0, Ee(e)) || e._inactive)) {
            e._inactive = !0;
            for (var n = 0; n < e.$children.length; n++) Ne(e.$children[n]);
            Le(e, "deactivated")
        }
    }

    function Le(e, t) {
        var n = e.$options[t];
        if (n)
            for (var r = 0, i = n.length; r < i; r++) try {
                n[r].call(e)
            } catch (n) {
                Y(n, e, t + " hook")
            }
        e._hasHookEvent && e.$emit("hook:" + t)
    }

    function Ie() {
        Ho = Mo.length = Do.length = 0, Po = {}, Fo = Ro = !1
    }

    function Me() {
        Ro = !0;
        var e, t;
        for (Mo.sort(function(e, t) {
                return e.id - t.id
            }), Ho = 0; Ho < Mo.length; Ho++) t = (e = Mo[Ho]).id, Po[t] = null, e.run();
        var n = Do.slice(),
            r = Mo.slice();
        Ie(), Fe(n), De(r), ao && Ui.devtools && ao.emit("flush")
    }

    function De(e) {
        for (var t = e.length; t--;) {
            var n = e[t],
                r = n.vm;
            r._watcher === n && r._isMounted && Le(r, "updated")
        }
    }

    function Pe(e) {
        e._inactive = !1, Do.push(e)
    }

    function Fe(e) {
        for (var t = 0; t < e.length; t++) e[t]._inactive = !0, je(e[t], !0)
    }

    function Re(e) {
        var t = e.id;
        if (null == Po[t]) {
            if (Po[t] = !0, Ro) {
                for (var n = Mo.length - 1; n > Ho && Mo[n].id > e.id;) n--;
                Mo.splice(n + 1, 0, e)
            } else Mo.push(e);
            Fo || (Fo = !0, re(Me))
        }
    }

    function He(e, t, n) {
        Vo.get = function() {
            return this[t][n]
        }, Vo.set = function(e) {
            this[t][n] = e
        }, Object.defineProperty(e, n, Vo)
    }

    function Be(e) {
        e._watchers = [];
        var t = e.$options;
        t.props && Ue(e, t.props), t.methods && We(e, t.methods), t.data ? Ve(e) : I(e._data = {}, !0), t.computed && Ke(e, t.computed), t.watch && t.watch !== eo && Ge(e, t.watch)
    }

    function Ue(e, t) {
        var n = e.$options.propsData || {},
            r = e._props = {},
            i = e.$options._propKeys = [],
            o = !e.$parent;
        _o.shouldConvert = o;
        for (var a in t) ! function(o) {
            i.push(o);
            var a = W(o, t, n, e);
            M(r, o, a), o in e || He(e, "_props", o)
        }(a);
        _o.shouldConvert = !0
    }

    function Ve(e) {
        var t = e.$options.data;
        a(t = e._data = "function" == typeof t ? ze(t, e) : t || {}) || (t = {});
        for (var n = Object.keys(t), r = e.$options.props, i = n.length; i--;) {
            var o = n[i];
            r && p(r, o) || w(o) || He(e, "_data", o)
        }
        I(t, !0)
    }

    function ze(e, t) {
        try {
            return e.call(t, t)
        } catch (e) {
            return Y(e, t, "data()"), {}
        }
    }

    function Ke(e, t) {
        var n = e._computedWatchers = Object.create(null),
            r = oo();
        for (var i in t) {
            var o = t[i],
                a = "function" == typeof o ? o : o.get;
            r || (n[i] = new Uo(e, a || _, _, zo)), i in e || Je(e, i, o)
        }
    }

    function Je(e, t, n) {
        var r = !oo();
        "function" == typeof n ? (Vo.get = r ? qe(t) : n, Vo.set = _) : (Vo.get = n.get ? r && !1 !== n.cache ? qe(t) : n.get : _, Vo.set = n.set ? n.set : _), Object.defineProperty(e, t, Vo)
    }

    function qe(e) {
        return function() {
            var t = this._computedWatchers && this._computedWatchers[e];
            if (t) return t.dirty && t.evaluate(), lo.target && t.depend(), t.value
        }
    }

    function We(e, t) {
        for (var n in t) e[n] = null == t[n] ? _ : h(t[n], e)
    }

    function Ge(e, t) {
        for (var n in t) {
            var r = t[n];
            if (Array.isArray(r))
                for (var i = 0; i < r.length; i++) Ze(e, n, r[i]);
            else Ze(e, n, r)
        }
    }

    function Ze(e, t, n, r) {
        return a(n) && (r = n, n = n.handler), "string" == typeof n && (n = e[n]), e.$watch(t, n, r)
    }

    function Xe(e) {
        var t = e.$options.provide;
        t && (e._provided = "function" == typeof t ? t.call(e) : t)
    }

    function Ye(e) {
        var t = Qe(e.$options.inject, e);
        t && (_o.shouldConvert = !1, Object.keys(t).forEach(function(n) {
            M(e, n, t[n])
        }), _o.shouldConvert = !0)
    }

    function Qe(e, t) {
        if (e) {
            for (var n = Object.create(null), r = so ? Reflect.ownKeys(e).filter(function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }) : Object.keys(e), i = 0; i < r.length; i++) {
                for (var o = r[i], a = e[o].from, s = t; s;) {
                    if (s._provided && a in s._provided) {
                        n[o] = s._provided[a];
                        break
                    }
                    s = s.$parent
                }
                if (!s && "default" in e[o]) {
                    var c = e[o].default;
                    n[o] = "function" == typeof c ? c.call(t) : c
                }
            }
            return n
        }
    }

    function et(e, n) {
        var r, i, a, s, c;
        if (Array.isArray(e) || "string" == typeof e)
            for (r = new Array(e.length), i = 0, a = e.length; i < a; i++) r[i] = n(e[i], i);
        else if ("number" == typeof e)
            for (r = new Array(e), i = 0; i < e; i++) r[i] = n(i + 1, i);
        else if (o(e))
            for (s = Object.keys(e), r = new Array(s.length), i = 0, a = s.length; i < a; i++) c = s[i], r[i] = n(e[c], c, i);
        return t(r) && (r._isVList = !0), r
    }

    function tt(e, t, n, r) {
        var i, o = this.$scopedSlots[e];
        if (o) n = n || {}, r && (n = y(y({}, r), n)), i = o(n) || t;
        else {
            var a = this.$slots[e];
            a && (a._rendered = !0), i = a || t
        }
        var s = n && n.slot;
        return s ? this.$createElement("template", {
            slot: s
        }, i) : i
    }

    function nt(e) {
        return q(this.$options, "filters", e, !0) || Fi
    }

    function rt(e, t, n, r) {
        var i = Ui.keyCodes[t] || n;
        return i ? Array.isArray(i) ? -1 === i.indexOf(e) : i !== e : r ? Di(r) !== t : void 0
    }

    function it(e, t, n, r, i) {
        if (n)
            if (o(n)) {
                Array.isArray(n) && (n = g(n));
                var a;
                for (var s in n) ! function(o) {
                    if ("class" === o || "style" === o || Ei(o)) a = e;
                    else {
                        var s = e.attrs && e.attrs.type;
                        a = r || Ui.mustUseProp(t, s, o) ? e.domProps || (e.domProps = {}) : e.attrs || (e.attrs = {})
                    }
                    o in a || (a[o] = n[o], i && ((e.on || (e.on = {}))["update:" + o] = function(e) {
                        n[o] = e
                    }))
                }(s)
            } else;
        return e
    }

    function ot(e, t, n) {
        var r = arguments.length < 3,
            i = this.$options.staticRenderFns,
            o = r || n ? this._staticTrees || (this._staticTrees = []) : i.cached || (i.cached = []),
            a = o[e];
        return a && !t ? Array.isArray(a) ? j(a) : E(a) : (a = o[e] = i[e].call(this._renderProxy, null, this), st(a, "__static__" + e, !1), a)
    }

    function at(e, t, n) {
        return st(e, "__once__" + t + (n ? "_" + n : ""), !0), e
    }

    function st(e, t, n) {
        if (Array.isArray(e))
            for (var r = 0; r < e.length; r++) e[r] && "string" != typeof e[r] && ct(e[r], t + "_" + r, n);
        else ct(e, t, n)
    }

    function ct(e, t, n) {
        e.isStatic = !0, e.key = t, e.isOnce = n
    }

    function ut(e, t) {
        if (t)
            if (a(t)) {
                var n = e.on = e.on ? y({}, e.on) : {};
                for (var r in t) {
                    var i = n[r],
                        o = t[r];
                    n[r] = i ? [].concat(i, o) : o
                }
            } else;
        return e
    }

    function lt(e) {
        e._o = at, e._n = l, e._s = u, e._l = et, e._t = tt, e._q = b, e._i = $, e._m = ot, e._f = nt, e._k = rt, e._b = it, e._v = T, e._e = ho, e._u = Ae, e._g = ut
    }

    function ft(e, t, r, i, o) {
        var a = o.options;
        this.data = e, this.props = t, this.children = r, this.parent = i, this.listeners = e.on || Oi, this.injections = Qe(a.inject, i), this.slots = function() {
            return xe(r, i)
        };
        var s = Object.create(i),
            c = n(a._compiled),
            u = !c;
        c && (this.$options = a, this.$slots = this.slots(), this.$scopedSlots = e.scopedSlots || Oi), a._scopeId ? this._c = function(e, t, n, r) {
            var o = _t(s, e, t, n, r, u);
            return o && (o.fnScopeId = a._scopeId, o.fnContext = i), o
        } : this._c = function(e, t, n, r) {
            return _t(s, e, t, n, r, u)
        }
    }

    function dt(e, n, r, i, o) {
        var a = e.options,
            s = {},
            c = a.props;
        if (t(c))
            for (var u in c) s[u] = W(u, c, n || Oi);
        else t(r.attrs) && pt(s, r.attrs), t(r.props) && pt(s, r.props);
        var l = new ft(r, s, o, i, e),
            f = a.render.call(null, l._c, l);
        return f instanceof po && (f.fnContext = i, f.fnOptions = a, r.slot && ((f.data || (f.data = {})).slot = r.slot)), f
    }

    function pt(e, t) {
        for (var n in t) e[Li(n)] = t[n]
    }

    function vt(r, i, a, s, c) {
        if (!e(r)) {
            var u = a.$options._base;
            if (o(r) && (r = u.extend(r)), "function" == typeof r) {
                var l;
                if (e(r.cid) && (l = r, void 0 === (r = ye(l, u, a)))) return me(l, i, a, s, c);
                i = i || {}, xt(r), t(i.model) && gt(r.options, i);
                var f = ue(i, r, c);
                if (n(r.options.functional)) return dt(r, f, i, a, s);
                var d = i.on;
                if (i.on = i.nativeOn, n(r.options.abstract)) {
                    var p = i.slot;
                    i = {}, p && (i.slot = p)
                }
                mt(i);
                var v = r.options.name || c;
                return new po("vue-component-" + r.cid + (v ? "-" + v : ""), i, void 0, void 0, void 0, a, {
                    Ctor: r,
                    propsData: f,
                    listeners: d,
                    tag: c,
                    children: s
                }, l)
            }
        }
    }

    function ht(e, n, r, i) {
        var o = e.componentOptions,
            a = {
                _isComponent: !0,
                parent: n,
                propsData: o.propsData,
                _componentTag: o.tag,
                _parentVnode: e,
                _parentListeners: o.listeners,
                _renderChildren: o.children,
                _parentElm: r || null,
                _refElm: i || null
            },
            s = e.data.inlineTemplate;
        return t(s) && (a.render = s.render, a.staticRenderFns = s.staticRenderFns), new o.Ctor(a)
    }

    function mt(e) {
        e.hook || (e.hook = {});
        for (var t = 0; t < Jo.length; t++) {
            var n = Jo[t],
                r = e.hook[n],
                i = Ko[n];
            e.hook[n] = r ? yt(i, r) : i
        }
    }

    function yt(e, t) {
        return function(n, r, i, o) {
            e(n, r, i, o), t(n, r, i, o)
        }
    }

    function gt(e, n) {
        var r = e.model && e.model.prop || "value",
            i = e.model && e.model.event || "input";
        (n.props || (n.props = {}))[r] = n.model.value;
        var o = n.on || (n.on = {});
        t(o[i]) ? o[i] = [n.model.callback].concat(o[i]) : o[i] = n.model.callback
    }

    function _t(e, t, r, o, a, s) {
        return (Array.isArray(r) || i(r)) && (a = o, o = r, r = void 0), n(s) && (a = Wo), bt(e, t, r, o, a)
    }

    function bt(e, n, r, i, o) {
        if (t(r) && t(r.__ob__)) return ho();
        if (t(r) && t(r.is) && (n = r.is), !n) return ho();
        Array.isArray(i) && "function" == typeof i[0] && ((r = r || {}).scopedSlots = {
            default: i[0]
        }, i.length = 0), o === Wo ? i = de(i) : o === qo && (i = fe(i));
        var a, s;
        if ("string" == typeof n) {
            var c;
            s = e.$vnode && e.$vnode.ns || Ui.getTagNamespace(n), a = Ui.isReservedTag(n) ? new po(Ui.parsePlatformTagName(n), r, i, void 0, void 0, e) : t(c = q(e.$options, "components", n)) ? vt(c, r, e, i, n) : new po(n, r, i, void 0, void 0, e)
        } else a = vt(n, r, e, i);
        return t(a) ? (s && $t(a, s), a) : ho()
    }

    function $t(r, i, o) {
        if (r.ns = i, "foreignObject" === r.tag && (i = void 0, o = !0), t(r.children))
            for (var a = 0, s = r.children.length; a < s; a++) {
                var c = r.children[a];
                t(c.tag) && (e(c.ns) || n(o)) && $t(c, i, o)
            }
    }

    function Ct(e) {
        e._vnode = null, e._staticTrees = null;
        var t = e.$options,
            n = e.$vnode = t._parentVnode,
            r = n && n.context;
        e.$slots = xe(t._renderChildren, r), e.$scopedSlots = Oi, e._c = function(t, n, r, i) {
            return _t(e, t, n, r, i, !1)
        }, e.$createElement = function(t, n, r, i) {
            return _t(e, t, n, r, i, !0)
        };
        var i = n && n.data;
        M(e, "$attrs", i && i.attrs || Oi, null, !0), M(e, "$listeners", t._parentListeners || Oi, null, !0)
    }

    function wt(e, t) {
        var n = e.$options = Object.create(e.constructor.options);
        n.parent = t.parent, n.propsData = t.propsData, n._parentVnode = t._parentVnode, n._parentListeners = t._parentListeners, n._renderChildren = t._renderChildren, n._componentTag = t._componentTag, n._parentElm = t._parentElm, n._refElm = t._refElm, t.render && (n.render = t.render, n.staticRenderFns = t.staticRenderFns)
    }

    function xt(e) {
        var t = e.options;
        if (e.super) {
            var n = xt(e.super);
            if (n !== e.superOptions) {
                e.superOptions = n;
                var r = kt(e);
                r && y(e.extendOptions, r), (t = e.options = J(n, e.extendOptions)).name && (t.components[t.name] = e)
            }
        }
        return t
    }

    function kt(e) {
        var t, n = e.options,
            r = e.extendOptions,
            i = e.sealedOptions;
        for (var o in n) n[o] !== i[o] && (t || (t = {}), t[o] = At(n[o], r[o], i[o]));
        return t
    }

    function At(e, t, n) {
        if (Array.isArray(e)) {
            var r = [];
            n = Array.isArray(n) ? n : [n], t = Array.isArray(t) ? t : [t];
            for (var i = 0; i < e.length; i++)(t.indexOf(e[i]) >= 0 || n.indexOf(e[i]) < 0) && r.push(e[i]);
            return r
        }
        return e
    }

    function Ot(e) {
        this._init(e)
    }

    function St(e) {
        e.use = function(e) {
            var t = this._installedPlugins || (this._installedPlugins = []);
            if (t.indexOf(e) > -1) return this;
            var n = m(arguments, 1);
            return n.unshift(this), "function" == typeof e.install ? e.install.apply(e, n) : "function" == typeof e && e.apply(null, n), t.push(e), this
        }
    }

    function Tt(e) {
        e.mixin = function(e) {
            return this.options = J(this.options, e), this
        }
    }

    function Et(e) {
        e.cid = 0;
        var t = 1;
        e.extend = function(e) {
            e = e || {};
            var n = this,
                r = n.cid,
                i = e._Ctor || (e._Ctor = {});
            if (i[r]) return i[r];
            var o = e.name || n.options.name,
                a = function(e) {
                    this._init(e)
                };
            return a.prototype = Object.create(n.prototype), a.prototype.constructor = a, a.cid = t++, a.options = J(n.options, e), a.super = n, a.options.props && jt(a), a.options.computed && Nt(a), a.extend = n.extend, a.mixin = n.mixin, a.use = n.use, Hi.forEach(function(e) {
                a[e] = n[e]
            }), o && (a.options.components[o] = a), a.superOptions = n.options, a.extendOptions = e, a.sealedOptions = y({}, a.options), i[r] = a, a
        }
    }

    function jt(e) {
        var t = e.options.props;
        for (var n in t) He(e.prototype, "_props", n)
    }

    function Nt(e) {
        var t = e.options.computed;
        for (var n in t) Je(e.prototype, n, t[n])
    }

    function Lt(e) {
        Hi.forEach(function(t) {
            e[t] = function(e, n) {
                return n ? ("component" === t && a(n) && (n.name = n.name || e, n = this.options._base.extend(n)), "directive" === t && "function" == typeof n && (n = {
                    bind: n,
                    update: n
                }), this.options[t + "s"][e] = n, n) : this.options[t + "s"][e]
            }
        })
    }

    function It(e) {
        return e && (e.Ctor.options.name || e.tag)
    }

    function Mt(e, t) {
        return Array.isArray(e) ? e.indexOf(t) > -1 : "string" == typeof e ? e.split(",").indexOf(t) > -1 : !!s(e) && e.test(t)
    }

    function Dt(e, t) {
        var n = e.cache,
            r = e.keys,
            i = e._vnode;
        for (var o in n) {
            var a = n[o];
            if (a) {
                var s = It(a.componentOptions);
                s && !t(s) && Pt(n, o, r, i)
            }
        }
    }

    function Pt(e, t, n, r) {
        var i = e[t];
        !i || r && i.tag === r.tag || i.componentInstance.$destroy(), e[t] = null, d(n, t)
    }

    function Ft(e) {
        for (var n = e.data, r = e, i = e; t(i.componentInstance);)(i = i.componentInstance._vnode).data && (n = Rt(i.data, n));
        for (; t(r = r.parent);) r.data && (n = Rt(n, r.data));
        return Ht(n.staticClass, n.class)
    }

    function Rt(e, n) {
        return {
            staticClass: Bt(e.staticClass, n.staticClass),
            class: t(e.class) ? [e.class, n.class] : n.class
        }
    }

    function Ht(e, n) {
        return t(e) || t(n) ? Bt(e, Ut(n)) : ""
    }

    function Bt(e, t) {
        return e ? t ? e + " " + t : e : t || ""
    }

    function Ut(e) {
        return Array.isArray(e) ? Vt(e) : o(e) ? zt(e) : "string" == typeof e ? e : ""
    }

    function Vt(e) {
        for (var n, r = "", i = 0, o = e.length; i < o; i++) t(n = Ut(e[i])) && "" !== n && (r && (r += " "), r += n);
        return r
    }

    function zt(e) {
        var t = "";
        for (var n in e) e[n] && (t && (t += " "), t += n);
        return t
    }

    function Kt(e) {
        return ya(e) ? "svg" : "math" === e ? "math" : void 0
    }

    function Jt(e) {
        if ("string" == typeof e) {
            var t = document.querySelector(e);
            return t || document.createElement("div")
        }
        return e
    }

    function qt(e, t) {
        var n = e.data.ref;
        if (n) {
            var r = e.context,
                i = e.componentInstance || e.elm,
                o = r.$refs;
            t ? Array.isArray(o[n]) ? d(o[n], i) : o[n] === i && (o[n] = void 0) : e.data.refInFor ? Array.isArray(o[n]) ? o[n].indexOf(i) < 0 && o[n].push(i) : o[n] = [i] : o[n] = i
        }
    }

    function Wt(r, i) {
        return r.key === i.key && (r.tag === i.tag && r.isComment === i.isComment && t(r.data) === t(i.data) && Gt(r, i) || n(r.isAsyncPlaceholder) && r.asyncFactory === i.asyncFactory && e(i.asyncFactory.error))
    }

    function Gt(e, n) {
        if ("input" !== e.tag) return !0;
        var r, i = t(r = e.data) && t(r = r.attrs) && r.type,
            o = t(r = n.data) && t(r = r.attrs) && r.type;
        return i === o || ba(i) && ba(o)
    }

    function Zt(e, n, r) {
        var i, o, a = {};
        for (i = n; i <= r; ++i) t(o = e[i].key) && (a[o] = i);
        return a
    }

    function Xt(e, t) {
        (e.data.directives || t.data.directives) && Yt(e, t)
    }

    function Yt(e, t) {
        var n, r, i, o = e === wa,
            a = t === wa,
            s = Qt(e.data.directives, e.context),
            c = Qt(t.data.directives, t.context),
            u = [],
            l = [];
        for (n in c) r = s[n], i = c[n], r ? (i.oldValue = r.value, tn(i, "update", t, e), i.def && i.def.componentUpdated && l.push(i)) : (tn(i, "bind", t, e), i.def && i.def.inserted && u.push(i));
        if (u.length) {
            var f = function() {
                for (var n = 0; n < u.length; n++) tn(u[n], "inserted", t, e)
            };
            o ? ce(t, "insert", f) : f()
        }
        if (l.length && ce(t, "postpatch", function() {
                for (var n = 0; n < l.length; n++) tn(l[n], "componentUpdated", t, e)
            }), !o)
            for (n in s) c[n] || tn(s[n], "unbind", e, e, a)
    }

    function Qt(e, t) {
        var n = Object.create(null);
        if (!e) return n;
        var r, i;
        for (r = 0; r < e.length; r++)(i = e[r]).modifiers || (i.modifiers = Aa), n[en(i)] = i, i.def = q(t.$options, "directives", i.name, !0);
        return n
    }

    function en(e) {
        return e.rawName || e.name + "." + Object.keys(e.modifiers || {}).join(".")
    }

    function tn(e, t, n, r, i) {
        var o = e.def && e.def[t];
        if (o) try {
            o(n.elm, e, n, r, i)
        } catch (r) {
            Y(r, n.context, "directive " + e.name + " " + t + " hook")
        }
    }

    function nn(n, r) {
        var i = r.componentOptions;
        if (!(t(i) && !1 === i.Ctor.options.inheritAttrs || e(n.data.attrs) && e(r.data.attrs))) {
            var o, a, s = r.elm,
                c = n.data.attrs || {},
                u = r.data.attrs || {};
            t(u.__ob__) && (u = r.data.attrs = y({}, u));
            for (o in u) a = u[o], c[o] !== a && rn(s, o, a);
            (Gi || Xi) && u.value !== c.value && rn(s, "value", u.value);
            for (o in c) e(u[o]) && (da(o) ? s.removeAttributeNS(fa, pa(o)) : ua(o) || s.removeAttribute(o))
        }
    }

    function rn(e, t, n) {
        if (la(t)) va(n) ? e.removeAttribute(t) : (n = "allowfullscreen" === t && "EMBED" === e.tagName ? "true" : t, e.setAttribute(t, n));
        else if (ua(t)) e.setAttribute(t, va(n) || "false" === n ? "false" : "true");
        else if (da(t)) va(n) ? e.removeAttributeNS(fa, pa(t)) : e.setAttributeNS(fa, t, n);
        else if (va(n)) e.removeAttribute(t);
        else {
            if (Gi && !Zi && "TEXTAREA" === e.tagName && "placeholder" === t && !e.__ieph) {
                var r = function(t) {
                    t.stopImmediatePropagation(), e.removeEventListener("input", r)
                };
                e.addEventListener("input", r), e.__ieph = !0
            }
            e.setAttribute(t, n)
        }
    }

    function on(n, r) {
        var i = r.elm,
            o = r.data,
            a = n.data;
        if (!(e(o.staticClass) && e(o.class) && (e(a) || e(a.staticClass) && e(a.class)))) {
            var s = Ft(r),
                c = i._transitionClasses;
            t(c) && (s = Bt(s, Ut(c))), s !== i._prevClass && (i.setAttribute("class", s), i._prevClass = s)
        }
    }

    function an(e) {
        function t() {
            (a || (a = [])).push(e.slice(v, i).trim()), v = i + 1
        }
        var n, r, i, o, a, s = !1,
            c = !1,
            u = !1,
            l = !1,
            f = 0,
            d = 0,
            p = 0,
            v = 0;
        for (i = 0; i < e.length; i++)
            if (r = n, n = e.charCodeAt(i), s) 39 === n && 92 !== r && (s = !1);
            else if (c) 34 === n && 92 !== r && (c = !1);
        else if (u) 96 === n && 92 !== r && (u = !1);
        else if (l) 47 === n && 92 !== r && (l = !1);
        else if (124 !== n || 124 === e.charCodeAt(i + 1) || 124 === e.charCodeAt(i - 1) || f || d || p) {
            switch (n) {
                case 34:
                    c = !0;
                    break;
                case 39:
                    s = !0;
                    break;
                case 96:
                    u = !0;
                    break;
                case 40:
                    p++;
                    break;
                case 41:
                    p--;
                    break;
                case 91:
                    d++;
                    break;
                case 93:
                    d--;
                    break;
                case 123:
                    f++;
                    break;
                case 125:
                    f--
            }
            if (47 === n) {
                for (var h = i - 1, m = void 0; h >= 0 && " " === (m = e.charAt(h)); h--);
                m && Ea.test(m) || (l = !0)
            }
        } else void 0 === o ? (v = i + 1, o = e.slice(0, i).trim()) : t();
        if (void 0 === o ? o = e.slice(0, i).trim() : 0 !== v && t(), a)
            for (i = 0; i < a.length; i++) o = sn(o, a[i]);
        return o
    }

    function sn(e, t) {
        var n = t.indexOf("(");
        return n < 0 ? '_f("' + t + '")(' + e + ")" : '_f("' + t.slice(0, n) + '")(' + e + "," + t.slice(n + 1)
    }

    function cn(e) {
        console.error("[Vue compiler]: " + e)
    }

    function un(e, t) {
        return e ? e.map(function(e) {
            return e[t]
        }).filter(function(e) {
            return e
        }) : []
    }

    function ln(e, t, n) {
        (e.props || (e.props = [])).push({
            name: t,
            value: n
        })
    }

    function fn(e, t, n) {
        (e.attrs || (e.attrs = [])).push({
            name: t,
            value: n
        })
    }

    function dn(e, t, n, r, i, o) {
        (e.directives || (e.directives = [])).push({
            name: t,
            rawName: n,
            value: r,
            arg: i,
            modifiers: o
        })
    }

    function pn(e, t, n, r, i, o) {
        (r = r || Oi).capture && (delete r.capture, t = "!" + t), r.once && (delete r.once, t = "~" + t), r.passive && (delete r.passive, t = "&" + t), "click" === t && (r.right ? (t = "contextmenu", delete r.right) : r.middle && (t = "mouseup"));
        var a;
        r.native ? (delete r.native, a = e.nativeEvents || (e.nativeEvents = {})) : a = e.events || (e.events = {});
        var s = {
            value: n
        };
        r !== Oi && (s.modifiers = r);
        var c = a[t];
        Array.isArray(c) ? i ? c.unshift(s) : c.push(s) : a[t] = c ? i ? [s, c] : [c, s] : s
    }

    function vn(e, t, n) {
        var r = hn(e, ":" + t) || hn(e, "v-bind:" + t);
        if (null != r) return an(r);
        if (!1 !== n) {
            var i = hn(e, t);
            if (null != i) return JSON.stringify(i)
        }
    }

    function hn(e, t, n) {
        var r;
        if (null != (r = e.attrsMap[t]))
            for (var i = e.attrsList, o = 0, a = i.length; o < a; o++)
                if (i[o].name === t) {
                    i.splice(o, 1);
                    break
                } return n && delete e.attrsMap[t], r
    }

    function mn(e, t, n) {
        var r = n || {},
            i = r.number,
            o = "$$v";
        r.trim && (o = "(typeof $$v === 'string'? $$v.trim(): $$v)"), i && (o = "_n(" + o + ")");
        var a = yn(t, o);
        e.model = {
            value: "(" + t + ")",
            expression: '"' + t + '"',
            callback: "function ($$v) {" + a + "}"
        }
    }

    function yn(e, t) {
        var n = gn(e);
        return null === n.key ? e + "=" + t : "$set(" + n.exp + ", " + n.key + ", " + t + ")"
    }

    function gn(e) {
        if (Yo = e.length, e.indexOf("[") < 0 || e.lastIndexOf("]") < Yo - 1) return (ta = e.lastIndexOf(".")) > -1 ? {
            exp: e.slice(0, ta),
            key: '"' + e.slice(ta + 1) + '"'
        } : {
            exp: e,
            key: null
        };
        for (Qo = e, ta = na = ra = 0; !bn();) $n(ea = _n()) ? wn(ea) : 91 === ea && Cn(ea);
        return {
            exp: e.slice(0, na),
            key: e.slice(na + 1, ra)
        }
    }

    function _n() {
        return Qo.charCodeAt(++ta)
    }

    function bn() {
        return ta >= Yo
    }

    function $n(e) {
        return 34 === e || 39 === e
    }

    function Cn(e) {
        var t = 1;
        for (na = ta; !bn();)
            if (e = _n(), $n(e)) wn(e);
            else if (91 === e && t++, 93 === e && t--, 0 === t) {
            ra = ta;
            break
        }
    }

    function wn(e) {
        for (var t = e; !bn() && (e = _n()) !== t;);
    }

    function xn(e, t, n) {
        var r = n && n.number,
            i = vn(e, "value") || "null",
            o = vn(e, "true-value") || "true",
            a = vn(e, "false-value") || "false";
        ln(e, "checked", "Array.isArray(" + t + ")?_i(" + t + "," + i + ")>-1" + ("true" === o ? ":(" + t + ")" : ":_q(" + t + "," + o + ")")), pn(e, "change", "var $$a=" + t + ",$$el=$event.target,$$c=$$el.checked?(" + o + "):(" + a + ");if(Array.isArray($$a)){var $$v=" + (r ? "_n(" + i + ")" : i) + ",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&(" + t + "=$$a.concat([$$v]))}else{$$i>-1&&(" + t + "=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{" + yn(t, "$$c") + "}", null, !0)
    }

    function kn(e, t, n) {
        var r = n && n.number,
            i = vn(e, "value") || "null";
        ln(e, "checked", "_q(" + t + "," + (i = r ? "_n(" + i + ")" : i) + ")"), pn(e, "change", yn(t, i), null, !0)
    }

    function An(e, t, n) {
        var r = "var $$selectedVal = " + ('Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return ' + (n && n.number ? "_n(val)" : "val") + "})") + ";";
        pn(e, "change", r = r + " " + yn(t, "$event.target.multiple ? $$selectedVal : $$selectedVal[0]"), null, !0)
    }

    function On(e, t, n) {
        var r = e.attrsMap.type,
            i = n || {},
            o = i.lazy,
            a = i.number,
            s = i.trim,
            c = !o && "range" !== r,
            u = o ? "change" : "range" === r ? ja : "input",
            l = "$event.target.value";
        s && (l = "$event.target.value.trim()"), a && (l = "_n(" + l + ")");
        var f = yn(t, l);
        c && (f = "if($event.target.composing)return;" + f), ln(e, "value", "(" + t + ")"), pn(e, u, f, null, !0), (s || a) && pn(e, "blur", "$forceUpdate()")
    }

    function Sn(e) {
        if (t(e[ja])) {
            var n = Gi ? "change" : "input";
            e[n] = [].concat(e[ja], e[n] || []), delete e[ja]
        }
        t(e[Na]) && (e.change = [].concat(e[Na], e.change || []), delete e[Na])
    }

    function Tn(e, t, n) {
        var r = ia;
        return function i() {
            null !== e.apply(null, arguments) && jn(t, i, n, r)
        }
    }

    function En(e, t, n, r, i) {
        t = ne(t), n && (t = Tn(t, e, r)), ia.addEventListener(e, t, to ? {
            capture: r,
            passive: i
        } : r)
    }

    function jn(e, t, n, r) {
        (r || ia).removeEventListener(e, t._withTask || t, n)
    }

    function Nn(t, n) {
        if (!e(t.data.on) || !e(n.data.on)) {
            var r = n.data.on || {},
                i = t.data.on || {};
            ia = n.elm, Sn(r), se(r, i, En, jn, n.context), ia = void 0
        }
    }

    function Ln(n, r) {
        if (!e(n.data.domProps) || !e(r.data.domProps)) {
            var i, o, a = r.elm,
                s = n.data.domProps || {},
                c = r.data.domProps || {};
            t(c.__ob__) && (c = r.data.domProps = y({}, c));
            for (i in s) e(c[i]) && (a[i] = "");
            for (i in c) {
                if (o = c[i], "textContent" === i || "innerHTML" === i) {
                    if (r.children && (r.children.length = 0), o === s[i]) continue;
                    1 === a.childNodes.length && a.removeChild(a.childNodes[0])
                }
                if ("value" === i) {
                    a._value = o;
                    var u = e(o) ? "" : String(o);
                    In(a, u) && (a.value = u)
                } else a[i] = o
            }
        }
    }

    function In(e, t) {
        return !e.composing && ("OPTION" === e.tagName || Mn(e, t) || Dn(e, t))
    }

    function Mn(e, t) {
        var n = !0;
        try {
            n = document.activeElement !== e
        } catch (e) {}
        return n && e.value !== t
    }

    function Dn(e, n) {
        var r = e.value,
            i = e._vModifiers;
        return t(i) && i.number ? l(r) !== l(n) : t(i) && i.trim ? r.trim() !== n.trim() : r !== n
    }

    function Pn(e) {
        var t = Fn(e.style);
        return e.staticStyle ? y(e.staticStyle, t) : t
    }

    function Fn(e) {
        return Array.isArray(e) ? g(e) : "string" == typeof e ? Ma(e) : e
    }

    function Rn(e, t) {
        var n, r = {};
        if (t)
            for (var i = e; i.componentInstance;)(i = i.componentInstance._vnode).data && (n = Pn(i.data)) && y(r, n);
        (n = Pn(e.data)) && y(r, n);
        for (var o = e; o = o.parent;) o.data && (n = Pn(o.data)) && y(r, n);
        return r
    }

    function Hn(n, r) {
        var i = r.data,
            o = n.data;
        if (!(e(i.staticStyle) && e(i.style) && e(o.staticStyle) && e(o.style))) {
            var a, s, c = r.elm,
                u = o.staticStyle,
                l = o.normalizedStyle || o.style || {},
                f = u || l,
                d = Fn(r.data.style) || {};
            r.data.normalizedStyle = t(d.__ob__) ? y({}, d) : d;
            var p = Rn(r, !0);
            for (s in f) e(p[s]) && Fa(c, s, "");
            for (s in p)(a = p[s]) !== f[s] && Fa(c, s, null == a ? "" : a)
        }
    }

    function Bn(e, t) {
        if (t && (t = t.trim()))
            if (e.classList) t.indexOf(" ") > -1 ? t.split(/\s+/).forEach(function(t) {
                return e.classList.add(t)
            }) : e.classList.add(t);
            else {
                var n = " " + (e.getAttribute("class") || "") + " ";
                n.indexOf(" " + t + " ") < 0 && e.setAttribute("class", (n + t).trim())
            }
    }

    function Un(e, t) {
        if (t && (t = t.trim()))
            if (e.classList) t.indexOf(" ") > -1 ? t.split(/\s+/).forEach(function(t) {
                return e.classList.remove(t)
            }) : e.classList.remove(t), e.classList.length || e.removeAttribute("class");
            else {
                for (var n = " " + (e.getAttribute("class") || "") + " ", r = " " + t + " "; n.indexOf(r) >= 0;) n = n.replace(r, " ");
                (n = n.trim()) ? e.setAttribute("class", n): e.removeAttribute("class")
            }
    }

    function Vn(e) {
        if (e) {
            if ("object" == typeof e) {
                var t = {};
                return !1 !== e.css && y(t, Ua(e.name || "v")), y(t, e), t
            }
            return "string" == typeof e ? Ua(e) : void 0
        }
    }

    function zn(e) {
        Za(function() {
            Za(e)
        })
    }

    function Kn(e, t) {
        var n = e._transitionClasses || (e._transitionClasses = []);
        n.indexOf(t) < 0 && (n.push(t), Bn(e, t))
    }

    function Jn(e, t) {
        e._transitionClasses && d(e._transitionClasses, t), Un(e, t)
    }

    function qn(e, t, n) {
        var r = Wn(e, t),
            i = r.type,
            o = r.timeout,
            a = r.propCount;
        if (!i) return n();
        var s = i === za ? qa : Ga,
            c = 0,
            u = function() {
                e.removeEventListener(s, l), n()
            },
            l = function(t) {
                t.target === e && ++c >= a && u()
            };
        setTimeout(function() {
            c < a && u()
        }, o + 1), e.addEventListener(s, l)
    }

    function Wn(e, t) {
        var n, r = window.getComputedStyle(e),
            i = r[Ja + "Delay"].split(", "),
            o = r[Ja + "Duration"].split(", "),
            a = Gn(i, o),
            s = r[Wa + "Delay"].split(", "),
            c = r[Wa + "Duration"].split(", "),
            u = Gn(s, c),
            l = 0,
            f = 0;
        return t === za ? a > 0 && (n = za, l = a, f = o.length) : t === Ka ? u > 0 && (n = Ka, l = u, f = c.length) : f = (n = (l = Math.max(a, u)) > 0 ? a > u ? za : Ka : null) ? n === za ? o.length : c.length : 0, {
            type: n,
            timeout: l,
            propCount: f,
            hasTransform: n === za && Xa.test(r[Ja + "Property"])
        }
    }

    function Gn(e, t) {
        for (; e.length < t.length;) e = e.concat(e);
        return Math.max.apply(null, t.map(function(t, n) {
            return Zn(t) + Zn(e[n])
        }))
    }

    function Zn(e) {
        return 1e3 * Number(e.slice(0, -1))
    }

    function Xn(n, r) {
        var i = n.elm;
        t(i._leaveCb) && (i._leaveCb.cancelled = !0, i._leaveCb());
        var a = Vn(n.data.transition);
        if (!e(a) && !t(i._enterCb) && 1 === i.nodeType) {
            for (var s = a.css, c = a.type, u = a.enterClass, f = a.enterToClass, d = a.enterActiveClass, p = a.appearClass, v = a.appearToClass, h = a.appearActiveClass, m = a.beforeEnter, y = a.enter, g = a.afterEnter, _ = a.enterCancelled, b = a.beforeAppear, $ = a.appear, w = a.afterAppear, x = a.appearCancelled, k = a.duration, A = Io, O = Io.$vnode; O && O.parent;) A = (O = O.parent).context;
            var S = !A._isMounted || !n.isRootInsert;
            if (!S || $ || "" === $) {
                var T = S && p ? p : u,
                    E = S && h ? h : d,
                    j = S && v ? v : f,
                    N = S ? b || m : m,
                    L = S && "function" == typeof $ ? $ : y,
                    I = S ? w || g : g,
                    M = S ? x || _ : _,
                    D = l(o(k) ? k.enter : k),
                    P = !1 !== s && !Zi,
                    F = er(L),
                    R = i._enterCb = C(function() {
                        P && (Jn(i, j), Jn(i, E)), R.cancelled ? (P && Jn(i, T), M && M(i)) : I && I(i), i._enterCb = null
                    });
                n.data.show || ce(n, "insert", function() {
                    var e = i.parentNode,
                        t = e && e._pending && e._pending[n.key];
                    t && t.tag === n.tag && t.elm._leaveCb && t.elm._leaveCb(), L && L(i, R)
                }), N && N(i), P && (Kn(i, T), Kn(i, E), zn(function() {
                    Kn(i, j), Jn(i, T), R.cancelled || F || (Qn(D) ? setTimeout(R, D) : qn(i, c, R))
                })), n.data.show && (r && r(), L && L(i, R)), P || F || R()
            }
        }
    }

    function Yn(n, r) {
        function i() {
            x.cancelled || (n.data.show || ((a.parentNode._pending || (a.parentNode._pending = {}))[n.key] = n), v && v(a), b && (Kn(a, f), Kn(a, p), zn(function() {
                Kn(a, d), Jn(a, f), x.cancelled || $ || (Qn(w) ? setTimeout(x, w) : qn(a, u, x))
            })), h && h(a, x), b || $ || x())
        }
        var a = n.elm;
        t(a._enterCb) && (a._enterCb.cancelled = !0, a._enterCb());
        var s = Vn(n.data.transition);
        if (e(s) || 1 !== a.nodeType) return r();
        if (!t(a._leaveCb)) {
            var c = s.css,
                u = s.type,
                f = s.leaveClass,
                d = s.leaveToClass,
                p = s.leaveActiveClass,
                v = s.beforeLeave,
                h = s.leave,
                m = s.afterLeave,
                y = s.leaveCancelled,
                g = s.delayLeave,
                _ = s.duration,
                b = !1 !== c && !Zi,
                $ = er(h),
                w = l(o(_) ? _.leave : _),
                x = a._leaveCb = C(function() {
                    a.parentNode && a.parentNode._pending && (a.parentNode._pending[n.key] = null), b && (Jn(a, d), Jn(a, p)), x.cancelled ? (b && Jn(a, f), y && y(a)) : (r(), m && m(a)), a._leaveCb = null
                });
            g ? g(i) : i()
        }
    }

    function Qn(e) {
        return "number" == typeof e && !isNaN(e)
    }

    function er(n) {
        if (e(n)) return !1;
        var r = n.fns;
        return t(r) ? er(Array.isArray(r) ? r[0] : r) : (n._length || n.length) > 1
    }

    function tr(e, t) {
        !0 !== t.data.show && Xn(t)
    }

    function nr(e, t, n) {
        rr(e, t, n), (Gi || Xi) && setTimeout(function() {
            rr(e, t, n)
        }, 0)
    }

    function rr(e, t, n) {
        var r = t.value,
            i = e.multiple;
        if (!i || Array.isArray(r)) {
            for (var o, a, s = 0, c = e.options.length; s < c; s++)
                if (a = e.options[s], i) o = $(r, or(a)) > -1, a.selected !== o && (a.selected = o);
                else if (b(or(a), r)) return void(e.selectedIndex !== s && (e.selectedIndex = s));
            i || (e.selectedIndex = -1)
        }
    }

    function ir(e, t) {
        return t.every(function(t) {
            return !b(t, e)
        })
    }

    function or(e) {
        return "_value" in e ? e._value : e.value
    }

    function ar(e) {
        e.target.composing = !0
    }

    function sr(e) {
        e.target.composing && (e.target.composing = !1, cr(e.target, "input"))
    }

    function cr(e, t) {
        var n = document.createEvent("HTMLEvents");
        n.initEvent(t, !0, !0), e.dispatchEvent(n)
    }

    function ur(e) {
        return !e.componentInstance || e.data && e.data.transition ? e : ur(e.componentInstance._vnode)
    }

    function lr(e) {
        var t = e && e.componentOptions;
        return t && t.Ctor.options.abstract ? lr(_e(t.children)) : e
    }

    function fr(e) {
        var t = {},
            n = e.$options;
        for (var r in n.propsData) t[r] = e[r];
        var i = n._parentListeners;
        for (var o in i) t[Li(o)] = i[o];
        return t
    }

    function dr(e, t) {
        if (/\d-keep-alive$/.test(t.tag)) return e("keep-alive", {
            props: t.componentOptions.propsData
        })
    }

    function pr(e) {
        for (; e = e.parent;)
            if (e.data.transition) return !0
    }

    function vr(e, t) {
        return t.key === e.key && t.tag === e.tag
    }

    function hr(e) {
        e.elm._moveCb && e.elm._moveCb(), e.elm._enterCb && e.elm._enterCb()
    }

    function mr(e) {
        e.data.newPos = e.elm.getBoundingClientRect()
    }

    function yr(e) {
        var t = e.data.pos,
            n = e.data.newPos,
            r = t.left - n.left,
            i = t.top - n.top;
        if (r || i) {
            e.data.moved = !0;
            var o = e.elm.style;
            o.transform = o.WebkitTransform = "translate(" + r + "px," + i + "px)", o.transitionDuration = "0s"
        }
    }

    function gr(e, t) {
        var n = t ? cs(t) : as;
        if (n.test(e)) {
            for (var r, i, o = [], a = n.lastIndex = 0; r = n.exec(e);) {
                (i = r.index) > a && o.push(JSON.stringify(e.slice(a, i)));
                var s = an(r[1].trim());
                o.push("_s(" + s + ")"), a = i + r[0].length
            }
            return a < e.length && o.push(JSON.stringify(e.slice(a))), o.join("+")
        }
    }

    function _r(e, t) {
        var n = t ? Hs : Rs;
        return e.replace(n, function(e) {
            return Fs[e]
        })
    }

    function br(e, t) {
        function n(t) {
            l += t, e = e.substring(t)
        }

        function r(e, n, r) {
            var i, s;
            if (null == n && (n = l), null == r && (r = l), e && (s = e.toLowerCase()), e)
                for (i = a.length - 1; i >= 0 && a[i].lowerCasedTag !== s; i--);
            else i = 0;
            if (i >= 0) {
                for (var c = a.length - 1; c >= i; c--) t.end && t.end(a[c].tag, n, r);
                a.length = i, o = i && a[i - 1].tag
            } else "br" === s ? t.start && t.start(e, [], !0, n, r) : "p" === s && (t.start && t.start(e, [], !1, n, r), t.end && t.end(e, n, r))
        }
        for (var i, o, a = [], s = t.expectHTML, c = t.isUnaryTag || Pi, u = t.canBeLeftOpenTag || Pi, l = 0; e;) {
            if (i = e, o && Ds(o)) {
                var f = 0,
                    d = o.toLowerCase(),
                    p = Ps[d] || (Ps[d] = new RegExp("([\\s\\S]*?)(</" + d + "[^>]*>)", "i")),
                    v = e.replace(p, function(e, n, r) {
                        return f = r.length, Ds(d) || "noscript" === d || (n = n.replace(/<!--([\s\S]*?)-->/g, "$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g, "$1")), Us(d, n) && (n = n.slice(1)), t.chars && t.chars(n), ""
                    });
                l += e.length - v.length, e = v, r(d, l - f, l)
            } else {
                var h = e.indexOf("<");
                if (0 === h) {
                    if (Cs.test(e)) {
                        var m = e.indexOf("--\x3e");
                        if (m >= 0) {
                            t.shouldKeepComment && t.comment(e.substring(4, m)), n(m + 3);
                            continue
                        }
                    }
                    if (ws.test(e)) {
                        var y = e.indexOf("]>");
                        if (y >= 0) {
                            n(y + 2);
                            continue
                        }
                    }
                    var g = e.match($s);
                    if (g) {
                        n(g[0].length);
                        continue
                    }
                    var _ = e.match(bs);
                    if (_) {
                        var b = l;
                        n(_[0].length), r(_[1], b, l);
                        continue
                    }
                    var $ = function() {
                        var t = e.match(gs);
                        if (t) {
                            var r = {
                                tagName: t[1],
                                attrs: [],
                                start: l
                            };
                            n(t[0].length);
                            for (var i, o; !(i = e.match(_s)) && (o = e.match(hs));) n(o[0].length), r.attrs.push(o);
                            if (i) return r.unarySlash = i[1], n(i[0].length), r.end = l, r
                        }
                    }();
                    if ($) {
                        ! function(e) {
                            var n = e.tagName,
                                i = e.unarySlash;
                            s && ("p" === o && vs(n) && r(o), u(n) && o === n && r(n));
                            for (var l = c(n) || !!i, f = e.attrs.length, d = new Array(f), p = 0; p < f; p++) {
                                var v = e.attrs[p];
                                xs && -1 === v[0].indexOf('""') && ("" === v[3] && delete v[3], "" === v[4] && delete v[4], "" === v[5] && delete v[5]);
                                var h = v[3] || v[4] || v[5] || "",
                                    m = "a" === n && "href" === v[1] ? t.shouldDecodeNewlinesForHref : t.shouldDecodeNewlines;
                                d[p] = {
                                    name: v[1],
                                    value: _r(h, m)
                                }
                            }
                            l || (a.push({
                                tag: n,
                                lowerCasedTag: n.toLowerCase(),
                                attrs: d
                            }), o = n), t.start && t.start(n, d, l, e.start, e.end)
                        }($), Us(o, e) && n(1);
                        continue
                    }
                }
                var C = void 0,
                    w = void 0,
                    x = void 0;
                if (h >= 0) {
                    for (w = e.slice(h); !(bs.test(w) || gs.test(w) || Cs.test(w) || ws.test(w) || (x = w.indexOf("<", 1)) < 0);) h += x, w = e.slice(h);
                    C = e.substring(0, h), n(h)
                }
                h < 0 && (C = e, e = ""), t.chars && C && t.chars(C)
            }
            if (e === i) {
                t.chars && t.chars(e);
                break
            }
        }
        r()
    }

    function $r(e, t, n) {
        return {
            type: 1,
            tag: e,
            attrsList: t,
            attrsMap: Rr(t),
            parent: n,
            children: []
        }
    }

    function Cr(e, t) {
        function n(e) {
            e.pre && (s = !1), Es(e.tag) && (c = !1)
        }
        ks = t.warn || cn, Es = t.isPreTag || Pi, js = t.mustUseProp || Pi, Ns = t.getTagNamespace || Pi, Os = un(t.modules, "transformNode"), Ss = un(t.modules, "preTransformNode"), Ts = un(t.modules, "postTransformNode"), As = t.delimiters;
        var r, i, o = [],
            a = !1 !== t.preserveWhitespace,
            s = !1,
            c = !1;
        return br(e, {
            warn: ks,
            expectHTML: t.expectHTML,
            isUnaryTag: t.isUnaryTag,
            canBeLeftOpenTag: t.canBeLeftOpenTag,
            shouldDecodeNewlines: t.shouldDecodeNewlines,
            shouldDecodeNewlinesForHref: t.shouldDecodeNewlinesForHref,
            shouldKeepComment: t.comments,
            start: function(e, a, u) {
                var l = i && i.ns || Ns(e);
                Gi && "svg" === l && (a = Ur(a));
                var f = $r(e, a, i);
                l && (f.ns = l), Br(f) && !oo() && (f.forbidden = !0);
                for (var d = 0; d < Ss.length; d++) f = Ss[d](f, t) || f;
                if (s || (wr(f), f.pre && (s = !0)), Es(f.tag) && (c = !0), s ? xr(f) : f.processed || (Sr(f), Tr(f), Lr(f), kr(f, t)), r ? o.length || r.if && (f.elseif || f.else) && Nr(r, {
                        exp: f.elseif,
                        block: f
                    }) : r = f, i && !f.forbidden)
                    if (f.elseif || f.else) Er(f, i);
                    else if (f.slotScope) {
                    i.plain = !1;
                    var p = f.slotTarget || '"default"';
                    (i.scopedSlots || (i.scopedSlots = {}))[p] = f
                } else i.children.push(f), f.parent = i;
                u ? n(f) : (i = f, o.push(f));
                for (var v = 0; v < Ts.length; v++) Ts[v](f, t)
            },
            end: function() {
                var e = o[o.length - 1],
                    t = e.children[e.children.length - 1];
                t && 3 === t.type && " " === t.text && !c && e.children.pop(), o.length -= 1, i = o[o.length - 1], n(e)
            },
            chars: function(e) {
                if (i && (!Gi || "textarea" !== i.tag || i.attrsMap.placeholder !== e)) {
                    var t = i.children;
                    if (e = c || e.trim() ? Hr(i) ? e : Xs(e) : a && t.length ? " " : "") {
                        var n;
                        !s && " " !== e && (n = gr(e, As)) ? t.push({
                            type: 2,
                            expression: n,
                            text: e
                        }) : " " === e && t.length && " " === t[t.length - 1].text || t.push({
                            type: 3,
                            text: e
                        })
                    }
                }
            },
            comment: function(e) {
                i.children.push({
                    type: 3,
                    text: e,
                    isComment: !0
                })
            }
        }), r
    }

    function wr(e) {
        null != hn(e, "v-pre") && (e.pre = !0)
    }

    function xr(e) {
        var t = e.attrsList.length;
        if (t)
            for (var n = e.attrs = new Array(t), r = 0; r < t; r++) n[r] = {
                name: e.attrsList[r].name,
                value: JSON.stringify(e.attrsList[r].value)
            };
        else e.pre || (e.plain = !0)
    }

    function kr(e, t) {
        Ar(e), e.plain = !e.key && !e.attrsList.length, Or(e), Ir(e), Mr(e);
        for (var n = 0; n < Os.length; n++) e = Os[n](e, t) || e;
        Dr(e)
    }

    function Ar(e) {
        var t = vn(e, "key");
        t && (e.key = t)
    }

    function Or(e) {
        var t = vn(e, "ref");
        t && (e.ref = t, e.refInFor = Pr(e))
    }

    function Sr(e) {
        var t;
        if (t = hn(e, "v-for")) {
            var n = t.match(Ks);
            if (!n) return;
            e.for = n[2].trim();
            var r = n[1].trim(),
                i = r.match(Js);
            i ? (e.alias = i[1].trim(), e.iterator1 = i[2].trim(), i[3] && (e.iterator2 = i[3].trim())) : e.alias = r.replace(qs, "")
        }
    }

    function Tr(e) {
        var t = hn(e, "v-if");
        if (t) e.if = t, Nr(e, {
            exp: t,
            block: e
        });
        else {
            null != hn(e, "v-else") && (e.else = !0);
            var n = hn(e, "v-else-if");
            n && (e.elseif = n)
        }
    }

    function Er(e, t) {
        var n = jr(t.children);
        n && n.if && Nr(n, {
            exp: e.elseif,
            block: e
        })
    }

    function jr(e) {
        for (var t = e.length; t--;) {
            if (1 === e[t].type) return e[t];
            e.pop()
        }
    }

    function Nr(e, t) {
        e.ifConditions || (e.ifConditions = []), e.ifConditions.push(t)
    }

    function Lr(e) {
        null != hn(e, "v-once") && (e.once = !0)
    }

    function Ir(e) {
        if ("slot" === e.tag) e.slotName = vn(e, "name");
        else {
            var t;
            "template" === e.tag ? (t = hn(e, "scope"), e.slotScope = t || hn(e, "slot-scope")) : (t = hn(e, "slot-scope")) && (e.slotScope = t);
            var n = vn(e, "slot");
            n && (e.slotTarget = '""' === n ? '"default"' : n, "template" === e.tag || e.slotScope || fn(e, "slot", n))
        }
    }

    function Mr(e) {
        var t;
        (t = vn(e, "is")) && (e.component = t), null != hn(e, "inline-template") && (e.inlineTemplate = !0)
    }

    function Dr(e) {
        var t, n, r, i, o, a, s, c = e.attrsList;
        for (t = 0, n = c.length; t < n; t++)
            if (r = i = c[t].name, o = c[t].value, zs.test(r))
                if (e.hasBindings = !0, (a = Fr(r)) && (r = r.replace(Zs, "")), Gs.test(r)) r = r.replace(Gs, ""), o = an(o), s = !1, a && (a.prop && (s = !0, "innerHtml" === (r = Li(r)) && (r = "innerHTML")), a.camel && (r = Li(r)), a.sync && pn(e, "update:" + Li(r), yn(o, "$event"))), s || !e.component && js(e.tag, e.attrsMap.type, r) ? ln(e, r, o) : fn(e, r, o);
                else if (Vs.test(r)) pn(e, r = r.replace(Vs, ""), o, a, !1, ks);
        else {
            var u = (r = r.replace(zs, "")).match(Ws),
                l = u && u[1];
            l && (r = r.slice(0, -(l.length + 1))), dn(e, r, i, o, l, a)
        } else fn(e, r, JSON.stringify(o)), !e.component && "muted" === r && js(e.tag, e.attrsMap.type, r) && ln(e, r, "true")
    }

    function Pr(e) {
        for (var t = e; t;) {
            if (void 0 !== t.for) return !0;
            t = t.parent
        }
        return !1
    }

    function Fr(e) {
        var t = e.match(Zs);
        if (t) {
            var n = {};
            return t.forEach(function(e) {
                n[e.slice(1)] = !0
            }), n
        }
    }

    function Rr(e) {
        for (var t = {}, n = 0, r = e.length; n < r; n++) t[e[n].name] = e[n].value;
        return t
    }

    function Hr(e) {
        return "script" === e.tag || "style" === e.tag
    }

    function Br(e) {
        return "style" === e.tag || "script" === e.tag && (!e.attrsMap.type || "text/javascript" === e.attrsMap.type)
    }

    function Ur(e) {
        for (var t = [], n = 0; n < e.length; n++) {
            var r = e[n];
            Ys.test(r.name) || (r.name = r.name.replace(Qs, ""), t.push(r))
        }
        return t
    }

    function Vr(e) {
        return $r(e.tag, e.attrsList.slice(), e.parent)
    }

    function zr(e, t, n) {
        e.attrsMap[t] = n, e.attrsList.push({
            name: t,
            value: n
        })
    }

    function Kr(e, t) {
        e && (Ls = nc(t.staticKeys || ""), Is = t.isReservedTag || Pi, Jr(e), qr(e, !1))
    }

    function Jr(e) {
        if (e.static = Wr(e), 1 === e.type) {
            if (!Is(e.tag) && "slot" !== e.tag && null == e.attrsMap["inline-template"]) return;
            for (var t = 0, n = e.children.length; t < n; t++) {
                var r = e.children[t];
                Jr(r), r.static || (e.static = !1)
            }
            if (e.ifConditions)
                for (var i = 1, o = e.ifConditions.length; i < o; i++) {
                    var a = e.ifConditions[i].block;
                    Jr(a), a.static || (e.static = !1)
                }
        }
    }

    function qr(e, t) {
        if (1 === e.type) {
            if ((e.static || e.once) && (e.staticInFor = t), e.static && e.children.length && (1 !== e.children.length || 3 !== e.children[0].type)) return void(e.staticRoot = !0);
            if (e.staticRoot = !1, e.children)
                for (var n = 0, r = e.children.length; n < r; n++) qr(e.children[n], t || !!e.for);
            if (e.ifConditions)
                for (var i = 1, o = e.ifConditions.length; i < o; i++) qr(e.ifConditions[i].block, t)
        }
    }

    function Wr(e) {
        return 2 !== e.type && (3 === e.type || !(!e.pre && (e.hasBindings || e.if || e.for || Ti(e.tag) || !Is(e.tag) || Gr(e) || !Object.keys(e).every(Ls))))
    }

    function Gr(e) {
        for (; e.parent;) {
            if ("template" !== (e = e.parent).tag) return !1;
            if (e.for) return !0
        }
        return !1
    }

    function Zr(e, t, n) {
        var r = t ? "nativeOn:{" : "on:{";
        for (var i in e) r += '"' + i + '":' + Xr(i, e[i]) + ",";
        return r.slice(0, -1) + "}"
    }

    function Xr(e, t) {
        if (!t) return "function(){}";
        if (Array.isArray(t)) return "[" + t.map(function(t) {
            return Xr(e, t)
        }).join(",") + "]";
        var n = ic.test(t.value),
            r = rc.test(t.value);
        if (t.modifiers) {
            var i = "",
                o = "",
                a = [];
            for (var s in t.modifiers)
                if (sc[s]) o += sc[s], oc[s] && a.push(s);
                else if ("exact" === s) {
                var c = t.modifiers;
                o += ac(["ctrl", "shift", "alt", "meta"].filter(function(e) {
                    return !c[e]
                }).map(function(e) {
                    return "$event." + e + "Key"
                }).join("||"))
            } else a.push(s);
            return a.length && (i += Yr(a)), o && (i += o), "function($event){" + i + (n ? t.value + "($event)" : r ? "(" + t.value + ")($event)" : t.value) + "}"
        }
        return n || r ? t.value : "function($event){" + t.value + "}"
    }

    function Yr(e) {
        return "if(!('button' in $event)&&" + e.map(Qr).join("&&") + ")return null;"
    }

    function Qr(e) {
        var t = parseInt(e, 10);
        if (t) return "$event.keyCode!==" + t;
        var n = oc[e];
        return "_k($event.keyCode," + JSON.stringify(e) + "," + JSON.stringify(n) + ",$event.key)"
    }

    function ei(e, t) {
        var n = new uc(t);
        return {
            render: "with(this){return " + (e ? ti(e, n) : '_c("div")') + "}",
            staticRenderFns: n.staticRenderFns
        }
    }

    function ti(e, t) {
        if (e.staticRoot && !e.staticProcessed) return ni(e, t);
        if (e.once && !e.onceProcessed) return ri(e, t);
        if (e.for && !e.forProcessed) return ai(e, t);
        if (e.if && !e.ifProcessed) return ii(e, t);
        if ("template" !== e.tag || e.slotTarget) {
            if ("slot" === e.tag) return _i(e, t);
            var n;
            if (e.component) n = bi(e.component, e, t);
            else {
                var r = e.plain ? void 0 : si(e, t),
                    i = e.inlineTemplate ? null : pi(e, t, !0);
                n = "_c('" + e.tag + "'" + (r ? "," + r : "") + (i ? "," + i : "") + ")"
            }
            for (var o = 0; o < t.transforms.length; o++) n = t.transforms[o](e, n);
            return n
        }
        return pi(e, t) || "void 0"
    }

    function ni(e, t, n) {
        return e.staticProcessed = !0, t.staticRenderFns.push("with(this){return " + ti(e, t) + "}"), "_m(" + (t.staticRenderFns.length - 1) + "," + (e.staticInFor ? "true" : "false") + "," + (n ? "true" : "false") + ")"
    }

    function ri(e, t) {
        if (e.onceProcessed = !0, e.if && !e.ifProcessed) return ii(e, t);
        if (e.staticInFor) {
            for (var n = "", r = e.parent; r;) {
                if (r.for) {
                    n = r.key;
                    break
                }
                r = r.parent
            }
            return n ? "_o(" + ti(e, t) + "," + t.onceId++ + "," + n + ")" : ti(e, t)
        }
        return ni(e, t, !0)
    }

    function ii(e, t, n, r) {
        return e.ifProcessed = !0, oi(e.ifConditions.slice(), t, n, r)
    }

    function oi(e, t, n, r) {
        function i(e) {
            return n ? n(e, t) : e.once ? ri(e, t) : ti(e, t)
        }
        if (!e.length) return r || "_e()";
        var o = e.shift();
        return o.exp ? "(" + o.exp + ")?" + i(o.block) + ":" + oi(e, t, n, r) : "" + i(o.block)
    }

    function ai(e, t, n, r) {
        var i = e.for,
            o = e.alias,
            a = e.iterator1 ? "," + e.iterator1 : "",
            s = e.iterator2 ? "," + e.iterator2 : "";
        return e.forProcessed = !0, (r || "_l") + "((" + i + "),function(" + o + a + s + "){return " + (n || ti)(e, t) + "})"
    }

    function si(e, t) {
        var n = "{",
            r = ci(e, t);
        r && (n += r + ","), e.key && (n += "key:" + e.key + ","), e.ref && (n += "ref:" + e.ref + ","), e.refInFor && (n += "refInFor:true,"), e.pre && (n += "pre:true,"), e.component && (n += 'tag:"' + e.tag + '",');
        for (var i = 0; i < t.dataGenFns.length; i++) n += t.dataGenFns[i](e);
        if (e.attrs && (n += "attrs:{" + $i(e.attrs) + "},"), e.props && (n += "domProps:{" + $i(e.props) + "},"), e.events && (n += Zr(e.events, !1, t.warn) + ","), e.nativeEvents && (n += Zr(e.nativeEvents, !0, t.warn) + ","), e.slotTarget && !e.slotScope && (n += "slot:" + e.slotTarget + ","), e.scopedSlots && (n += li(e.scopedSlots, t) + ","), e.model && (n += "model:{value:" + e.model.value + ",callback:" + e.model.callback + ",expression:" + e.model.expression + "},"), e.inlineTemplate) {
            var o = ui(e, t);
            o && (n += o + ",")
        }
        return n = n.replace(/,$/, "") + "}", e.wrapData && (n = e.wrapData(n)), e.wrapListeners && (n = e.wrapListeners(n)), n
    }

    function ci(e, t) {
        var n = e.directives;
        if (n) {
            var r, i, o, a, s = "directives:[",
                c = !1;
            for (r = 0, i = n.length; r < i; r++) {
                o = n[r], a = !0;
                var u = t.directives[o.name];
                u && (a = !!u(e, o, t.warn)), a && (c = !0, s += '{name:"' + o.name + '",rawName:"' + o.rawName + '"' + (o.value ? ",value:(" + o.value + "),expression:" + JSON.stringify(o.value) : "") + (o.arg ? ',arg:"' + o.arg + '"' : "") + (o.modifiers ? ",modifiers:" + JSON.stringify(o.modifiers) : "") + "},")
            }
            return c ? s.slice(0, -1) + "]" : void 0
        }
    }

    function ui(e, t) {
        var n = e.children[0];
        if (1 === n.type) {
            var r = ei(n, t.options);
            return "inlineTemplate:{render:function(){" + r.render + "},staticRenderFns:[" + r.staticRenderFns.map(function(e) {
                return "function(){" + e + "}"
            }).join(",") + "]}"
        }
    }

    function li(e, t) {
        return "scopedSlots:_u([" + Object.keys(e).map(function(n) {
            return fi(n, e[n], t)
        }).join(",") + "])"
    }

    function fi(e, t, n) {
        return t.for && !t.forProcessed ? di(e, t, n) : "{key:" + e + ",fn:" + ("function(" + String(t.slotScope) + "){return " + ("template" === t.tag ? t.if ? t.if+"?" + (pi(t, n) || "undefined") + ":undefined" : pi(t, n) || "undefined" : ti(t, n)) + "}") + "}"
    }

    function di(e, t, n) {
        var r = t.for,
            i = t.alias,
            o = t.iterator1 ? "," + t.iterator1 : "",
            a = t.iterator2 ? "," + t.iterator2 : "";
        return t.forProcessed = !0, "_l((" + r + "),function(" + i + o + a + "){return " + fi(e, t, n) + "})"
    }

    function pi(e, t, n, r, i) {
        var o = e.children;
        if (o.length) {
            var a = o[0];
            if (1 === o.length && a.for && "template" !== a.tag && "slot" !== a.tag) return (r || ti)(a, t);
            var s = n ? vi(o, t.maybeComponent) : 0,
                c = i || mi;
            return "[" + o.map(function(e) {
                return c(e, t)
            }).join(",") + "]" + (s ? "," + s : "")
        }
    }

    function vi(e, t) {
        for (var n = 0, r = 0; r < e.length; r++) {
            var i = e[r];
            if (1 === i.type) {
                if (hi(i) || i.ifConditions && i.ifConditions.some(function(e) {
                        return hi(e.block)
                    })) {
                    n = 2;
                    break
                }(t(i) || i.ifConditions && i.ifConditions.some(function(e) {
                    return t(e.block)
                })) && (n = 1)
            }
        }
        return n
    }

    function hi(e) {
        return void 0 !== e.for || "template" === e.tag || "slot" === e.tag
    }

    function mi(e, t) {
        return 1 === e.type ? ti(e, t) : 3 === e.type && e.isComment ? gi(e) : yi(e)
    }

    function yi(e) {
        return "_v(" + (2 === e.type ? e.expression : Ci(JSON.stringify(e.text))) + ")"
    }

    function gi(e) {
        return "_e(" + JSON.stringify(e.text) + ")"
    }

    function _i(e, t) {
        var n = e.slotName || '"default"',
            r = pi(e, t),
            i = "_t(" + n + (r ? "," + r : ""),
            o = e.attrs && "{" + e.attrs.map(function(e) {
                return Li(e.name) + ":" + e.value
            }).join(",") + "}",
            a = e.attrsMap["v-bind"];
        return !o && !a || r || (i += ",null"), o && (i += "," + o), a && (i += (o ? "" : ",null") + "," + a), i + ")"
    }

    function bi(e, t, n) {
        var r = t.inlineTemplate ? null : pi(t, n, !0);
        return "_c(" + e + "," + si(t, n) + (r ? "," + r : "") + ")"
    }

    function $i(e) {
        for (var t = "", n = 0; n < e.length; n++) {
            var r = e[n];
            t += '"' + r.name + '":' + Ci(r.value) + ","
        }
        return t.slice(0, -1)
    }

    function Ci(e) {
        return e.replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029")
    }

    function wi(e, t) {
        try {
            return new Function(e)
        } catch (n) {
            return t.push({
                err: n,
                code: e
            }), _
        }
    }

    function xi(e) {
        var t = Object.create(null);
        return function(n, r, i) {
            delete(r = y({}, r)).warn;
            var o = r.delimiters ? String(r.delimiters) + n : n;
            if (t[o]) return t[o];
            var a = e(n, r),
                s = {},
                c = [];
            return s.render = wi(a.render, c), s.staticRenderFns = a.staticRenderFns.map(function(e) {
                return wi(e, c)
            }), t[o] = s
        }
    }

    function ki(e) {
        return Ms = Ms || document.createElement("div"), Ms.innerHTML = e ? '<a href="\n"/>' : '<div a="\n"/>', Ms.innerHTML.indexOf("&#10;") > 0
    }

    function Ai(e) {
        if (e.outerHTML) return e.outerHTML;
        var t = document.createElement("div");
        return t.appendChild(e.cloneNode(!0)), t.innerHTML
    }
    var Oi = Object.freeze({}),
        Si = Object.prototype.toString,
        Ti = f("slot,component", !0),
        Ei = f("key,ref,slot,slot-scope,is"),
        ji = Object.prototype.hasOwnProperty,
        Ni = /-(\w)/g,
        Li = v(function(e) {
            return e.replace(Ni, function(e, t) {
                return t ? t.toUpperCase() : ""
            })
        }),
        Ii = v(function(e) {
            return e.charAt(0).toUpperCase() + e.slice(1)
        }),
        Mi = /\B([A-Z])/g,
        Di = v(function(e) {
            return e.replace(Mi, "-$1").toLowerCase()
        }),
        Pi = function(e, t, n) {
            return !1
        },
        Fi = function(e) {
            return e
        },
        Ri = "data-server-rendered",
        Hi = ["component", "directive", "filter"],
        Bi = ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "beforeDestroy", "destroyed", "activated", "deactivated", "errorCaptured"],
        Ui = {
            optionMergeStrategies: Object.create(null),
            silent: !1,
            productionTip: !1,
            devtools: !1,
            performance: !1,
            errorHandler: null,
            warnHandler: null,
            ignoredElements: [],
            keyCodes: Object.create(null),
            isReservedTag: Pi,
            isReservedAttr: Pi,
            isUnknownElement: Pi,
            getTagNamespace: _,
            parsePlatformTagName: Fi,
            mustUseProp: Pi,
            _lifecycleHooks: Bi
        },
        Vi = /[^\w.$]/,
        zi = "__proto__" in {},
        Ki = "undefined" != typeof window,
        Ji = "undefined" != typeof WXEnvironment && !!WXEnvironment.platform,
        qi = Ji && WXEnvironment.platform.toLowerCase(),
        Wi = Ki && window.navigator.userAgent.toLowerCase(),
        Gi = Wi && /msie|trident/.test(Wi),
        Zi = Wi && Wi.indexOf("msie 9.0") > 0,
        Xi = Wi && Wi.indexOf("edge/") > 0,
        Yi = Wi && Wi.indexOf("android") > 0 || "android" === qi,
        Qi = Wi && /iphone|ipad|ipod|ios/.test(Wi) || "ios" === qi,
        eo = (Wi && /chrome\/\d+/.test(Wi), {}.watch),
        to = !1;
    if (Ki) try {
        var no = {};
        Object.defineProperty(no, "passive", {
            get: function() {
                to = !0
            }
        }), window.addEventListener("test-passive", null, no)
    } catch (e) {}
    var ro, io, oo = function() {
            return void 0 === ro && (ro = !Ki && "undefined" != typeof global && "server" === global.process.env.VUE_ENV), ro
        },
        ao = Ki && window.__VUE_DEVTOOLS_GLOBAL_HOOK__,
        so = "undefined" != typeof Symbol && A(Symbol) && "undefined" != typeof Reflect && A(Reflect.ownKeys);
    io = "undefined" != typeof Set && A(Set) ? Set : function() {
        function e() {
            this.set = Object.create(null)
        }
        return e.prototype.has = function(e) {
            return !0 === this.set[e]
        }, e.prototype.add = function(e) {
            this.set[e] = !0
        }, e.prototype.clear = function() {
            this.set = Object.create(null)
        }, e
    }();
    var co = _,
        uo = 0,
        lo = function() {
            this.id = uo++, this.subs = []
        };
    lo.prototype.addSub = function(e) {
        this.subs.push(e)
    }, lo.prototype.removeSub = function(e) {
        d(this.subs, e)
    }, lo.prototype.depend = function() {
        lo.target && lo.target.addDep(this)
    }, lo.prototype.notify = function() {
        for (var e = this.subs.slice(), t = 0, n = e.length; t < n; t++) e[t].update()
    }, lo.target = null;
    var fo = [],
        po = function(e, t, n, r, i, o, a, s) {
            this.tag = e, this.data = t, this.children = n, this.text = r, this.elm = i, this.ns = void 0, this.context = o, this.fnContext = void 0, this.fnOptions = void 0, this.fnScopeId = void 0, this.key = t && t.key, this.componentOptions = a, this.componentInstance = void 0, this.parent = void 0, this.raw = !1, this.isStatic = !1, this.isRootInsert = !0, this.isComment = !1, this.isCloned = !1, this.isOnce = !1, this.asyncFactory = s, this.asyncMeta = void 0, this.isAsyncPlaceholder = !1
        },
        vo = {
            child: {
                configurable: !0
            }
        };
    vo.child.get = function() {
        return this.componentInstance
    }, Object.defineProperties(po.prototype, vo);
    var ho = function(e) {
            void 0 === e && (e = "");
            var t = new po;
            return t.text = e, t.isComment = !0, t
        },
        mo = Array.prototype,
        yo = Object.create(mo);
    ["push", "pop", "shift", "unshift", "splice", "sort", "reverse"].forEach(function(e) {
        var t = mo[e];
        x(yo, e, function() {
            for (var n = [], r = arguments.length; r--;) n[r] = arguments[r];
            var i, o = t.apply(this, n),
                a = this.__ob__;
            switch (e) {
                case "push":
                case "unshift":
                    i = n;
                    break;
                case "splice":
                    i = n.slice(2)
            }
            return i && a.observeArray(i), a.dep.notify(), o
        })
    });
    var go = Object.getOwnPropertyNames(yo),
        _o = {
            shouldConvert: !0
        },
        bo = function(e) {
            this.value = e, this.dep = new lo, this.vmCount = 0, x(e, "__ob__", this), Array.isArray(e) ? ((zi ? N : L)(e, yo, go), this.observeArray(e)) : this.walk(e)
        };
    bo.prototype.walk = function(e) {
        for (var t = Object.keys(e), n = 0; n < t.length; n++) M(e, t[n], e[t[n]])
    }, bo.prototype.observeArray = function(e) {
        for (var t = 0, n = e.length; t < n; t++) I(e[t])
    };
    var $o = Ui.optionMergeStrategies;
    $o.data = function(e, t, n) {
        return n ? H(e, t, n) : t && "function" != typeof t ? e : H(e, t)
    }, Bi.forEach(function(e) {
        $o[e] = B
    }), Hi.forEach(function(e) {
        $o[e + "s"] = U
    }), $o.watch = function(e, t, n, r) {
        if (e === eo && (e = void 0), t === eo && (t = void 0), !t) return Object.create(e || null);
        if (!e) return t;
        var i = {};
        y(i, e);
        for (var o in t) {
            var a = i[o],
                s = t[o];
            a && !Array.isArray(a) && (a = [a]), i[o] = a ? a.concat(s) : Array.isArray(s) ? s : [s]
        }
        return i
    }, $o.props = $o.methods = $o.inject = $o.computed = function(e, t, n, r) {
        if (!e) return t;
        var i = Object.create(null);
        return y(i, e), t && y(i, t), i
    }, $o.provide = H;
    var Co, wo, xo = function(e, t) {
            return void 0 === t ? e : t
        },
        ko = [],
        Ao = !1,
        Oo = !1;
    if ("undefined" != typeof setImmediate && A(setImmediate)) wo = function() {
        setImmediate(te)
    };
    else if ("undefined" == typeof MessageChannel || !A(MessageChannel) && "[object MessageChannelConstructor]" !== MessageChannel.toString()) wo = function() {
        setTimeout(te, 0)
    };
    else {
        var So = new MessageChannel,
            To = So.port2;
        So.port1.onmessage = te, wo = function() {
            To.postMessage(1)
        }
    }
    if ("undefined" != typeof Promise && A(Promise)) {
        var Eo = Promise.resolve();
        Co = function() {
            Eo.then(te), Qi && setTimeout(_)
        }
    } else Co = wo;
    var jo, No = new io,
        Lo = v(function(e) {
            var t = "&" === e.charAt(0),
                n = "~" === (e = t ? e.slice(1) : e).charAt(0),
                r = "!" === (e = n ? e.slice(1) : e).charAt(0);
            return e = r ? e.slice(1) : e, {
                name: e,
                once: n,
                capture: r,
                passive: t
            }
        }),
        Io = null,
        Mo = [],
        Do = [],
        Po = {},
        Fo = !1,
        Ro = !1,
        Ho = 0,
        Bo = 0,
        Uo = function(e, t, n, r, i) {
            this.vm = e, i && (e._watcher = this), e._watchers.push(this), r ? (this.deep = !!r.deep, this.user = !!r.user, this.lazy = !!r.lazy, this.sync = !!r.sync) : this.deep = this.user = this.lazy = this.sync = !1, this.cb = n, this.id = ++Bo, this.active = !0, this.dirty = this.lazy, this.deps = [], this.newDeps = [], this.depIds = new io, this.newDepIds = new io, this.expression = "", "function" == typeof t ? this.getter = t : (this.getter = k(t), this.getter || (this.getter = function() {})), this.value = this.lazy ? void 0 : this.get()
        };
    Uo.prototype.get = function() {
        O(this);
        var e, t = this.vm;
        try {
            e = this.getter.call(t, t)
        } catch (e) {
            if (!this.user) throw e;
            Y(e, t, 'getter for watcher "' + this.expression + '"')
        } finally {
            this.deep && ie(e), S(), this.cleanupDeps()
        }
        return e
    }, Uo.prototype.addDep = function(e) {
        var t = e.id;
        this.newDepIds.has(t) || (this.newDepIds.add(t), this.newDeps.push(e), this.depIds.has(t) || e.addSub(this))
    }, Uo.prototype.cleanupDeps = function() {
        for (var e = this, t = this.deps.length; t--;) {
            var n = e.deps[t];
            e.newDepIds.has(n.id) || n.removeSub(e)
        }
        var r = this.depIds;
        this.depIds = this.newDepIds, this.newDepIds = r, this.newDepIds.clear(), r = this.deps, this.deps = this.newDeps, this.newDeps = r, this.newDeps.length = 0
    }, Uo.prototype.update = function() {
        this.lazy ? this.dirty = !0 : this.sync ? this.run() : Re(this)
    }, Uo.prototype.run = function() {
        if (this.active) {
            var e = this.get();
            if (e !== this.value || o(e) || this.deep) {
                var t = this.value;
                if (this.value = e, this.user) try {
                    this.cb.call(this.vm, e, t)
                } catch (e) {
                    Y(e, this.vm, 'callback for watcher "' + this.expression + '"')
                } else this.cb.call(this.vm, e, t)
            }
        }
    }, Uo.prototype.evaluate = function() {
        this.value = this.get(), this.dirty = !1
    }, Uo.prototype.depend = function() {
        for (var e = this, t = this.deps.length; t--;) e.deps[t].depend()
    }, Uo.prototype.teardown = function() {
        var e = this;
        if (this.active) {
            this.vm._isBeingDestroyed || d(this.vm._watchers, this);
            for (var t = this.deps.length; t--;) e.deps[t].removeSub(e);
            this.active = !1
        }
    };
    var Vo = {
            enumerable: !0,
            configurable: !0,
            get: _,
            set: _
        },
        zo = {
            lazy: !0
        };
    lt(ft.prototype);
    var Ko = {
            init: function(e, t, n, r) {
                if (!e.componentInstance || e.componentInstance._isDestroyed)(e.componentInstance = ht(e, Io, n, r)).$mount(t ? e.elm : void 0, t);
                else if (e.data.keepAlive) {
                    var i = e;
                    Ko.prepatch(i, i)
                }
            },
            prepatch: function(e, t) {
                var n = t.componentOptions;
                Te(t.componentInstance = e.componentInstance, n.propsData, n.listeners, t, n.children)
            },
            insert: function(e) {
                var t = e.context,
                    n = e.componentInstance;
                n._isMounted || (n._isMounted = !0, Le(n, "mounted")), e.data.keepAlive && (t._isMounted ? Pe(n) : je(n, !0))
            },
            destroy: function(e) {
                var t = e.componentInstance;
                t._isDestroyed || (e.data.keepAlive ? Ne(t, !0) : t.$destroy())
            }
        },
        Jo = Object.keys(Ko),
        qo = 1,
        Wo = 2,
        Go = 0;
    ! function(e) {
        e.prototype._init = function(e) {
            var t = this;
            t._uid = Go++, t._isVue = !0, e && e._isComponent ? wt(t, e) : t.$options = J(xt(t.constructor), e || {}, t), t._renderProxy = t, t._self = t, Oe(t), be(t), Ct(t), Le(t, "beforeCreate"), Ye(t), Be(t), Xe(t), Le(t, "created"), t.$options.el && t.$mount(t.$options.el)
        }
    }(Ot),
    function(e) {
        var t = {};
        t.get = function() {
            return this._data
        };
        var n = {};
        n.get = function() {
            return this._props
        }, Object.defineProperty(e.prototype, "$data", t), Object.defineProperty(e.prototype, "$props", n), e.prototype.$set = D, e.prototype.$delete = P, e.prototype.$watch = function(e, t, n) {
            var r = this;
            if (a(t)) return Ze(r, e, t, n);
            (n = n || {}).user = !0;
            var i = new Uo(r, e, t, n);
            return n.immediate && t.call(r, i.value),
                function() {
                    i.teardown()
                }
        }
    }(Ot),
    function(e) {
        var t = /^hook:/;
        e.prototype.$on = function(e, n) {
            var r = this,
                i = this;
            if (Array.isArray(e))
                for (var o = 0, a = e.length; o < a; o++) r.$on(e[o], n);
            else(i._events[e] || (i._events[e] = [])).push(n), t.test(e) && (i._hasHookEvent = !0);
            return i
        }, e.prototype.$once = function(e, t) {
            function n() {
                r.$off(e, n), t.apply(r, arguments)
            }
            var r = this;
            return n.fn = t, r.$on(e, n), r
        }, e.prototype.$off = function(e, t) {
            var n = this,
                r = this;
            if (!arguments.length) return r._events = Object.create(null), r;
            if (Array.isArray(e)) {
                for (var i = 0, o = e.length; i < o; i++) n.$off(e[i], t);
                return r
            }
            var a = r._events[e];
            if (!a) return r;
            if (!t) return r._events[e] = null, r;
            if (t)
                for (var s, c = a.length; c--;)
                    if ((s = a[c]) === t || s.fn === t) {
                        a.splice(c, 1);
                        break
                    } return r
        }, e.prototype.$emit = function(e) {
            var t = this,
                n = t._events[e];
            if (n) {
                n = n.length > 1 ? m(n) : n;
                for (var r = m(arguments, 1), i = 0, o = n.length; i < o; i++) try {
                    n[i].apply(t, r)
                } catch (n) {
                    Y(n, t, 'event handler for "' + e + '"')
                }
            }
            return t
        }
    }(Ot),
    function(e) {
        e.prototype._update = function(e, t) {
            var n = this;
            n._isMounted && Le(n, "beforeUpdate");
            var r = n.$el,
                i = n._vnode,
                o = Io;
            Io = n, n._vnode = e, i ? n.$el = n.__patch__(i, e) : (n.$el = n.__patch__(n.$el, e, t, !1, n.$options._parentElm, n.$options._refElm), n.$options._parentElm = n.$options._refElm = null), Io = o, r && (r.__vue__ = null), n.$el && (n.$el.__vue__ = n), n.$vnode && n.$parent && n.$vnode === n.$parent._vnode && (n.$parent.$el = n.$el)
        }, e.prototype.$forceUpdate = function() {
            var e = this;
            e._watcher && e._watcher.update()
        }, e.prototype.$destroy = function() {
            var e = this;
            if (!e._isBeingDestroyed) {
                Le(e, "beforeDestroy"), e._isBeingDestroyed = !0;
                var t = e.$parent;
                !t || t._isBeingDestroyed || e.$options.abstract || d(t.$children, e), e._watcher && e._watcher.teardown();
                for (var n = e._watchers.length; n--;) e._watchers[n].teardown();
                e._data.__ob__ && e._data.__ob__.vmCount--, e._isDestroyed = !0, e.__patch__(e._vnode, null), Le(e, "destroyed"), e.$off(), e.$el && (e.$el.__vue__ = null), e.$vnode && (e.$vnode.parent = null)
            }
        }
    }(Ot),
    function(e) {
        lt(e.prototype), e.prototype.$nextTick = function(e) {
            return re(e, this)
        }, e.prototype._render = function() {
            var e = this,
                t = e.$options,
                n = t.render,
                r = t._parentVnode;
            if (e._isMounted)
                for (var i in e.$slots) {
                    var o = e.$slots[i];
                    (o._rendered || o[0] && o[0].elm) && (e.$slots[i] = j(o, !0))
                }
            e.$scopedSlots = r && r.data.scopedSlots || Oi, e.$vnode = r;
            var a;
            try {
                a = n.call(e._renderProxy, e.$createElement)
            } catch (t) {
                Y(t, e, "render"), a = e._vnode
            }
            return a instanceof po || (a = ho()), a.parent = r, a
        }
    }(Ot);
    var Zo = [String, RegExp, Array],
        Xo = {
            KeepAlive: {
                name: "keep-alive",
                abstract: !0,
                props: {
                    include: Zo,
                    exclude: Zo,
                    max: [String, Number]
                },
                created: function() {
                    this.cache = Object.create(null), this.keys = []
                },
                destroyed: function() {
                    var e = this;
                    for (var t in e.cache) Pt(e.cache, t, e.keys)
                },
                watch: {
                    include: function(e) {
                        Dt(this, function(t) {
                            return Mt(e, t)
                        })
                    },
                    exclude: function(e) {
                        Dt(this, function(t) {
                            return !Mt(e, t)
                        })
                    }
                },
                render: function() {
                    var e = this.$slots.default,
                        t = _e(e),
                        n = t && t.componentOptions;
                    if (n) {
                        var r = It(n),
                            i = this,
                            o = i.include,
                            a = i.exclude;
                        if (o && (!r || !Mt(o, r)) || a && r && Mt(a, r)) return t;
                        var s = this,
                            c = s.cache,
                            u = s.keys,
                            l = null == t.key ? n.Ctor.cid + (n.tag ? "::" + n.tag : "") : t.key;
                        c[l] ? (t.componentInstance = c[l].componentInstance, d(u, l), u.push(l)) : (c[l] = t, u.push(l), this.max && u.length > parseInt(this.max) && Pt(c, u[0], u, this._vnode)), t.data.keepAlive = !0
                    }
                    return t || e && e[0]
                }
            }
        };
    ! function(e) {
        var t = {};
        t.get = function() {
            return Ui
        }, Object.defineProperty(e, "config", t), e.util = {
            warn: co,
            extend: y,
            mergeOptions: J,
            defineReactive: M
        }, e.set = D, e.delete = P, e.nextTick = re, e.options = Object.create(null), Hi.forEach(function(t) {
            e.options[t + "s"] = Object.create(null)
        }), e.options._base = e, y(e.options.components, Xo), St(e), Tt(e), Et(e), Lt(e)
    }(Ot), Object.defineProperty(Ot.prototype, "$isServer", {
        get: oo
    }), Object.defineProperty(Ot.prototype, "$ssrContext", {
        get: function() {
            return this.$vnode && this.$vnode.ssrContext
        }
    }), Ot.version = "2.5.9";
    var Yo, Qo, ea, ta, na, ra, ia, oa, aa = f("style,class"),
        sa = f("input,textarea,option,select,progress"),
        ca = function(e, t, n) {
            return "value" === n && sa(e) && "button" !== t || "selected" === n && "option" === e || "checked" === n && "input" === e || "muted" === n && "video" === e
        },
        ua = f("contenteditable,draggable,spellcheck"),
        la = f("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),
        fa = "http://www.w3.org/1999/xlink",
        da = function(e) {
            return ":" === e.charAt(5) && "xlink" === e.slice(0, 5)
        },
        pa = function(e) {
            return da(e) ? e.slice(6, e.length) : ""
        },
        va = function(e) {
            return null == e || !1 === e
        },
        ha = {
            svg: "http://www.w3.org/2000/svg",
            math: "http://www.w3.org/1998/Math/MathML"
        },
        ma = f("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),
        ya = f("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view", !0),
        ga = function(e) {
            return ma(e) || ya(e)
        },
        _a = Object.create(null),
        ba = f("text,number,password,search,email,tel,url"),
        $a = Object.freeze({
            createElement: function(e, t) {
                var n = document.createElement(e);
                return "select" !== e ? n : (t.data && t.data.attrs && void 0 !== t.data.attrs.multiple && n.setAttribute("multiple", "multiple"), n)
            },
            createElementNS: function(e, t) {
                return document.createElementNS(ha[e], t)
            },
            createTextNode: function(e) {
                return document.createTextNode(e)
            },
            createComment: function(e) {
                return document.createComment(e)
            },
            insertBefore: function(e, t, n) {
                e.insertBefore(t, n)
            },
            removeChild: function(e, t) {
                e.removeChild(t)
            },
            appendChild: function(e, t) {
                e.appendChild(t)
            },
            parentNode: function(e) {
                return e.parentNode
            },
            nextSibling: function(e) {
                return e.nextSibling
            },
            tagName: function(e) {
                return e.tagName
            },
            setTextContent: function(e, t) {
                e.textContent = t
            },
            setAttribute: function(e, t, n) {
                e.setAttribute(t, n)
            }
        }),
        Ca = {
            create: function(e, t) {
                qt(t)
            },
            update: function(e, t) {
                e.data.ref !== t.data.ref && (qt(e, !0), qt(t))
            },
            destroy: function(e) {
                qt(e, !0)
            }
        },
        wa = new po("", {}, []),
        xa = ["create", "activate", "update", "remove", "destroy"],
        ka = {
            create: Xt,
            update: Xt,
            destroy: function(e) {
                Xt(e, wa)
            }
        },
        Aa = Object.create(null),
        Oa = [Ca, ka],
        Sa = {
            create: nn,
            update: nn
        },
        Ta = {
            create: on,
            update: on
        },
        Ea = /[\w).+\-_$\]]/,
        ja = "__r",
        Na = "__c",
        La = {
            create: Nn,
            update: Nn
        },
        Ia = {
            create: Ln,
            update: Ln
        },
        Ma = v(function(e) {
            var t = {},
                n = /;(?![^(]*\))/g,
                r = /:(.+)/;
            return e.split(n).forEach(function(e) {
                if (e) {
                    var n = e.split(r);
                    n.length > 1 && (t[n[0].trim()] = n[1].trim())
                }
            }), t
        }),
        Da = /^--/,
        Pa = /\s*!important$/,
        Fa = function(e, t, n) {
            if (Da.test(t)) e.style.setProperty(t, n);
            else if (Pa.test(n)) e.style.setProperty(t, n.replace(Pa, ""), "important");
            else {
                var r = Ha(t);
                if (Array.isArray(n))
                    for (var i = 0, o = n.length; i < o; i++) e.style[r] = n[i];
                else e.style[r] = n
            }
        },
        Ra = ["Webkit", "Moz", "ms"],
        Ha = v(function(e) {
            if (oa = oa || document.createElement("div").style, "filter" !== (e = Li(e)) && e in oa) return e;
            for (var t = e.charAt(0).toUpperCase() + e.slice(1), n = 0; n < Ra.length; n++) {
                var r = Ra[n] + t;
                if (r in oa) return r
            }
        }),
        Ba = {
            create: Hn,
            update: Hn
        },
        Ua = v(function(e) {
            return {
                enterClass: e + "-enter",
                enterToClass: e + "-enter-to",
                enterActiveClass: e + "-enter-active",
                leaveClass: e + "-leave",
                leaveToClass: e + "-leave-to",
                leaveActiveClass: e + "-leave-active"
            }
        }),
        Va = Ki && !Zi,
        za = "transition",
        Ka = "animation",
        Ja = "transition",
        qa = "transitionend",
        Wa = "animation",
        Ga = "animationend";
    Va && (void 0 === window.ontransitionend && void 0 !== window.onwebkittransitionend && (Ja = "WebkitTransition", qa = "webkitTransitionEnd"), void 0 === window.onanimationend && void 0 !== window.onwebkitanimationend && (Wa = "WebkitAnimation", Ga = "webkitAnimationEnd"));
    var Za = Ki ? window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : setTimeout : function(e) {
            return e()
        },
        Xa = /\b(transform|all)(,|$)/,
        Ya = function(r) {
            function o(e) {
                return new po(j.tagName(e).toLowerCase(), {}, [], void 0, e)
            }

            function a(e, t) {
                function n() {
                    0 == --n.listeners && s(e)
                }
                return n.listeners = t, n
            }

            function s(e) {
                var n = j.parentNode(e);
                t(n) && j.removeChild(n, e)
            }

            function c(e, r, i, o, a) {
                if (e.isRootInsert = !a, !u(e, r, i, o)) {
                    var s = e.data,
                        c = e.children,
                        l = e.tag;
                    t(l) ? (e.elm = e.ns ? j.createElementNS(e.ns, l) : j.createElement(l, e), y(e), v(e, c, r), t(s) && m(e, r), p(i, e.elm, o)) : n(e.isComment) ? (e.elm = j.createComment(e.text), p(i, e.elm, o)) : (e.elm = j.createTextNode(e.text), p(i, e.elm, o))
                }
            }

            function u(e, r, i, o) {
                var a = e.data;
                if (t(a)) {
                    var s = t(e.componentInstance) && a.keepAlive;
                    if (t(a = a.hook) && t(a = a.init) && a(e, !1, i, o), t(e.componentInstance)) return l(e, r), n(s) && d(e, r, i, o), !0
                }
            }

            function l(e, n) {
                t(e.data.pendingInsert) && (n.push.apply(n, e.data.pendingInsert), e.data.pendingInsert = null), e.elm = e.componentInstance.$el, h(e) ? (m(e, n), y(e)) : (qt(e), n.push(e))
            }

            function d(e, n, r, i) {
                for (var o, a = e; a.componentInstance;)
                    if (a = a.componentInstance._vnode, t(o = a.data) && t(o = o.transition)) {
                        for (o = 0; o < T.activate.length; ++o) T.activate[o](wa, a);
                        n.push(a);
                        break
                    } p(r, e.elm, i)
            }

            function p(e, n, r) {
                t(e) && (t(r) ? r.parentNode === e && j.insertBefore(e, n, r) : j.appendChild(e, n))
            }

            function v(e, t, n) {
                if (Array.isArray(t))
                    for (var r = 0; r < t.length; ++r) c(t[r], n, e.elm, null, !0);
                else i(e.text) && j.appendChild(e.elm, j.createTextNode(e.text))
            }

            function h(e) {
                for (; e.componentInstance;) e = e.componentInstance._vnode;
                return t(e.tag)
            }

            function m(e, n) {
                for (var r = 0; r < T.create.length; ++r) T.create[r](wa, e);
                t(O = e.data.hook) && (t(O.create) && O.create(wa, e), t(O.insert) && n.push(e))
            }

            function y(e) {
                var n;
                if (t(n = e.fnScopeId)) j.setAttribute(e.elm, n, "");
                else
                    for (var r = e; r;) t(n = r.context) && t(n = n.$options._scopeId) && j.setAttribute(e.elm, n, ""), r = r.parent;
                t(n = Io) && n !== e.context && n !== e.fnContext && t(n = n.$options._scopeId) && j.setAttribute(e.elm, n, "")
            }

            function g(e, t, n, r, i, o) {
                for (; r <= i; ++r) c(n[r], o, e, t)
            }

            function _(e) {
                var n, r, i = e.data;
                if (t(i))
                    for (t(n = i.hook) && t(n = n.destroy) && n(e), n = 0; n < T.destroy.length; ++n) T.destroy[n](e);
                if (t(n = e.children))
                    for (r = 0; r < e.children.length; ++r) _(e.children[r])
            }

            function b(e, n, r, i) {
                for (; r <= i; ++r) {
                    var o = n[r];
                    t(o) && (t(o.tag) ? ($(o), _(o)) : s(o.elm))
                }
            }

            function $(e, n) {
                if (t(n) || t(e.data)) {
                    var r, i = T.remove.length + 1;
                    for (t(n) ? n.listeners += i : n = a(e.elm, i), t(r = e.componentInstance) && t(r = r._vnode) && t(r.data) && $(r, n), r = 0; r < T.remove.length; ++r) T.remove[r](e, n);
                    t(r = e.data.hook) && t(r = r.remove) ? r(e, n) : n()
                } else s(e.elm)
            }

            function C(n, r, i, o, a) {
                for (var s, u, l, f = 0, d = 0, p = r.length - 1, v = r[0], h = r[p], m = i.length - 1, y = i[0], _ = i[m], $ = !a; f <= p && d <= m;) e(v) ? v = r[++f] : e(h) ? h = r[--p] : Wt(v, y) ? (x(v, y, o), v = r[++f], y = i[++d]) : Wt(h, _) ? (x(h, _, o), h = r[--p], _ = i[--m]) : Wt(v, _) ? (x(v, _, o), $ && j.insertBefore(n, v.elm, j.nextSibling(h.elm)), v = r[++f], _ = i[--m]) : Wt(h, y) ? (x(h, y, o), $ && j.insertBefore(n, h.elm, v.elm), h = r[--p], y = i[++d]) : (e(s) && (s = Zt(r, f, p)), e(u = t(y.key) ? s[y.key] : w(y, r, f, p)) ? c(y, o, n, v.elm) : Wt(l = r[u], y) ? (x(l, y, o), r[u] = void 0, $ && j.insertBefore(n, l.elm, v.elm)) : c(y, o, n, v.elm), y = i[++d]);
                f > p ? g(n, e(i[m + 1]) ? null : i[m + 1].elm, i, d, m, o) : d > m && b(n, r, f, p)
            }

            function w(e, n, r, i) {
                for (var o = r; o < i; o++) {
                    var a = n[o];
                    if (t(a) && Wt(e, a)) return o
                }
            }

            function x(r, i, o, a) {
                if (r !== i) {
                    var s = i.elm = r.elm;
                    if (n(r.isAsyncPlaceholder)) t(i.asyncFactory.resolved) ? A(r.elm, i, o) : i.isAsyncPlaceholder = !0;
                    else if (n(i.isStatic) && n(r.isStatic) && i.key === r.key && (n(i.isCloned) || n(i.isOnce))) i.componentInstance = r.componentInstance;
                    else {
                        var c, u = i.data;
                        t(u) && t(c = u.hook) && t(c = c.prepatch) && c(r, i);
                        var l = r.children,
                            f = i.children;
                        if (t(u) && h(i)) {
                            for (c = 0; c < T.update.length; ++c) T.update[c](r, i);
                            t(c = u.hook) && t(c = c.update) && c(r, i)
                        }
                        e(i.text) ? t(l) && t(f) ? l !== f && C(s, l, f, o, a) : t(f) ? (t(r.text) && j.setTextContent(s, ""), g(s, null, f, 0, f.length - 1, o)) : t(l) ? b(s, l, 0, l.length - 1) : t(r.text) && j.setTextContent(s, "") : r.text !== i.text && j.setTextContent(s, i.text), t(u) && t(c = u.hook) && t(c = c.postpatch) && c(r, i)
                    }
                }
            }

            function k(e, r, i) {
                if (n(i) && t(e.parent)) e.parent.data.pendingInsert = r;
                else
                    for (var o = 0; o < r.length; ++o) r[o].data.hook.insert(r[o])
            }

            function A(e, r, i, o) {
                var a, s = r.tag,
                    c = r.data,
                    u = r.children;
                if (o = o || c && c.pre, r.elm = e, n(r.isComment) && t(r.asyncFactory)) return r.isAsyncPlaceholder = !0, !0;
                if (t(c) && (t(a = c.hook) && t(a = a.init) && a(r, !0), t(a = r.componentInstance))) return l(r, i), !0;
                if (t(s)) {
                    if (t(u))
                        if (e.hasChildNodes())
                            if (t(a = c) && t(a = a.domProps) && t(a = a.innerHTML)) {
                                if (a !== e.innerHTML) return !1
                            } else {
                                for (var f = !0, d = e.firstChild, p = 0; p < u.length; p++) {
                                    if (!d || !A(d, u[p], i, o)) {
                                        f = !1;
                                        break
                                    }
                                    d = d.nextSibling
                                }
                                if (!f || d) return !1
                            }
                    else v(r, u, i);
                    if (t(c)) {
                        var h = !1;
                        for (var y in c)
                            if (!N(y)) {
                                h = !0, m(r, i);
                                break
                            }! h && c.class && ie(c.class)
                    }
                } else e.data !== r.text && (e.data = r.text);
                return !0
            }
            var O, S, T = {},
                E = r.modules,
                j = r.nodeOps;
            for (O = 0; O < xa.length; ++O)
                for (T[xa[O]] = [], S = 0; S < E.length; ++S) t(E[S][xa[O]]) && T[xa[O]].push(E[S][xa[O]]);
            var N = f("attrs,class,staticClass,staticStyle,key");
            return function(r, i, a, s, u, l) {
                if (!e(i)) {
                    var f = !1,
                        d = [];
                    if (e(r)) f = !0, c(i, d, u, l);
                    else {
                        var p = t(r.nodeType);
                        if (!p && Wt(r, i)) x(r, i, d, s);
                        else {
                            if (p) {
                                if (1 === r.nodeType && r.hasAttribute(Ri) && (r.removeAttribute(Ri), a = !0), n(a) && A(r, i, d)) return k(i, d, !0), r;
                                r = o(r)
                            }
                            var v = r.elm,
                                m = j.parentNode(v);
                            if (c(i, d, v._leaveCb ? null : m, j.nextSibling(v)), t(i.parent))
                                for (var y = i.parent, g = h(i); y;) {
                                    for (var $ = 0; $ < T.destroy.length; ++$) T.destroy[$](y);
                                    if (y.elm = i.elm, g) {
                                        for (var C = 0; C < T.create.length; ++C) T.create[C](wa, y);
                                        var w = y.data.hook.insert;
                                        if (w.merged)
                                            for (var O = 1; O < w.fns.length; O++) w.fns[O]()
                                    } else qt(y);
                                    y = y.parent
                                }
                            t(m) ? b(m, [r], 0, 0) : t(r.tag) && _(r)
                        }
                    }
                    return k(i, d, f), i.elm
                }
                t(r) && _(r)
            }
        }({
            nodeOps: $a,
            modules: [Sa, Ta, La, Ia, Ba, Ki ? {
                create: tr,
                activate: tr,
                remove: function(e, t) {
                    !0 !== e.data.show ? Yn(e, t) : t()
                }
            } : {}].concat(Oa)
        });
    Zi && document.addEventListener("selectionchange", function() {
        var e = document.activeElement;
        e && e.vmodel && cr(e, "input")
    });
    var Qa = {
            inserted: function(e, t, n, r) {
                "select" === n.tag ? (r.elm && !r.elm._vOptions ? ce(n, "postpatch", function() {
                    Qa.componentUpdated(e, t, n)
                }) : nr(e, t, n.context), e._vOptions = [].map.call(e.options, or)) : ("textarea" === n.tag || ba(e.type)) && (e._vModifiers = t.modifiers, t.modifiers.lazy || (e.addEventListener("change", sr), Yi || (e.addEventListener("compositionstart", ar), e.addEventListener("compositionend", sr)), Zi && (e.vmodel = !0)))
            },
            componentUpdated: function(e, t, n) {
                if ("select" === n.tag) {
                    nr(e, t, n.context);
                    var r = e._vOptions,
                        i = e._vOptions = [].map.call(e.options, or);
                    i.some(function(e, t) {
                        return !b(e, r[t])
                    }) && (e.multiple ? t.value.some(function(e) {
                        return ir(e, i)
                    }) : t.value !== t.oldValue && ir(t.value, i)) && cr(e, "change")
                }
            }
        },
        es = {
            model: Qa,
            show: {
                bind: function(e, t, n) {
                    var r = t.value,
                        i = (n = ur(n)).data && n.data.transition,
                        o = e.__vOriginalDisplay = "none" === e.style.display ? "" : e.style.display;
                    r && i ? (n.data.show = !0, Xn(n, function() {
                        e.style.display = o
                    })) : e.style.display = r ? o : "none"
                },
                update: function(e, t, n) {
                    var r = t.value;
                    r !== t.oldValue && ((n = ur(n)).data && n.data.transition ? (n.data.show = !0, r ? Xn(n, function() {
                        e.style.display = e.__vOriginalDisplay
                    }) : Yn(n, function() {
                        e.style.display = "none"
                    })) : e.style.display = r ? e.__vOriginalDisplay : "none")
                },
                unbind: function(e, t, n, r, i) {
                    i || (e.style.display = e.__vOriginalDisplay)
                }
            }
        },
        ts = {
            name: String,
            appear: Boolean,
            css: Boolean,
            mode: String,
            type: String,
            enterClass: String,
            leaveClass: String,
            enterToClass: String,
            leaveToClass: String,
            enterActiveClass: String,
            leaveActiveClass: String,
            appearClass: String,
            appearActiveClass: String,
            appearToClass: String,
            duration: [Number, String, Object]
        },
        ns = {
            name: "transition",
            props: ts,
            abstract: !0,
            render: function(e) {
                var t = this,
                    n = this.$slots.default;
                if (n && (n = n.filter(function(e) {
                        return e.tag || ge(e)
                    })).length) {
                    var r = this.mode,
                        o = n[0];
                    if (pr(this.$vnode)) return o;
                    var a = lr(o);
                    if (!a) return o;
                    if (this._leaving) return dr(e, o);
                    var s = "__transition-" + this._uid + "-";
                    a.key = null == a.key ? a.isComment ? s + "comment" : s + a.tag : i(a.key) ? 0 === String(a.key).indexOf(s) ? a.key : s + a.key : a.key;
                    var c = (a.data || (a.data = {})).transition = fr(this),
                        u = this._vnode,
                        l = lr(u);
                    if (a.data.directives && a.data.directives.some(function(e) {
                            return "show" === e.name
                        }) && (a.data.show = !0), l && l.data && !vr(a, l) && !ge(l) && (!l.componentInstance || !l.componentInstance._vnode.isComment)) {
                        var f = l.data.transition = y({}, c);
                        if ("out-in" === r) return this._leaving = !0, ce(f, "afterLeave", function() {
                            t._leaving = !1, t.$forceUpdate()
                        }), dr(e, o);
                        if ("in-out" === r) {
                            if (ge(a)) return u;
                            var d, p = function() {
                                d()
                            };
                            ce(c, "afterEnter", p), ce(c, "enterCancelled", p), ce(f, "delayLeave", function(e) {
                                d = e
                            })
                        }
                    }
                    return o
                }
            }
        },
        rs = y({
            tag: String,
            moveClass: String
        }, ts);
    delete rs.mode;
    var is = {
        Transition: ns,
        TransitionGroup: {
            props: rs,
            render: function(e) {
                for (var t = this.tag || this.$vnode.data.tag || "span", n = Object.create(null), r = this.prevChildren = this.children, i = this.$slots.default || [], o = this.children = [], a = fr(this), s = 0; s < i.length; s++) {
                    var c = i[s];
                    c.tag && null != c.key && 0 !== String(c.key).indexOf("__vlist") && (o.push(c), n[c.key] = c, (c.data || (c.data = {})).transition = a)
                }
                if (r) {
                    for (var u = [], l = [], f = 0; f < r.length; f++) {
                        var d = r[f];
                        d.data.transition = a, d.data.pos = d.elm.getBoundingClientRect(), n[d.key] ? u.push(d) : l.push(d)
                    }
                    this.kept = e(t, null, u), this.removed = l
                }
                return e(t, null, o)
            },
            beforeUpdate: function() {
                this.__patch__(this._vnode, this.kept, !1, !0), this._vnode = this.kept
            },
            updated: function() {
                var e = this.prevChildren,
                    t = this.moveClass || (this.name || "v") + "-move";
                e.length && this.hasMove(e[0].elm, t) && (e.forEach(hr), e.forEach(mr), e.forEach(yr), this._reflow = document.body.offsetHeight, e.forEach(function(e) {
                    if (e.data.moved) {
                        var n = e.elm,
                            r = n.style;
                        Kn(n, t), r.transform = r.WebkitTransform = r.transitionDuration = "", n.addEventListener(qa, n._moveCb = function e(r) {
                            r && !/transform$/.test(r.propertyName) || (n.removeEventListener(qa, e), n._moveCb = null, Jn(n, t))
                        })
                    }
                }))
            },
            methods: {
                hasMove: function(e, t) {
                    if (!Va) return !1;
                    if (this._hasMove) return this._hasMove;
                    var n = e.cloneNode();
                    e._transitionClasses && e._transitionClasses.forEach(function(e) {
                        Un(n, e)
                    }), Bn(n, t), n.style.display = "none", this.$el.appendChild(n);
                    var r = Wn(n);
                    return this.$el.removeChild(n), this._hasMove = r.hasTransform
                }
            }
        }
    };
    Ot.config.mustUseProp = ca, Ot.config.isReservedTag = ga, Ot.config.isReservedAttr = aa, Ot.config.getTagNamespace = Kt, Ot.config.isUnknownElement = function(e) {
        if (!Ki) return !0;
        if (ga(e)) return !1;
        if (e = e.toLowerCase(), null != _a[e]) return _a[e];
        var t = document.createElement(e);
        return e.indexOf("-") > -1 ? _a[e] = t.constructor === window.HTMLUnknownElement || t.constructor === window.HTMLElement : _a[e] = /HTMLUnknownElement/.test(t.toString())
    }, y(Ot.options.directives, es), y(Ot.options.components, is), Ot.prototype.__patch__ = Ki ? Ya : _, Ot.prototype.$mount = function(e, t) {
        return e = e && Ki ? Jt(e) : void 0, Se(this, e, t)
    }, Ot.nextTick(function() {
        Ui.devtools && ao && ao.emit("init", Ot)
    }, 0);
    var os, as = /\{\{((?:.|\n)+?)\}\}/g,
        ss = /[-.*+?^${}()|[\]\/\\]/g,
        cs = v(function(e) {
            var t = e[0].replace(ss, "\\$&"),
                n = e[1].replace(ss, "\\$&");
            return new RegExp(t + "((?:.|\\n)+?)" + n, "g")
        }),
        us = {
            staticKeys: ["staticClass"],
            transformNode: function(e, t) {
                t.warn;
                var n = hn(e, "class");
                n && (e.staticClass = JSON.stringify(n));
                var r = vn(e, "class", !1);
                r && (e.classBinding = r)
            },
            genData: function(e) {
                var t = "";
                return e.staticClass && (t += "staticClass:" + e.staticClass + ","), e.classBinding && (t += "class:" + e.classBinding + ","), t
            }
        },
        ls = {
            staticKeys: ["staticStyle"],
            transformNode: function(e, t) {
                var n = hn(e, "style");
                n && (e.staticStyle = JSON.stringify(Ma(n)));
                var r = vn(e, "style", !1);
                r && (e.styleBinding = r)
            },
            genData: function(e) {
                var t = "";
                return e.staticStyle && (t += "staticStyle:" + e.staticStyle + ","), e.styleBinding && (t += "style:(" + e.styleBinding + "),"), t
            }
        },
        fs = {
            decode: function(e) {
                return os = os || document.createElement("div"), os.innerHTML = e, os.textContent
            }
        },
        ds = f("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),
        ps = f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),
        vs = f("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),
        hs = /^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,
        ms = "[a-zA-Z_][\\w\\-\\.]*",
        ys = "((?:" + ms + "\\:)?" + ms + ")",
        gs = new RegExp("^<" + ys),
        _s = /^\s*(\/?)>/,
        bs = new RegExp("^<\\/" + ys + "[^>]*>"),
        $s = /^<!DOCTYPE [^>]+>/i,
        Cs = /^<!--/,
        ws = /^<!\[/,
        xs = !1;
    "x".replace(/x(.)?/g, function(e, t) {
        xs = "" === t
    });
    var ks, As, Os, Ss, Ts, Es, js, Ns, Ls, Is, Ms, Ds = f("script,style,textarea", !0),
        Ps = {},
        Fs = {
            "&lt;": "<",
            "&gt;": ">",
            "&quot;": '"',
            "&amp;": "&",
            "&#10;": "\n",
            "&#9;": "\t"
        },
        Rs = /&(?:lt|gt|quot|amp);/g,
        Hs = /&(?:lt|gt|quot|amp|#10|#9);/g,
        Bs = f("pre,textarea", !0),
        Us = function(e, t) {
            return e && Bs(e) && "\n" === t[0]
        },
        Vs = /^@|^v-on:/,
        zs = /^v-|^@|^:/,
        Ks = /(.*?)\s+(?:in|of)\s+(.*)/,
        Js = /\((\{[^}]*\}|[^,{]*),([^,]*)(?:,([^,]*))?\)/,
        qs = /^\(|\)$/g,
        Ws = /:(.*)$/,
        Gs = /^:|^v-bind:/,
        Zs = /\.[^.]+/g,
        Xs = v(fs.decode),
        Ys = /^xmlns:NS\d+/,
        Qs = /^NS\d+:/,
        ec = [us, ls, {
            preTransformNode: function(e, t) {
                if ("input" === e.tag) {
                    var n = e.attrsMap;
                    if (n["v-model"] && (n["v-bind:type"] || n[":type"])) {
                        var r = vn(e, "type"),
                            i = hn(e, "v-if", !0),
                            o = i ? "&&(" + i + ")" : "",
                            a = null != hn(e, "v-else", !0),
                            s = hn(e, "v-else-if", !0),
                            c = Vr(e);
                        Sr(c), zr(c, "type", "checkbox"), kr(c, t), c.processed = !0, c.if = "(" + r + ")==='checkbox'" + o, Nr(c, {
                            exp: c.if,
                            block: c
                        });
                        var u = Vr(e);
                        hn(u, "v-for", !0), zr(u, "type", "radio"), kr(u, t), Nr(c, {
                            exp: "(" + r + ")==='radio'" + o,
                            block: u
                        });
                        var l = Vr(e);
                        return hn(l, "v-for", !0), zr(l, ":type", r), kr(l, t), Nr(c, {
                            exp: i,
                            block: l
                        }), a ? c.else = !0 : s && (c.elseif = s), c
                    }
                }
            }
        }],
        tc = {
            expectHTML: !0,
            modules: ec,
            directives: {
                model: function(e, t, n) {
                    var r = t.value,
                        i = t.modifiers,
                        o = e.tag,
                        a = e.attrsMap.type;
                    if (e.component) return mn(e, r, i), !1;
                    if ("select" === o) An(e, r, i);
                    else if ("input" === o && "checkbox" === a) xn(e, r, i);
                    else if ("input" === o && "radio" === a) kn(e, r, i);
                    else if ("input" === o || "textarea" === o) On(e, r, i);
                    else if (!Ui.isReservedTag(o)) return mn(e, r, i), !1;
                    return !0
                },
                text: function(e, t) {
                    t.value && ln(e, "textContent", "_s(" + t.value + ")")
                },
                html: function(e, t) {
                    t.value && ln(e, "innerHTML", "_s(" + t.value + ")")
                }
            },
            isPreTag: function(e) {
                return "pre" === e
            },
            isUnaryTag: ds,
            mustUseProp: ca,
            canBeLeftOpenTag: ps,
            isReservedTag: ga,
            getTagNamespace: Kt,
            staticKeys: function(e) {
                return e.reduce(function(e, t) {
                    return e.concat(t.staticKeys || [])
                }, []).join(",")
            }(ec)
        },
        nc = v(function(e) {
            return f("type,tag,attrsList,attrsMap,plain,parent,children,attrs" + (e ? "," + e : ""))
        }),
        rc = /^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,
        ic = /^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,
        oc = {
            esc: 27,
            tab: 9,
            enter: 13,
            space: 32,
            up: 38,
            left: 37,
            right: 39,
            down: 40,
            delete: [8, 46]
        },
        ac = function(e) {
            return "if(" + e + ")return null;"
        },
        sc = {
            stop: "$event.stopPropagation();",
            prevent: "$event.preventDefault();",
            self: ac("$event.target !== $event.currentTarget"),
            ctrl: ac("!$event.ctrlKey"),
            shift: ac("!$event.shiftKey"),
            alt: ac("!$event.altKey"),
            meta: ac("!$event.metaKey"),
            left: ac("'button' in $event && $event.button !== 0"),
            middle: ac("'button' in $event && $event.button !== 1"),
            right: ac("'button' in $event && $event.button !== 2")
        },
        cc = {
            on: function(e, t) {
                e.wrapListeners = function(e) {
                    return "_g(" + e + "," + t.value + ")"
                }
            },
            bind: function(e, t) {
                e.wrapData = function(n) {
                    return "_b(" + n + ",'" + e.tag + "'," + t.value + "," + (t.modifiers && t.modifiers.prop ? "true" : "false") + (t.modifiers && t.modifiers.sync ? ",true" : "") + ")"
                }
            },
            cloak: _
        },
        uc = function(e) {
            this.options = e, this.warn = e.warn || cn, this.transforms = un(e.modules, "transformCode"), this.dataGenFns = un(e.modules, "genData"), this.directives = y(y({}, cc), e.directives);
            var t = e.isReservedTag || Pi;
            this.maybeComponent = function(e) {
                return !t(e.tag)
            }, this.onceId = 0, this.staticRenderFns = []
        },
        lc = (new RegExp("\\b" + "do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b") + "\\b"), new RegExp("\\b" + "delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b") + "\\s*\\([^\\)]*\\)"), function(e) {
            return function(t) {
                function n(n, r) {
                    var i = Object.create(t),
                        o = [],
                        a = [];
                    if (i.warn = function(e, t) {
                            (t ? a : o).push(e)
                        }, r) {
                        r.modules && (i.modules = (t.modules || []).concat(r.modules)), r.directives && (i.directives = y(Object.create(t.directives), r.directives));
                        for (var s in r) "modules" !== s && "directives" !== s && (i[s] = r[s])
                    }
                    var c = e(n, i);
                    return c.errors = o, c.tips = a, c
                }
                return {
                    compile: n,
                    compileToFunctions: xi(n)
                }
            }
        }(function(e, t) {
            var n = Cr(e.trim(), t);
            Kr(n, t);
            var r = ei(n, t);
            return {
                ast: n,
                render: r.render,
                staticRenderFns: r.staticRenderFns
            }
        })(tc).compileToFunctions),
        fc = !!Ki && ki(!1),
        dc = !!Ki && ki(!0),
        pc = v(function(e) {
            var t = Jt(e);
            return t && t.innerHTML
        }),
        vc = Ot.prototype.$mount;
    return Ot.prototype.$mount = function(e, t) {
        if ((e = e && Jt(e)) === document.body || e === document.documentElement) return this;
        var n = this.$options;
        if (!n.render) {
            var r = n.template;
            if (r)
                if ("string" == typeof r) "#" === r.charAt(0) && (r = pc(r));
                else {
                    if (!r.nodeType) return this;
                    r = r.innerHTML
                }
            else e && (r = Ai(e));
            if (r) {
                var i = lc(r, {
                        shouldDecodeNewlines: fc,
                        shouldDecodeNewlinesForHref: dc,
                        delimiters: n.delimiters,
                        comments: n.comments
                    }, this),
                    o = i.render,
                    a = i.staticRenderFns;
                n.render = o, n.staticRenderFns = a
            }
        }
        return vc.call(this, e, t)
    }, Ot.compile = lc, Ot
});

(function() {
    var root = this;
    var previousUnderscore = root._;
    var ArrayProto = Array.prototype,
        ObjProto = Object.prototype,
        FuncProto = Function.prototype;
    var
        push = ArrayProto.push,
        slice = ArrayProto.slice,
        concat = ArrayProto.concat,
        toString = ObjProto.toString,
        hasOwnProperty = ObjProto.hasOwnProperty;
    var
        nativeIsArray = Array.isArray,
        nativeKeys = Object.keys,
        nativeBind = FuncProto.bind;
    var _ = function(obj) {
        if (obj instanceof _) return obj;
        if (!(this instanceof _)) return new _(obj);
        this._wrapped = obj;
    };
    if (typeof exports !== 'undefined') {
        if (typeof module !== 'undefined' && module.exports) {
            exports = module.exports = _;
        }
        exports._ = _;
    } else {
        root._ = _;
    }
    _.VERSION = '1.7.0';
    var createCallback = function(func, context, argCount) {
        if (context === void 0) return func;
        switch (argCount == null ? 3 : argCount) {
            case 1:
                return function(value) {
                    return func.call(context, value);
                };
            case 2:
                return function(value, other) {
                    return func.call(context, value, other);
                };
            case 3:
                return function(value, index, collection) {
                    return func.call(context, value, index, collection);
                };
            case 4:
                return function(accumulator, value, index, collection) {
                    return func.call(context, accumulator, value, index, collection);
                };
        }
        return function() {
            return func.apply(context, arguments);
        };
    };
    _.iteratee = function(value, context, argCount) {
        if (value == null) return _.identity;
        if (_.isFunction(value)) return createCallback(value, context, argCount);
        if (_.isObject(value)) return _.matches(value);
        return _.property(value);
    };
    _.each = _.forEach = function(obj, iteratee, context) {
        if (obj == null) return obj;
        iteratee = createCallback(iteratee, context);
        var i, length = obj.length;
        if (length === +length) {
            for (i = 0; i < length; i++) {
                iteratee(obj[i], i, obj);
            }
        } else {
            var keys = _.keys(obj);
            for (i = 0, length = keys.length; i < length; i++) {
                iteratee(obj[keys[i]], keys[i], obj);
            }
        }
        return obj;
    };
    _.map = _.collect = function(obj, iteratee, context) {
        if (obj == null) return [];
        iteratee = _.iteratee(iteratee, context);
        var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            results = Array(length),
            currentKey;
        for (var index = 0; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            results[index] = iteratee(obj[currentKey], currentKey, obj);
        }
        return results;
    };
    var reduceError = 'Reduce of empty array with no initial value';
    _.reduce = _.foldl = _.inject = function(obj, iteratee, memo, context) {
        if (obj == null) obj = [];
        iteratee = createCallback(iteratee, context, 4);
        var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            index = 0,
            currentKey;
        if (arguments.length < 3) {
            if (!length) throw new TypeError(reduceError);
            memo = obj[keys ? keys[index++] : index++];
        }
        for (; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            memo = iteratee(memo, obj[currentKey], currentKey, obj);
        }
        return memo;
    };
    _.reduceRight = _.foldr = function(obj, iteratee, memo, context) {
        if (obj == null) obj = [];
        iteratee = createCallback(iteratee, context, 4);
        var keys = obj.length !== +obj.length && _.keys(obj),
            index = (keys || obj).length,
            currentKey;
        if (arguments.length < 3) {
            if (!index) throw new TypeError(reduceError);
            memo = obj[keys ? keys[--index] : --index];
        }
        while (index--) {
            currentKey = keys ? keys[index] : index;
            memo = iteratee(memo, obj[currentKey], currentKey, obj);
        }
        return memo;
    };
    _.find = _.detect = function(obj, predicate, context) {
        var result;
        predicate = _.iteratee(predicate, context);
        _.some(obj, function(value, index, list) {
            if (predicate(value, index, list)) {
                result = value;
                return true;
            }
        });
        return result;
    };
    _.filter = _.select = function(obj, predicate, context) {
        var results = [];
        if (obj == null) return results;
        predicate = _.iteratee(predicate, context);
        _.each(obj, function(value, index, list) {
            if (predicate(value, index, list)) results.push(value);
        });
        return results;
    };
    _.reject = function(obj, predicate, context) {
        return _.filter(obj, _.negate(_.iteratee(predicate)), context);
    };
    _.every = _.all = function(obj, predicate, context) {
        if (obj == null) return true;
        predicate = _.iteratee(predicate, context);
        var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            index, currentKey;
        for (index = 0; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            if (!predicate(obj[currentKey], currentKey, obj)) return false;
        }
        return true;
    };
    _.some = _.any = function(obj, predicate, context) {
        if (obj == null) return false;
        predicate = _.iteratee(predicate, context);
        var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            index, currentKey;
        for (index = 0; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            if (predicate(obj[currentKey], currentKey, obj)) return true;
        }
        return false;
    };
    _.contains = _.include = function(obj, target) {
        if (obj == null) return false;
        if (obj.length !== +obj.length) obj = _.values(obj);
        return _.indexOf(obj, target) >= 0;
    };
    _.invoke = function(obj, method) {
        var args = slice.call(arguments, 2);
        var isFunc = _.isFunction(method);
        return _.map(obj, function(value) {
            return (isFunc ? method : value[method]).apply(value, args);
        });
    };
    _.pluck = function(obj, key) {
        return _.map(obj, _.property(key));
    };
    _.where = function(obj, attrs) {
        return _.filter(obj, _.matches(attrs));
    };
    _.findWhere = function(obj, attrs) {
        return _.find(obj, _.matches(attrs));
    };
    _.max = function(obj, iteratee, context) {
        var result = -Infinity,
            lastComputed = -Infinity,
            value, computed;
        if (iteratee == null && obj != null) {
            obj = obj.length === +obj.length ? obj : _.values(obj);
            for (var i = 0, length = obj.length; i < length; i++) {
                value = obj[i];
                if (value > result) {
                    result = value;
                }
            }
        } else {
            iteratee = _.iteratee(iteratee, context);
            _.each(obj, function(value, index, list) {
                computed = iteratee(value, index, list);
                if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
                    result = value;
                    lastComputed = computed;
                }
            });
        }
        return result;
    };
    _.min = function(obj, iteratee, context) {
        var result = Infinity,
            lastComputed = Infinity,
            value, computed;
        if (iteratee == null && obj != null) {
            obj = obj.length === +obj.length ? obj : _.values(obj);
            for (var i = 0, length = obj.length; i < length; i++) {
                value = obj[i];
                if (value < result) {
                    result = value;
                }
            }
        } else {
            iteratee = _.iteratee(iteratee, context);
            _.each(obj, function(value, index, list) {
                computed = iteratee(value, index, list);
                if (computed < lastComputed || computed === Infinity && result === Infinity) {
                    result = value;
                    lastComputed = computed;
                }
            });
        }
        return result;
    };
    _.shuffle = function(obj) {
        var set = obj && obj.length === +obj.length ? obj : _.values(obj);
        var length = set.length;
        var shuffled = Array(length);
        for (var index = 0, rand; index < length; index++) {
            rand = _.random(0, index);
            if (rand !== index) shuffled[index] = shuffled[rand];
            shuffled[rand] = set[index];
        }
        return shuffled;
    };
    _.sample = function(obj, n, guard) {
        if (n == null || guard) {
            if (obj.length !== +obj.length) obj = _.values(obj);
            return obj[_.random(obj.length - 1)];
        }
        return _.shuffle(obj).slice(0, Math.max(0, n));
    };
    _.sortBy = function(obj, iteratee, context) {
        iteratee = _.iteratee(iteratee, context);
        return _.pluck(_.map(obj, function(value, index, list) {
            return {
                value: value,
                index: index,
                criteria: iteratee(value, index, list)
            };
        }).sort(function(left, right) {
            var a = left.criteria;
            var b = right.criteria;
            if (a !== b) {
                if (a > b || a === void 0) return 1;
                if (a < b || b === void 0) return -1;
            }
            return left.index - right.index;
        }), 'value');
    };
    var group = function(behavior) {
        return function(obj, iteratee, context) {
            var result = {};
            iteratee = _.iteratee(iteratee, context);
            _.each(obj, function(value, index) {
                var key = iteratee(value, index, obj);
                behavior(result, value, key);
            });
            return result;
        };
    };
    _.groupBy = group(function(result, value, key) {
        if (_.has(result, key)) result[key].push(value);
        else result[key] = [value];
    });
    _.indexBy = group(function(result, value, key) {
        result[key] = value;
    });
    _.countBy = group(function(result, value, key) {
        if (_.has(result, key)) result[key]++;
        else result[key] = 1;
    });
    _.sortedIndex = function(array, obj, iteratee, context) {
        iteratee = _.iteratee(iteratee, context, 1);
        var value = iteratee(obj);
        var low = 0,
            high = array.length;
        while (low < high) {
            var mid = low + high >>> 1;
            if (iteratee(array[mid]) < value) low = mid + 1;
            else high = mid;
        }
        return low;
    };
    _.toArray = function(obj) {
        if (!obj) return [];
        if (_.isArray(obj)) return slice.call(obj);
        if (obj.length === +obj.length) return _.map(obj, _.identity);
        return _.values(obj);
    };
    _.size = function(obj) {
        if (obj == null) return 0;
        return obj.length === +obj.length ? obj.length : _.keys(obj).length;
    };
    _.partition = function(obj, predicate, context) {
        predicate = _.iteratee(predicate, context);
        var pass = [],
            fail = [];
        _.each(obj, function(value, key, obj) {
            (predicate(value, key, obj) ? pass : fail).push(value);
        });
        return [pass, fail];
    };
    _.first = _.head = _.take = function(array, n, guard) {
        if (array == null) return void 0;
        if (n == null || guard) return array[0];
        if (n < 0) return [];
        return slice.call(array, 0, n);
    };
    _.initial = function(array, n, guard) {
        return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
    };
    _.last = function(array, n, guard) {
        if (array == null) return void 0;
        if (n == null || guard) return array[array.length - 1];
        return slice.call(array, Math.max(array.length - n, 0));
    };
    _.rest = _.tail = _.drop = function(array, n, guard) {
        return slice.call(array, n == null || guard ? 1 : n);
    };
    _.compact = function(array) {
        return _.filter(array, _.identity);
    };
    var flatten = function(input, shallow, strict, output) {
        if (shallow && _.every(input, _.isArray)) {
            return concat.apply(output, input);
        }
        for (var i = 0, length = input.length; i < length; i++) {
            var value = input[i];
            if (!_.isArray(value) && !_.isArguments(value)) {
                if (!strict) output.push(value);
            } else if (shallow) {
                push.apply(output, value);
            } else {
                flatten(value, shallow, strict, output);
            }
        }
        return output;
    };
    _.flatten = function(array, shallow) {
        return flatten(array, shallow, false, []);
    };
    _.without = function(array) {
        return _.difference(array, slice.call(arguments, 1));
    };
    _.uniq = _.unique = function(array, isSorted, iteratee, context) {
        if (array == null) return [];
        if (!_.isBoolean(isSorted)) {
            context = iteratee;
            iteratee = isSorted;
            isSorted = false;
        }
        if (iteratee != null) iteratee = _.iteratee(iteratee, context);
        var result = [];
        var seen = [];
        for (var i = 0, length = array.length; i < length; i++) {
            var value = array[i];
            if (isSorted) {
                if (!i || seen !== value) result.push(value);
                seen = value;
            } else if (iteratee) {
                var computed = iteratee(value, i, array);
                if (_.indexOf(seen, computed) < 0) {
                    seen.push(computed);
                    result.push(value);
                }
            } else if (_.indexOf(result, value) < 0) {
                result.push(value);
            }
        }
        return result;
    };
    _.union = function() {
        return _.uniq(flatten(arguments, true, true, []));
    };
    _.intersection = function(array) {
        if (array == null) return [];
        var result = [];
        var argsLength = arguments.length;
        for (var i = 0, length = array.length; i < length; i++) {
            var item = array[i];
            if (_.contains(result, item)) continue;
            for (var j = 1; j < argsLength; j++) {
                if (!_.contains(arguments[j], item)) break;
            }
            if (j === argsLength) result.push(item);
        }
        return result;
    };
    _.difference = function(array) {
        var rest = flatten(slice.call(arguments, 1), true, true, []);
        return _.filter(array, function(value) {
            return !_.contains(rest, value);
        });
    };
    _.zip = function(array) {
        if (array == null) return [];
        var length = _.max(arguments, 'length').length;
        var results = Array(length);
        for (var i = 0; i < length; i++) {
            results[i] = _.pluck(arguments, i);
        }
        return results;
    };
    _.object = function(list, values) {
        if (list == null) return {};
        var result = {};
        for (var i = 0, length = list.length; i < length; i++) {
            if (values) {
                result[list[i]] = values[i];
            } else {
                result[list[i][0]] = list[i][1];
            }
        }
        return result;
    };
    _.indexOf = function(array, item, isSorted) {
        if (array == null) return -1;
        var i = 0,
            length = array.length;
        if (isSorted) {
            if (typeof isSorted == 'number') {
                i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;
            } else {
                i = _.sortedIndex(array, item);
                return array[i] === item ? i : -1;
            }
        }
        for (; i < length; i++)
            if (array[i] === item) return i;
        return -1;
    };
    _.lastIndexOf = function(array, item, from) {
        if (array == null) return -1;
        var idx = array.length;
        if (typeof from == 'number') {
            idx = from < 0 ? idx + from + 1 : Math.min(idx, from + 1);
        }
        while (--idx >= 0)
            if (array[idx] === item) return idx;
        return -1;
    };
    _.range = function(start, stop, step) {
        if (arguments.length <= 1) {
            stop = start || 0;
            start = 0;
        }
        step = step || 1;
        var length = Math.max(Math.ceil((stop - start) / step), 0);
        var range = Array(length);
        for (var idx = 0; idx < length; idx++, start += step) {
            range[idx] = start;
        }
        return range;
    };
    var Ctor = function() {};
    _.bind = function(func, context) {
        var args, bound;
        if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
        if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
        args = slice.call(arguments, 2);
        bound = function() {
            if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));
            Ctor.prototype = func.prototype;
            var self = new Ctor;
            Ctor.prototype = null;
            var result = func.apply(self, args.concat(slice.call(arguments)));
            if (_.isObject(result)) return result;
            return self;
        };
        return bound;
    };
    _.partial = function(func) {
        var boundArgs = slice.call(arguments, 1);
        return function() {
            var position = 0;
            var args = boundArgs.slice();
            for (var i = 0, length = args.length; i < length; i++) {
                if (args[i] === _) args[i] = arguments[position++];
            }
            while (position < arguments.length) args.push(arguments[position++]);
            return func.apply(this, args);
        };
    };
    _.bindAll = function(obj) {
        var i, length = arguments.length,
            key;
        if (length <= 1) throw new Error('bindAll must be passed function names');
        for (i = 1; i < length; i++) {
            key = arguments[i];
            obj[key] = _.bind(obj[key], obj);
        }
        return obj;
    };
    _.memoize = function(func, hasher) {
        var memoize = function(key) {
            var cache = memoize.cache;
            var address = hasher ? hasher.apply(this, arguments) : key;
            if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
            return cache[address];
        };
        memoize.cache = {};
        return memoize;
    };
    _.delay = function(func, wait) {
        var args = slice.call(arguments, 2);
        return setTimeout(function() {
            return func.apply(null, args);
        }, wait);
    };
    _.defer = function(func) {
        return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
    };
    _.throttle = function(func, wait, options) {
        var context, args, result;
        var timeout = null;
        var previous = 0;
        if (!options) options = {};
        var later = function() {
            previous = options.leading === false ? 0 : _.now();
            timeout = null;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
        };
        return function() {
            var now = _.now();
            if (!previous && options.leading === false) previous = now;
            var remaining = wait - (now - previous);
            context = this;
            args = arguments;
            if (remaining <= 0 || remaining > wait) {
                clearTimeout(timeout);
                timeout = null;
                previous = now;
                result = func.apply(context, args);
                if (!timeout) context = args = null;
            } else if (!timeout && options.trailing !== false) {
                timeout = setTimeout(later, remaining);
            }
            return result;
        };
    };
    _.debounce = function(func, wait, immediate) {
        var timeout, args, context, timestamp, result;
        var later = function() {
            var last = _.now() - timestamp;
            if (last < wait && last > 0) {
                timeout = setTimeout(later, wait - last);
            } else {
                timeout = null;
                if (!immediate) {
                    result = func.apply(context, args);
                    if (!timeout) context = args = null;
                }
            }
        };
        return function() {
            context = this;
            args = arguments;
            timestamp = _.now();
            var callNow = immediate && !timeout;
            if (!timeout) timeout = setTimeout(later, wait);
            if (callNow) {
                result = func.apply(context, args);
                context = args = null;
            }
            return result;
        };
    };
    _.wrap = function(func, wrapper) {
        return _.partial(wrapper, func);
    };
    _.negate = function(predicate) {
        return function() {
            return !predicate.apply(this, arguments);
        };
    };
    _.compose = function() {
        var args = arguments;
        var start = args.length - 1;
        return function() {
            var i = start;
            var result = args[start].apply(this, arguments);
            while (i--) result = args[i].call(this, result);
            return result;
        };
    };
    _.after = function(times, func) {
        return function() {
            if (--times < 1) {
                return func.apply(this, arguments);
            }
        };
    };
    _.before = function(times, func) {
        var memo;
        return function() {
            if (--times > 0) {
                memo = func.apply(this, arguments);
            } else {
                func = null;
            }
            return memo;
        };
    };
    _.once = _.partial(_.before, 2);
    _.keys = function(obj) {
        if (!_.isObject(obj)) return [];
        if (nativeKeys) return nativeKeys(obj);
        var keys = [];
        for (var key in obj)
            if (_.has(obj, key)) keys.push(key);
        return keys;
    };
    _.values = function(obj) {
        var keys = _.keys(obj);
        var length = keys.length;
        var values = Array(length);
        for (var i = 0; i < length; i++) {
            values[i] = obj[keys[i]];
        }
        return values;
    };
    _.pairs = function(obj) {
        var keys = _.keys(obj);
        var length = keys.length;
        var pairs = Array(length);
        for (var i = 0; i < length; i++) {
            pairs[i] = [keys[i], obj[keys[i]]];
        }
        return pairs;
    };
    _.invert = function(obj) {
        var result = {};
        var keys = _.keys(obj);
        for (var i = 0, length = keys.length; i < length; i++) {
            result[obj[keys[i]]] = keys[i];
        }
        return result;
    };
    _.functions = _.methods = function(obj) {
        var names = [];
        for (var key in obj) {
            if (_.isFunction(obj[key])) names.push(key);
        }
        return names.sort();
    };
    _.extend = function(obj) {
        if (!_.isObject(obj)) return obj;
        var source, prop;
        for (var i = 1, length = arguments.length; i < length; i++) {
            source = arguments[i];
            for (prop in source) {
                if (hasOwnProperty.call(source, prop)) {
                    obj[prop] = source[prop];
                }
            }
        }
        return obj;
    };
    _.pick = function(obj, iteratee, context) {
        var result = {},
            key;
        if (obj == null) return result;
        if (_.isFunction(iteratee)) {
            iteratee = createCallback(iteratee, context);
            for (key in obj) {
                var value = obj[key];
                if (iteratee(value, key, obj)) result[key] = value;
            }
        } else {
            var keys = concat.apply([], slice.call(arguments, 1));
            obj = new Object(obj);
            for (var i = 0, length = keys.length; i < length; i++) {
                key = keys[i];
                if (key in obj) result[key] = obj[key];
            }
        }
        return result;
    };
    _.omit = function(obj, iteratee, context) {
        if (_.isFunction(iteratee)) {
            iteratee = _.negate(iteratee);
        } else {
            var keys = _.map(concat.apply([], slice.call(arguments, 1)), String);
            iteratee = function(value, key) {
                return !_.contains(keys, key);
            };
        }
        return _.pick(obj, iteratee, context);
    };
    _.defaults = function(obj) {
        if (!_.isObject(obj)) return obj;
        for (var i = 1, length = arguments.length; i < length; i++) {
            var source = arguments[i];
            for (var prop in source) {
                if (obj[prop] === void 0) obj[prop] = source[prop];
            }
        }
        return obj;
    };
    _.clone = function(obj) {
        if (!_.isObject(obj)) return obj;
        return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
    };
    _.tap = function(obj, interceptor) {
        interceptor(obj);
        return obj;
    };
    var eq = function(a, b, aStack, bStack) {
        if (a === b) return a !== 0 || 1 / a === 1 / b;
        if (a == null || b == null) return a === b;
        if (a instanceof _) a = a._wrapped;
        if (b instanceof _) b = b._wrapped;
        var className = toString.call(a);
        if (className !== toString.call(b)) return false;
        switch (className) {
            case '[object RegExp]':
            case '[object String]':
                return '' + a === '' + b;
            case '[object Number]':
                if (+a !== +a) return +b !== +b;
                return +a === 0 ? 1 / +a === 1 / b : +a === +b;
            case '[object Date]':
            case '[object Boolean]':
                return +a === +b;
        }
        if (typeof a != 'object' || typeof b != 'object') return false;
        var length = aStack.length;
        while (length--) {
            if (aStack[length] === a) return bStack[length] === b;
        }
        var aCtor = a.constructor,
            bCtor = b.constructor;
        if (aCtor !== bCtor && 'constructor' in a && 'constructor' in b && !(_.isFunction(aCtor) && aCtor instanceof aCtor && _.isFunction(bCtor) && bCtor instanceof bCtor)) {
            return false;
        }
        aStack.push(a);
        bStack.push(b);
        var size, result;
        if (className === '[object Array]') {
            size = a.length;
            result = size === b.length;
            if (result) {
                while (size--) {
                    if (!(result = eq(a[size], b[size], aStack, bStack))) break;
                }
            }
        } else {
            var keys = _.keys(a),
                key;
            size = keys.length;
            result = _.keys(b).length === size;
            if (result) {
                while (size--) {
                    key = keys[size];
                    if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;
                }
            }
        }
        aStack.pop();
        bStack.pop();
        return result;
    };
    _.isEqual = function(a, b) {
        return eq(a, b, [], []);
    };
    _.isEmpty = function(obj) {
        if (obj == null) return true;
        if (_.isArray(obj) || _.isString(obj) || _.isArguments(obj)) return obj.length === 0;
        for (var key in obj)
            if (_.has(obj, key)) return false;
        return true;
    };
    _.isElement = function(obj) {
        return !!(obj && obj.nodeType === 1);
    };
    _.isArray = nativeIsArray || function(obj) {
        return toString.call(obj) === '[object Array]';
    };
    _.isObject = function(obj) {
        var type = typeof obj;
        return type === 'function' || type === 'object' && !!obj;
    };
    _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {
        _['is' + name] = function(obj) {
            return toString.call(obj) === '[object ' + name + ']';
        };
    });
    if (!_.isArguments(arguments)) {
        _.isArguments = function(obj) {
            return _.has(obj, 'callee');
        };
    }
    if (typeof /./ !== 'function') {
        _.isFunction = function(obj) {
            return typeof obj == 'function' || false;
        };
    }
    _.isFinite = function(obj) {
        return isFinite(obj) && !isNaN(parseFloat(obj));
    };
    _.isNaN = function(obj) {
        return _.isNumber(obj) && obj !== +obj;
    };
    _.isBoolean = function(obj) {
        return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
    };
    _.isNull = function(obj) {
        return obj === null;
    };
    _.isUndefined = function(obj) {
        return obj === void 0;
    };
    _.has = function(obj, key) {
        return obj != null && hasOwnProperty.call(obj, key);
    };
    _.noConflict = function() {
        root._ = previousUnderscore;
        return this;
    };
    _.identity = function(value) {
        return value;
    };
    _.constant = function(value) {
        return function() {
            return value;
        };
    };
    _.noop = function() {};
    _.property = function(key) {
        return function(obj) {
            return obj[key];
        };
    };
    _.matches = function(attrs) {
        var pairs = _.pairs(attrs),
            length = pairs.length;
        return function(obj) {
            if (obj == null) return !length;
            obj = new Object(obj);
            for (var i = 0; i < length; i++) {
                var pair = pairs[i],
                    key = pair[0];
                if (pair[1] !== obj[key] || !(key in obj)) return false;
            }
            return true;
        };
    };
    _.times = function(n, iteratee, context) {
        var accum = Array(Math.max(0, n));
        iteratee = createCallback(iteratee, context, 1);
        for (var i = 0; i < n; i++) accum[i] = iteratee(i);
        return accum;
    };
    _.random = function(min, max) {
        if (max == null) {
            max = min;
            min = 0;
        }
        return min + Math.floor(Math.random() * (max - min + 1));
    };
    _.now = Date.now || function() {
        return new Date().getTime();
    };
    var escapeMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#x27;',
        '`': '&#x60;'
    };
    var unescapeMap = _.invert(escapeMap);
    var createEscaper = function(map) {
        var escaper = function(match) {
            return map[match];
        };
        var source = '(?:' + _.keys(map).join('|') + ')';
        var testRegexp = RegExp(source);
        var replaceRegexp = RegExp(source, 'g');
        return function(string) {
            string = string == null ? '' : '' + string;
            return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
        };
    };
    _.escape = createEscaper(escapeMap);
    _.unescape = createEscaper(unescapeMap);
    _.result = function(object, property) {
        if (object == null) return void 0;
        var value = object[property];
        return _.isFunction(value) ? object[property]() : value;
    };
    var idCounter = 0;
    _.uniqueId = function(prefix) {
        var id = ++idCounter + '';
        return prefix ? prefix + id : id;
    };
    _.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var noMatch = /(.)^/;
    var escapes = {
        "'": "'",
        '\\': '\\',
        '\r': 'r',
        '\n': 'n',
        '\u2028': 'u2028',
        '\u2029': 'u2029'
    };
    var escaper = /\\|'|\r|\n|\u2028|\u2029/g;
    var escapeChar = function(match) {
        return '\\' + escapes[match];
    };
    _.template = function(text, settings, oldSettings) {
        if (!settings && oldSettings) settings = oldSettings;
        settings = _.defaults({}, settings, _.templateSettings);
        var matcher = RegExp([(settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source].join('|') + '|$', 'g');
        var index = 0;
        var source = "__p+='";
        text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
            source += text.slice(index, offset).replace(escaper, escapeChar);
            index = offset + match.length;
            if (escape) {
                source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
            } else if (interpolate) {
                source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
            } else if (evaluate) {
                source += "';\n" + evaluate + "\n__p+='";
            }
            return match;
        });
        source += "';\n";
        if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';
        source = "var __t,__p='',__j=Array.prototype.join," + "print=function(){__p+=__j.call(arguments,'');};\n" +
            source + 'return __p;\n';
        try {
            var render = new Function(settings.variable || 'obj', '_', source);
        } catch (e) {
            e.source = source;
            throw e;
        }
        var template = function(data) {
            return render.call(this, data, _);
        };
        var argument = settings.variable || 'obj';
        template.source = 'function(' + argument + '){\n' + source + '}';
        return template;
    };
    _.chain = function(obj) {
        var instance = _(obj);
        instance._chain = true;
        return instance;
    };
    var result = function(obj) {
        return this._chain ? _(obj).chain() : obj;
    };
    _.mixin = function(obj) {
        _.each(_.functions(obj), function(name) {
            var func = _[name] = obj[name];
            _.prototype[name] = function() {
                var args = [this._wrapped];
                push.apply(args, arguments);
                return result.call(this, func.apply(_, args));
            };
        });
    };
    _.mixin(_);
    _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
        var method = ArrayProto[name];
        _.prototype[name] = function() {
            var obj = this._wrapped;
            method.apply(obj, arguments);
            if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
            return result.call(this, obj);
        };
    });
    _.each(['concat', 'join', 'slice'], function(name) {
        var method = ArrayProto[name];
        _.prototype[name] = function() {
            return result.call(this, method.apply(this._wrapped, arguments));
        };
    });
    _.prototype.value = function() {
        return this._wrapped;
    };
    if (typeof define === 'function' && define.amd) {
        define('underscore', [], function() {
            return _;
        });
    }
}.call(this));;
(function(root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['underscore', 'jquery', 'exports'], function(_, $, exports) {
            root.Backbone = factory(root, exports, _, $);
        });
    } else if (typeof exports !== 'undefined') {
        var _ = require('underscore');
        factory(root, exports, _);
    } else {
        root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));
    }
}(this, function(root, Backbone, _, $) {
    var previousBackbone = root.Backbone;
    var array = [];
    var push = array.push;
    var slice = array.slice;
    var splice = array.splice;
    Backbone.VERSION = '1.1.2';
    Backbone.$ = $;
    Backbone.noConflict = function() {
        root.Backbone = previousBackbone;
        return this;
    };
    Backbone.emulateHTTP = false;
    Backbone.emulateJSON = false;
    var Events = Backbone.Events = {
        on: function(name, callback, context) {
            if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;
            this._events || (this._events = {});
            var events = this._events[name] || (this._events[name] = []);
            events.push({
                callback: callback,
                context: context,
                ctx: context || this
            });
            return this;
        },
        once: function(name, callback, context) {
            if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;
            var self = this;
            var once = _.once(function() {
                self.off(name, once);
                callback.apply(this, arguments);
            });
            once._callback = callback;
            return this.on(name, once, context);
        },
        off: function(name, callback, context) {
            var retain, ev, events, names, i, l, j, k;
            if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;
            if (!name && !callback && !context) {
                this._events = void 0;
                return this;
            }
            names = name ? [name] : _.keys(this._events);
            for (i = 0, l = names.length; i < l; i++) {
                name = names[i];
                if (events = this._events[name]) {
                    this._events[name] = retain = [];
                    if (callback || context) {
                        for (j = 0, k = events.length; j < k; j++) {
                            ev = events[j];
                            if ((callback && callback !== ev.callback && callback !== ev.callback._callback) || (context && context !== ev.context)) {
                                retain.push(ev);
                            }
                        }
                    }
                    if (!retain.length) delete this._events[name];
                }
            }
            return this;
        },
        trigger: function(name) {
            if (!this._events) return this;
            var args = slice.call(arguments, 1);
            if (!eventsApi(this, 'trigger', name, args)) return this;
            var events = this._events[name];
            var allEvents = this._events.all;
            if (events) triggerEvents(events, args);
            if (allEvents) triggerEvents(allEvents, arguments);
            return this;
        },
        stopListening: function(obj, name, callback) {
            var listeningTo = this._listeningTo;
            if (!listeningTo) return this;
            var remove = !name && !callback;
            if (!callback && typeof name === 'object') callback = this;
            if (obj)(listeningTo = {})[obj._listenId] = obj;
            for (var id in listeningTo) {
                obj = listeningTo[id];
                obj.off(name, callback, this);
                if (remove || _.isEmpty(obj._events)) delete this._listeningTo[id];
            }
            return this;
        }
    };
    var eventSplitter = /\s+/;
    var eventsApi = function(obj, action, name, rest) {
        if (!name) return true;
        if (typeof name === 'object') {
            for (var key in name) {
                obj[action].apply(obj, [key, name[key]].concat(rest));
            }
            return false;
        }
        if (eventSplitter.test(name)) {
            var names = name.split(eventSplitter);
            for (var i = 0, l = names.length; i < l; i++) {
                obj[action].apply(obj, [names[i]].concat(rest));
            }
            return false;
        }
        return true;
    };
    var triggerEvents = function(events, args) {
        var ev, i = -1,
            l = events.length,
            a1 = args[0],
            a2 = args[1],
            a3 = args[2];
        switch (args.length) {
            case 0:
                while (++i < l)(ev = events[i]).callback.call(ev.ctx);
                return;
            case 1:
                while (++i < l)(ev = events[i]).callback.call(ev.ctx, a1);
                return;
            case 2:
                while (++i < l)(ev = events[i]).callback.call(ev.ctx, a1, a2);
                return;
            case 3:
                while (++i < l)(ev = events[i]).callback.call(ev.ctx, a1, a2, a3);
                return;
            default:
                while (++i < l)(ev = events[i]).callback.apply(ev.ctx, args);
                return;
        }
    };
    var listenMethods = {
        listenTo: 'on',
        listenToOnce: 'once'
    };
    _.each(listenMethods, function(implementation, method) {
        Events[method] = function(obj, name, callback) {
            var listeningTo = this._listeningTo || (this._listeningTo = {});
            var id = obj._listenId || (obj._listenId = _.uniqueId('l'));
            listeningTo[id] = obj;
            if (!callback && typeof name === 'object') callback = this;
            obj[implementation](name, callback, this);
            return this;
        };
    });
    Events.bind = Events.on;
    Events.unbind = Events.off;
    _.extend(Backbone, Events);
    var Model = Backbone.Model = function(attributes, options) {
        var attrs = attributes || {};
        options || (options = {});
        this.cid = _.uniqueId('c');
        this.attributes = {};
        if (options.collection) this.collection = options.collection;
        if (options.parse) attrs = this.parse(attrs, options) || {};
        attrs = _.defaults({}, attrs, _.result(this, 'defaults'));
        this.set(attrs, options);
        this.changed = {};
        this.initialize.apply(this, arguments);
    };
    _.extend(Model.prototype, Events, {
        changed: null,
        validationError: null,
        idAttribute: 'id',
        initialize: function() {},
        toJSON: function(options) {
            return _.clone(this.attributes);
        },
        sync: function() {
            return Backbone.sync.apply(this, arguments);
        },
        get: function(attr) {
            return this.attributes[attr];
        },
        escape: function(attr) {
            return _.escape(this.get(attr));
        },
        has: function(attr) {
            return this.get(attr) != null;
        },
        set: function(key, val, options) {
            var attr, attrs, unset, changes, silent, changing, prev, current;
            if (key == null) return this;
            if (typeof key === 'object') {
                attrs = key;
                options = val;
            } else {
                (attrs = {})[key] = val;
            }
            options || (options = {});
            if (!this._validate(attrs, options)) return false;
            unset = options.unset;
            silent = options.silent;
            changes = [];
            changing = this._changing;
            this._changing = true;
            if (!changing) {
                this._previousAttributes = _.clone(this.attributes);
                this.changed = {};
            }
            current = this.attributes, prev = this._previousAttributes;
            if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];
            for (attr in attrs) {
                val = attrs[attr];
                if (!_.isEqual(current[attr], val)) changes.push(attr);
                if (!_.isEqual(prev[attr], val)) {
                    this.changed[attr] = val;
                } else {
                    delete this.changed[attr];
                }
                unset ? delete current[attr] : current[attr] = val;
            }
            if (!silent) {
                if (changes.length) this._pending = options;
                for (var i = 0, l = changes.length; i < l; i++) {
                    this.trigger('change:' + changes[i], this, current[changes[i]], options);
                }
            }
            if (changing) return this;
            if (!silent) {
                while (this._pending) {
                    options = this._pending;
                    this._pending = false;
                    this.trigger('change', this, options);
                }
            }
            this._pending = false;
            this._changing = false;
            return this;
        },
        unset: function(attr, options) {
            return this.set(attr, void 0, _.extend({}, options, {
                unset: true
            }));
        },
        clear: function(options) {
            var attrs = {};
            for (var key in this.attributes) attrs[key] = void 0;
            return this.set(attrs, _.extend({}, options, {
                unset: true
            }));
        },
        hasChanged: function(attr) {
            if (attr == null) return !_.isEmpty(this.changed);
            return _.has(this.changed, attr);
        },
        changedAttributes: function(diff) {
            if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
            var val, changed = false;
            var old = this._changing ? this._previousAttributes : this.attributes;
            for (var attr in diff) {
                if (_.isEqual(old[attr], (val = diff[attr]))) continue;
                (changed || (changed = {}))[attr] = val;
            }
            return changed;
        },
        previous: function(attr) {
            if (attr == null || !this._previousAttributes) return null;
            return this._previousAttributes[attr];
        },
        previousAttributes: function() {
            return _.clone(this._previousAttributes);
        },
        fetch: function(options) {
            options = options ? _.clone(options) : {};
            if (options.parse === void 0) options.parse = true;
            var model = this;
            var success = options.success;
            options.success = function(resp) {
                if (!model.set(model.parse(resp, options), options)) return false;
                if (success) success(model, resp, options);
                model.trigger('sync', model, resp, options);
            };
            wrapError(this, options);
            return this.sync('read', this, options);
        },
        save: function(key, val, options) {
            var attrs, method, xhr, attributes = this.attributes;
            if (key == null || typeof key === 'object') {
                attrs = key;
                options = val;
            } else {
                (attrs = {})[key] = val;
            }
            options = _.extend({
                validate: true
            }, options);
            if (attrs && !options.wait) {
                if (!this.set(attrs, options)) return false;
            } else {
                if (!this._validate(attrs, options)) return false;
            }
            if (attrs && options.wait) {
                this.attributes = _.extend({}, attributes, attrs);
            }
            if (options.parse === void 0) options.parse = true;
            var model = this;
            var success = options.success;
            options.success = function(resp) {
                model.attributes = attributes;
                var serverAttrs = model.parse(resp, options);
                if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);
                if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {
                    return false;
                }
                if (success) success(model, resp, options);
                model.trigger('sync', model, resp, options);
            };
            wrapError(this, options);
            method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
            if (method === 'patch') options.attrs = attrs;
            xhr = this.sync(method, this, options);
            if (attrs && options.wait) this.attributes = attributes;
            return xhr;
        },
        destroy: function(options) {
            options = options ? _.clone(options) : {};
            var model = this;
            var success = options.success;
            var destroy = function() {
                model.trigger('destroy', model, model.collection, options);
            };
            options.success = function(resp) {
                if (options.wait || model.isNew()) destroy();
                if (success) success(model, resp, options);
                if (!model.isNew()) model.trigger('sync', model, resp, options);
            };
            if (this.isNew()) {
                options.success();
                return false;
            }
            wrapError(this, options);
            var xhr = this.sync('delete', this, options);
            if (!options.wait) destroy();
            return xhr;
        },
        url: function() {
            var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
            if (this.isNew()) return base;
            return base.replace(/([^\/])$/, '$1/') + encodeURIComponent(this.id);
        },
        parse: function(resp, options) {
            return resp;
        },
        clone: function() {
            return new this.constructor(this.attributes);
        },
        isNew: function() {
            return !this.has(this.idAttribute);
        },
        isValid: function(options) {
            return this._validate({}, _.extend(options || {}, {
                validate: true
            }));
        },
        _validate: function(attrs, options) {
            if (!options.validate || !this.validate) return true;
            attrs = _.extend({}, this.attributes, attrs);
            var error = this.validationError = this.validate(attrs, options) || null;
            if (!error) return true;
            this.trigger('invalid', this, error, _.extend(options, {
                validationError: error
            }));
            return false;
        }
    });
    var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];
    _.each(modelMethods, function(method) {
        Model.prototype[method] = function() {
            var args = slice.call(arguments);
            args.unshift(this.attributes);
            return _[method].apply(_, args);
        };
    });
    var Collection = Backbone.Collection = function(models, options) {
        options || (options = {});
        if (options.model) this.model = options.model;
        if (options.comparator !== void 0) this.comparator = options.comparator;
        this._reset();
        this.initialize.apply(this, arguments);
        if (models) this.reset(models, _.extend({
            silent: true
        }, options));
    };
    var setOptions = {
        add: true,
        remove: true,
        merge: true
    };
    var addOptions = {
        add: true,
        remove: false
    };
    _.extend(Collection.prototype, Events, {
        model: Model,
        initialize: function() {},
        toJSON: function(options) {
            return this.map(function(model) {
                return model.toJSON(options);
            });
        },
        sync: function() {
            return Backbone.sync.apply(this, arguments);
        },
        add: function(models, options) {
            return this.set(models, _.extend({
                merge: false
            }, options, addOptions));
        },
        remove: function(models, options) {
            var singular = !_.isArray(models);
            models = singular ? [models] : _.clone(models);
            options || (options = {});
            var i, l, index, model;
            for (i = 0, l = models.length; i < l; i++) {
                model = models[i] = this.get(models[i]);
                if (!model) continue;
                delete this._byId[model.id];
                delete this._byId[model.cid];
                index = this.indexOf(model);
                this.models.splice(index, 1);
                this.length--;
                if (!options.silent) {
                    options.index = index;
                    model.trigger('remove', model, this, options);
                }
                this._removeReference(model, options);
            }
            return singular ? models[0] : models;
        },
        set: function(models, options) {
            options = _.defaults({}, options, setOptions);
            if (options.parse) models = this.parse(models, options);
            var singular = !_.isArray(models);
            models = singular ? (models ? [models] : []) : _.clone(models);
            var i, l, id, model, attrs, existing, sort;
            var at = options.at;
            var targetModel = this.model;
            var sortable = this.comparator && (at == null) && options.sort !== false;
            var sortAttr = _.isString(this.comparator) ? this.comparator : null;
            var toAdd = [],
                toRemove = [],
                modelMap = {};
            var add = options.add,
                merge = options.merge,
                remove = options.remove;
            var order = !sortable && add && remove ? [] : false;
            for (i = 0, l = models.length; i < l; i++) {
                attrs = models[i] || {};
                if (attrs instanceof Model) {
                    id = model = attrs;
                } else {
                    id = attrs[targetModel.prototype.idAttribute || 'id'];
                }
                if (existing = this.get(id)) {
                    if (remove) modelMap[existing.cid] = true;
                    if (merge) {
                        attrs = attrs === model ? model.attributes : attrs;
                        if (options.parse) attrs = existing.parse(attrs, options);
                        existing.set(attrs, options);
                        if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;
                    }
                    models[i] = existing;
                } else if (add) {
                    model = models[i] = this._prepareModel(attrs, options);
                    if (!model) continue;
                    toAdd.push(model);
                    this._addReference(model, options);
                }
                model = existing || model;
                if (order && (model.isNew() || !modelMap[model.id])) order.push(model);
                modelMap[model.id] = true;
            }
            if (remove) {
                for (i = 0, l = this.length; i < l; ++i) {
                    if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);
                }
                if (toRemove.length) this.remove(toRemove, options);
            }
            if (toAdd.length || (order && order.length)) {
                if (sortable) sort = true;
                this.length += toAdd.length;
                if (at != null) {
                    for (i = 0, l = toAdd.length; i < l; i++) {
                        this.models.splice(at + i, 0, toAdd[i]);
                    }
                } else {
                    if (order) this.models.length = 0;
                    var orderedModels = order || toAdd;
                    for (i = 0, l = orderedModels.length; i < l; i++) {
                        this.models.push(orderedModels[i]);
                    }
                }
            }
            if (sort) this.sort({
                silent: true
            });
            if (!options.silent) {
                for (i = 0, l = toAdd.length; i < l; i++) {
                    (model = toAdd[i]).trigger('add', model, this, options);
                }
                if (sort || (order && order.length)) this.trigger('sort', this, options);
            }
            return singular ? models[0] : models;
        },
        reset: function(models, options) {
            options || (options = {});
            for (var i = 0, l = this.models.length; i < l; i++) {
                this._removeReference(this.models[i], options);
            }
            options.previousModels = this.models;
            this._reset();
            models = this.add(models, _.extend({
                silent: true
            }, options));
            if (!options.silent) this.trigger('reset', this, options);
            return models;
        },
        push: function(model, options) {
            return this.add(model, _.extend({
                at: this.length
            }, options));
        },
        pop: function(options) {
            var model = this.at(this.length - 1);
            this.remove(model, options);
            return model;
        },
        unshift: function(model, options) {
            return this.add(model, _.extend({
                at: 0
            }, options));
        },
        shift: function(options) {
            var model = this.at(0);
            this.remove(model, options);
            return model;
        },
        slice: function() {
            return slice.apply(this.models, arguments);
        },
        get: function(obj) {
            if (obj == null) return void 0;
            return this._byId[obj] || this._byId[obj.id] || this._byId[obj.cid];
        },
        at: function(index) {
            return this.models[index];
        },
        where: function(attrs, first) {
            if (_.isEmpty(attrs)) return first ? void 0 : [];
            return this[first ? 'find' : 'filter'](function(model) {
                for (var key in attrs) {
                    if (attrs[key] !== model.get(key)) return false;
                }
                return true;
            });
        },
        findWhere: function(attrs) {
            return this.where(attrs, true);
        },
        sort: function(options) {
            if (!this.comparator) throw new Error('Cannot sort a set without a comparator');
            options || (options = {});
            if (_.isString(this.comparator) || this.comparator.length === 1) {
                this.models = this.sortBy(this.comparator, this);
            } else {
                this.models.sort(_.bind(this.comparator, this));
            }
            if (!options.silent) this.trigger('sort', this, options);
            return this;
        },
        pluck: function(attr) {
            return _.invoke(this.models, 'get', attr);
        },
        fetch: function(options) {
            options = options ? _.clone(options) : {};
            if (options.parse === void 0) options.parse = true;
            var success = options.success;
            var collection = this;
            options.success = function(resp) {
                var method = options.reset ? 'reset' : 'set';
                collection[method](resp, options);
                if (success) success(collection, resp, options);
                collection.trigger('sync', collection, resp, options);
            };
            wrapError(this, options);
            return this.sync('read', this, options);
        },
        create: function(model, options) {
            options = options ? _.clone(options) : {};
            if (!(model = this._prepareModel(model, options))) return false;
            if (!options.wait) this.add(model, options);
            var collection = this;
            var success = options.success;
            options.success = function(model, resp) {
                if (options.wait) collection.add(model, options);
                if (success) success(model, resp, options);
            };
            model.save(null, options);
            return model;
        },
        parse: function(resp, options) {
            return resp;
        },
        clone: function() {
            return new this.constructor(this.models);
        },
        _reset: function() {
            this.length = 0;
            this.models = [];
            this._byId = {};
        },
        _prepareModel: function(attrs, options) {
            if (attrs instanceof Model) return attrs;
            options = options ? _.clone(options) : {};
            options.collection = this;
            var model = new this.model(attrs, options);
            if (!model.validationError) return model;
            this.trigger('invalid', this, model.validationError, options);
            return false;
        },
        _addReference: function(model, options) {
            this._byId[model.cid] = model;
            if (model.id != null) this._byId[model.id] = model;
            if (!model.collection) model.collection = this;
            model.on('all', this._onModelEvent, this);
        },
        _removeReference: function(model, options) {
            if (this === model.collection) delete model.collection;
            model.off('all', this._onModelEvent, this);
        },
        _onModelEvent: function(event, model, collection, options) {
            if ((event === 'add' || event === 'remove') && collection !== this) return;
            if (event === 'destroy') this.remove(model, options);
            if (model && event === 'change:' + model.idAttribute) {
                delete this._byId[model.previous(model.idAttribute)];
                if (model.id != null) this._byId[model.id] = model;
            }
            this.trigger.apply(this, arguments);
        }
    });
    var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl', 'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select', 'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke', 'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest', 'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle', 'lastIndexOf', 'isEmpty', 'chain', 'sample'];
    _.each(methods, function(method) {
        Collection.prototype[method] = function() {
            var args = slice.call(arguments);
            args.unshift(this.models);
            return _[method].apply(_, args);
        };
    });
    var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];
    _.each(attributeMethods, function(method) {
        Collection.prototype[method] = function(value, context) {
            var iterator = _.isFunction(value) ? value : function(model) {
                return model.get(value);
            };
            return _[method](this.models, iterator, context);
        };
    });
    var View = Backbone.View = function(options) {
        this.cid = _.uniqueId('view');
        options || (options = {});
        _.extend(this, _.pick(options, viewOptions));
        this._ensureElement();
        this.initialize.apply(this, arguments);
        this.delegateEvents();
    };
    var delegateEventSplitter = /^(\S+)\s*(.*)$/;
    var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];
    _.extend(View.prototype, Events, {
        tagName: 'div',
        $: function(selector) {
            return this.$el.find(selector);
        },
        initialize: function() {},
        render: function() {
            return this;
        },
        remove: function() {
            this.$el.remove();
            this.stopListening();
            return this;
        },
        setElement: function(element, delegate) {
            if (this.$el) this.undelegateEvents();
            this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);
            this.el = this.$el[0];
            if (delegate !== false) this.delegateEvents();
            return this;
        },
        delegateEvents: function(events) {
            if (!(events || (events = _.result(this, 'events')))) return this;
            this.undelegateEvents();
            for (var key in events) {
                var method = events[key];
                if (!_.isFunction(method)) method = this[events[key]];
                if (!method) continue;
                var match = key.match(delegateEventSplitter);
                var eventName = match[1],
                    selector = match[2];
                method = _.bind(method, this);
                eventName += '.delegateEvents' + this.cid;
                if (selector === '') {
                    this.$el.on(eventName, method);
                } else {
                    this.$el.on(eventName, selector, method);
                }
            }
            return this;
        },
        undelegateEvents: function() {
            this.$el.off('.delegateEvents' + this.cid);
            return this;
        },
        _ensureElement: function() {
            if (!this.el) {
                var attrs = _.extend({}, _.result(this, 'attributes'));
                if (this.id) attrs.id = _.result(this, 'id');
                if (this.className) attrs['class'] = _.result(this, 'className');
                var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);
                this.setElement($el, false);
            } else {
                this.setElement(_.result(this, 'el'), false);
            }
        }
    });
    Backbone.sync = function(method, model, options) {
        var type = methodMap[method];
        _.defaults(options || (options = {}), {
            emulateHTTP: Backbone.emulateHTTP,
            emulateJSON: Backbone.emulateJSON
        });
        var params = {
            type: type,
            dataType: 'json'
        };
        if (!options.url) {
            params.url = _.result(model, 'url') || urlError();
        }
        if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
            params.contentType = 'application/json';
            params.data = JSON.stringify(options.attrs || model.toJSON(options));
        }
        if (options.emulateJSON) {
            params.contentType = 'application/x-www-form-urlencoded';
            params.data = params.data ? {
                model: params.data
            } : {};
        }
        if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
            params.type = 'POST';
            if (options.emulateJSON) params.data._method = type;
            var beforeSend = options.beforeSend;
            options.beforeSend = function(xhr) {
                xhr.setRequestHeader('X-HTTP-Method-Override', type);
                if (beforeSend) return beforeSend.apply(this, arguments);
            };
        }
        if (params.type !== 'GET' && !options.emulateJSON) {
            params.processData = false;
        }
        if (params.type === 'PATCH' && noXhrPatch) {
            params.xhr = function() {
                return new ActiveXObject("Microsoft.XMLHTTP");
            };
        }
        var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
        model.trigger('request', model, xhr, options);
        return xhr;
    };
    var noXhrPatch = typeof window !== 'undefined' && !!window.ActiveXObject && !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);
    var methodMap = {
        'create': 'POST',
        'update': 'PUT',
        'patch': 'PATCH',
        'delete': 'DELETE',
        'read': 'GET'
    };
    Backbone.ajax = function() {
        return Backbone.$.ajax.apply(Backbone.$, arguments);
    };
    var Router = Backbone.Router = function(options) {
        options || (options = {});
        if (options.routes) this.routes = options.routes;
        this._bindRoutes();
        this.initialize.apply(this, arguments);
    };
    var optionalParam = /\((.*?)\)/g;
    var namedParam = /(\(\?)?:\w+/g;
    var splatParam = /\*\w+/g;
    var escapeRegExp = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    _.extend(Router.prototype, Events, {
        initialize: function() {},
        route: function(route, name, callback) {
            if (!_.isRegExp(route)) route = this._routeToRegExp(route);
            if (_.isFunction(name)) {
                callback = name;
                name = '';
            }
            if (!callback) callback = this[name];
            var router = this;
            Backbone.history.route(route, function(fragment) {
                var args = router._extractParameters(route, fragment);
                router.execute(callback, args);
                router.trigger.apply(router, ['route:' + name].concat(args));
                router.trigger('route', name, args);
                Backbone.history.trigger('route', router, name, args);
            });
            return this;
        },
        execute: function(callback, args) {
            if (callback) callback.apply(this, args);
        },
        navigate: function(fragment, options) {
            Backbone.history.navigate(fragment, options);
            return this;
        },
        _bindRoutes: function() {
            if (!this.routes) return;
            this.routes = _.result(this, 'routes');
            var route, routes = _.keys(this.routes);
            while ((route = routes.pop()) != null) {
                this.route(route, this.routes[route]);
            }
        },
        _routeToRegExp: function(route) {
            route = route.replace(escapeRegExp, '\\$&').replace(optionalParam, '(?:$1)?').replace(namedParam, function(match, optional) {
                return optional ? match : '([^/?]+)';
            }).replace(splatParam, '([^?]*?)');
            return new RegExp('^' + route + '(?:\\?([\\s\\S]*))?$');
        },
        _extractParameters: function(route, fragment) {
            var params = route.exec(fragment).slice(1);
            return _.map(params, function(param, i) {
                if (i === params.length - 1) return param || null;
                return param ? decodeURIComponent(param) : null;
            });
        }
    });
    var History = Backbone.History = function() {
        this.handlers = [];
        _.bindAll(this, 'checkUrl');
        if (typeof window !== 'undefined') {
            this.location = window.location;
            this.history = window.history;
        }
    };
    var routeStripper = /^[#\/]|\s+$/g;
    var rootStripper = /^\/+|\/+$/g;
    var isExplorer = /msie [\w.]+/;
    var trailingSlash = /\/$/;
    var pathStripper = /#.*$/;
    History.started = false;
    _.extend(History.prototype, Events, {
        interval: 50,
        atRoot: function() {
            return this.location.pathname.replace(/[^\/]$/, '$&/') === this.root;
        },
        getHash: function(window) {
            var match = (window || this).location.href.match(/#(.*)$/);
            return match ? match[1] : '';
        },
        getFragment: function(fragment, forcePushState) {
            if (fragment == null) {
                if (this._hasPushState || !this._wantsHashChange || forcePushState) {
                    fragment = decodeURI(this.location.pathname + this.location.search);
                    var root = this.root.replace(trailingSlash, '');
                    if (!fragment.indexOf(root)) fragment = fragment.slice(root.length);
                } else {
                    fragment = this.getHash();
                }
            }
            return fragment.replace(routeStripper, '');
        },
        start: function(options) {
            if (History.started) throw new Error("Backbone.history has already been started");
            History.started = true;
            this.options = _.extend({
                root: '/'
            }, this.options, options);
            this.root = this.options.root;
            this._wantsHashChange = this.options.hashChange !== false;
            this._wantsPushState = !!this.options.pushState;
            this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var fragment = this.getFragment();
            var docMode = document.documentMode;
            var oldIE = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));
            this.root = ('/' + this.root + '/').replace(rootStripper, '/');
            if (oldIE && this._wantsHashChange) {
                var frame = Backbone.$('<iframe src="javascript:0" tabindex="-1">');
                this.iframe = frame.hide().appendTo('body')[0].contentWindow;
                this.navigate(fragment);
            }
            if (this._hasPushState) {
                Backbone.$(window).on('popstate', this.checkUrl);
            } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {
                Backbone.$(window).on('hashchange', this.checkUrl);
            } else if (this._wantsHashChange) {
                this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
            }
            this.fragment = fragment;
            var loc = this.location;
            if (this._wantsHashChange && this._wantsPushState) {
                if (!this._hasPushState && !this.atRoot()) {
                    this.fragment = this.getFragment(null, true);
                    this.location.replace(this.root + '#' + this.fragment);
                    return true;
                } else if (this._hasPushState && this.atRoot() && loc.hash) {
                    this.fragment = this.getHash().replace(routeStripper, '');
                    this.history.replaceState({}, document.title, this.root + this.fragment);
                }
            }
            if (!this.options.silent) return this.loadUrl();
        },
        stop: function() {
            Backbone.$(window).off('popstate', this.checkUrl).off('hashchange', this.checkUrl);
            if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);
            History.started = false;
        },
        route: function(route, callback) {
            this.handlers.unshift({
                route: route,
                callback: callback
            });
        },
        checkUrl: function(e) {
            var current = this.getFragment();
            if (current === this.fragment && this.iframe) {
                current = this.getFragment(this.getHash(this.iframe));
            }
            if (current === this.fragment) return false;
            if (this.iframe) this.navigate(current);
            this.loadUrl();
        },
        loadUrl: function(fragment) {
            fragment = this.fragment = this.getFragment(fragment);
            return _.any(this.handlers, function(handler) {
                if (handler.route.test(fragment)) {
                    handler.callback(fragment);
                    return true;
                }
            });
        },
        navigate: function(fragment, options) {
            if (!History.started) return false;
            if (!options || options === true) options = {
                trigger: !!options
            };
            var url = this.root + (fragment = this.getFragment(fragment || ''));
            fragment = fragment.replace(pathStripper, '');
            if (this.fragment === fragment) return;
            this.fragment = fragment;
            if (fragment === '' && url !== '/') url = url.slice(0, -1);
            if (this._hasPushState) {
                this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);
            } else if (this._wantsHashChange) {
                this._updateHash(this.location, fragment, options.replace);
                if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {
                    if (!options.replace) this.iframe.document.open().close();
                    this._updateHash(this.iframe.location, fragment, options.replace);
                }
            } else {
                return this.location.assign(url);
            }
            if (options.trigger) return this.loadUrl(fragment);
        },
        _updateHash: function(location, fragment, replace) {
            if (replace) {
                var href = location.href.replace(/(javascript:|#).*$/, '');
                location.replace(href + '#' + fragment);
            } else {
                location.hash = '#' + fragment;
            }
        }
    });
    Backbone.history = new History;
    var extend = function(protoProps, staticProps) {
        var parent = this;
        var child;
        if (protoProps && _.has(protoProps, 'constructor')) {
            child = protoProps.constructor;
        } else {
            child = function() {
                return parent.apply(this, arguments);
            };
        }
        _.extend(child, parent, staticProps);
        var Surrogate = function() {
            this.constructor = child;
        };
        Surrogate.prototype = parent.prototype;
        child.prototype = new Surrogate;
        if (protoProps) _.extend(child.prototype, protoProps);
        child.__super__ = parent.prototype;
        return child;
    };
    Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;
    var urlError = function() {
        throw new Error('A "url" property or function must be specified');
    };
    var wrapError = function(model, options) {
        var error = options.error;
        options.error = function(resp) {
            if (error) error(model, resp, options);
            model.trigger('error', model, resp, options);
        };
    };
    return Backbone;
}));;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent = Class.extend({});
    Turbulent.bindMethod = function(target, handler) {
        return function() {
            return handler.apply(target, Array.prototype.slice.call(arguments));
        };
    };
    Turbulent.Object = Class.extend({
        init: function() {
            this.boundMethods = {};
            this.datetimeAtLoadTime = parseInt(new Date().getTime() / 1000);
        },
        bindMethod: function(method, scope) {
            if (!scope) scope = this;
            if (!this.boundMethods)
                throw "Wrongly initialized Turbulent.Object, did you properly call _super() in init()?";
            var key = method.hash;
            if (!key) key = method.toString();
            if (!this.boundMethods[key]) {
                var boundMethod = function() {
                    return method.apply(scope, Array.prototype.slice.call(arguments));
                };
                this.boundMethods[key] = boundMethod;
            }
            return this.boundMethods[key];
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Mark = Turbulent.Object.extend({
        tokenName: "xsrf-token",
        tokenTtl: 300,
        tokenValue: null,
        data: null,
        init: function(params) {
            this._super(params);
            if (params) {
                this.tokenName = params.name;
                this.tokenValue = params.token;
                this.tokenTtl = params.ttl;
                this.refresh();
            }
        },
        refresh: function() {
            var token = $.cookie(this.tokenName);
            if (token) {
                var time = parseInt(token.substring(token.lastIndexOf(":") + 1));
                if (time > (new Date()).getTime())
                    return;
            }
            var ttl = (new Date()).getTime() + this.tokenTtl * 1000;
            $.cookie(this.tokenName, this.tokenValue + ':' + this.generate() + ':' + ttl, {
                'path': '/'
            });
        },
        generate: function(raw) {
            if (!this.data) {
                var nav = this.getNavigatorProperties();
                this.data = {
                    'mode': document.documentMode,
                    'navigator': nav,
                    'screen': this.getScreenProperties(),
                    'colors': this.getSystemColors(),
                    'timezone': (new Date()).getTimezoneOffset(),
                    'plugins': (window.ActiveXObject ? this.getIEActiveX() : this.getPlugins()),
                    'canvas2d': nav.canvas2d ? this.getCanvasMark() : null,
                    'canvasWebgl': nav.canvasWebgl ? this.getWebglMark() : null,
                    'fonts': !nav.canvas2d ? this.getFonts() : null
                };
            }
            return raw ? JSON.stringify(this.data) : b64_md5(JSON.stringify(this.data));
        },
        hash: function(key, seed) {
            var remainder, bytes, h1, h1b, c1, c2, k1, i;
            remainder = key.length & 3;
            bytes = key.length - remainder;
            h1 = seed;
            c1 = 0xcc9e2d51;
            c2 = 0x1b873593;
            i = 0;
            while (i < bytes) {
                k1 = ((key.charCodeAt(i) & 0xff)) | ((key.charCodeAt(++i) & 0xff) << 8) | ((key.charCodeAt(++i) & 0xff) << 16) | ((key.charCodeAt(++i) & 0xff) << 24);
                ++i;
                k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;
                k1 = (k1 << 15) | (k1 >>> 17);
                k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;
                h1 ^= k1;
                h1 = (h1 << 13) | (h1 >>> 19);
                h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;
                h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));
            }
            k1 = 0;
            switch (remainder) {
                case 3:
                    k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
                case 2:
                    k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
                case 1:
                    k1 ^= (key.charCodeAt(i) & 0xff);
                    k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;
                    k1 = (k1 << 15) | (k1 >>> 17);
                    k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;
                    h1 ^= k1;
            }
            h1 ^= key.length;
            h1 ^= h1 >>> 16;
            h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;
            h1 ^= h1 >>> 13;
            h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;
            h1 ^= h1 >>> 16;
            return h1 >>> 0;
        },
        getWebglMark: function() {
            var canvas = document.createElement('canvas');
            canvas.width = 100;
            canvas.height = 100;
            var gl = canvas.getContext('experimental-webgl', {
                antialias: true
            });
            if (!gl) return;
            gl.viewport(0, 0, 100, 100);
            var vertexShaderScript = 'attribute vec3 vertexPosition; uniform mat4 modelViewMatrix; uniform mat4 perspectiveMatrix; varying highp vec4 pos; void main(void) { gl_Position = perspectiveMatrix * modelViewMatrix * vec4(vertexPosition, 1.0); pos = gl_Position; }';
            var vertexShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexShader, vertexShaderScript);
            gl.compileShader(vertexShader);
            if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
                gl.deleteShader(vertexShader);
                return;
            }
            var fragmentShaderScript = 'precision highp float; varying highp vec4 pos; void main(void) { float red = abs( sin( pos.x / pos.y * pos.z )); float green = abs( sin( pos.y * pos.x / pos.z )); float blue = abs( sin( pos.x * pos.y * pos.z )); gl_FragColor = vec4(red, green, blue, 0.9 ); }';
            var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentShader, fragmentShaderScript);
            gl.compileShader(fragmentShader);
            if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
                gl.deleteShader(fragmentShader);
                return;
            }
            gl.program = gl.createProgram();
            gl.attachShader(gl.program, vertexShader);
            gl.attachShader(gl.program, fragmentShader);
            gl.linkProgram(gl.program);
            if (!gl.getProgramParameter(gl.program, gl.LINK_STATUS)) {
                gl.deleteProgram(gl.program);
                gl.deleteProgram(vertexShader);
                gl.deleteProgram(fragmentShader);
                return;
            }
            gl.useProgram(gl.program);
            var vertexPosition = gl.getAttribLocation(gl.program, "vertexPosition");
            gl.enableVertexAttribArray(vertexPosition);
            gl.clearColor(255.0, 255.0, 255.0, 0.0);
            gl.clearDepth(1.0);
            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA)
            gl.enable(gl.BLEND);
            var vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            var vertices = new Float32Array([-0.9, -1.9, 5.9, -1.2, 2.9, 6.9, 1.5, -1.3, 6.9, -1.0, 0.0, 4.0, 1.3, 1.5, 4.0, 1.5, -1.1, 5.0]);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            var perspectiveMatrix = [7.59575411272, 0, 0, 1, 0, 7.59575411272, 0, 1, 0, 0, 1.00020002000, 1.00020002000, 0, 0, -1, 0];
            var modelViewMatrix = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
            var vertexPosAttribLocation = gl.getAttribLocation(gl.program, "vertexPosition");
            gl.vertexAttribPointer(vertexPosAttribLocation, 3.0, gl.FLOAT, false, 0, 0);
            var uModelViewMatrix = gl.getUniformLocation(gl.program, "modelViewMatrix");
            var uPerspectiveMatrix = gl.getUniformLocation(gl.program, "perspectiveMatrix");
            gl.uniformMatrix4fv(uModelViewMatrix, false, new Float32Array(perspectiveMatrix));
            gl.uniformMatrix4fv(uPerspectiveMatrix, false, new Float32Array(modelViewMatrix));
            gl.drawArrays(gl.TRIANGLES, 0, vertices.length / 3.0);
            gl.flush();
            return this.hash(canvas.toDataURL(), 7);
        },
        fonts: ["Abadi MT Condensed Light", "Adobe Fangsong Std", "Adobe Hebrew", "Adobe Ming Std", "Agency FB", "Arab", "Arabic Typesetting", "Arial Black", "Batang", "Bauhaus 93", "Bell MT", "Bitstream Vera Serif", "Bodoni MT", "Bookman Old Style", "Braggadocio", "Broadway", "Calibri", "Californian FB", "Castellar", "Casual", "Centaur", "Century Gothic", "Chalkduster", "Colonna MT", "Copperplate Gothic Light", "DejaVu LGC Sans Mono", "Desdemona", "DFKai-SB", "Dotum", "Engravers MT", "Eras Bold ITC", "Eurostile", "FangSong", "Forte", "Franklin Gothic Heavy", "French Script MT", "Gabriola", "Gigi", "Gisha", "Goudy Old Style", "Gulim", "GungSeo", "Haettenschweiler", "Harrington", "Hiragino Sans GB", "Impact", "Informal Roman", "KacstOne", "Kino MT", "Kozuka Gothic Pr6N", "Lohit Gujarati", "Loma", "Lucida Bright", "Lucida Fax", "Magneto", "Malgun Gothic", "Matura MT Script Capitals", "Menlo", "MingLiU-ExtB", "MoolBoran", "MS PMincho", "MS Reference Sans Serif", "News Gothic MT", "Niagara Solid", "Nyala", "Palace Script MT", "Papyrus", "Perpetua", "Playbill", "PMingLiU", "Rachana", "Rockwell", "Sawasdee", "Script MT Bold", "Segoe Print", "Showcard Gothic", "SimHei", "Snap ITC", "TlwgMono", "Tw Cen MT Condensed Extra Bold", "Ubuntu", "Umpush", "Univers", "Utopia", "Vladimir Script", "Wide Latin"],
        getCanvasMark: function() {
            var canvas = document.createElement('canvas');
            canvas.width = 100;
            canvas.height = 100;
            var ctx = canvas.getContext('2d');
            if (!ctx) return;
            ctx.textBaseline = "top";
            ctx.textBaseline = "alphabetic";
            ctx.fillStyle = "rgba(255, 0, 0, 0.3)";
            ctx.fillRect(5, 5, 30, 30);
            ctx.fillStyle = "rgba(0, 255, 0, 0.3)";
            ctx.fillRect(65, 5, 30, 30);
            ctx.fillStyle = "rgba(0, 0, 255, 0.3)";
            ctx.fillRect(5, 65, 30, 30);
            ctx.fillStyle = "rgba(255, 0, 255, 0.3)";
            ctx.fillRect(65, 65, 30, 30);
            ctx.fillStyle = "rgba(255, 255, 0, 0.3)";
            ctx.fillRect(25, 25, 30, 50);
            ctx.fillStyle = "rgba(0, 255, 255, 0.3)";
            ctx.fillRect(45, 25, 30, 50);
            for (var y = 0; y < this.fonts.length; y++) {
                ctx.font = "18px '" + this.fonts[y] + "', sans-serif";
                ctx.fillStyle = "rgba(" + (y % 10) * 25 + ", " + (255 - (y % 5) * 50) + ", " + (y % 5) * 50 + ", " + 1 / (y % 3 + 2) + ")";
                ctx.fillText(String.fromCharCode(y % 26 + 97), (y % 9) * 10 + 4, (y % 10) * 10 + 10);
            }
            return this.hash(canvas.toDataURL(), 7);
        },
        getFonts: function() {
            var baseFonts = ["monospace", "sans-serif", "serif"];
            var h = document.body;
            var s = document.createElement("span");
            var defaultWidth = {};
            var defaultHeight = {};
            s.style.fontSize = "72px";;
            s.innerHTML = "WwMmNnOoLlIi";
            for (var i = 0; i < baseFonts.length; i++) {
                s.style.fontFamily = baseFonts[i];
                h.appendChild(s);
                defaultWidth[baseFonts[i]] = s.offsetWidth;
                defaultHeight[baseFonts[i]] = s.offsetHeight;
                h.removeChild(s);
            }
            var found = [];
            for (var i = 0; i < this.fonts.length; i++) {
                var detected = false;
                for (var j = 0; j < baseFonts.length; j++) {
                    s.style.fontFamily = this.fonts[i] + "," + baseFonts[j];
                    h.appendChild(s);
                    detected = (s.offsetWidth != defaultWidth[baseFonts[j]] || s.offsetHeight != defaultHeight[baseFonts[j]]);
                    h.removeChild(s);
                    if (detected)
                        break;
                }
                if (detected)
                    found.push(this.fonts[i]);
            }
            return found;
        },
        getPlugins: function() {
            var plugins = ["4game", "AdblockPlugin", "AdobeExManCCDetect", "AdobeExManDetect", "Alawar NPAPI utils", "Aliedit Plug-In", "Alipay Security Control 3", "AliSSOLogin plugin", "AmazonMP3DownloaderPlugin", "AOL Media Playback Plugin", "AppUp", "ArchiCAD", "AVG SiteSafety plugin", "Babylon ToolBar", "Battlelog Game Launcher", "BitCometAgent", "Bitdefender QuickScan", "BlueStacks Install Detector", "CatalinaGroup Update", "Citrix ICA Client", "Citrix online plug-in", "Citrix Receiver Plug-in", "Coowon Update", "DealPlyLive Update", "Default Browser Helper", "DivX Browser Plug-In", "DivX Plus Web Player", "DivX VOD Helper Plug-in", "doubleTwist Web Plugin", "Downloaders plugin", "downloadUpdater", "eMusicPlugin DLM6", "ESN Launch Mozilla Plugin", "ESN Sonar API", "Exif Everywhere", "Facebook Plugin", "File Downloader Plug-in", "FileLab plugin", "FlyOrDie Games Plugin", "Folx 3 Browser Plugin", "FUZEShare", "GDL Object Web Plug-in 16.00", "GFACE Plugin", "Ginger", "Gnome Shell Integration", "Google Earth Plugin", "Google Earth Plug-in", "Google Gears 0.5.33.0", "Google Talk Effects Plugin", "Google Update", "Harmony Firefox Plugin", "Harmony Plug-In", "Heroes & Generals live", "HPDetect", "Html5 location provider", "IE Tab plugin", "iGetterScriptablePlugin", "iMesh plugin", "Kaspersky Password Manager", "LastPass", "LogMeIn Plugin 1.0.0.935", "LogMeIn Plugin 1.0.0.961", "Ma-Config.com plugin", "Microsoft Office 2013", "MinibarPlugin", "Native Client", "Nitro PDF Plug-In", "Nokia Suite Enabler Plugin", "Norton Identity Safe", "npAPI Plugin", "NPLastPass", "NPPlayerShell", "npTongbuAddin", "NyxLauncher", "Octoshape Streaming Services", "Online Storage plug-in", "Orbit Downloader", "Pando Web Plugin", "Parom.TV player plugin", "PDF integrado do WebKit", "PDF-XChange Viewer", "PhotoCenterPlugin1.1.2.2", "Picasa", "PlayOn Plug-in", "QQ2013 Firefox Plugin", "QQDownload Plugin", "QQMiniDL Plugin", "QQMusic", "RealDownloader Plugin", "Roblox Launcher Plugin", "RockMelt Update", "Safer Update", "SafeSearch", "Scripting.Dictionary", "SefClient Plugin", "Shell.UIHelper", "Silverlight Plug-In", "Simple Pass", "Skype Web Plugin", "SumatraPDF Browser Plugin", "Symantec PKI Client", "Tencent FTN plug-in", "Thunder DapCtrl NPAPI Plugin", "TorchHelper", "Unity Player", "Uplay PC", "VDownloader", "Veetle TV Core", "VLC Multimedia Plugin", "Web Components", "WebKit-integrierte PDF", "WEBZEN Browser Extension", "Wolfram Mathematica", "WordCaptureX", "WPI Detector 1.4", "Yandex Media Plugin", "Yandex PDF Viewer", "YouTube Plug-in", "zako"];
            var plugin;
            var seen = {};
            var found = [];
            for (var i = 0; i < navigator.plugins.length; i++) {
                plugin = navigator.plugins[i];
                seen[plugin.name] = true;
                found.push(this.getPluginProperties(plugin));
            }
            for (var i; i < plugins.length; i++) {
                if (!seen[plugins[i]] && (plugin = navigator.plugins[plugins[i]]))
                    found.push(this.getPluginProperties(plugin));
            }
            return found;
        },
        getPluginProperties: function(plugin) {
            var p = {
                'name': plugin.name,
                'filename': plugin.filename.toLowerCase(),
                'description': plugin.description
            };
            plugin.version !== void 0 && (p.version = plugin.version), p.mimeTypes = [];
            for (var j = 0; plugin.length > j; j++) {
                var mime = plugin[j];
                p.mimeTypes.push({
                    description: mime.description,
                    suffixes: mime.suffixes,
                    type: mime.type
                })
            }
            return p;
        },
        getIEActiveX: function() {
            var plugins = ["AcroPDF.PDF", "Adodb.Stream", "AgControl.AgControl", "DevalVRXCtrl.DevalVRXCtrl.1", "MacromediaFlashPaper.MacromediaFlashPaper", "Msxml2.DOMDocument", "Msxml2.XMLHTTP", "PDF.PdfCtrl", "QuickTime.QuickTime", "QuickTimeCheckObject.QuickTimeCheck.1", "RealPlayer", "RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)", "RealVideo.RealVideo(tm) ActiveX Control (32-bit)", "rmocx.RealPlayer G2 Control", "Scripting.Dictionary", "Shell.UIHelper", "ShockwaveFlash.ShockwaveFlash", "SWCtl.SWCtl", "TDCCtl.TDCCtl", "WMPlayer.OCX"];
            var found = [];
            for (var i; i < plugins.length; i++) {
                try {
                    var obj = new ActiveXObject(plugins[i]),
                        p = {
                            'name': plugins[i]
                        };
                    try {
                        p.version = obj.GetVariable("$version")
                    } catch (e) {}
                    found.push(p);
                } catch (e) {}
            }
            return found;
        },
        getSystemColors: function() {
            var elements = ["ActiveBorder", "ActiveCaption", "AppWorkspace", "Background", "ButtonFace", "ButtonHighlight", "ButtonShadow", "ButtonText", "CaptionText", "GrayText", "Highlight", "HighlightText", "InactiveBorder", "InactiveCaption", "InactiveCaptionText", "InfoBackground", "InfoText", "Menu", "MenuText", "Scrollbar", "ThreeDDarkShadow", "ThreeDFace", "ThreeDHighlight", "ThreeDLightShadow", "ThreeDShadow", "Window", "WindowFrame", "WindowText"];
            var div = document.createElement("div");
            var colors = {};
            if (!window.getComputedStyle)
                return colors;
            for (var i = 0; elements.length > i; i++) {
                document.body.appendChild(div);
                div.style.color = elements[i];
                colors[elements[i]] = window.getComputedStyle(div).getPropertyValue("color");
                document.body.removeChild(div);
            }
            return colors;
        },
        getScreenProperties: function() {
            var screenProps = ["colorDepth", "deviceXPI", "height", "width"];
            var props = {};
            for (var i = 0; i < screenProps.length; i++) {
                if (screen[screenProps[i]])
                    props[screenProps[i]] = screen[screenProps[i]];
            }
            return props;
        },
        getNavigatorProperties: function() {
            var props = {};
            var order = [];
            for (var property in navigator) {
                if ("object" != typeof navigator[property] && "function" != typeof navigator[property]) {
                    props[property] = navigator[property];
                    order.push(property);
                }
            }
            props.enumerationOrder = order, props.javaEnabled = navigator.javaEnabled();
            var canvas = document.createElement('canvas');
            props.canvas2d = !!(canvas.getContext && canvas.getContext('2d'));
            var canvas = document.createElement('canvas');
            props.canvasWebgl = !!(canvas.getContext && canvas.getContext('experimental-webgl'));
            try {
                props.taintEnabled = navigator.taintEnabled()
            } catch (e) {}
            try {
                props.localStorage = !!window.localStorage;
            } catch (e) {
                props.localStorage = true;
            }
            try {
                props.sessionStorage = !!window.sessionStorage;
            } catch (e) {
                props.sessionStorage = true;
            }
            try {
                document.createEvent("TouchEvent");
                props.touch = true;
            } catch (e) {
                props.touch = false;
            }
            return props;
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Form = Turbulent.Object.extend({
        init: function(params) {
            this._super();
            params = params || {};
            if (!params.form_selector) throw "Turbulent.Form: missing form selector!";
            this.form = $(params.form_selector);
            this.error_class = 'error';
            this.available_error_elements = ['input:not([type=reset]):not([type=button])', 'select', 'textarea'];
            this.options = params;
            var expected = params.expected || 'form';
            if (!this.form.is(expected) || this.form.length <= 0) throw "Turbulent.Form: Invalid form selector!";
        },
        reset: function() {},
        showErrors: function(response) {
            var that = this;
            if (!response.success) {
                if (response.data && (response.data != undefined)) {
                    $.each(response.data, function(kerr, verr) {
                        that.showErrorMessage(kerr, verr);
                    });
                }
            }
        },
        hideErrors: function() {},
        showErrorMessage: function(kerr, verr) {
            if (console && this.options.log_errors && typeof console == "object") {
                console.log('kerr=' + kerr + '; verr=' + verr + ';');
            }
        },
        hideErrorMessage: function() {},
        getErrorElement: function(name, wrapper) {
            var elem = null;
            var name_str = '[name="' + name + '"]';
            var name_array_str = '[name="' + name + '[]"]';
            if (!wrapper)
                wrapper = 'body';
            $.each(this.available_error_elements, function(index, err_elem) {
                curr_selector = err_elem + name_str;
                curr_array_selector = err_elem + name_array_str;
                if (!elem) {
                    if ($(curr_selector, wrapper).length) {
                        elem = $(curr_selector, wrapper).eq(0);
                    } else if ($(curr_array_selector, wrapper).length) {
                        elem = $(curr_array_selector, wrapper).eq(0);
                    }
                }
            });
            return elem;
        },
        getErrorLabel: function() {},
        getAllElements: function(params) {
            if ((params && params.refresh) || !this.available_error_elements_cache) {
                this.available_error_elements_cache = this.form.find(this.available_error_elements.join(', '));
            }
            return this.available_error_elements_cache;
        },
        getFormData: function(params) {
            params = params || {};
            var elements = (params && params.all_elements) ? this.getAllElements() : this.form.find('.js-form-data');
            var ret = {};
            var that = this;
            elements.each(function() {
                var elem = $(this);
                var elem_name = elem.attr('name');
                var elem_value = elem.val();
                if (elem.hasClass('js-form-ignore')) {
                    return;
                }
                if (elem.parentsUntil(that.form, ".js-form-mask").length > 0) {
                    return;
                }
                if (elem.is("input:checkbox") && !elem.is(":checked")) {
                    elem_value = elem.is('.js-form-nullable') ? null : 0;
                } else if (elem.is("input:radio")) {
                    if (!elem.is(":checked")) return;
                }
                if (typeof(elem_value) == 'string' && elem_value.length <= 0) {
                    if (elem.is('.js-form-nullable')) {
                        elem_value = null;
                    } else if (elem.is('.js-form-ignore-empty')) {
                        return;
                    }
                }
                if (elem_value && elem_value.match(/^json:\/\//)) {
                    elem_value = elem_value.replace(/^json:\/\//, '');
                    elem_value = JSON.parse(elem_value);
                }
                var handle = ret;
                var arrayValue = false;
                if (elem_name.match(/\[\]$/))
                    arrayValue = true;
                if (elem_name.match(/\[([^\]]*)\]$/)) {
                    var parts = elem_name.match(/[^\[\]]+/g);
                    for (var i = 0; i < parts.length - 1; i++) {
                        if (!handle[parts[i]])
                            handle[parts[i]] = {};
                        handle = handle[parts[i]];
                    }
                    elem_name = parts[parts.length - 1];
                }
                if (arrayValue) {
                    elem_name = elem_name.replace(/\[\]$/, '');
                    if (!handle[elem_name]) handle[elem_name] = [];
                    if (elem_value) {
                        handle[elem_name].push(elem_value);
                    }
                } else {
                    if (!params.exclude_empty) {
                        if (params.null_for_empty && !elem_value) {
                            elem_value = null;
                        }
                        handle[elem_name] = elem_value;
                    }
                }
            });
            return ret;
        },
        getAllFormData: function(opts) {
            return this.getFormData($.extend({
                all_elements: true
            }, opts));
        },
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Overlay = Turbulent.Object.extend({
        holder: null,
        init: function(params) {
            this._super();
            this.initMembers(params);
            this.bindTrigger();
        },
        initMembers: function(params) {
            this.params = params || {};
            if (!this.params.content) this.params.content = '';
            if (!this.params.appendTo) this.params.appendTo = $("body");
            this.include_margin = params.include_margin ? params.include_margin : false;
            this.create(this.params.content, this.params.class_name, this.params.appendTo);
        },
        bindTrigger: function() {
            this.holder.find(".js-close").bind('click', this.bindMethod(this.onCloseClick));
        },
        onCloseClick: function(e) {
            e.preventDefault();
            this.hide();
        },
        width: function() {
            return this.holder.outerWidth();
        },
        height: function() {
            return this.holder.outerHeight();
        },
        left: function() {
            return this.holder.css('left');
        },
        top: function() {
            return this.holder.css('top');
        },
        moveToTop: function() {
            Turbulent.Overlay.zindex++;
            this.holder.css('z-index', this.zindex);
            return this;
        },
        show: function(duration, easing, callback) {
            this.moveToTop();
            duration = duration ? duration : 0;
            easing = easing ? easing : "swing";
            this.holder.show(duration, easing, callback);
            return this;
        },
        hide: function(duration, easing, callback) {
            this.holder.hide(duration, easing, callback);
            return this;
        },
        fadeIn: function(duration, easing, callback) {
            this.holder.stop(true, true).show(duration, easing, callback);
            return this;
        },
        fadeOut: function(duration, easing, callback) {
            this.holder.stop(true, true).fadeOut(duration, easing, callback);
            return this;
        },
        resize: function(width, height, duration, easing, complete) {
            var css_size = {
                width: width,
                height: height
            };
            if (!duration) {
                this.holder.css(css_size);
            } else {
                var args = Array.prototype.slice.call(arguments);
                args.splice(0, 2, css_size);
                this.holder.animate.apply(this.holder, args);
            }
            return this;
        },
        move: function(left, top, duration, easing, complete) {
            var css_coord = {
                left: left,
                top: top
            };
            if (!duration) {
                this.holder.css(css_coord);
            } else {
                var args = Array.prototype.slice.call(arguments);
                args.splice(0, 2, css_coord);
                this.holder.animate.apply(this.holder, args);
            }
            return this;
        },
        align: function(node, points, duration, easing, complete) {
            var target_coord = this.getAlignCoord(node, points);
            var args = Array.prototype.slice.call(arguments);
            args.splice(0, 2, target_coord[1]);
            args.splice(0, 0, target_coord[0]);
            this.move.apply(this, args);
            return this;
        },
        setContent: function(content) {
            this.holder.html(content);
            return this;
        },
        getContent: function() {
            return this.holder.html();
        },
        loadContent: function(callback, url, parameters, method) {
            method = method ? method : 'GET';
            var that = this;
            $.ajax({
                url: url,
                data: parameters,
                success: function(response) {
                    that.setContent(response);
                    if (callback) callback();
                }
            });
            return this;
        },
        create: function(content, className, appendTo) {
            if (!appendTo) appendTo = $("body");
            this.holder = $('<div class="js-overlay overlay ' + className + '" style="display: none;">' + content + '</div>');
            $(appendTo).append(this.holder);
            return this;
        },
        destroy: function() {
            this.hide();
            this.holder.remove();
            this.holder = null;
            return this;
        },
        getAlignCoord: function(node, points) {
            node = $(node);
            if (node.length <= 0) throw "Overlay.getAlignCoord: Could not find node '" + node.name + "'";
            var node_coord = this.findNodeCoord(node[0]);
            target_coord = node_coord;
            if (typeof(points) != 'undefined' && points.length == 2) {
                this_point = points[0];
                node_point = points[1];
                this_point_left = this_point.charAt(0);
                this_point_top = this_point.charAt(1);
                node_point_left = node_point.charAt(0);
                node_point_top = node_point.charAt(1);
                if (this_point_left == 'C') {
                    target_coord[0] = target_coord[0] - (this.width() / 2);
                } else if (this_point_left == 'R') {
                    target_coord[0] = target_coord[0] - this.width();
                }
                if (node_point_left == 'C') {
                    target_coord[0] = target_coord[0] + (node.outerWidth(this.include_margin) / 2);
                } else if (node_point_left == 'R') {
                    target_coord[0] = target_coord[0] + node.outerWidth(this.include_margin);
                }
                if (this_point_top == 'C') {
                    target_coord[1] = target_coord[1] - (this.height() / 2);
                } else if (this_point_top == 'B') {
                    target_coord[1] = target_coord[1] - this.height();
                }
                if (node_point_top == 'C') {
                    target_coord[1] = target_coord[1] + (node.outerHeight(this.include_margin) / 2);
                } else if (node_point_top == 'B') {
                    target_coord[1] = target_coord[1] + node.outerHeight(this.include_margin);
                }
            }
            return target_coord;
        },
        findNodeCoord: function(obj) {
            var curleft = curtop = 0;
            if (obj.offsetParent) {
                do {
                    curleft += obj.offsetLeft;
                    curtop += obj.offsetTop;
                }
                while ((obj = obj.offsetParent) && $(obj)[0] != this.params.appendTo[0]);
            }
            return [curleft, curtop];
        },
        reset: function() {
            return this;
        }
    });
    Turbulent.Overlay.zindex = 1000;
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.AttachedOverlay = Turbulent.Overlay.extend({
        initMembers: function(params) {
            if (!params.content)
                params.content = '';
            if (params.show_close)
                params.content = '<a href="" class="close js-close"></a><div class="js-content content">' + params.content + '</div><span class="js-arrow arrow"></span>';
            else
                params.content = '<div class="js-content content">' + params.content + '</div><span class="js-arrow arrow"></span>';
            if (!params.trigger) throw "Turbulent.AttachedOverlay: missing trigger!";
            this._super(params);
            this.arrow = this.holder.find('.js-arrow');
            this.trigger = $(params.trigger);
            this.target = params.target ? $(params.target) : false;
            this.position = params.position ? params.position : "auto";
            this.position_container = params.position_container ? params.position_container : window;
            this.arrow_offset = params.arrow_offset ? parseInt(params.arrow_offset) : 0;
            params.position_order = params.position_order ? params.position_order : new Array();
            this.order = params.position_order.concat(["bottom", "top", "right", "left", "right-bottom", "bottom-right", "bottom-left", "left-bottom", "left-top", "top-left", "top-right", "right-top"]);
            this.removeDuplicates();
            this.holder.addClass("js-attached attached");
        },
        setCurrentTarget: function() {
            if (this.target) {
                this.current_target = $(this.target);
            } else {
                this.current_target = $(this.trigger);
            }
        },
        calculatePosition: function() {
            if (!this.current_target);
            this.setCurrentTarget();
            var position;
            for (var i = 0; i < this.order.length; i++) {
                position = this.performTest(this.order[i]);
                if (position) {
                    return position;
                }
            }
            return "bottom";
        },
        performTest: function(testName) {
            var $window = $(this.position_container);
            var $popover = $(this.holder);
            var $target = $(this.current_target);
            var $arrow = $(this.arrow);
            var windowOffset = $(this.position_container).offset() == null ? {
                left: 0,
                top: 0
            } : $(this.position_container).offset();
            var target_offset_left = $(this.current_target).offset().left - windowOffset.left - $(this.position_container).scrollLeft();
            var target_offset_top = $(this.current_target).offset().top - windowOffset.top - $(this.position_container).scrollTop();
            var returnedPosition = false;
            switch (testName) {
                case "bottom":
                    if ($window.height() - (target_offset_top + $(this.current_target).height()) > $popover.height() && $window.width() - (target_offset_left + ($(this.current_target).width() / 2)) > $popover.outerWidth() / 2 && (target_offset_left + ($(this.current_target).width() / 2)) > $popover.outerWidth() / 2 && $window.height() > $popover.outerHeight())
                        returnedPosition = "bottom";
                    break;
                case "top":
                    if (target_offset_top > $popover.height() && $window.width() - (target_offset_left + ($(this.current_target).width() / 2)) > $popover.outerWidth() / 2 && (target_offset_left + ($(this.current_target).width() / 2)) > $popover.outerWidth() / 2 && $window.height() > $popover.outerHeight())
                        returnedPosition = "top";
                    break;
                case "right":
                    if ($window.width() - (target_offset_left + $(this.current_target).width()) > $popover.outerWidth() && $window.height() - (target_offset_top + ($(this.current_target).height() / 2)) > $popover.outerHeight() / 2 && (target_offset_top + ($(this.current_target).height() / 2)) > $popover.outerHeight() / 2 && $window.width() > $popover.outerWidth()) {
                        returnedPosition = "right";
                    }
                    break;
                case "left":
                    if (target_offset_left > $popover.width() && $window.height() - (target_offset_top + ($(this.current_target).height() / 2)) > $popover.outerHeight() / 2 && (target_offset_top + ($(this.current_target).height() / 2)) > $popover.outerHeight() / 2 && $window.width() > $popover.outerWidth())
                        returnedPosition = "left";
                    break;
                case "right-bottom":
                    if ($window.width() - (target_offset_left + $(this.current_target).width()) > $popover.outerWidth() && $window.height() - (target_offset_top + ($(this.current_target).height())) > $popover.outerHeight() / 2 && (target_offset_top + ($(this.current_target).height())) > $arrow.height() + this.arrow_offset && $window.width() > $popover.outerWidth())
                        returnedPosition = "right-bottom";
                    break;
                case "bottom-right":
                    if ($window.height() - (target_offset_top + $(this.current_target).height()) > $popover.height() && $window.width() - (target_offset_left + ($(this.current_target).width())) > $popover.outerWidth() && (target_offset_left + ($(this.current_target).width())) > $arrow.width() + this.arrow_offset && $window.height() > $popover.outerHeight())
                        returnedPosition = "bottom-right";
                    break;
                case "bottom-left":
                    if ($window.height() - (target_offset_top + $(this.current_target).height()) > $popover.height() && $window.width() - target_offset_left > $arrow.width() + this.arrow_offset && target_offset_left > $popover.outerWidth() / 2 && $window.height() > $popover.outerHeight())
                        returnedPosition = "bottom-left";
                    break;
                case "left-bottom":
                    if (target_offset_left > $popover.width() && $window.height() - (target_offset_top + ($(this.current_target).height() / 2)) > $popover.outerHeight() / 2 && target_offset_top > $arrow.height() + this.arrow_offset && $window.width() > $popover.outerWidth())
                        returnedPosition = "left-bottom";
                    break;
                case "left-top":
                    if (target_offset_left > $popover.width() && $window.height() - target_offset_top > $arrow.height() + this.arrow_offset && target_offset_top > $popover.outerHeight() / 2 && $window.width() > $popover.outerWidth())
                        returnedPosition = "left-top";
                    break;
                case "top-left":
                    if (target_offset_top > $popover.height() && $window.width() - target_offset_left > $arrow.width() + this.arrow_offset && target_offset_left > $popover.outerWidth() / 2 && $window.height() > $popover.outerHeight())
                        returnedPosition = "top-left";
                    break;
                case "top-right":
                    if (target_offset_top > $popover.height() && $window.width() - (target_offset_left + $(this.current_target).width()) > $popover.outerWidth() / 2 && (target_offset_left + $(this.current_target).width()) > $arrow.width() + this.arrow_offset && $window.height() > $popover.outerHeight())
                        returnedPosition = "top-right";
                    break;
                case "right-top":
                    if ($window.width() - (target_offset_left + $(this.current_target).width()) > $popover.outerWidth() && $window.height() - target_offset_top > $arrow.height() + this.arrow_offset && target_offset_top > $popover.outerHeight() / 2 && $window.width() > $popover.outerWidth())
                        returnedPosition = "right-top";
                    break;
            }
            return returnedPosition;
        },
        resetPosition: function() {
            var position = null;
            if (this.position == "auto") {
                position = this.calculatePosition();
            } else {
                position = this.position;
            }
            this.attachToTarget(position);
        },
        attachToTarget: function(position) {
            if (!this.current_target);
            this.setCurrentTarget();
            this.holder.removeClass('bottom top left right left-top left-bottom right-top right-bottom top-left top-right bottom-left bottom-right');
            this.holder.addClass(position);
            this.frameWidth = this.holder.innerWidth();
            this.frameHeight = this.holder.innerHeight();
            this.arrowWidth = this.arrow.innerWidth();
            this.arrowHeight = this.arrow.innerHeight();
            this.holder.css({
                'margin': 0
            });
            var coordinates = ['CT', 'CB'];
            this.arrow.css({
                'left': 0,
                'top': 0,
                'marginTop': 0,
                'marginLeft': 0
            });
            switch (position) {
                case 'top':
                    this.holder.css({
                        'marginTop': -this.arrowHeight - 5
                    });
                    this.arrow.css({
                        'left': (this.frameWidth - this.arrowWidth) / 2,
                        'top': this.frameHeight
                    });
                    coordinates = ['CB', 'CT'];
                    break;
                case 'left':
                    this.holder.css({
                        'marginLeft': -this.arrowWidth - 5
                    });
                    this.arrow.css({
                        'left': this.frameWidth,
                        'top': (this.frameHeight - this.arrowHeight) / 2
                    });
                    coordinates = ['RC', 'LC'];
                    break;
                case 'right':
                    this.holder.css({
                        'marginLeft': this.arrowWidth + 5
                    });
                    this.arrow.css({
                        'left': 0 - this.arrowWidth,
                        'top': (this.frameHeight - this.arrowHeight) / 2
                    });
                    coordinates = ['LC', 'RC'];
                    break;
                case 'top-right':
                    this.holder.css({
                        'marginTop': -this.arrowHeight - 5
                    });
                    this.holder.css({
                        'marginLeft': -(this.arrowWidth / 2) - this.arrow_offset
                    });
                    this.arrow.css({
                        'left': 0,
                        'top': this.frameHeight,
                        'marginLeft': this.arrow_offset
                    });
                    coordinates = ['LB', 'CT'];
                    break;
                case 'top-left':
                    this.holder.css({
                        'marginTop': -this.arrowHeight - 5
                    });
                    this.holder.css({
                        'marginLeft': +(this.arrowWidth / 2) + this.arrow_offset
                    });
                    this.arrow.css({
                        'left': (this.frameWidth - this.arrowWidth),
                        'top': this.frameHeight,
                        'marginLeft': -this.arrow_offset
                    });
                    coordinates = ['RB', 'CT'];
                    break;
                case 'bottom-right':
                    this.holder.css({
                        'marginTop': this.arrowHeight + 5
                    });
                    this.holder.css({
                        'marginLeft': -(this.arrowWidth / 2) - this.arrow_offset
                    });
                    this.arrow.css({
                        'left': 0,
                        'top': 0 - this.arrowHeight,
                        'marginLeft': this.arrow_offset
                    });
                    coordinates = ['LT', 'CB'];
                    break;
                case 'bottom-left':
                    this.holder.css({
                        'marginTop': this.arrowHeight + 5
                    });
                    this.holder.css({
                        'marginLeft': +(this.arrowWidth / 2) + this.arrow_offset
                    });
                    this.arrow.css({
                        'left': (this.frameWidth - this.arrowWidth),
                        'top': 0 - this.arrowHeight,
                        'marginLeft': -this.arrow_offset
                    });
                    coordinates = ['RT', 'CB'];
                    break;
                case 'right-top':
                    this.holder.css({
                        'marginTop': +(this.arrowHeight / 2) + this.arrow_offset
                    });
                    this.holder.css({
                        'marginLeft': +(this.arrowWidth) + 5
                    });
                    this.arrow.css({
                        'left': -this.arrowWidth,
                        'top': this.frameHeight,
                        'marginTop': -this.arrowHeight - this.arrow_offset
                    });
                    coordinates = ['LB', 'RC'];
                    break;
                case 'right-bottom':
                    this.holder.css({
                        'marginTop': -(this.arrowHeight / 2) - this.arrow_offset
                    });
                    this.holder.css({
                        'marginLeft': +(this.arrowWidth) + 5
                    });
                    this.arrow.css({
                        'left': -this.arrowWidth,
                        'top': 0,
                        'marginTop': this.arrow_offset
                    });
                    coordinates = ['LT', 'RC'];
                    break;
                case 'left-top':
                    this.holder.css({
                        'marginTop': +(this.arrowHeight / 2) + this.arrow_offset
                    });
                    this.holder.css({
                        'marginLeft': -(this.arrowWidth) - 5
                    });
                    this.arrow.css({
                        'left': this.frameWidth,
                        'top': this.frameHeight,
                        'marginTop': -this.arrowHeight - this.arrow_offset
                    });
                    coordinates = ['RB', 'LC'];
                    break;
                case 'left-bottom':
                    this.holder.css({
                        'marginTop': -(this.arrowHeight / 2) - this.arrow_offset
                    });
                    this.holder.css({
                        'marginLeft': -(this.arrowWidth) - 5
                    });
                    this.arrow.css({
                        'left': this.frameWidth,
                        'top': 0,
                        'marginTop': this.arrow_offset
                    });
                    coordinates = ['RT', 'LC'];
                    break;
                default:
                    this.holder.css({
                        'marginTop': this.arrowHeight - 5
                    });
                    this.arrow.css({
                        'left': (this.frameWidth - this.arrowWidth) / 2,
                        'top': (0 - this.arrowHeight)
                    });
                    break;
            }
            this.align(this.current_target, coordinates);
            this.coordinates = coordinates;
        },
        setContentElement: function(el) {
            var container = this.holder.find('.js-content');
            container.empty();
            console.log("set Content Element: " + el);
            container.append(el);
            if (this.current_trigger)
                this.resetPosition();
        },
        getContentElement: function() {
            return this.holder.find('.js-content');
        },
        setContent: function(content) {
            this.holder.find('.js-content').html(content);
            if (this.current_trigger)
                this.resetPosition();
        },
        getContent: function() {
            return this.holder.find('.js-content').html();
        },
        reset: function() {
            this._super();
            this.resetPosition();
        },
        removeDuplicates: function() {
            var new_order = new Array();
            var found;
            for (var i = 0; i < this.order.length; i++) {
                found = false;
                for (var j = 0; j < new_order.length; j++) {
                    if (new_order[j] == this.order[i]) {
                        found = true;
                    }
                }
                if (!found) {
                    new_order[new_order.length] = this.order[i];
                }
            }
            this.order = new_order;
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Lightbox = Turbulent.Overlay.extend({
        close_btn: '<a class="close js-close" href=""></a>',
        init: function(params) {
            var class_name = (params.class_name) ? params.class_name : '';
            var content = (params.content) ? params.content : '';
            this.close_btn = (params.noclose_btn) ? '' : this.close_btn;
            params.content = '<div class="shader js-shader"></div><div class="content js-content">' + this.close_btn + content + '</div>';
            params.class_name = class_name + ' lightbox js-lightbox';
            this._super(params);
        },
        setContent: function(content) {
            this._super('<div class="shader js-shader"></div><div class="content js-content">' + this.close_btn + content + '</div>');
            this.holder.find(".js-shader, .js-close").unbind("click", this.bindMethod(this.onCloseClick)).bind('click', this.bindMethod(this.onCloseClick));
        },
        show: function(duration, easing, callback) {
            this._super(duration, easing, callback);
            this.holder.find(".js-shader, .js-close").unbind("click", this.bindMethod(this.onCloseClick)).bind('click', this.bindMethod(this.onCloseClick));
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Popover = Turbulent.AttachedOverlay.extend({
        init: function(params) {
            this._super(params);
            Turbulent.Popover.Popovers.push(this);
        },
        initMembers: function(params) {
            if (!params.hide_close)
                params.show_close = true;
            this._super(params);
            this.holder.addClass("js-popover popover");
        },
        setCurrentTarget: function() {
            if (this.target) {
                this.current_target = $(this.current_trigger).find(this.target);
            } else {
                if (this.current_trigger) {
                    this.current_target = this.current_trigger;
                } else {
                    this.current_target = this.trigger;
                }
            }
        },
        updateBindTrigger: function() {
            this.unbindTrigger();
            this.trigger = $(this.trigger.selector);
            this.bindTrigger();
        },
        bindTrigger: function() {
            this._super();
            this.trigger.bind('focus', this.bindMethod(this.onTriggerFocus));
            this.trigger.bind('keydown', this.bindMethod(this.onTriggerKeyDown));
            this.trigger.bind('click', this.bindMethod(this.onTriggerClick));
            $(this.position_container).bind('resize', this.bindMethod(this.onWindowResize));
        },
        unbindTrigger: function() {
            this.trigger.unbind('focus', this.bindMethod(this.onTriggerFocus));
            this.trigger.unbind('keydown', this.bindMethod(this.onTriggerKeyDown));
            this.trigger.unbind('click', this.bindMethod(this.onTriggerClick));
            $(this.position_container).unbind('resize', this.bindMethod(this.onWindowResize));
        },
        onTriggerFocus: function(e) {
            if (this.isVisible) return false;
            this.current_trigger = $(e.currentTarget);
            this.setCurrentTarget();
            this.show();
        },
        onTriggerKeyDown: function(e) {
            if (e.keyCode == '9') {
                this.hide();
            }
        },
        onTriggerClick: function(e) {
            if (e.target != e.currentTarget && $(e.target).is("a")) return;
            if (this.isVisible) return false;
            this.current_trigger = $(e.currentTarget);
            this.setCurrentTarget();
            e.preventDefault();
            e.stopPropagation()
            if (!$(e.currentTarget).is('input'))
                this.show();
        },
        onWindowResize: function(e) {
            if (this.current_target && this.coordinates)
                this.align(this.current_target, this.coordinates);
        },
        move: function(left, top, duration, easing, complete) {
            return this._super(left, top, duration, easing, complete);
        },
        destroy: function() {
            this.hide();
            this.unbindTrigger();
            this._super();
        },
        hide: function(duration, easing, callback) {
            this.isVisible = false;
            $(document).unbind('click', this.bindMethod(this.onDocumentClick));
            this._super(duration, easing, callback);
        },
        fadeIn: function(duration, easing, callback) {
            if (this.params.one_at_a_time) {
                for (var i = 0; i < Turbulent.Popover.Popovers.length; i++) {
                    var popover = Turbulent.Popover.Popovers[i];
                    if (popover == this) continue;
                    if (popover.isVisible)
                        popover.fadeOut();
                }
            }
            this._super(duration, easing, callback);
            this.reset();
            return this;
        },
        show: function(duration, easing, callback) {
            if (this.params.one_at_a_time) {
                for (var i = 0; i < Turbulent.Popover.Popovers.length; i++) {
                    var popover = Turbulent.Popover.Popovers[i];
                    if (popover == this) continue;
                    if (popover.isVisible)
                        popover.hide();
                }
            }
            this._super(duration, easing, Turbulent.bindMethod(this, this.reset));
            this.isVisible = true;
            $(document).bind('click', this.bindMethod(this.onDocumentClick));
        },
        onDocumentClick: function(e) {
            var raw_trigger = this.trigger[0];
            if (raw_trigger != e.target && $(raw_trigger).find(e.target).length == 0 && this.holder.find(e.target).length == 0) {
                this.hide();
            }
        }
    });
    Turbulent.Popover.Popovers = [];
})(jQuery);;
/*!
 * Uses Tiny Scrollbar 1.65 (http://www.baijs.nl/tinyscrollbar/) as a starting point
 */
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Scrollbar = Turbulent.Object.extend({
        params: {
            axis: 'y',
            wheel: 40,
            scroll: true,
            size: 'auto',
            sizethumb: 'auto',
            maxthumb: false,
            viewport: false
        },
        init: function(params) {
            this._super();
            $.extend(this.params, params);
            this.initMembers(params);
            this.bindTrigger();
        },
        initMembers: function(params) {
            this.holder = params.holder;
            this.holder.prepend("<div class='scrollbar'><div class='track'><div class='thumb'><div class='end'></div></div></div></div>")
            this.viewport = {
                obj: this.holder.find(".viewport")
            };
            this.content = {
                obj: this.viewport.obj.find('.content')
            };
            this.scrollbar = {
                obj: this.holder.find('.scrollbar')
            };
            this.track = {
                obj: this.scrollbar.obj.find('.track')
            };
            this.thumb = {
                obj: this.scrollbar.obj.find('.thumb')
            };
            this.axis = params.axis == 'x';
            this.direction = this.axis ? 'left' : 'top';
            this.size = this.axis ? 'Width' : 'Height';
            this.iScroll;
            this.iPosition = {
                start: 0,
                now: 0
            };
            this.iMouse = {};
            if (params.maxthumb) {
                this.maxthumb = params.maxthumb;
            }
            this.update();
        },
        bindTrigger: function() {
            this.thumb.obj.bind('mousedown', this.bindMethod(this.start));
            this.thumb.obj.bind("touchstart", this.bindMethod(this.onTouchStart));
            this.track.obj.bind("click", this.bindMethod(this.onTrackClick));
            this.viewport.obj.bind("touchstart", this.bindMethod(this.onViewportTouch));
            this.track.obj.bind('mouseup', this.bindMethod(this.drag));
            if (this.params.scroll && this.holder[0].addEventListener) {
                this.holder[0].addEventListener('DOMMouseScroll', this.bindMethod(this.wheel), false);
                this.holder[0].addEventListener('mousewheel', this.bindMethod(this.wheel), false);
            } else if (this.params.scroll) {
                this.holder[0].onmousewheel = this.bindMethod(this.wheel);
            }
        },
        onTrackClick: function(e) {
            e.preventDefault();
            e.stopPropagation();
        },
        onViewportTouch: function(e) {},
        onTouchStart: function(e) {
            e.preventDefault();
            this.thumb.obj.unbind('mousedown', this.bindMethod(this.start));
            this.start(e.originalEvent);
            return false;
        },
        onTouchMove: function(e) {
            e.preventDefault();
            $(document).unbind('mousemove', this.bindMethod(this.drag));
            this.drag(e.originalEvent.targetTouches[0]);
            return false;
        },
        onTouchEnd: function(e) {
            e.preventDefault();
            $(document).unbind('mouseup', this.bindMethod(this.end));
            this.thumb.obj.unbind('mouseup', this.bindMethod(this.end));
            this.end(e);
            return false;
        },
        update: function(sScroll) {
            this.viewport[this.params.axis] = parseInt(this.holder.css(this.size.toLowerCase()));
            this.content[this.params.axis] = this.content.obj[0]['scroll' + this.size];
            this.content.ratio = this.viewport[this.params.axis] / this.content[this.params.axis];
            this.scrollbar.obj.toggleClass('disable', this.content.ratio > 1);
            this.track[this.params.axis] = this.params.size == 'auto' ? this.viewport[this.params.axis] : this.params.size;
            var firstBorder = "Bottom";
            var secondBorder = "Top";
            if (this.params.axis == "x") {
                var firstBorder = "Left";
                var secondBorder = "right";
            }
            var firstBorderWidth = parseInt(this.thumb.obj.css("border" + firstBorder + "Width")) ? parseInt(this.thumb.obj.css("border" + firstBorder + "Width")) : 0;
            var secondBorderWidth = parseInt(this.thumb.obj.css("border" + secondBorder + "Width")) ? parseInt(this.thumb.obj.css("border" + secondBorder + "Width")) : 0;
            this.thumb[this.params.axis] = Math.min(this.track[this.params.axis], Math.max(0, (this.params.sizethumb == 'auto' ? (this.track[this.params.axis] * this.content.ratio) - firstBorderWidth - secondBorderWidth : this.params.sizethumb)));
            if (this.maxthumb && this.thumb[this.params.axis] > this.maxthumb) {
                this.thumb[this.params.axis] = this.maxthumb;
            }
            this.scrollbar.ratio = this.params.sizethumb == 'auto' ? (this.content[this.params.axis] / this.track[this.params.axis]) : (this.content[this.params.axis] - this.viewport[this.params.axis]) / (this.track[this.params.axis] - this.thumb[this.params.axis]);
            if (this.scrollbar.ratio <= 1) {
                this.thumb.obj.hide();
            } else {
                this.thumb.obj.show();
            }
            this.iScroll = (sScroll == 'relative' && this.content.ratio <= 1) ? Math.min((this.content[this.params.axis] - this.viewport[this.params.axis]), Math.max(0, this.iScroll)) : 0;
            this.iScroll = (sScroll == 'bottom' && this.content.ratio <= 1) ? (this.content[this.params.axis] - this.viewport[this.params.axis]) : isNaN(parseInt(sScroll)) ? this.iScroll : parseInt(sScroll);
            this.setSize();
        },
        setSize: function() {
            this.thumb.obj.css(this.direction, parseInt(this.iScroll / this.scrollbar.ratio) + "px");
            this.content.obj.css(this.direction, parseInt(-this.iScroll) + "px");
            this.iMouse['start'] = this.thumb.obj.offset()[this.direction];
            var sCssize = this.size.toLowerCase();
            this.viewport.obj.css(sCssize, this.track[this.params.axis]);
            this.scrollbar.obj.css(sCssize, this.track[this.params.axis]);
            this.track.obj.css(sCssize, this.track[this.params.axis]);
            this.thumb.obj.css(sCssize, this.thumb[this.params.axis]);
        },
        start: function(e) {
            e.preventDefault();
            e.stopPropagation();
            this.iMouse.start = this.axis ? e.pageX : e.pageY;
            var thumbDir = parseInt(this.thumb.obj.css(this.direction));
            this.iPosition.start = thumbDir == 'auto' ? 0 : thumbDir;
            $(document).bind('mousemove', this.bindMethod(this.drag));
            $(document).bind("touchmove", this.bindMethod(this.onTouchMove));
            $(document).bind('mouseup', this.bindMethod(this.end));
            this.thumb.obj.bind('mouseup', this.bindMethod(this.end));
            this.thumb.obj.bind("touchend", this.bindMethod(this.onTouchEnd));
            $("body").css("user-select", "none");
            $("body").css("-webkit-user-select", "none");
            $("body").css("-moz-user-select", "none");
        },
        wheel: function(e) {
            if (!(this.content.ratio >= 1)) {
                var e = e || window.event;
                var iDelta = e.wheelDelta ? e.wheelDelta / 120 : -e.detail / 3;
                this.iScroll -= iDelta * this.params.wheel;
                this.iScroll = Math.min((this.content[this.params.axis] - this.viewport[this.params.axis]), Math.max(0, this.iScroll));
                this.thumb.obj.css(this.direction, parseInt(this.iScroll / this.scrollbar.ratio) + "px");
                this.content.obj.css(this.direction, parseInt(-this.iScroll) + "px");
                if (e && e.preventDefault && (this.content[this.params.axis] - this.viewport[this.params.axis]) != this.iScroll && this.iScroll > 0) {
                    e.preventDefault();
                    return false;
                }
            };
        },
        end: function(e) {
            if (e.preventDefault)
                e.preventDefault();
            $(document).unbind('mousemove', this.bindMethod(this.drag));
            $(document).unbind('mouseup', this.bindMethod(this.end));
            $(document).unbind("touchmove", this.bindMethod(this.onTouchMove));
            this.thumb.obj.unbind('mouseup', this.bindMethod(this.end));
            $("body").css("user-select", "text");
            $("body").css("-webkit-user-select", "auto");
            $("body").css("-moz-user-select", "text");
        },
        drag: function(e) {
            if (e.preventDefault)
                e.preventDefault();
            if (!(this.content.ratio >= 1)) {
                this.iPosition.now = Math.min((this.track[this.params.axis] - this.thumb[this.params.axis]), Math.max(0, (this.iPosition.start + ((this.axis ? e.pageX : e.pageY) - this.iMouse.start))));
                this.iScroll = this.iPosition.now * this.scrollbar.ratio;
                this.content.obj.css(this.direction, -this.iScroll);
                this.thumb.obj.css(this.direction, this.iPosition.now);
            }
        },
        scrollTo: function(element, callback) {
            this.iScroll = Math.min((this.content[this.params.axis] - this.viewport[this.params.axis]), Math.max(0, element.position().top));
            var object = {};
            this.iScroll = this.iScroll <= 0 ? 0 : this.iScroll;
            object[this.direction] = (this.iScroll / this.scrollbar.ratio);
            this.thumb.obj.animate(object);
            var new_obj = {};
            new_obj[this.direction] = (-this.iScroll);
            this.content.obj.animate(new_obj, callback);
        },
        removeScrollable: function() {
            this.holder.find('.scrollbar').remove();
            this.thumb.obj.unbind('mousedown', this.bindMethod(this.start));
            this.thumb.obj.unbind("touchstart", this.bindMethod(this.onTouchStart));
            this.track.obj.unbind("click", this.bindMethod(this.onTrackClick));
            this.viewport.obj.unbind("touchstart", this.bindMethod(this.onViewportTouch));
            this.holder.css(this.size.toLowerCase(), "auto");
            this.viewport.obj.css(this.size.toLowerCase(), "auto");
            this.content.obj.css(this.direction, "0px");
            this.track.obj.unbind('mouseup', this.bindMethod(this.drag));
            if (this.params.scroll && this.holder[0].removeEventListener) {
                this.holder[0].removeEventListener('DOMMouseScroll', this.bindMethod(this.wheel), false);
                this.holder[0].removeEventListener('mousewheel', this.bindMethod(this.wheel), false);
            } else if (this.params.scroll) {
                this.holder[0].onmousewheel = null;
            }
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.Carousel = Turbulent.Object.extend({
        init: function(params) {
            this._super();
            $this = this;
            this.initMembers(params);
            this.bindTrigger();
        },
        initMembers: function(params) {
            holder = $(params.holder);
            this.holder = holder;
            this.moving = false;
            this.params = params;
            this.vert = params.vertical ? true : false;
            this.width = this.vert ? this.getHolderChildren().first().outerHeight(true) : this.getHolderChildren().first().outerWidth(true);
            this.length = this.getHolderChildren().length;
            this.pagerContainer = params.pagerContainer;
            if (params.afterNext)
                this.afterNext = params.afterNext;
            if (params.afterPrev)
                this.afterPrev = params.afterPrev;
            this.moveBy = this.params.moveBy ? this.params.moveBy : 1;
            this.params.initialOffset = this.params.initialOffset ? this.params.initialOffset : 0;
            this.params.displayItems = this.params.displayItems ? this.params.displayItems : 1;
            this.displayItemsWidth = this.params.displayItems * this.width;
            this.displayItems = this.params.displayItems;
            this.easing = this.params.easing ? this.params.easing : "swing";
            this.speed = this.params.speed ? this.params.speed : 500;
            this.delay = this.params.delay ? this.params.delay : 0;
            this.lockMoving = false;
            this.elementClassOn = params.elementClassOn ? params.elementClassOn : 'on';
            this.pagerClassOn = params.pagerClassOn ? params.pagerClassOn : 'on';
            if (this.params.circular && this.length > this.displayItems) {
                var number_of_items = this.displayItems > this.moveBy ? this.displayItems : this.moveBy;
                var firstItems = this.getHolderChildren(":lt(" + number_of_items + ")").clone();
                firstItems.find("*").removeAttr("id");
                var lastItems = this.getHolderChildren(":gt(" + (this.length - number_of_items - 1) + ")").clone();
                lastItems.find("*").removeAttr("id");
                this.circular_jump = firstItems.length;
                firstItems.removeClass(this.elementClassOn).addClass("copy");
                lastItems.removeClass(this.elementClassOn).addClass("copy");
                this.holder.append(firstItems);
                this.holder.prepend(lastItems);
            }
            this.resetWidth();
            if (this.getHolderChildren("." + this.elementClassOn).length == 1) {
                this.index = this.getHolderChildren("." + this.elementClassOn).index() - this.params.initialOffset;
                if (this.vert) {
                    this.holder.css({
                        top: (-this.width * this.index)
                    });
                } else {
                    this.holder.css({
                        left: (-this.width * this.index)
                    });
                }
            } else {
                this.index = (this.params.circular && this.length > this.displayItems) ? this.displayItems : 0;
                this.getHolderChildren().eq(this.index).addClass(this.elementClassOn);
                if (this.vert) {
                    this.holder.css({
                        top: (-this.width * this.index)
                    });
                } else {
                    this.holder.css({
                        left: (-this.width * this.index)
                    });
                }
            }
            if (this.length <= this.displayItems && this.params.pagerContainer)
                this.params.pagerContainer.addClass("off");
            this.checkArrows();
        },
        bindTrigger: function() {
            if (this.params.timeout && this.length > this.displayItems) {
                window.clearTimeout(this.timer);
                this.timer = setTimeout(this.bindMethod(this.moveToNext), this.params.timeout);
            }
            if (this.params.firstButton) {
                $(this.params.firstButton).bind('click', this.bindMethod(this.onFirstBtnClick));
            }
            if (this.params.lastButton) {
                $(this.params.lastButton).bind('click', this.bindMethod(this.onLastBtnClick));
            }
            if (this.beforeNextBtnClick) {
                $(this.params.nextButton).bind('click', this.bindMethod(this.beforeNextBtnClick));
            } else if (this.params.nextButton) {
                $(this.params.nextButton).bind('click', this.bindMethod(this.onNextBtnClick));
            }
            if (this.beforePrevBtnClick) {
                $(this.params.prevButton).bind('click', this.bindMethod(this.beforePrevBtnClick));
            } else if (this.params.prevButton) {
                $(this.params.prevButton).bind('click', this.bindMethod(this.onPrevBtnClick));
            }
            if (this.params.pagerContainer && this.beforePageClick) {
                this.getPagerChildren().bind('click', this.bindMethod(this.beforePageClick));
            } else if (this.params.pagerContainer) {
                this.getPagerChildren().bind('click', this.bindMethod(this.pagerContainerClick));
            }
        },
        resetWidth: function() {
            this.length = this.getHolderChildren().length;
            if (this.vert) {
                var heighttotal = 0;
                jQuery.each(this.getHolderChildren(), function(i, child) {
                    heighttotal += $(child).outerHeight(true);
                });
                this.holder.height(heighttotal);
            } else {
                var widthtotal = 0;
                jQuery.each(this.getHolderChildren(), function(i, child) {
                    widthtotal += $(child).outerWidth(true);
                });
                this.holder.width(widthtotal);
            }
            if (this.params.circular)
                this.length -= this.displayItems * 2;
        },
        onFirstBtnClick: function(e) {
            e.preventDefault();
            this.index = 0;
            if (this.params.circular) {
                this.index += this.displayItems;
            }
            this.moveCarousel(0);
        },
        onLastBtnClick: function(e) {
            e.preventDefault();
            this.index = this.length * -this.displayItems;
            this.moveCarousel((-this.width * this.index) + this.displayItemsWidth);
        },
        checkNext: function() {
            if (this.afterNext)
                this.afterNext();
        },
        checkPrev: function() {
            if (this.afterPrev)
                this.afterPrev();
        },
        onNextBtnClick: function(e) {
            e.preventDefault();
            this.moveToNext();
        },
        moveToNext: function() {
            if (this.hasNext() && !this.moving) {
                var moveBy = this.moveBy;
                this.index += moveBy;
                this.moveCarousel(this.width * moveBy, {
                    clbk: this.bindMethod(this.checkNext)
                });
            }
        },
        onPrevBtnClick: function(e) {
            e.preventDefault();
            this.moveToPrev();
        },
        moveToPrev: function() {
            if (this.hasPrev() && !this.moving) {
                var moveBy = this.moveBy;
                if (this.moveBy - this.index > 0 && !this.params.circular)
                    moveBy = this.index;
                this.index -= moveBy;
                this.moveCarousel(this.width * -moveBy, {
                    clbk: this.bindMethod(this.checkPrev)
                });
            }
        },
        pagerContainerClick: function(e) {
            e.preventDefault();
            $(e.currentTarget).siblings("." + this.pagerClassOn).removeClass(this.pagerClassOn);
            if (!this.moving) {
                if ($(e.currentTarget).attr("rel")) {
                    this.index = $(e.currentTarget).attr("rel")
                } else {
                    this.index = $(e.currentTarget).index();
                }
                if (this.params.circular) {
                    this.index += this.displayItems;
                }
                this.moveCarouselTo(this.displayItemsWidth * this.index * -1);
            }
        },
        checkArrows: function() {
            if (!this.params.circular || this.length <= this.displayItems) {
                if (this.params.prevButton) {
                    if (this.index == 0) {
                        $(this.params.prevButton).addClass('off');
                    } else {
                        $(this.params.prevButton).removeClass('off');
                    }
                }
                if (this.params.nextButton) {
                    if (this.index + this.displayItems >= this.length) {
                        $(this.params.nextButton).addClass('off');
                    } else {
                        $(this.params.nextButton).removeClass('off');
                    }
                }
            } else {
                if (this.length > 1) {
                    if (this.index < this.circular_jump) {
                        this.index = this.index + this.getHolderChildren(":not(.copy)").length;
                    }
                    if (this.index >= this.getHolderChildren().length - this.circular_jump) {
                        this.index = this.circular_jump;
                    }
                    this.holder.css((this.vert ? "top" : "left"), -(this.index * this.width));
                } else {
                    $(this.params.prevButton).addClass('off');
                    $(this.params.nextButton).addClass('off');
                }
            }
            this.resetCurrentCarouselState();
            this.resetPagerState();
        },
        resetCurrentCarouselState: function() {
            this.getHolderChildren("." + this.elementClassOn).removeClass(this.elementClassOn);
            this.getHolderChildren().eq(this.index).addClass(this.elementClassOn);
        },
        resetPagerState: function() {
            if (this.params.pagerContainer) {
                this.getPagerChildren().removeClass(this.pagerClassOn);
                this.getPagerChildren().eq(this.index).addClass(this.pagerClassOn);
            }
        },
        hasPrev: function() {
            return (this.index > 0 || (this.params.circular && !$(this.params.prevButton).hasClass('off')));
        },
        hasNext: function() {
            return (this.index + this.displayItems < this.length || (this.params.circular && !$(this.params.nextButton).hasClass('off')));
        },
        pause: function() {
            window.clearTimeout(this.timer);
        },
        play: function() {
            window.clearTimeout(this.timer);
            this.timer = window.setTimeout(this.bindMethod(this.moveToNext), this.params.timeout);
        },
        moveCarousel: function(position, options) {
            var speed = 500;
            if (this.lockMoving)
                return;
            if (options && options.speed)
                speed = options.speed;
            else if (this.speed)
                speed = this.speed;
            var direction = this.vert ? "top" : "left";
            var whatToAnimate = {};
            whatToAnimate[direction] = '-=' + position + 'px';
            if (this.moving == false) {
                var that = this;
                this.moving = true;
                this.holder.delay(this.delay).animate(whatToAnimate, speed, that.easing, function() {
                    that.moving = false;
                    that.checkArrows();
                    if (options && options.clbk) {
                        options.clbk();
                    }
                });
                if (this.params.timeout) {
                    clearTimeout(this.timer);
                    this.timer = setTimeout(this.bindMethod(this.moveToNext), this.params.timeout);
                }
            }
        },
        moveCarouselTo: function(position, options) {
            var speed = 500;
            if (options && options.speed)
                speed = options.speed;
            else if (this.speed)
                speed = this.speed;
            var direction = this.vert ? "top" : "left";
            var whatToAnimate = {};
            whatToAnimate[direction] = position + 'px';
            if (this.moving == false) {
                var that = this;
                this.moving = true;
                this.holder.delay(this.delay).animate(whatToAnimate, speed, that.easing, function() {
                    that.moving = false;
                    that.checkArrows();
                    if (options && options.clbk) {
                        options.clbk();
                    }
                });
                if (this.params.timeout) {
                    clearTimeout(this.timer);
                    this.timer = setTimeout(this.bindMethod(this.moveToNext), this.params.timeout);
                }
            }
        },
        getHolderChildren: function(selector) {
            var children = this.holder.children();
            if (this.params.itemClass)
                children = this.holder.find(this.params.itemClass);
            if (selector)
                children = children.filter(selector);
            return children;
        },
        getPagerChildren: function(selector) {
            var children = this.pagerContainer.children();
            if (this.params.pagerItemClass)
                children = this.pagerContainer.find(this.params.pagerItemClass);
            if (selector)
                children = children.filter(selector);
            return children;
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.History = Turbulent.Object.extend({
        init: function(params) {
            this._super();
            this.initMembers(params);
            this.bindControls();
        },
        initMembers: function(params) {
            this.excludeClasses = params.excludeClasses ? params.excludeClasses : ".no-history";
        },
        bindControls: function() {
            $('a').not(this.excludeClasses).bind("click", this.bindMethod(this.onLinkClick));
            $(window).bind("statechange", this.bindMethod(this.onStateChange));
        },
        onStateChange: function(e) {
            if (window._gaq) {
                _gaq.push(['_trackPageview']);
            }
            var State = History.getState()
            var url = State.url;
            if (!State.data.skip_ajax) {
                $("body").addClass("loading");
                $.ajax({
                    url: url,
                    data: {
                        history: true
                    },
                    dataType: "json",
                    type: "post",
                    success: this.stateChange_CB,
                    error: this.stateChangeError_CB
                });
            }
        },
        onLinkClick: function(e) {
            e.preventDefault();
            var url = $(e.currentTarget).attr('href');
            var title = $(e.currentTarget).attr('title') || null;
            window.History.pushState(null, title, url);
        },
        stateChange_CB: function(response) {
            $("body").removeClass("loading");
        },
        stateChangeError_CB: function(response) {
            $("body").removeClass("loading");
        }
    });
})(jQuery);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.DragAndDrop = Turbulent.Object.extend({
        init: function(params) {
            this.options = params;
            this._super();
            this.initMembers(params);
            this.bindControls();
        },
        initMembers: function(params) {
            this.list = $(params.list);
            delete params.list;
            var id = $(this.list).attr('id');
            this.dragproxy = ".dragProxy";
            this.dragplacement = ".dragPlacement";
            this.relativeTo = params.relativeTo ? params.relativeTo : false;
            this.target = params.target ? params.target : false;
            this.current_item = null;
            this.over_item = null;
            this.over_offset = null;
            this.current_offset = null;
            this.over_height = 0;
            this.over_width = 0;
            this.beforeOffset = params.beforeOffset || 5;
            this.childOffset = params.childOffset || 5;
            this.horizontal = params.horizontal;
            this.onDragCallback = params.onDragCallback;
            this.onDropCallback = params.onDropCallback;
        },
        bindControls: function() {
            this.unHookDownEvents();
        },
        hookDownEvents: function(e) {
            this.list.find(".js-remove").unbind('click', this.bindMethod(this.onRemoveItemDown));
            var li = $(this.list).find('li:not(.dragPlacement, .dragProxy)');
            li.bind('mouseup touchend', this.bindMethod(this.itemMouseUp));
            $(document).bind('mouseup touchend', this.bindMethod(this.documentMouseUp));
            li.bind('mousemove touchmove', this.bindMethod(this.updateDragPlacement));
            $(document).bind('mousemove touchmove', this.bindMethod(this.updateDragProxy));
            if (this.target) {
                li = this.list.find(this.target);
            }
            li.unbind('mousedown touchstart', this.bindMethod(this.itemMouseDown));
        },
        unHookDownEvents: function(e) {
            this.list.find(".js-remove").bind('click', this.bindMethod(this.onRemoveItemDown));
            var li = $(this.list).find('li:not(.dragPlacement, .dragProxy)');
            li.unbind('mouseup touchend', this.bindMethod(this.itemMouseUp));
            $(document).unbind('mouseup touchend', this.bindMethod(this.documentMouseUp));
            li.unbind('mousemove touchmove', this.bindMethod(this.updateDragPlacement));
            $(document).unbind('mousemove touchmove', this.bindMethod(this.updateDragProxy));
            if (this.target) {
                li = this.list.find(this.target);
            }
            li.bind('mousedown touchstart', this.bindMethod(this.itemMouseDown));
        },
        onRemoveItemDown: function(e) {
            e.preventDefault();
            e.stopPropagation();
            $(e.currentTarget).closest("li").remove();
            if (this.options.onRemoveItemCallback) this.options.onRemoveItemCallback($(e.currentTarget));
        },
        listMouseOver: function(list) {
            if (this.current_item && list.find(".dragPlacement:visible").length == 0) {
                $(".dragPlacement").remove();
                this.createDragPlacement();
                list.find(".dragPlacement").show();
            }
        },
        itemMouseDown: function(e) {
            if ($(e.target).hasClass("js-remove")) return;
            e.stopPropagation();
            e.preventDefault();
            $("body").css("cursor", "move");
            if (this.target) {
                var item = $(e.currentTarget).closest('li');
            } else {
                var item = $(e.currentTarget);
            }
            this.current_item = item;
            this.current_list = $(item).closest("ul");
            this.createDragProxy();
            this.createDragPlacement();
            $(this.current_item).children().clone().appendTo(".dragProxy");
            this.current_offset = $(this.current_item).offset();
            $(this.current_item).hide();
            this.updateDragProxy(e);
            $(".dragProxy").show();
            this.hookDownEvents();
            if (typeof(this.onDragCallback) == 'function') {
                this.onDragCallback(this.current_item);
            }
        },
        itemMouseUp: function(event) {
            $("body").css("cursor", "default");
            if ($(".dragPlacement").is(':visible')) {
                $(this.current_item).insertBefore(".dragPlacement:visible");
            }
            $(this.current_item).show();
            $(".dragProxy").remove();
            $(".dragPlacement").remove();
            this.onDropped();
            $(this.list).find("ul:empty").remove();
            this.unHookDownEvents();
            if (typeof(this.onDropCallback) == 'function') {
                this.onDropCallback(this.current_item);
            }
            this.current_item = null;
        },
        itemMouseOver: function(item) {
            this.over_offset = $(item).offset();
            this.over_height = $(item).outerHeight();
            this.over_width = $(item).outerWidth();
            this.over_item = item;
        },
        documentMouseUp: function(event) {
            event.preventDefault();
            this.itemMouseUp(event);
        },
        resetDragProxy: function(e) {
            $(".dragProxy").animate({
                top: this.current_offset.top,
                left: this.current_offset.left
            }, 300, function() {
                $(".dragProxy").hide();
                $(".dragPlacement").hide();
            });
        },
        updateDragProxy: function(event) {
            this.latestX = event.pageX;
            this.latestY = event.pageY;
            var relativeToX = $(this.relativeTo).length > 0 ? $(this.relativeTo).offset().left : 0;
            var relativeToY = $(this.relativeTo).length > 0 ? $(this.relativeTo).offset().top : 0;
            if (event.type == "touchmove" || event.type == "touchstart") {
                this.latestX = event.originalEvent.targetTouches[0].pageX;
                this.latestY = event.originalEvent.targetTouches[0].pageY;
            }
            $(".dragProxy").css({
                position: 'absolute',
                top: this.latestY - relativeToY,
                left: this.latestX - relativeToX
            });
            var $this = this;
            $(this.list).find('li:not(.dragPlacement, .dragProxy)').each(function() {
                if ($this.latestY > ($(this).offset().top) && $this.latestY < ($(this).offset().top) + $(this).outerHeight() && $this.latestX > ($(this).offset().left) && $this.latestX < ($(this).offset().left) + $(this).outerWidth()) {
                    $this.itemMouseOver($(this));
                }
            });
            $(this.list).each(function() {
                if ($this.latestY > ($(this).offset().top) && $this.latestY < ($(this).offset().top) + $(this).outerHeight() && $this.latestX > ($(this).offset().left) && $this.latestX < ($(this).offset().left) + $(this).outerWidth()) {
                    $this.listMouseOver($(this));
                }
            });
        },
        updateDragPlacement: function(event) {
            this.latestX = event.pageX;
            this.latestY = event.pageY;
            if (event.type == "touchmove") {
                this.latestX = event.originalEvent.targetTouches[0].pageX;
                this.latestY = event.originalEvent.targetTouches[0].pageY;
            }
            if (this.over_item && $(".dragPlacement").length > 0) {
                $(".dragPlacement").hide();
                if (this.horizontal) {
                    if (this.latestY >= this.over_offset.top && this.latestY < (this.over_offset.top + (this.over_height)) && this.latestX >= this.over_offset.left && this.latestX < (this.over_offset.left + (this.over_width / 2))) {
                        $(this.over_item).siblings(".dragPlacement").insertBefore($(this.over_item));
                        $(this.over_item).siblings(".dragPlacement").show();
                    } else if (this.latestY >= this.over_offset.top && this.latestY < (this.over_offset.top + (this.over_height)) && this.latestX >= this.over_offset.left + (this.over_width / 2) && this.latestX < (this.over_offset.left + (this.over_width))) {
                        $(this.over_item).siblings(".dragPlacement").insertAfter($(this.over_item));
                        $(this.over_item).siblings(".dragPlacement").show();
                    }
                } else {
                    if (this.latestY >= this.over_offset.top && this.latestY < (this.over_offset.top + (this.over_height / 2))) {
                        $(this.over_item).siblings(".dragPlacement").insertBefore($(this.over_item));
                        $(this.over_item).siblings(".dragPlacement").show();
                    } else if (this.latestY > (this.over_offset.top + (this.over_height / 2)) && this.latestY <= (this.over_offset.top + this.over_height)) {
                        $(this.over_item).siblings(".dragPlacement").insertAfter($(this.over_item));
                        $(this.over_item).siblings(".dragPlacement").show();
                    }
                }
            }
        },
        createDragProxy: function(e) {
            if ($(".dragProxy").length == 0) {
                $(this.list).append('<li class="dragProxy"></li>');
                $(".dragProxy").hide();
            }
        },
        createDragPlacement: function(e) {
            if ($(".dragPlacement").length == 0) {
                $(this.list).append('<li class="dragPlacement"></li>');
                $(".dragPlacement").css({
                    width: $(this.current_item).width()
                });
                $(".dragPlacement").hide();
            }
        },
        onDropped: function() {}
    });
})($);;
(function($) {
    Turbulent = window.Turbulent || {};
    Turbulent.CommentManager = Turbulent.Object.extend({
        page: 1,
        page_size: 25,
        load_more_event: "none",
        insertion_method: "append",
        append: true,
        subject_type: "HeapAtom",
        api_function_names: {
            "add": "add",
            "edit": "edit",
            "delete": "delete",
            "vote": "vote",
            "flag": "flag",
            "load": "load",
            "sort": "sort"
        },
        texts: {
            "edit": {
                "cancel": "",
                "submit": ""
            },
            "reply": {
                "cancel": "",
                "submit": ""
            }
        },
        "insertion_conf": {
            "mode": "jsmart",
            "template_id": "tpl_comment"
        },
        init: function(params) {
            this._super(params);
            this.initMembers(params);
            this.bindTargets();
        },
        initMembers: function(params) {
            this.comment_listing_el = params.comment_listing_el;
            this.comment_submission_form_el = params.comment_submission_form_el;
            this.api_object = params.api_object;
            this.page = params.page ? params.page : this.page;
            this.page_size = params.page_size ? params.page_size : this.page_size;
            this.append = params.append === 'undefined' ? this.append : params.append;
            this.lazyLoading = params.lazyLoading ? params.lazyLoading : this.lazyLoading;
            this.subject_id = params.subject_id ? params.subject_id : this.subject_id;
            this.subject_type = params.subject_type ? params.subject_type : this.subject_type;
            if (params.api_function_names) {
                var this_comment_manager = this;
                $.each(params.api_function_names, function(key, function_name) {
                    this_comment_manager.api_function_names[key] = function_name;
                });
            }
            if (params.texts) {
                var this_comment_manager = this;
                $.each(params.texts, function(key, text) {
                    this_comment_manager.texts[key] = text;
                });
            }
            if (params.insertion_conf) {
                var this_comment_manager = this;
                $.each(params.insertion_conf, function(key, config) {
                    this_comment_manager.insertion_conf[key] = config;
                });
            }
        },
        bindTargets: function() {
            this.comment_listing_el.on("click", ".js-delete", this.bindMethod(this.onDeleteClick));
            this.comment_listing_el.on("click", ".js-delete-cancel", this.bindMethod(this.onDeleteCancelClick));
            this.comment_listing_el.on("click", ".js-delete-confirm", this.bindMethod(this.onDeleteConfirmClick));
            this.comment_listing_el.on("click", ".js-edit", this.bindMethod(this.onEditClick));
            this.comment_listing_el.on("submit", ".js-edit-form", this.bindMethod(this.onEditFormSubmit));
            this.comment_listing_el.on("click", ".js-edit-form .js-cancel", this.bindMethod(this.onEditFormCancel));
            this.comment_listing_el.on("click", ".js-reply", this.bindMethod(this.onReplyClick));
            this.comment_listing_el.on("submit", ".js-reply-form", this.bindMethod(this.onReplyFormSubmit));
            this.comment_listing_el.on("click", ".js-reply-form .js-cancel", this.bindMethod(this.onReplyFormCancel));
            this.comment_listing_el.on("click", ".js-vote", this.bindMethod(this.onVoteClick));
            this.comment_listing_el.on("click", ".js-flag", this.bindMethod(this.onFlagClick));
            this.comment_listing_el.on("change", ".js-filters", this.bindMethod(this.onFilterChange));
            $(".js-comment-form").bind('submit', this.bindMethod(this.onCommentSubmit));
            if (this.lazyLoading)
                $(window).bind("scroll", this.bindMethod(this.onPageScroll));
        },
        onPageScroll: function(e) {
            if (this.scroll_lock_activated) return;
            this.scroll_lock_activated = true;
            if (!this.checkToLoadComments()) {
                setTimeout(this.bindMethod(this.unlockScrollLock), 20);
            } else {
                this.loadComments();
            }
        },
        onDeleteClick: function(e) {
            e.preventDefault();
            var comment = this.getComment(e.currentTarget);
            if ($(e.currentTarget).hasClass("on")) {
                this.hideCommentDeleteConfirm(comment);
            } else {
                this.showCommentDeleteConfirm(comment);
            }
        },
        onDeleteCancelClick: function(e) {
            e.preventDefault();
            var comment = this.getComment(e.currentTarget);
            this.hideCommentDeleteConfirm(comment);
        },
        onDeleteConfirmClick: function(e) {
            e.preventDefault();
            var params = {
                reaction_id: this.getCommentID(e.currentTarget)
            }
            this.current_comment = this.getComment(e.currentTarget);
            this.current_comment.addClass("loading");
            this.api_object[this.api_function_names['delete']](this.bindMethod(this.onCommentDelete_CB), params);
        },
        onEditClick: function(e) {
            e.preventDefault();
            if ($(e.currentTarget).hasClass("on"))
                this.removeEditForm(this.getComment(e.currentTarget));
            else
                this.showEditForm(this.getComment(e.currentTarget));
        },
        onEditFormSubmit: function(e) {
            e.preventDefault();
            this.current_comment = this.getComment(e.currentTarget);
            if (!this.current_comment.find(".js-edit-container").hasClass("lock")) {
                this.current_comment.find(".js-edit-container").addClass("lock");
                var form = new Turbulent.Form({
                    'form_selector': $(e.currentTarget)
                });
                var params = form.getFormData();
                this.api_object[this.api_function_names['edit']](this.bindMethod(this.onEditForm_CB), params);
            }
        },
        onEditFormCancel: function(e) {
            e.preventDefault();
            this.removeEditForm(this.getComment(e.currentTarget));
        },
        onReplyClick: function(e) {
            e.preventDefault();
            if ($(e.currentTarget).hasClass("on"))
                this.removeReplyForm(this.getComment(e.currentTarget));
            else
                this.showReplyForm(this.getComment(e.currentTarget));
        },
        onReplyFormSubmit: function(e) {
            e.preventDefault();
            this.current_comment = this.getComment(e.currentTarget);
            if (!this.current_comment.find(".js-reply-container").hasClass("lock")) {
                this.current_comment.find(".js-reply-container").addClass("lock");
                this.current_comment.find(".js-submit").addClass('loading');
                var form = new Turbulent.Form({
                    'form_selector': $(e.currentTarget)
                });
                var params = form.getFormData();
                this.api_object[this.api_function_names['add']](this.bindMethod(this.onReplyForm_CB), params);
            }
        },
        onReplyFormCancel: function(e) {
            e.preventDefault();
            this.removeReplyForm(this.getComment(e.currentTarget));
        },
        onLoadMoreClick: function(e) {
            this.page++;
            this.replace = false;
            this.comment_listing_el.addClass("loading");
            var params = {};
            params.page = this.page;
            this.api_object[this.api_function_names['load']](this.bindMethod(this.onLoad_CB, this), params);
        },
        onFilterChange: function(e) {
            this.page = 1;
            this.replace = true;
            var form = new Turbulent.Form({
                'form_selector': $(e.currentTarget)
            });
            var params = form.getFormData();
            params.page = this.page;
            this.api_object[this.api_function_names['load']](this.bindMethod(this.onLoad_CB, this), params);
        },
        onFlagClick: function(e) {
            e.preventDefault();
            this.current_comment = this.getComment(e.currentTarget);
            this.current_comment.addClass("loading");
            var params = {
                comment_id: this.getCommentID(e.currentTarget)
            };
            this.api_object[this.api_function_names['flag']](this.bindMethod(this.onFlag_CB, this), params);
        },
        onVoteClick: function(e) {
            e.preventDefault();
            var params = {
                comment_id: this.getCommentID(e.currentTarget),
                vote: $(e.currentTarget).data("vote")
            };
            this.api_object[this.api_function_names['vote']](this.bindMethod(this.onCommentVote_CB, this), params);
        },
        onCommentSubmit: function(e) {
            e.preventDefault();
            if (!this.comment_submission_form_el.hasClass("lock")) {
                this.comment_submission_form_el.addClass("lock");
                this.comment_submission_form_el.find(".js-submit").addClass('loading');
                var form = new Turbulent.Form({
                    'form_selector': $(e.currentTarget)
                });
                var params = form.getFormData();
                this.api_object[this.api_function_names['add']](this.bindMethod(this.onSubmit_CB, this), params);
            }
        },
        onLoad_CB: function(response) {
            this.comment_listing_el.removeClass("loading");
            this.scroll_lock_activated = false;
            if (response.success) {
                if (jQuery.trim(response['data']).length < 5) {
                    this.no_results = true;
                } else {
                    this.insertComments(response['data']);
                    this.page++;
                }
            } else {
                console.log('Error :: Cannot load comments');
                this.no_results = true;
            }
        },
        onFlag_CB: function(response) {
            this.current_comment.removeClass("loading");
            if (response.success) {
                this.current_comment.removeClass("loading").addClass("flagged");
            }
        },
        onCommentVote_CB: function(response) {
            this.current_comment.removeClass("loading");
            if (response.success) {
                this.current_comment.removeClass("loading").addClass("voted");
            }
        },
        onCommentDelete_CB: function(response) {
            this.current_comment.removeClass("loading");
            if (response.success) {
                this.current_comment.slideUp(400, function() {
                    $(this).remove();
                });
            }
        },
        onEditForm_CB: function(response) {
            this.current_comment.find(".js-edit-container").removeClass("lock");
            if (response.success) {
                this.current_comment.find(".js-comment-body").first().html(this.nl2br(response['data']['body']));
                this.removeEditForm(this.current_comment);
            }
        },
        onSubmit_CB: function(response) {
            this.comment_submission_form_el.removeClass("lock");
            this.comment_submission_form_el.find(".js-submit").removeClass('loading');
            if (response.success) {
                if (this.insertion_conf.mode == "jsmart") {
                    var tplbody = $("#" + this.insertion_conf.template_id).html();
                    var tmpl = new jSmart(tplbody);
                    var rendered = tmpl.fetch({
                        "comment": response['data']
                    });
                } else {
                    rendered = response['data']['comment'];
                }
                if (this.append) {
                    this.comment_listing_el.append(rendered);
                    this.current_comment = this.comment_listing_el.children().last();
                } else {
                    this.comment_listing_el.prepend(rendered);
                    this.current_comment = this.comment_listing_el.children().first();
                }
                this.comment_submission_form_el.find(".js-success-message").fadeIn(500).delay(2500).fadeOut(500);
                this.comment_submission_form_el.find(".js-body").val("");
            } else {
                this.comment_submission_form_el.find(".js-error-message").html(response.msg).stop(true, true).fadeIn(500).delay(2500).fadeOut(500);
            }
        },
        onReplyForm_CB: function(response) {
            this.current_comment.find(".js-reply-container").removeClass("lock");
            this.current_comment.find(".js-submit").removeClass('loading');
            if (response.success) {
                if (this.insertion_conf.mode == "jsmart") {
                    var tplbody = $("#" + this.insertion_conf.template_id).html();
                    var tmpl = new jSmart(tplbody);
                    var rendered = tmpl.fetch({
                        "class": "reply",
                        "comment": response['data']
                    });
                } else {
                    rendered = response['data']['comment'];
                }
                this.current_comment.parent().append(rendered);
                var this_comment_manager = this;
                this.current_comment.find(".js-reply-form .js-success-message").fadeIn(500).delay(2500).fadeOut(500, function() {
                    this_comment_manager.removeReplyForm(this_comment_manager.current_comment);
                });
            } else {
                this.current_comment.find(".js-reply-form .js-error-message").html(response.msg).stop(true, true).fadeIn(500).delay(2500).fadeOut(500);
            }
        },
        unlockScrollLock: function() {
            this.scroll_lock_activated = false;
        },
        checkToLoadComments: function() {
            var scrollTop = parseInt($(window).scrollTop());
            if (this.no_results)
                return false;
            return (scrollTop + (parseInt($(window).height()) * 2) > (this.comment_listing_el.offset().top + this.comment_listing_el.height()));
        },
        loadComments: function() {
            var params = {
                id: this.subject_id,
                subject_type: subject_type,
                page: this.page,
                pagesize: this.pagesize
            };
            this.api_object[this.api_function_names['load']](this.bindMethod(this.onLoad_CB), params);
        },
        getComment: function(currentTarget) {
            return $(currentTarget).closest(".js-comment");
        },
        getCommentID: function(currentTarget) {
            return $(currentTarget).closest(".js-comment").data("id");
        },
        insertComments: function(comments) {
            var this_comment_manager = this;
            if (typeof comments === Array) {
                $.each(comments, function(i, comment) {
                    this_comment_manager.insertComment(comment);
                });
            } else {
                this_comment_manager.insertComment(comments);
            }
        },
        insertComment: function(comment) {
            this.comment_listing_el[this.insertion_method](comment);
        },
        showEditForm: function(comment) {
            comment.find(".js-edit").addClass("on");
            comment.find(".js-comment-body").first().fadeOut(300, function() {
                comment.find(".js-edit-container .js-body").height(comment.find(".js-comment-body").first().height());
                comment.find(".js-edit-container").first().fadeIn(300, function() {
                    $(this).find(".js-body").focus();
                });
            });
        },
        removeEditForm: function(comment) {
            comment.find(".js-edit").removeClass("on");
            comment.find(".js-edit-container").first().fadeOut(300, function() {
                comment.find(".js-comment-body").first().fadeIn(300);
            });
        },
        showReplyForm: function(comment) {
            comment.find(".js-reply").addClass("on");
            comment.find(".js-reply-container").slideDown(300, function() {
                $(this).find(".js-reply-container .js-body").focus();
            });
        },
        removeReplyForm: function(comment) {
            comment.find(".js-reply").removeClass("on");
            comment.find(".js-reply-container").slideUp(300, function() {
                comment.find(".js-reply-form").val("");
            });
        },
        showCommentDeleteConfirm: function(comment) {
            comment.find(".js-delete").first().addClass("on");
            comment.find(".js-delete-confirm-container").first().show();
        },
        hideCommentDeleteConfirm: function(comment) {
            comment.find(".js-delete").first().removeClass("on");
            comment.find(".js-delete-confirm-container").first().hide();
        },
        nl2br: function(str, is_xhtml) {
            var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br />' : '<br>';
            return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1' + breakTag + '$2');
        }
    });
})(jQuery);;
Ty = window.Ty || {};
Ty.View = window.Ty.View || {};
Ty.View.Store = Turbulent.Object.extend({
    showError: function(message, callback) {
        alert(message);
        callback && callback();
    },
    showProgress: function(message) {},
    hideProgress: function() {},
    init: function(params) {
        this._super(params);
        this.initMembers(params);
        this.storePrefix = params.store_prefix;
        this.clickLock = false;
    },
    initMembers: function(params) {
        var rootContainer = document;
        $(rootContainer).on("click", ".ty-js-currency-button", this.bindMethod(this.onChangeCurrencyClick, this));
        $(rootContainer).on("click", ".ty-js-checkout-cart", this.bindMethod(this.onCheckoutCartClick, this));
        $(rootContainer).on("click", ".ty-js-checkout-address", this.bindMethod(this.onCheckoutAddressClick, this));
        $(rootContainer).on("click", ".ty-js-checkout-extra", this.bindMethod(this.onCheckoutExtraClick, this));
        $(rootContainer).on("click", ".ty-js-coupon-button", this.bindMethod(this.onCouponChangeClick, this));
        $(rootContainer).on("click", ".ty-js-credits-button", this.bindMethod(this.onCreditSetClick, this));
        $(rootContainer).on("click", ".ty-js-method-button", this.bindMethod(this.onPaymentMethodClick, this));
        $(rootContainer).on("click", ".ty-js-complete-button", this.bindMethod(this.onCheckoutClick, this));
        $(rootContainer).on("click", ".ty-js-add-to-cart", this.bindMethod(this.onAddToCartClick, this));
        $(rootContainer).on("click", ".ty-js-cart-remove", this.bindMethod(this.onCartRemoveItemClick, this));
        $(rootContainer).on("click", ".ty-js-cart-update", this.bindMethod(this.onCartUpdateClick, this));
        $(rootContainer).on("click", ".ty-js-cart-clear", this.bindMethod(this.onCartClearClick, this));
        $(rootContainer).on("click", ".ty-js-cart-back", this.bindMethod(this.onCartBackClick, this));
    },
    onChangeCurrencyClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        var currency = $('.ty-js-currency-selector').first().val();
        Ty.Api.Store.setCurrency(this.bindMethod(this.onCurrencyChange, this), {
            'currency': currency
        });
        return false;
    },
    onCurrencyChange: function(result) {
        if (result.success) this.reloadPage();
        else {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onCreditSetClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        var credit = $('.ty-js-credits').val();
        Ty.Api.Store.setCredit(this.bindMethod(this.onCreditSet, this), {
            'credit': credit
        });
        return false;
    },
    onCreditSet: function(result) {
        if (!result.success) {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        } else {
            this.reloadPage();
        }
    },
    onCouponChangeClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        var coupon = $('.ty-js-coupon-code').val();
        Ty.Api.Store.setCoupon(this.bindMethod(this.onCouponChange, this), {
            'coupon': coupon
        });
        return false;
    },
    onCouponChange: function(result) {
        if (!result.success) {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        } else {
            this.reloadPage();
        }
    },
    onCheckoutCartClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        Ty.Api.Store.validateCart(this.bindMethod(this.onCheckoutCart, this));
    },
    onCheckoutCart: function(result) {
        if (result.success) {
            document.location.href = this.storePrefix + '/checkout/address';
        } else {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onCheckoutAddressClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        this.formProcessor = new Turbulent.Form({
            'form_selector': $('#ty-js-form-checkout')
        });
        Ty.Api.Store.setCustomerInfo(this.bindMethod(this.onCheckoutAddress, this), this.formProcessor.getFormData());
    },
    onCheckoutAddress: function(result) {
        if (result.success) {
            document.location.href = this.storePrefix + '/checkout/extra';
        } else {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onCheckoutExtraClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        this.formProcessor = new Turbulent.Form({
            'form_selector': $('#ty-js-form-checkout')
        });
        Ty.Api.Store.setOrderExtra(this.bindMethod(this.onCheckoutExtra, this), this.formProcessor.getFormData());
    },
    onCheckoutExtra: function(result) {
        if (result.success) {
            document.location.href = this.storePrefix + '/checkout/pay';
        } else {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                var parts = attr.split('.');
                if (parts.length == 2) {
                    err += '<strong>' + parts[0] + '</strong><br />' + parts[1] + ": " + props[attr] + "<br />";
                } else err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onPaymentMethodClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        this.showProgress('Placing order...');
        var method = $('.ty-js-payment-method').val();
        Ty.Api.Store.setPaymentMethod(this.bindMethod(this.onPaymentMethod, this), {
            'payment_method': method
        });
    },
    onPaymentMethod: function(result) {
        if (result.success) {
            var $form = $('#ty-js-form-checkout');
            var params = $form.length > 0 ? (new Turbulent.Form({
                'form_selector': $form
            })).getFormData() : {};
            Ty.Api.Store.checkout(this.bindMethod(this.onCheckout, this), params);
        } else {
            this.clickLock = false;
            this.hideProgress();
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onCheckoutClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        this.showProgress('Placing order...');
        var $form = $('#ty-js-form-checkout');
        var params = $form.length > 0 ? (new Turbulent.Form({
            'form_selector': $form
        })).getFormData() : {};
        Ty.Api.Store.checkout(this.bindMethod(this.onCheckout, this), params);
    },
    onCheckout: function(result) {
        if (result.success) {
            if (result.data.native_total.amount > 0) document.location.href = '/store/checkout/confirm/' + result.data.slug;
            else document.location.href = '/store/checkout/success/' + result.data.slug;
        } else {
            this.clickLock = false;
            this.hideProgress();
            var err = '';
            if (result.data instanceof Object) {
                var props = (result.data && result.data.properties ? result.data.properties : result.data);
                for (var attr in props) {
                    err += attr + ": " + props[attr] + "<br>";
                }
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onAddToCartClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        this.noRedirect = false;
        if ($(e.currentTarget).data('redirect') == false)
            this.noRedirect = true;
        var sku_id = $(e.currentTarget).data("sku");
        var skus = {};
        skus[sku_id] = 1;
        Ty.Api.Store.addToCart(this.bindMethod(this.onAddToCart, this), {
            'skus': skus
        });
        return false;
    },
    onAddToCart: function(result) {
        if (result.success) {
            if (this.noRedirect) {
                document.location.reload();
            } else {
                document.location.href = this.storePrefix + '/cart';
            }
        } else {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onCartBackClick: function(e) {
        window.history.go(-1);
        e.stopPropagation();
        e.preventDefault();
        return false;
    },
    onCartClearClick: function(e) {
        e.stopPropagation();
        e.preventDefault();
        if (this.clickLock) return false;
        this.clickLock = true;
        Ty.Api.Store.clearCart(this.bindMethod(this.onCartClear, this));
        return false;
    },
    onCartClear: function(result) {
        this.reloadPage();
    },
    onCartUpdateClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        var cart = {};
        var rows = $(".ty-js-cart-item");
        for (var i = 0; i < rows.length; i++) {
            var sku_id = $(rows[i]).data("sku");
            var quantity = $(rows[i]).find('.ty-js-cart-quantity').first().val();
            cart[sku_id] = quantity;
        }
        Ty.Api.Store.updateCart(this.bindMethod(this.onCartUpdate, this), {
            'skus': cart
        });
        return false;
    },
    onCartUpdate: function(result) {
        if (result.success) this.reloadPage();
        else {
            this.clickLock = false;
            var err = '';
            var props = (result.data && result.data.properties ? result.data.properties : result.data);
            for (var attr in props) {
                err += attr + ": " + props[attr] + "<br>";
            }
            this.showError(err != '' ? err : result.msg);
        }
    },
    onCartRemoveItemClick: function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (this.clickLock) return false;
        this.clickLock = true;
        var sku_id = $(e.currentTarget).parents('.ty-js-cart-item').first().data("sku");
        Ty.Api.Store.removeFromCart(this.bindMethod(this.onCartRemove, this), {
            'sku': sku_id
        });
        return false;
    },
    onCartRemove: function(result) {
        this.reloadPage();
    },
    reloadPage: function() {
        document.location.reload();
    }
});